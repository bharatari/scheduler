window.EmberENV={FEATURES:{}};var runningTests=!1,define,requireModule,require,requirejs;!function(){function e(e,n,i){for(var r,s,o=e.length,a=new Array(o),l=0,u=o;u>l;l++)r=e[l],"exports"===r?s=a[l]=i:a[l]=require(t(r,n));return{deps:a,exports:s}}function t(e,t){if("."!==e.charAt(0))return e;var n,i=e.split("/"),r=t.split("/");n=1===r.length?r:r.slice(0,-1);for(var s=0,o=i.length;o>s;s++){var a=i[s];if(".."===a)n.pop();else{if("."===a)continue;n.push(a)}}return n.join("/")}var n;n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var i={},r={},s={},o=!1;define=function(e,t,r){n(t)||(r=t,t=[]),i[e]={deps:t,callback:r}},requirejs=require=requireModule=function(t){if(s[t]!==o&&r.hasOwnProperty(t))return r[t];if(!i[t])throw new Error("Could not find module "+t);var n,a,l=i[t],u=!1;r[t]={};try{n=e(l.deps,t,r[t]),a=l.callback.apply(this,n.deps),u=!0}finally{u||(s[t]=o)}return n.exports?r[t]:r[t]=a},requirejs.entries=requirejs._eak_seen=i,requirejs.clear=function(){requirejs.entries=requirejs._eak_seen=i={},r=s={}}}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=rt.type(e);return"function"===n||rt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(rt.isFunction(t))return rt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return rt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(dt.test(t))return rt.filter(t,e,n);t=rt.filter(t,e)}return rt.grep(e,function(e){return rt.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=bt[e]={};return rt.each(e.match(yt)||[],function(e,n){t[n]=!0}),t}function o(){mt.addEventListener?(mt.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(mt.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(mt.addEventListener||"load"===event.type||"complete"===mt.readyState)&&(o(),rt.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(It,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:St.test(n)?rt.parseJSON(n):n}catch(r){}rt.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!rt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,i){if(rt.acceptData(e)){var r,s,o=rt.expando,a=e.nodeType,l=a?rt.cache:e,u=a?e[o]:e[o]&&o;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=a?e[o]=G.pop()||rt.guid++:o),l[u]||(l[u]=a?{}:{toJSON:rt.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[u]=rt.extend(l[u],t):l[u].data=rt.extend(l[u].data,t)),s=l[u],i||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[rt.camelCase(t)]=n),"string"==typeof t?(r=s[t],null==r&&(r=s[rt.camelCase(t)])):r=s,r}}function h(e,t,n){if(rt.acceptData(e)){var i,r,s=e.nodeType,o=s?rt.cache:e,a=s?e[rt.expando]:rt.expando;if(o[a]){if(t&&(i=n?o[a]:o[a].data)){rt.isArray(t)?t=t.concat(rt.map(t,rt.camelCase)):t in i?t=[t]:(t=rt.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!u(i):!rt.isEmptyObject(i))return}(n||(delete o[a].data,u(o[a])))&&(s?rt.cleanData([e],!0):nt.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}function d(){return!0}function p(){return!1}function m(){try{return mt.activeElement}catch(e){}}function f(e){var t=Bt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function _(e,t){var n,i,r=0,s=typeof e.getElementsByTagName!==xt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xt?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||rt.nodeName(i,t)?s.push(i):rt.merge(s,_(i,t));return void 0===t||t&&rt.nodeName(e,t)?rt.merge([e],s):s}function g(e){At.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return rt.nodeName(e,"table")&&rt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==rt.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=Jt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)rt._data(n,"globalEval",!t||rt._data(t[i],"globalEval"))}function C(e,t){if(1===t.nodeType&&rt.hasData(e)){var n,i,r,s=rt._data(e),o=rt._data(t,s),a=s.events;if(a){delete o.handle,o.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)rt.event.add(t,n,a[n][i])}o.data&&(o.data=rt.extend({},o.data))}}function x(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[rt.expando]){r=rt._data(t);for(i in r.events)rt.removeEvent(t,i,r.handle);t.removeAttribute(rt.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,b(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!rt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&At.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var i,r=rt(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:rt.css(r[0],"display");return r.detach(),s}function I(e){var t=mt,n=Qt[e];return n||(n=S(e,t),"none"!==n&&n||(Xt=(Xt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Xt[0].contentWindow||Xt[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Xt.detach()),Qt[e]=n),n}function E(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=pn.length;r--;)if(t=pn[r]+n,t in e)return t;return i}function T(e,t){for(var n,i,r,s=[],o=0,a=e.length;a>o;o++)i=e[o],i.style&&(s[o]=rt._data(i,"olddisplay"),n=i.style.display,t?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Tt(i)&&(s[o]=rt._data(i,"olddisplay",I(i.nodeName)))):(r=Tt(i),(n&&"none"!==n||!r)&&rt._data(i,"olddisplay",r?n:rt.css(i,"display"))));for(o=0;a>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function P(e,t,n){var i=un.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function A(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=rt.css(e,n+kt[s],!0,r)),i?("content"===n&&(o-=rt.css(e,"padding"+kt[s],!0,r)),"margin"!==n&&(o-=rt.css(e,"border"+kt[s]+"Width",!0,r))):(o+=rt.css(e,"padding"+kt[s],!0,r),"padding"!==n&&(o+=rt.css(e,"border"+kt[s]+"Width",!0,r)));return o}function M(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=en(e),o=nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=tn(e,t,s),(0>r||null==r)&&(r=e.style[t]),rn.test(r))return r;i=o&&(nt.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+A(e,t,n||(o?"border":"content"),i,s)+"px"}function O(e,t,n,i,r){return new O.prototype.init(e,t,n,i,r)}function D(){return setTimeout(function(){mn=void 0}),mn=rt.now()}function L(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=kt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function R(e,t,n){for(var i,r=(bn[t]||[]).concat(bn["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,t,e))return i}function B(e,t,n){var i,r,s,o,a,l,u,c,h=this,d={},p=e.style,m=e.nodeType&&Tt(e),f=rt._data(e,"fxshow");n.queue||(a=rt._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,rt.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=rt.css(e,"display"),c="none"===u?rt._data(e,"olddisplay")||I(e.nodeName):u,"inline"===c&&"none"===rt.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==I(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],_n.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!f||void 0===f[i])continue;m=!0}d[i]=f&&f[i]||rt.style(e,i)}else u=void 0;if(rt.isEmptyObject(d))"inline"===("none"===u?I(e.nodeName):u)&&(p.display=u);else{f?"hidden"in f&&(m=f.hidden):f=rt._data(e,"fxshow",{}),s&&(f.hidden=!m),m?rt(e).show():h.done(function(){rt(e).hide()}),h.done(function(){var t;rt._removeData(e,"fxshow");for(t in d)rt.style(e,t,d[t])});for(i in d)o=R(m?f[i]:0,i,h),i in f||(f[i]=o.start,m&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function N(e,t){var n,i,r,s,o;for(n in e)if(i=rt.camelCase(n),r=t[i],s=e[n],rt.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),o=rt.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function F(e,t,n){var i,r,s=0,o=yn.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=mn||D(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,s=1-i,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(s);return a.notifyWith(e,[u,s,n]),1>s&&l?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:rt.extend({},t),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:mn||D(),duration:n.duration,tweens:[],createTween:function(t,n){var i=rt.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(N(c,u.opts.specialEasing);o>s;s++)if(i=yn[s].call(u,e,c,u.opts))return i;return rt.map(c,R,u),rt.isFunction(u.opts.start)&&u.opts.start.call(e,u),rt.fx.timer(rt.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(yt)||[];if(rt.isFunction(n))for(;i=s[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function r(a){var l;return s[a]=!0,rt.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||o||s[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var s={},o=e===Un;return r(t.dataTypes[0])||!s["*"]&&r("*")}function W(e,t){var n,i,r=rt.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&rt.extend(!0,e,n),e}function V(e,t,n){for(var i,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in a)if(a[o]&&a[o].test(r)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){s=o;break}i||(i=o)}s=s||i}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function j(e,t,n,i){var r,s,o,a,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=u[l+" "+s]||u["* "+s],!o)for(r in u)if(a=r.split(" "),a[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){o===!0?o=u[r]:u[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(h){return{state:"parsererror",error:o?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function U(e,t,n,i){var r;if(rt.isArray(t))rt.each(t,function(t,r){n||Gn.test(e)?i(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==rt.type(t))i(e,t);else for(r in t)U(e+"["+r+"]",t[r],n,i)}function q(){try{return new e.XMLHttpRequest}catch(t){}}function K(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(e){return rt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],$=G.slice,Y=G.concat,Z=G.push,X=G.indexOf,Q={},et=Q.toString,tt=Q.hasOwnProperty,nt={},it="1.11.2",rt=function(e,t){return new rt.fn.init(e,t)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ot=/^-ms-/,at=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};rt.fn=rt.prototype={jquery:it,constructor:rt,selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:$.call(this)},pushStack:function(e){var t=rt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return rt.each(this,e,t)},map:function(e){return this.pushStack(rt.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:G.sort,splice:G.splice},rt.extend=rt.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||rt.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(r=arguments[a]))for(i in r)e=o[i],n=r[i],o!==n&&(u&&n&&(rt.isPlainObject(n)||(t=rt.isArray(n)))?(t?(t=!1,s=e&&rt.isArray(e)?e:[]):s=e&&rt.isPlainObject(e)?e:{},o[i]=rt.extend(u,s,n)):void 0!==n&&(o[i]=n));return o},rt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===rt.type(e)},isArray:Array.isArray||function(e){return"array"===rt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!rt.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==rt.type(e)||e.nodeType||rt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[et.call(e)]||"object":typeof e},globalEval:function(t){t&&rt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ot,"ms-").replace(at,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,s=0,o=e.length,a=n(e);if(i){if(a)for(;o>s&&(r=t.apply(e[s],i),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],i),r===!1)break}else if(a)for(;o>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(st,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?rt.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(X)return X.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],s=0,o=e.length,a=!n;o>s;s++)i=!t(e[s],s),i!==a&&r.push(e[s]);return r},map:function(e,t,i){var r,s=0,o=e.length,a=n(e),l=[];if(a)for(;o>s;s++)r=t(e[s],s,i),null!=r&&l.push(r);else for(s in e)r=t(e[s],s,i),null!=r&&l.push(r);return Y.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),rt.isFunction(e)?(n=$.call(arguments,2),i=function(){return e.apply(t||this,n.concat($.call(arguments)))},i.guid=e.guid=e.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:nt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()});var ut=function(e){function t(e,t,n,i){var r,s,o,a,l,u,h,p,m,f;if((t?t.ownerDocument||t:H)!==O&&M(t),t=t||O,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&L){if(11!==a&&(r=vt.exec(e)))if(o=r[1]){if(9===a){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&F(t,s)&&s.id===o)return n.push(s),n}else{if(r[2])return X.apply(n,t.getElementsByTagName(e)),n;if((o=r[3])&&w.getElementsByClassName)return X.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!R||!R.test(e))){if(p=h=z,m=t,f=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=I(e),(h=t.getAttribute("id"))?p=h.replace(bt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);m=yt.test(e)&&c(t.parentNode)||t,f=u.join(",")}if(f)try{return X.apply(n,m.querySelectorAll(f)),n}catch(_){}finally{h||t.removeAttribute("id")}}}return k(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[z]=!0,e}function r(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=V++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,o){var a,l,u=[W,s];if(o){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[z]||(t[z]={}),(a=l[i])&&a[0]===W&&a[1]===s)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,o))return!0}}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var r=0,s=n.length;s>r;r++)t(e,n[r],i);return i}function _(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,u=null!=t;l>a;a++)(s=e[a])&&(!n||n(s,i,r))&&(o.push(s),u&&t.push(a));return o}function g(e,t,n,r,s,o){return r&&!r[z]&&(r=g(r)),s&&!s[z]&&(s=g(s,o)),i(function(i,o,a,l){var u,c,h,d=[],p=[],m=o.length,g=i||f(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?g:_(g,d,e,a,l),y=n?s||(i?e:m||r)?[]:o:v;if(n&&n(v,y,a,l),r)for(u=_(y,p),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[p[c]]=!(v[p[c]]=h));if(i){if(s||e){if(s){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(v[c]=h);s(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=s?et(i,h):d[c])>-1&&(i[u]=!(o[u]=h))}}else y=_(y===o?y.splice(m,y.length):y),s?s(null,o,y,l):X.apply(o,y)})}function v(e){for(var t,n,i,r=e.length,s=C.relative[e[0].type],o=s||C.relative[" "],a=s?1:0,l=p(function(e){return e===t},o,!0),u=p(function(e){return et(t,e)>-1},o,!0),c=[function(e,n,i){var r=!s&&(i||n!==T)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];r>a;a++)if(n=C.relative[e[a].type])c=[p(m(c),n)];else{if(n=C.filter[e[a].type].apply(null,e[a].matches),n[z]){for(i=++a;r>i&&!C.relative[e[i].type];i++);return g(a>1&&m(c),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&v(e.slice(a,i)),r>i&&v(e=e.slice(i)),r>i&&d(e))}c.push(n)}return m(c)}function y(e,n){var r=n.length>0,s=e.length>0,o=function(i,o,a,l,u){var c,h,d,p=0,m="0",f=i&&[],g=[],v=T,y=i||s&&C.find.TAG("*",u),b=W+=null==v?1:Math.random()||.1,w=y.length;for(u&&(T=o!==O&&o);m!==w&&null!=(c=y[m]);m++){if(s&&c){for(h=0;d=e[h++];)if(d(c,o,a)){l.push(c);break}u&&(W=b)}r&&((c=!d&&c)&&p--,i&&f.push(c))}if(p+=m,r&&m!==p){for(h=0;d=n[h++];)d(f,g,o,a);if(i){if(p>0)for(;m--;)f[m]||g[m]||(g[m]=Y.call(l));g=_(g)}X.apply(l,g),u&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(W=b,T=v),f};return r?i(o):o}var b,w,C,x,S,I,E,k,T,P,A,M,O,D,L,R,B,N,F,z="sizzle"+1*new Date,H=e.document,W=0,V=0,j=n(),U=n(),q=n(),K=function(e,t){return e===t&&(A=!0),0},J=1<<31,G={}.hasOwnProperty,$=[],Y=$.pop,Z=$.push,X=$.push,Q=$.slice,et=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=it.replace("w","w#"),st="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(ot),pt=new RegExp("^"+rt+"$"),mt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,_t=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Ct=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){M()};try{X.apply($=Q.call(H.childNodes),H.childNodes),$[H.childNodes.length].nodeType}catch(St){X={apply:$.length?function(e,t){Z.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,D=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),L=!S(i),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(i.getElementsByClassName),w.getById=r(function(e){return D.appendChild(e).id=z,!i.getElementsByName||!i.getElementsByName(z).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(wt,Ct);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(wt,Ct);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},C.find.CLASS=w.getElementsByClassName&&function(e,t){return L?t.getElementsByClassName(e):void 0},B=[],R=[],(w.qsa=gt.test(i.querySelectorAll))&&(r(function(e){D.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+z+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||R.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=gt.test(N=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){w.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),B.push("!=",ot)}),R=R.length&&new RegExp(R.join("|")),B=B.length&&new RegExp(B.join("|")),t=gt.test(D.compareDocumentPosition),F=t||gt.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===H&&F(H,e)?-1:t===i||t.ownerDocument===H&&F(H,t)?1:P?et(P,e)-et(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,s=e.parentNode,a=t.parentNode,l=[e],u=[t];if(!s||!a)return e===i?-1:t===i?1:s?-1:a?1:P?et(P,e)-et(P,t):0;if(s===a)return o(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?o(l[r],u[r]):l[r]===H?-1:u[r]===H?1:0},i):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&M(e),n=n.replace(ht,"='$1']"),!(!w.matchesSelector||!L||B&&B.test(n)||R&&R.test(n)))try{var i=N.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&M(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&M(e);var n=C.attrHandle[t.toLowerCase()],i=n&&G.call(C.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==i?i:w.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!w.detectDuplicates,P=!w.sortStable&&e.slice(0),e.sort(K),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return P=null,e},x=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Ct),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&dt.test(n)&&(t=I(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(at," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,m,f=s!==o?"nextSibling":"previousSibling",_=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(_){if(s){for(;f;){for(h=t;h=h[f];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[o?_.firstChild:_.lastChild],o&&v){for(c=_[z]||(_[z]={}),u=c[e]||[],p=u[0]===W&&u[1],d=u[0]===W&&u[2],h=p&&_.childNodes[p];h=++p&&h&&h[f]||(d=p=0)||m.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[W,p,d];break}}else if(v&&(u=(t[z]||(t[z]={}))[e])&&u[0]===W)d=u[1];else for(;(h=++p&&h&&h[f]||(d=p=0)||m.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++d||(v&&((h[z]||(h[z]={}))[e]=[W,d]),h!==t)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,n){var r,s=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[z]?s(n):s.length>1?(r=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),o=r.length;o--;)i=et(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=E(e.replace(lt,"$1"));return r[z]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(wt,Ct),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,Ct).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return _t.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t
},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=l(b);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,I=t.tokenize=function(e,n){var i,r,s,o,a,l,u,c=U[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=C.preFilter;a;){(!i||(r=ut.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ct.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(lt," ")}),a=a.slice(i.length));for(o in C.filter)!(r=mt[o].exec(a))||u[o]&&!(r=u[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):U(e,l).slice(0)},E=t.compile=function(e,t){var n,i=[],r=[],s=q[e+" "];if(!s){for(t||(t=I(e)),n=t.length;n--;)s=v(t[n]),s[z]?i.push(s):r.push(s);s=q(e,y(r,i)),s.selector=e}return s},k=t.select=function(e,t,n,i){var r,s,o,a,l,u="function"==typeof e&&e,h=!i&&I(e=u.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&w.getById&&9===t.nodeType&&L&&C.relative[s[1].type]){if(t=(C.find.ID(o.matches[0].replace(wt,Ct),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=mt.needsContext.test(e)?0:s.length;r--&&(o=s[r],!C.relative[a=o.type]);)if((l=C.find[a])&&(i=l(o.matches[0].replace(wt,Ct),yt.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&d(s),!e)return X.apply(n,i),n;break}}return(u||E(e,h))(i,t,!L,n,yt.test(e)&&c(t.parentNode)||t),n},w.sortStable=z.split("").sort(K).join("")===z,w.detectDuplicates=!!A,M(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(tt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);rt.find=ut,rt.expr=ut.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ut.uniqueSort,rt.text=ut.getText,rt.isXMLDoc=ut.isXML,rt.contains=ut.contains;var ct=rt.expr.match.needsContext,ht=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;rt.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?rt.find.matchesSelector(i,e)?[i]:[]:rt.find.matches(e,rt.grep(t,function(e){return 1===e.nodeType}))},rt.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(rt(e).filter(function(){for(t=0;r>t;t++)if(rt.contains(i[t],this))return!0}));for(t=0;r>t;t++)rt.find(e,i[t],n);return n=this.pushStack(r>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ct.test(e)?rt(e):e||[],!1).length}});var pt,mt=e.document,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_t=rt.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof rt?t[0]:t,rt.merge(this,rt.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:mt,!0)),ht.test(n[1])&&rt.isPlainObject(t))for(n in t)rt.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=mt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pt.find(e);this.length=1,this[0]=i}return this.context=mt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):rt.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(rt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),rt.makeArray(e,this))};_t.prototype=rt.fn,pt=rt(mt);var gt=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!rt(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),rt.fn.extend({has:function(e){var t,n=rt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(rt.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,s=[],o=ct.test(e)||"string"!=typeof e?rt(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?rt.unique(s):s)},index:function(e){return e?"string"==typeof e?rt.inArray(this[0],rt(e)):rt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(rt.unique(rt.merge(this.get(),rt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),rt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return rt.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return rt.dir(e,"nextSibling")},prevAll:function(e){return rt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return rt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return rt.dir(e,"previousSibling",n)},siblings:function(e){return rt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return rt.sibling(e.firstChild)},contents:function(e){return rt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:rt.merge([],e.childNodes)}},function(e,t){rt.fn[e]=function(n,i){var r=rt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=rt.filter(i,r)),this.length>1&&(vt[e]||(r=rt.unique(r)),gt.test(e)&&(r=r.reverse())),this.pushStack(r)}});var yt=/\S+/g,bt={};rt.Callbacks=function(e){e="string"==typeof e?bt[e]||s(e):rt.extend({},e);var t,n,i,r,o,a,l=[],u=!e.once&&[],c=function(s){for(n=e.memory&&s,i=!0,o=a||0,a=0,r=l.length,t=!0;l&&r>o;o++)if(l[o].apply(s[0],s[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function s(t){rt.each(t,function(t,n){var i=rt.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),t?r=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&rt.each(arguments,function(e,n){for(var i;(i=rt.inArray(n,l,i))>-1;)l.splice(i,1),t&&(r>=i&&r--,o>=i&&o--)}),this},has:function(e){return e?rt.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||i&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},rt.extend({Deferred:function(e){var t=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return rt.Deferred(function(n){rt.each(t,function(t,s){var o=rt.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&rt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?rt.extend(e,i):i}},r={};return i.pipe=i.then,rt.each(t,function(e,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,s=$.call(arguments),o=s.length,a=1!==o||e&&rt.isFunction(e.promise)?o:0,l=1===a?e:rt.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?$.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)s[r]&&rt.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,t)):--a;return a||l.resolveWith(i,s),l.promise()}});var wt;rt.fn.ready=function(e){return rt.ready.promise().done(e),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?rt.readyWait++:rt.ready(!0)},ready:function(e){if(e===!0?!--rt.readyWait:!rt.isReady){if(!mt.body)return setTimeout(rt.ready);rt.isReady=!0,e!==!0&&--rt.readyWait>0||(wt.resolveWith(mt,[rt]),rt.fn.triggerHandler&&(rt(mt).triggerHandler("ready"),rt(mt).off("ready")))}}}),rt.ready.promise=function(t){if(!wt)if(wt=rt.Deferred(),"complete"===mt.readyState)setTimeout(rt.ready);else if(mt.addEventListener)mt.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{mt.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var n=!1;try{n=null==e.frameElement&&mt.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!rt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}o(),rt.ready()}}()}return wt.promise(t)};var Ct,xt="undefined";for(Ct in rt(nt))break;nt.ownLast="0"!==Ct,nt.inlineBlockNeedsLayout=!1,rt(function(){var e,t,n,i;n=mt.getElementsByTagName("body")[0],n&&n.style&&(t=mt.createElement("div"),i=mt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=mt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),rt.acceptData=function(e){var t=rt.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,It=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?rt.cache[e[rt.expando]]:e[rt.expando],!!e&&!u(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return h(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return h(e,t,!0)}}),rt.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=rt.data(s),1===s.nodeType&&!rt._data(s,"parsedAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),l(s,i,r[i])));rt._data(s,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){rt.data(this,e)}):arguments.length>1?this.each(function(){rt.data(this,e,t)}):s?l(s,e,rt.data(s,e)):void 0},removeData:function(e){return this.each(function(){rt.removeData(this,e)})}}),rt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=rt._data(e,t),n&&(!i||rt.isArray(n)?i=rt._data(e,t,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=rt.queue(e,t),i=n.length,r=n.shift(),s=rt._queueHooks(e,t),o=function(){rt.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return rt._data(e,n)||rt._data(e,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(e,t+"queue"),rt._removeData(e,n)})})}}),rt.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?rt.queue(this[0],e):void 0===t?this:this.each(function(){var n=rt.queue(this,e,t);rt._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&rt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){rt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=rt.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=rt._data(s[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],Tt=function(e,t){return e=t||e,"none"===rt.css(e,"display")||!rt.contains(e.ownerDocument,e)},Pt=rt.access=function(e,t,n,i,r,s,o){var a=0,l=e.length,u=null==n;if("object"===rt.type(n)){r=!0;for(a in n)rt.access(e,t,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,rt.isFunction(i)||(o=!0),u&&(o?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(rt(e),n)})),t))for(;l>a;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):s},At=/^(?:checkbox|radio)$/i;!function(){var e=mt.createElement("input"),t=mt.createElement("div"),n=mt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==mt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=mt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Mt=/^(?:input|select|textarea)$/i,Ot=/^key/,Dt=/^(?:mouse|pointer|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,u,c,h,d,p,m,f,_=rt._data(e);if(_){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=rt.guid++),(o=_.events)||(o=_.events={}),(c=_.handle)||(c=_.handle=function(e){return typeof rt===xt||e&&rt.event.triggered===e.type?void 0:rt.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(yt)||[""],a=t.length;a--;)s=Rt.exec(t[a])||[],p=f=s[1],m=(s[2]||"").split(".").sort(),p&&(u=rt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=rt.event.special[p]||{},h=rt.extend({type:p,origType:f,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:m.join(".")},l),(d=o[p])||(d=o[p]=[],d.delegateCount=0,u.setup&&u.setup.call(e,i,m,c)!==!1||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),rt.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var s,o,a,l,u,c,h,d,p,m,f,_=rt.hasData(e)&&rt._data(e);if(_&&(c=_.events)){for(t=(t||"").match(yt)||[""],u=t.length;u--;)if(a=Rt.exec(t[u])||[],p=f=a[1],m=(a[2]||"").split(".").sort(),p){for(h=rt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=d.length;s--;)o=d[s],!r&&f!==o.origType||n&&n.guid!==o.guid||a&&!a.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(d.splice(s,1),o.selector&&d.delegateCount--,h.remove&&h.remove.call(e,o));l&&!d.length&&(h.teardown&&h.teardown.call(e,m,_.handle)!==!1||rt.removeEvent(e,p,_.handle),delete c[p])}else for(p in c)rt.event.remove(e,p+t[u],n,i,!0);rt.isEmptyObject(c)&&(delete _.handle,rt._removeData(e,"events"))}},trigger:function(t,n,i,r){var s,o,a,l,u,c,h,d=[i||mt],p=tt.call(t,"type")?t.type:t,m=tt.call(t,"namespace")?t.namespace.split("."):[];if(a=c=i=i||mt,3!==i.nodeType&&8!==i.nodeType&&!Lt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),o=p.indexOf(":")<0&&"on"+p,t=t[rt.expando]?t:new rt.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:rt.makeArray(n,[t]),u=rt.event.special[p]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!rt.isWindow(i)){for(l=u.delegateType||p,Lt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(i.ownerDocument||mt)&&d.push(c.defaultView||c.parentWindow||e)}for(h=0;(a=d[h++])&&!t.isPropagationStopped();)t.type=h>1?l:u.bindType||p,s=(rt._data(a,"events")||{})[t.type]&&rt._data(a,"handle"),s&&s.apply(a,n),s=o&&a[o],s&&s.apply&&rt.acceptData(a)&&(t.result=s.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=p,!r&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),n)===!1)&&rt.acceptData(i)&&o&&i[p]&&!rt.isWindow(i)){c=i[o],c&&(i[o]=null),rt.event.triggered=p;try{i[p]()}catch(f){}rt.event.triggered=void 0,c&&(i[o]=c)}return t.result}},dispatch:function(e){e=rt.event.fix(e);var t,n,i,r,s,o=[],a=$.call(arguments),l=(rt._data(this,"events")||{})[e.type]||[],u=rt.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=rt.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,s=0;(i=r.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],s=0;a>s;s++)i=t[s],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?rt(n,this).index(l)>=0:rt.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},fix:function(e){if(e[rt.expando])return e;var t,n,i,r=e.type,s=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Dt.test(r)?this.mouseHooks:Ot.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new rt.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=s.srcElement||mt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||mt,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return rt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=rt.extend(new rt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(r,null,t):rt.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=mt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===xt&&(e[i]=null),e.detachEvent(i,n))},rt.Event=function(e,t){return this instanceof rt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:p):this.type=e,t&&rt.extend(this,t),this.timeStamp=e&&e.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(e,t)},rt.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){rt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==i&&!rt.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=rt.nodeName(t,"input")||rt.nodeName(t,"button")?t.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&rt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),nt.changeBubbles||(rt.event.special.change={setup:function(){return Mt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,e,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Mt.test(t.nodeName)&&!rt._data(t,"changeBubbles")&&(rt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||rt.event.simulate("change",this.parentNode,e,!0)}),rt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!Mt.test(this.nodeName)}}),nt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){rt.event.simulate(t,e.target,rt.event.fix(e),!0)};rt.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=rt._data(i,t);r||i.addEventListener(e,n,!0),rt._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=rt._data(i,t)-1;r?rt._data(i,t,r):(i.removeEventListener(e,n,!0),rt._removeData(i,t))}}}),rt.fn.extend({on:function(e,t,n,i,r){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(o=i,i=function(e){return rt().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=rt.guid++)),this.each(function(){rt.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,rt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){rt.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){rt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?rt.event.trigger(e,t,n,!0):void 0}});var Bt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Nt=/ jQuery\d+="(?:null|\d+)"/g,Ft=new RegExp("<(?:"+Bt+")[\\s/>]","i"),zt=/^\s+/,Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wt=/<([\w:]+)/,Vt=/<tbody/i,jt=/<|&#?\w+;/,Ut=/<(?:script|style|link)/i,qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kt=/^$|\/(?:java|ecma)script/i,Jt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$t={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yt=f(mt),Zt=Yt.appendChild(mt.createElement("div"));$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td,rt.extend({clone:function(e,t,n){var i,r,s,o,a,l=rt.contains(e.ownerDocument,e);if(nt.html5Clone||rt.isXMLDoc(e)||!Ft.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Zt.innerHTML=e.outerHTML,Zt.removeChild(s=Zt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||rt.isXMLDoc(e)))for(i=_(s),a=_(e),o=0;null!=(r=a[o]);++o)i[o]&&x(r,i[o]);if(t)if(n)for(a=a||_(e),i=i||_(s),o=0;null!=(r=a[o]);o++)C(r,i[o]);else C(e,s);return i=_(s,"script"),i.length>0&&w(i,!l&&_(e,"script")),i=a=r=null,s},buildFragment:function(e,t,n,i){for(var r,s,o,a,l,u,c,h=e.length,d=f(t),p=[],m=0;h>m;m++)if(s=e[m],s||0===s)if("object"===rt.type(s))rt.merge(p,s.nodeType?[s]:s);else if(jt.test(s)){for(a=a||d.appendChild(t.createElement("div")),l=(Wt.exec(s)||["",""])[1].toLowerCase(),c=$t[l]||$t._default,a.innerHTML=c[1]+s.replace(Ht,"<$1></$2>")+c[2],r=c[0];r--;)a=a.lastChild;if(!nt.leadingWhitespace&&zt.test(s)&&p.push(t.createTextNode(zt.exec(s)[0])),!nt.tbody)for(s="table"!==l||Vt.test(s)?"<table>"!==c[1]||Vt.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;r--;)rt.nodeName(u=s.childNodes[r],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(rt.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(t.createTextNode(s));for(a&&d.removeChild(a),nt.appendChecked||rt.grep(_(p,"input"),g),m=0;s=p[m++];)if((!i||-1===rt.inArray(s,i))&&(o=rt.contains(s.ownerDocument,s),a=_(d.appendChild(s),"script"),o&&w(a),n))for(r=0;s=a[r++];)Kt.test(s.type||"")&&n.push(s);return a=null,d},cleanData:function(e,t){for(var n,i,r,s,o=0,a=rt.expando,l=rt.cache,u=nt.deleteExpando,c=rt.event.special;null!=(n=e[o]);o++)if((t||rt.acceptData(n))&&(r=n[a],s=r&&l[r])){if(s.events)for(i in s.events)c[i]?rt.event.remove(n,i):rt.removeEvent(n,i,s.handle);l[r]&&(delete l[r],u?delete n[a]:typeof n.removeAttribute!==xt?n.removeAttribute(a):n[a]=null,G.push(r))}}}),rt.fn.extend({text:function(e){return Pt(this,function(e){return void 0===e?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||mt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?rt.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||rt.cleanData(_(n)),n.parentNode&&(t&&rt.contains(n.ownerDocument,n)&&w(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&rt.cleanData(_(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&rt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return rt.clone(this,e,t)})},html:function(e){return Pt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Nt,""):void 0;if(!("string"!=typeof e||Ut.test(e)||!nt.htmlSerialize&&Ft.test(e)||!nt.leadingWhitespace&&zt.test(e)||$t[(Wt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ht,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(rt.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,rt.cleanData(_(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Y.apply([],e);var n,i,r,s,o,a,l=0,u=this.length,c=this,h=u-1,d=e[0],p=rt.isFunction(d);if(p||u>1&&"string"==typeof d&&!nt.checkClone&&qt.test(d))return this.each(function(n){var i=c.eq(n);p&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(u&&(a=rt.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(s=rt.map(_(a,"script"),y),r=s.length;u>l;l++)i=a,l!==h&&(i=rt.clone(i,!0,!0),r&&rt.merge(s,_(i,"script"))),t.call(this[l],i,l);if(r)for(o=s[s.length-1].ownerDocument,rt.map(s,b),l=0;r>l;l++)i=s[l],Kt.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(o,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Gt,"")));a=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){rt.fn[e]=function(e){for(var n,i=0,r=[],s=rt(e),o=s.length-1;o>=i;i++)n=i===o?this:this.clone(!0),rt(s[i])[t](n),Z.apply(r,n.get());return this.pushStack(r)
}});var Xt,Qt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=mt.getElementsByTagName("body")[0],n&&n.style?(t=mt.createElement("div"),i=mt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(mt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+Et+")(?!px)[a-z%]+$","i"),sn=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tn=function(e,t,n){var i,r,s,o,a=e.style;return n=n||en(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||rt.contains(e.ownerDocument,e)||(o=rt.style(e,t)),rn.test(o)&&nn.test(t)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0===o?o:o+""}):mt.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,r,s,o,a=e.style;return n=n||en(e),o=n?n[t]:void 0,null==o&&a&&a[t]&&(o=a[t]),rn.test(o)&&!sn.test(t)&&(i=a.left,r=e.runtimeStyle,s=r&&r.left,s&&(r.left=e.currentStyle.left),a.left="fontSize"===t?"1em":o,o=a.pixelLeft+"px",a.left=i,s&&(r.left=s)),void 0===o?o:o+""||"auto"}),function(){function t(){var t,n,i,r;n=mt.getElementsByTagName("body")[0],n&&n.style&&(t=mt.createElement("div"),i=mt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=o=!1,l=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(t,null)||{}).top,o="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(mt.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight),t.removeChild(r)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===r[0].offsetHeight,a&&(r[0].style.display="",r[1].style.display="none",a=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,s,o,a,l;n=mt.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,rt.extend(nt,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==l&&t(),l}}))}(),rt.swap=function(e,t,n,i){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return r};var on=/alpha\([^)]*\)/i,an=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+Et+")(.*)$","i"),cn=new RegExp("^([+-])=("+Et+")","i"),hn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=rt.camelCase(t),l=e.style;if(t=rt.cssProps[a]||(rt.cssProps[a]=k(l,a)),o=rt.cssHooks[t]||rt.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t];if(s=typeof n,"string"===s&&(r=cn.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(rt.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||rt.cssNumber[a]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,i)))))try{l[t]=n}catch(u){}}},css:function(e,t,n,i){var r,s,o,a=rt.camelCase(t);return t=rt.cssProps[a]||(rt.cssProps[a]=k(e.style,a)),o=rt.cssHooks[t]||rt.cssHooks[a],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=tn(e,t,i)),"normal"===s&&t in dn&&(s=dn[t]),""===n||n?(r=parseFloat(s),n===!0||rt.isNumeric(r)?r||0:s):s}}),rt.each(["height","width"],function(e,t){rt.cssHooks[t]={get:function(e,n,i){return n?ln.test(rt.css(e,"display"))&&0===e.offsetWidth?rt.swap(e,hn,function(){return M(e,t,i)}):M(e,t,i):void 0},set:function(e,n,i){var r=i&&en(e);return P(e,n,i?A(e,t,i,nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,r),r):0)}}}),nt.opacity||(rt.cssHooks.opacity={get:function(e,t){return an.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=rt.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===rt.trim(s.replace(on,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=on.test(s)?s.replace(on,r):s+" "+r)}}),rt.cssHooks.marginRight=E(nt.reliableMarginRight,function(e,t){return t?rt.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(e,t){rt.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+kt[i]+t]=s[i]||s[i-2]||s[0];return r}},nn.test(e)||(rt.cssHooks[e+t].set=P)}),rt.fn.extend({css:function(e,t){return Pt(this,function(e,t,n){var i,r,s={},o=0;if(rt.isArray(t)){for(i=en(e),r=t.length;r>o;o++)s[t[o]]=rt.css(e,t[o],!1,i);return s}return void 0!==n?rt.style(e,t,n):rt.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Tt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(rt.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?rt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=rt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){rt.fx.step[e.prop]?rt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[rt.cssProps[e.prop]]||rt.cssHooks[e.prop])?rt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},rt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},rt.fx=O.prototype.init,rt.fx.step={};var mn,fn,_n=/^(?:toggle|show|hide)$/,gn=new RegExp("^(?:([+-])=|)("+Et+")([a-z%]*)$","i"),vn=/queueHooks$/,yn=[B],bn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=gn.exec(t),s=r&&r[3]||(rt.cssNumber[e]?"":"px"),o=(rt.cssNumber[e]||"px"!==s&&+i)&&gn.exec(rt.css(n.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+i||1;do a=a||".5",o/=a,rt.style(n.elem,e,o+s);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};rt.Animation=rt.extend(F,{tweener:function(e,t){rt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],bn[n]=bn[n]||[],bn[n].unshift(t)},prefilter:function(e,t){t?yn.unshift(e):yn.push(e)}}),rt.speed=function(e,t,n){var i=e&&"object"==typeof e?rt.extend({},e):{complete:n||!n&&t||rt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!rt.isFunction(t)&&t};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Tt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=rt.isEmptyObject(e),s=rt.speed(t,n,i),o=function(){var t=F(this,rt.extend({},e),s);(r||rt._data(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=rt.timers,o=rt._data(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&vn.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));(t||!n)&&rt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=rt._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=rt.timers,o=i?i.length:0;for(n.finish=!0,rt.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(e,t){var n=rt.fn[t];rt.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(L(t,!0),e,i,r)}}),rt.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){rt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),rt.timers=[],rt.fx.tick=function(){var e,t=rt.timers,n=0;for(mn=rt.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||rt.fx.stop(),mn=void 0},rt.fx.timer=function(e){rt.timers.push(e),e()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){fn||(fn=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(fn),fn=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,t){return e=rt.fx?rt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=mt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=mt.createElement("select"),r=n.appendChild(mt.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=r.selected,nt.enctype=!!mt.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!r.disabled,e=mt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;rt.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=rt.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,rt(this).val()):e,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(e){return null==e?"":e+""})),t=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(e){var t=rt.find.attr(e,"value");return null!=t?t:rt.trim(rt.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:i.length,l=0>r?a:s?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&rt.nodeName(n.parentNode,"optgroup"))){if(t=rt(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,s=rt.makeArray(t),o=r.length;o--;)if(i=r[o],rt.inArray(rt.valHooks.option.get(i),s)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(e,t){return rt.isArray(t)?e.checked=rt.inArray(rt(e).val(),t)>=0:void 0}},nt.checkOn||(rt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Cn,xn,Sn=rt.expr.attrHandle,In=/^(?:checked|selected)$/i,En=nt.getSetAttribute,kn=nt.input;rt.fn.extend({attr:function(e,t){return Pt(this,rt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){rt.removeAttr(this,e)})}}),rt.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===xt?rt.prop(e,t,n):(1===s&&rt.isXMLDoc(e)||(t=t.toLowerCase(),i=rt.attrHooks[t]||(rt.expr.match.bool.test(t)?xn:Cn)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=rt.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void rt.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,s=t&&t.match(yt);if(s&&1===e.nodeType)for(;n=s[r++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?kn&&En||!In.test(n)?e[i]=!1:e[rt.camelCase("default-"+n)]=e[i]=!1:rt.attr(e,n,""),e.removeAttribute(En?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&rt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),xn={set:function(e,t,n){return t===!1?rt.removeAttr(e,n):kn&&En||!In.test(n)?e.setAttribute(!En&&rt.propFix[n]||n,n):e[rt.camelCase("default-"+n)]=e[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||rt.find.attr;Sn[t]=kn&&En||!In.test(t)?function(e,t,i){var r,s;return i||(s=Sn[t],Sn[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,Sn[t]=s),r}:function(e,t,n){return n?void 0:e[rt.camelCase("default-"+t)]?t.toLowerCase():null}}),kn&&En||(rt.attrHooks.value={set:function(e,t,n){return rt.nodeName(e,"input")?void(e.defaultValue=t):Cn&&Cn.set(e,t,n)}}),En||(Cn={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Cn.set},rt.attrHooks.contenteditable={set:function(e,t,n){Cn.set(e,""===t?!1:t,n)}},rt.each(["width","height"],function(e,t){rt.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(rt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Tn=/^(?:input|select|textarea|button|object)$/i,Pn=/^(?:a|area)$/i;rt.fn.extend({prop:function(e,t){return Pt(this,rt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=rt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!rt.isXMLDoc(e),s&&(t=rt.propFix[t]||t,r=rt.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=rt.find.attr(e,"tabindex");return t?parseInt(t,10):Tn.test(e.nodeName)||Pn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||rt.each(["href","src"],function(e,t){rt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(rt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),nt.enctype||(rt.propFix.enctype="encoding");var An=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(e){var t,n,i,r,s,o,a=0,l=this.length,u="string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(yt)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(An," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=rt.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,i,r,s,o,a=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(yt)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(An," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");o=e?rt.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(rt.isFunction(e)?function(n){rt(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=rt(this),s=e.match(yt)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===xt||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(An," ").indexOf(t)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){rt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),rt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Mn=rt.now(),On=/\?/,Dn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=rt.trim(t+"");return r&&!rt.trim(r.replace(Dn,function(e,t,r,s){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!s-!r,"")}))?Function("return "+r)():rt.error("Invalid JSON: "+t)},rt.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+t),n};var Ln,Rn,Bn=/#.*$/,Nn=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,zn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hn=/^(?:GET|HEAD)$/,Wn=/^\/\//,Vn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,jn={},Un={},qn="*/".concat("*");try{Rn=location.href}catch(Kn){Rn=mt.createElement("a"),Rn.href="",Rn=Rn.href}Ln=Vn.exec(Rn.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rn,type:"GET",isLocal:zn.test(Ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,rt.ajaxSettings),t):W(rt.ajaxSettings,e)},ajaxPrefilter:z(jn),ajaxTransport:z(Un),ajax:function(e,t){function n(e,t,n,i){var r,c,g,v,b,C=t;2!==y&&(y=2,a&&clearTimeout(a),u=void 0,o=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(v=V(h,w,n)),v=j(h,v,w,r),r?(h.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(rt.lastModified[s]=b),b=w.getResponseHeader("etag"),b&&(rt.etag[s]=b)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=v.state,c=v.data,g=v.error,r=!g)):(g=C,(e||!C)&&(C="error",0>e&&(e=0))),w.status=e,w.statusText=(t||C)+"",r?m.resolveWith(d,[c,C,w]):m.rejectWith(d,[w,C,g]),w.statusCode(_),_=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,h,r?c:g]),f.fireWith(d,[w,C]),l&&(p.trigger("ajaxComplete",[w,h]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,s,o,a,l,u,c,h=rt.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?rt(d):rt.event,m=rt.Deferred(),f=rt.Callbacks("once memory"),_=h.statusCode||{},g={},v={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!c)for(c={};t=Fn.exec(o);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=v[n]=v[n]||e,g[e]=t),this},overrideMimeType:function(e){return y||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)_[t]=[_[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return u&&u.abort(t),n(0,t),this}};if(m.promise(w).complete=f.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||Rn)+"").replace(Bn,"").replace(Wn,Ln[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=rt.trim(h.dataType||"*").toLowerCase().match(yt)||[""],null==h.crossDomain&&(i=Vn.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Ln[1]&&i[2]===Ln[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ln[3]||("http:"===Ln[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=rt.param(h.data,h.traditional)),H(jn,h,t,w),2===y)return w;l=rt.event&&h.global,l&&0===rt.active++&&rt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Hn.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(On.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Nn.test(s)?s.replace(Nn,"$1_="+Mn++):s+(On.test(s)?"&":"?")+"_="+Mn++)),h.ifModified&&(rt.lastModified[s]&&w.setRequestHeader("If-Modified-Since",rt.lastModified[s]),rt.etag[s]&&w.setRequestHeader("If-None-Match",rt.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+qn+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)w.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===y))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](h[r]);if(u=H(Un,h,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{y=1,u.send(g,n)}catch(C){if(!(2>y))throw C;n(-1,C)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return rt.get(e,t,n,"json")},getScript:function(e,t){return rt.get(e,void 0,t,"script")}}),rt.each(["get","post"],function(e,t){rt[t]=function(e,n,i,r){return rt.isFunction(n)&&(r=r||i,i=n,n=void 0),rt.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),rt._evalUrl=function(e){return rt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(e){if(rt.isFunction(e))return this.each(function(t){rt(this).wrapAll(e.call(this,t))});if(this[0]){var t=rt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(rt.isFunction(e)?function(t){rt(this).wrapInner(e.call(this,t))}:function(){var t=rt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=rt.isFunction(e);return this.each(function(n){rt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||rt.css(e,"display"))},rt.expr.filters.visible=function(e){return!rt.expr.filters.hidden(e)};var Jn=/%20/g,Gn=/\[\]$/,$n=/\r?\n/g,Yn=/^(?:submit|button|image|reset|file)$/i,Zn=/^(?:input|select|textarea|keygen)/i;rt.param=function(e,t){var n,i=[],r=function(e,t){t=rt.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(e)||e.jquery&&!rt.isPlainObject(e))rt.each(e,function(){r(this.name,this.value)});else for(n in e)U(n,e[n],t,r);return i.join("&").replace(Jn,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=rt.prop(this,"elements");return e?rt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!rt(this).is(":disabled")&&Zn.test(this.nodeName)&&!Yn.test(e)&&(this.checked||!At.test(e))}).map(function(e,t){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(e){return{name:t.name,value:e.replace($n,"\r\n")}}):{name:t.name,value:n.replace($n,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||K()}:q;var Xn=0,Qn={},ei=rt.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Qn)Qn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&rt.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var r,s=e.xhr(),o=++Xn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&s.setRequestHeader(r,n[r]+"");s.send(e.hasContent&&e.data||null),t=function(n,r){var a,l,u;if(t&&(r||4===s.readyState))if(delete Qn[o],t=void 0,s.onreadystatechange=rt.noop,r)4!==s.readyState&&s.abort();else{u={},a=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{l=s.statusText}catch(c){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&i(a,l,u,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return rt.globalEval(e),e}}}),rt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),rt.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=mt.head||rt("head")[0]||mt.documentElement;return{send:function(i,r){t=mt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||rt.expando+"_"+Mn++;return this[e]=!0,e}}),rt.ajaxPrefilter("json jsonp",function(t,n,i){var r,s,o,a=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ni,"$1"+r):t.jsonp!==!1&&(t.url+=(On.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||rt.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){o=arguments},i.always(function(){e[r]=s,t[r]&&(t.jsonpCallback=n.jsonpCallback,ti.push(r)),o&&rt.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),rt.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||mt;var i=ht.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=rt.buildFragment([e],t,r),r&&r.length&&rt(r).remove(),rt.merge([],i.childNodes))};var ii=rt.fn.load;rt.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,r,s,o=this,a=e.indexOf(" ");return a>=0&&(i=rt.trim(e.slice(a,e.length)),e=e.slice(0,a)),rt.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&rt.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){r=arguments,o.html(i?rt("<div>").append(rt.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){o.each(n,r||[e.responseText,t,e])}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){rt.fn[t]=function(e){return this.on(t,e)}}),rt.expr.filters.animated=function(e){return rt.grep(rt.timers,function(t){return e===t.elem}).length};var ri=e.document.documentElement;rt.offset={setOffset:function(e,t,n){var i,r,s,o,a,l,u,c=rt.css(e,"position"),h=rt(e),d={};"static"===c&&(e.style.position="relative"),a=h.offset(),s=rt.css(e,"top"),l=rt.css(e,"left"),u=("absolute"===c||"fixed"===c)&&rt.inArray("auto",[s,l])>-1,u?(i=h.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),rt.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):h.css(d)}},rt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){rt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return t=s.documentElement,rt.contains(t,r)?(typeof r.getBoundingClientRect!==xt&&(i=r.getBoundingClientRect()),n=J(s),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),rt.nodeName(e[0],"html")||(n=e.offset()),n.top+=rt.css(e[0],"borderTopWidth",!0),n.left+=rt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-rt.css(i,"marginTop",!0),left:t.left-n.left-rt.css(i,"marginLeft",!0)}
}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ri;e&&!rt.nodeName(e,"html")&&"static"===rt.css(e,"position");)e=e.offsetParent;return e||ri})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);rt.fn[e]=function(i){return Pt(this,function(e,i,r){var s=J(e);return void 0===r?s?t in s?s[t]:s.document.documentElement[i]:e[i]:void(s?s.scrollTo(n?rt(s).scrollLeft():r,n?r:rt(s).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),rt.each(["top","left"],function(e,t){rt.cssHooks[t]=E(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?rt(e).position()[t]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(e,t){rt.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){rt.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||r===!0?"margin":"border");return Pt(this,function(t,n,i){var r;return rt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?rt.css(t,n,o):rt.style(t,n,i,o)},t,s?i:void 0,s,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var si=e.jQuery,oi=e.$;return rt.noConflict=function(t){return e.$===rt&&(e.$=oi),t&&e.jQuery===rt&&(e.jQuery=si),rt},typeof t===xt&&(e.jQuery=e.$=rt),rt});var Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return a[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof o?e.toString():e||0===e?(e=""+e,u.test(e)?e.replace(l,t):e):""}function r(e){return e||0===e?d(e)&&0===e.length?!0:!1:!0}var s={},o=e,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;s.extend=n;var c=Object.prototype.toString;s.toString=c;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var h;s.isFunction=h;var d=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===c.call(e):!1};return s.isArray=d,s.escapeExpression=i,s.isEmpty=r,s}(e),n=function(){"use strict";function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},r=n.fn;return d(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?i(this):h(t)?t.length>0?e.helpers.each(t,n):i(this):r(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,r=t.inverse,s=0,o="";if(d(e)&&(e=e.call(this)),t.data&&(n=_(t.data)),e&&"object"==typeof e)if(h(e))for(var a=e.length;a>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===e.length-1),o+=i(e[s],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=s,n.first=0===s),o+=i(e[l],{data:n}),s++);return 0===s&&(o=r(this)),o}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return d(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function r(e,t){f.log(e,t)}var s={},o=e,a=t,l="1.3.0";s.VERSION=l;var u=4;s.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var h=o.isArray,d=o.isFunction,p=o.toString,m="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:f,log:r,registerHelper:function(e,t,n){if(p.call(e)===m){if(n||t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===m?o.extend(this.partials,e):this.partials[e]=t}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};s.logger=f,s.log=r;var _=function(e){var t={};return o.extend(t,e),t};return s.createFrame=_,s}(t,n),r=function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var i=p[n],r=p[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new h("No environment passed to template");var n=function(e,n,i,r,s,o){var a=t.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(t.compile){var l={helpers:r,partials:s,data:o};return s[n]=t.compile(e,{data:void 0!==o},t),s[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=o(e,t,n):i||(i=this.programs[e]=o(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var s,o,a=r.partial?r:t;r.partial||(s=r.helpers,o=r.partials);var l=e.call(i,a,n,s,o,r.data);return r.partial||t.VM.checkRevision(i.compilerInfo),l}}function s(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r}function o(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function a(e,t,n,i,r,s){var o={partial:!0,helpers:i,partials:r,data:s};if(void 0===e)throw new h("The partial "+t+" could not be found");return e instanceof Function?e(n,o):void 0}function l(){return""}var u={},c=e,h=t,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.checkRevision=i,u.template=r,u.programWithDepth=s,u.program=o,u.invokePartial=a,u.noop=l,u}(t,n,i),s=function(e,t,n,i,r){"use strict";var s,o=e,a=t,l=n,u=i,c=r,h=function(){var e=new o.HandlebarsEnvironment;return u.extend(e,o),e.SafeString=a,e.Exception=l,e.Utils=u,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=h();return d.create=h,s=d}(i,e,n,t,r);return s}();if(function(){var e,t,n,i,r;!function(){if(r=this.Ember=this.Ember||{},"undefined"==typeof r&&(r={}),"undefined"==typeof r.__loader){var s={},o={};e=function(e,t,n){s[e]={deps:t,callback:n}},i=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),i=e.split("/").slice(0,-1),r=0,s=n.length;s>r;r++){var o=n[r];if(".."===o)i.pop();else{if("."===o)continue;i.push(o)}}return i.join("/")}if(o.hasOwnProperty(e))return o[e];if(o[e]={},!s[e])throw new Error("Could not find module "+e);for(var i,r=s[e],a=r.deps,l=r.callback,u=[],c=0,h=a.length;h>c;c++)u.push("exports"===a[c]?i={}:t(n(a[c])));var d=l.apply(this,u);return o[e]=i||d},i._eak_seen=s,r.__loader={define:e,require:n,registry:s}}else e=r.__loader.define,i=n=t=r.__loader.require}(),e("backburner",["backburner/utils","backburner/platform","backburner/binary-search","backburner/deferred-action-queues","exports"],function(e,t,n,i,r){"use strict";function s(e,t){this.queueNames=e,this.options=t||{},this.options.defaultQueue||(this.options.defaultQueue=e[0]),this.instanceStack=[],this._debouncees=[],this._throttlers=[],this._timers=[]}function o(e){return e.onError||e.onErrorTarget&&e.onErrorTarget[e.onErrorMethod]}function a(e){e.begin(),e._autorun=I.setTimeout(function(){e._autorun=null,e.end()})}function l(e,t,n){var i=y();(!e._laterTimer||t<e._laterTimerExpiresAt||e._laterTimerExpiresAt<i)&&(e._laterTimer&&(clearTimeout(e._laterTimer),e._laterTimerExpiresAt<i&&(n=Math.max(0,t-i))),e._laterTimer=I.setTimeout(function(){e._laterTimer=null,e._laterTimerExpiresAt=null,u(e)},n),e._laterTimerExpiresAt=i+n)}function u(e){var t,n,i,r=y();e.run(function(){for(n=w(r,e._timers),t=e._timers.splice(0,n),n=1,i=t.length;i>n;n+=2)e.schedule(e.options.defaultQueue,null,t[n])}),e._timers.length&&l(e,e._timers[0],e._timers[0]-r)}function c(e,t,n){return d(e,t,n)}function h(e,t,n){return d(e,t,n)}function d(e,t,n){for(var i,r=-1,s=0,o=n.length;o>s;s++)if(i=n[s],i[0]===e&&i[1]===t){r=s;break}return r}var p=e.each,m=e.isString,f=e.isFunction,_=e.isNumber,g=e.isCoercableNumber,v=e.wrapInTryCatch,y=e.now,b=t.needsIETryCatchFix,w=n["default"],C=i["default"],x=[].slice,S=[].pop,I=this;if(s.prototype={begin:function(){var e=this.options,t=e&&e.onBegin,n=this.currentInstance;n&&this.instanceStack.push(n),this.currentInstance=new C(this.queueNames,e),t&&t(this.currentInstance,n)},end:function(){var e=this.options,t=e&&e.onEnd,n=this.currentInstance,i=null,r=!1;try{n.flush()}finally{r||(r=!0,this.currentInstance=null,this.instanceStack.length&&(i=this.instanceStack.pop(),this.currentInstance=i),t&&t(n,i))}},run:function(e,t){var n=o(this.options);this.begin(),t||(t=e,e=null),m(t)&&(t=e[t]);var i=x.call(arguments,2),r=!1;if(n)try{return t.apply(e,i)}catch(s){n(s)}finally{r||(r=!0,this.end())}else try{return t.apply(e,i)}finally{r||(r=!0,this.end())}},defer:function(e,t,n){n||(n=t,t=null),m(n)&&(n=t[n]);var i,r=this.DEBUG?new Error:void 0,s=arguments.length;if(s>3){i=new Array(s-3);for(var o=3;s>o;o++)i[o-3]=arguments[o]}else i=void 0;return this.currentInstance||a(this),this.currentInstance.schedule(e,t,n,i,!1,r)},deferOnce:function(e,t,n){n||(n=t,t=null),m(n)&&(n=t[n]);var i,r=this.DEBUG?new Error:void 0,s=arguments.length;if(s>3){i=new Array(s-3);for(var o=3;s>o;o++)i[o-3]=arguments[o]}else i=void 0;return this.currentInstance||a(this),this.currentInstance.schedule(e,t,n,i,!0,r)},setTimeout:function(){function e(){if(v)try{r.apply(a,n)}catch(e){v(e)}else r.apply(a,n)}for(var t=arguments.length,n=new Array(t),i=0;t>i;i++)n[i]=arguments[i];var r,s,a,u,c,h,d=n.length;if(0!==d){if(1===d)r=n.shift(),s=0;else if(2===d)u=n[0],c=n[1],f(c)||f(u[c])?(a=n.shift(),r=n.shift(),s=0):g(c)?(r=n.shift(),s=n.shift()):(r=n.shift(),s=0);else{var p=n[n.length-1];s=g(p)?n.pop():0,u=n[0],h=n[1],f(h)||m(h)&&null!==u&&h in u?(a=n.shift(),r=n.shift()):r=n.shift()}var _=y()+parseInt(s,10);m(r)&&(r=a[r]);var v=o(this.options),b=w(_,this._timers);return this._timers.splice(b,0,_,e),l(this,_,s),e}},throttle:function(e,t){var n,i,r,s,o=this,a=arguments,l=S.call(a);return _(l)||m(l)?(n=l,l=!0):n=S.call(a),n=parseInt(n,10),r=h(e,t,this._throttlers),r>-1?this._throttlers[r]:(s=I.setTimeout(function(){l||o.run.apply(o,a);var n=h(e,t,o._throttlers);n>-1&&o._throttlers.splice(n,1)},n),l&&this.run.apply(this,a),i=[e,t,s],this._throttlers.push(i),i)},debounce:function(e,t){var n,i,r,s,o=this,a=arguments,l=S.call(a);return _(l)||m(l)?(n=l,l=!1):n=S.call(a),n=parseInt(n,10),i=c(e,t,this._debouncees),i>-1&&(r=this._debouncees[i],this._debouncees.splice(i,1),clearTimeout(r[2])),s=I.setTimeout(function(){l||o.run.apply(o,a);var n=c(e,t,o._debouncees);n>-1&&o._debouncees.splice(n,1)},n),l&&-1===i&&o.run.apply(o,a),r=[e,t,s],o._debouncees.push(r),r},cancelTimers:function(){var e=function(e){clearTimeout(e[2])};p(this._throttlers,e),this._throttlers=[],p(this._debouncees,e),this._debouncees=[],this._laterTimer&&(clearTimeout(this._laterTimer),this._laterTimer=null),this._timers=[],this._autorun&&(clearTimeout(this._autorun),this._autorun=null)},hasTimers:function(){return!!this._timers.length||!!this._debouncees.length||!!this._throttlers.length||this._autorun},cancel:function(e){var t=typeof e;if(e&&"object"===t&&e.queue&&e.method)return e.queue.cancel(e);if("function"!==t)return"[object Array]"===Object.prototype.toString.call(e)?this._cancelItem(h,this._throttlers,e)||this._cancelItem(c,this._debouncees,e):void 0;for(var n=0,i=this._timers.length;i>n;n+=2)if(this._timers[n+1]===e)return this._timers.splice(n,2),0===n&&(this._laterTimer&&(clearTimeout(this._laterTimer),this._laterTimer=null),this._timers.length>0&&l(this,this._timers[0],this._timers[0]-y())),!0},_cancelItem:function(e,t,n){var i,r;return n.length<3?!1:(r=e(n[0],n[1],t),r>-1&&(i=t[r],i[2]===n[2])?(t.splice(r,1),clearTimeout(n[2]),!0):!1)}},s.prototype.schedule=s.prototype.defer,s.prototype.scheduleOnce=s.prototype.deferOnce,s.prototype.later=s.prototype.setTimeout,b){var E=s.prototype.run;s.prototype.run=v(E);var k=s.prototype.end;s.prototype.end=v(k)}r["default"]=s}),e("backburner.umd",["./backburner"],function(t){"use strict";var n=t["default"];"function"==typeof e&&e.amd?e(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:"undefined"!=typeof this&&(this.Backburner=n)}),e("backburner/binary-search",["exports"],function(e){"use strict";e["default"]=function(e,t){for(var n,i,r=0,s=t.length-2;s>r;)i=(s-r)/2,n=r+i-i%2,e>=t[n]?r=n+2:s=n;return e>=t[r]?r+2:r}}),e("backburner/deferred-action-queues",["./utils","./queue","exports"],function(e,t,n){"use strict";function i(e,t){var n=this.queues={};this.queueNames=e=e||[],this.options=t,o(e,function(e){n[e]=new l(e,t[e],t)})}function r(e){throw new Error("You attempted to schedule an action in a queue ("+e+") that doesn't exist")}function s(e,t){for(var n,i,r=0,s=t;s>=r;r++)if(n=e.queueNames[r],i=e.queues[n],i._queue.length)return r;return-1}var o=e.each,a=e.isString,l=t["default"];i.prototype={schedule:function(e,t,n,i,s,o){var a=this.queues,l=a[e];return l||r(e),s?l.pushUnique(t,n,i,o):l.push(t,n,i,o)},invoke:function(e,t,n){n&&n.length>0?t.apply(e,n):t.call(e)},invokeWithOnError:function(e,t,n,i,r){try{n&&n.length>0?t.apply(e,n):t.call(e)}catch(s){i(s,r)}},flush:function(){for(var e,t,n,i,r=this.queues,o=this.queueNames,l=0,u=o.length,c=this.options,h=c.onError||c.onErrorTarget&&c.onErrorTarget[c.onErrorMethod],d=h?this.invokeWithOnError:this.invoke;u>l;){e=o[l],t=r[e],n=t._queueBeingFlushed=t._queue.slice(),t._queue=[],t.targetQueues=Object.create(null);var p,m,f,_,g=t.options,v=g&&g.before,y=g&&g.after,b=0,w=n.length;for(w&&v&&v();w>b;)p=n[b],m=n[b+1],f=n[b+2],_=n[b+3],a(m)&&(m=p[m]),m&&d(p,m,f,h,_),b+=4;t._queueBeingFlushed=null,w&&y&&y(),-1!==(i=s(this,l))?l=i:l++}}},n["default"]=i}),e("backburner/platform",["exports"],function(e){"use strict";var t=function(e,t){try{t()}catch(e){}return!!e}();e.needsIETryCatchFix=t}),e("backburner/queue",["exports"],function(e){"use strict";function t(e,t,n){this.name=e,this.globalOptions=n||{},this.options=t,this._queue=[],this.targetQueues=Object.create(null),this._queueBeingFlushed=void 0}t.prototype={push:function(e,t,n,i){var r=this._queue;return r.push(e,t,n,i),{queue:this,target:e,method:t}},pushUniqueWithoutGuid:function(e,t,n,i){for(var r=this._queue,s=0,o=r.length;o>s;s+=4){var a=r[s],l=r[s+1];if(a===e&&l===t)return r[s+2]=n,void(r[s+3]=i)}r.push(e,t,n,i)},targetQueue:function(e,t,n,i,r){for(var s=this._queue,o=0,a=e.length;a>o;o+=4){var l=e[o],u=e[o+1];if(l===n)return s[u+2]=i,void(s[u+3]=r)}e.push(n,s.push(t,n,i,r)-4)},pushUniqueWithGuid:function(e,t,n,i,r){var s=this.targetQueues[e];return s?this.targetQueue(s,t,n,i,r):this.targetQueues[e]=[n,this._queue.push(t,n,i,r)-4],{queue:this,target:t,method:n}},pushUnique:function(e,t,n,i){var r=(this._queue,this.globalOptions.GUID_KEY);if(e&&r){var s=e[r];if(s)return this.pushUniqueWithGuid(s,e,t,n,i)}return this.pushUniqueWithoutGuid(e,t,n,i),{queue:this,target:e,method:t}},flush:function(){var e,t,n,i,r,s=this._queue,o=this.globalOptions,a=this.options,l=a&&a.before,u=a&&a.after,c=o.onError||o.onErrorTarget&&o.onErrorTarget[o.onErrorMethod],h=s.length;for(this.targetQueues=Object.create(null),h&&l&&l(),r=0;h>r;r+=4)if(e=s[r],t=s[r+1],n=s[r+2],i=s[r+3],n&&n.length>0)if(c)try{t.apply(e,n)}catch(d){c(d)}else t.apply(e,n);else if(c)try{t.call(e)}catch(d){c(d)}else t.call(e);h&&u&&u(),s.length>h?(this._queue=s.slice(h),this.flush()):this._queue.length=0},cancel:function(e){var t,n,i,r,s=this._queue,o=e.target,a=e.method,l=this.globalOptions.GUID_KEY;if(l&&this.targetQueues&&o){var u=this.targetQueues[o[l]];if(u)for(i=0,r=u.length;r>i;i++)u[i]===a&&u.splice(i,1)}for(i=0,r=s.length;r>i;i+=4)if(t=s[i],n=s[i+1],t===o&&n===a)return s.splice(i,4),!0;if(s=this._queueBeingFlushed)for(i=0,r=s.length;r>i;i+=4)if(t=s[i],n=s[i+1],t===o&&n===a)return s[i+1]=null,!0}},e["default"]=t}),e("backburner/utils",["exports"],function(e){"use strict";function t(e,t){for(var n=0;n<e.length;n++)t(e[n])}function n(e){return"string"==typeof e}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function s(e){return r(e)||a.test(e)}function o(e){return function(){try{return e.apply(this,arguments)}catch(t){throw t}}}var a=/\d+/;e.each=t;var l=Date.now||function(){return(new Date).getTime()};e.now=l,e.isString=n,e.isFunction=i,e.isNumber=r,e.isCoercableNumber=s,e.wrapInTryCatch=o}),e("calculateVersion",[],function(){"use strict";var e=n("fs"),t=n("path");module.exports=function(){var i=n("../package.json").version,r=[i],s=t.join(__dirname,"..",".git"),o=t.join(s,"HEAD");if(i.indexOf("+")>-1){try{if(e.existsSync(o)){var a,l=e.readFileSync(o,{encoding:"utf8"}),u=l.split("/").slice(-1)[0].trim(),c=l.split(" ")[1];if(c){var h=t.join(s,c.trim());a=e.readFileSync(h)}else a=u;r.push(a.slice(0,10))}}catch(d){console.error(d.stack)}return r.join(".")}return i}}),e("container",["container/container","exports"],function(e,t){"use strict";r.MODEL_FACTORY_INJECTIONS=!1,r.ENV&&"undefined"!=typeof r.ENV.MODEL_FACTORY_INJECTIONS&&(r.MODEL_FACTORY_INJECTIONS=!!r.ENV.MODEL_FACTORY_INJECTIONS);var n=e["default"];t["default"]=n}),e("container/container",["ember-metal/core","ember-metal/keys","ember-metal/dictionary","exports"],function(e,t,n,i){"use strict";function r(e){this.parent=e,this.children=[],this.resolver=e&&e.resolver||function(){},this.registry=x(e?e.registry:null),this.cache=x(e?e.cache:null),this.factoryCache=x(e?e.factoryCache:null),this.resolveCache=x(e?e.resolveCache:null),this.typeInjections=x(e?e.typeInjections:null),this.injections=x(null),this.normalizeCache=x(null),this.factoryTypeInjections=x(e?e.factoryTypeInjections:null),this.factoryInjections=x(null),this._options=x(e?e._options:null),this._typeOptions=x(e?e._typeOptions:null)}function s(e,t){var n=e.resolveCache[t];if(n)return n;var i=e.resolver(t)||e.registry[t];return e.resolveCache[t]=i,i}function o(e,t){return e.cache[t]?!0:!!e.resolve(t)}function a(e,t,n){if(n=n||{},e.cache[t]&&n.singleton!==!1)return e.cache[t];var i=f(e,t);return void 0!==i?(u(e,t)&&n.singleton!==!1&&(e.cache[t]=i),i):void 0}function l(e){throw new Error(e+" is not currently supported on child containers")}function u(e,t){var n=h(e,t,"singleton");return n!==!1}function c(e,t){var n={};if(!t)return n;for(var i,r,s=0,o=t.length;o>s;s++){if(i=t[s],r=a(e,i.fullName),void 0===r)throw new Error("Attempting to inject an unknown injection: `"+i.fullName+"`");n[i.property]=r}return n}function h(e,t,n){var i=e._options[t];if(i&&void 0!==i[n])return i[n];var r=t.split(":")[0];return i=e._typeOptions[r],i?i[n]:void 0}function d(e,t){var n=e.factoryCache;if(n[t])return n[t];var i=e.resolve(t);if(void 0!==i){var r=t.split(":")[0];if(!i||"function"!=typeof i.extend||!w.MODEL_FACTORY_INJECTIONS&&"model"===r)return n[t]=i,i;var s=p(e,t),o=m(e,t);o._toString=e.makeToString(i,t);var a=i.extend(s);return a.reopenClass(o),n[t]=a,a}}function p(e,t){var n=t.split(":"),i=n[0],r=[];return r=r.concat(e.typeInjections[i]||[]),r=r.concat(e.injections[t]||[]),r=c(e,r),r._debugContainerKey=t,r.container=e,r}function m(e,t){var n=t.split(":"),i=n[0],r=[];return r=r.concat(e.factoryTypeInjections[i]||[]),r=r.concat(e.factoryInjections[t]||[]),r=c(e,r),r._debugContainerKey=t,r}function f(e,t){var n=d(e,t);if(h(e,t,"instantiate")===!1)return n;if(n){if("function"!=typeof n.create)throw new Error("Failed to create an instance of '"+t+"'. Most likely an improperly defined class or an invalid module export.");return"function"==typeof n.extend?n.create():n.create(p(e,t))}}function _(e,t){for(var n,i,r=e.cache,s=C(r),o=0,a=s.length;a>o;o++)n=s[o],i=r[n],h(e,n,"instantiate")!==!1&&t(i)}function g(e){_(e,function(e){e.destroy()}),e.cache.dict=x(null)}function v(e,t,n,i){var r=e[t];r||(r=[],e[t]=r),r.push({property:n,fullName:i})}function y(e){if(!S.test(e))throw new TypeError("Invalid Fullname, expected: `type:name` got: "+e);return!0}function b(e,t,n,i){var r=e[t]=e[t]||[];r.push({property:n,fullName:i})}var w=e["default"],C=t["default"],x=n["default"];r.prototype={parent:null,children:null,resolver:null,registry:null,cache:null,typeInjections:null,injections:null,_options:null,_typeOptions:null,child:function(){var e=new r(this);return this.children.push(e),e},set:function(e,t,n){e[t]=n},register:function(e,t,n){if(void 0===t)throw new TypeError("Attempting to register an unknown factory: `"+e+"`");var i=this.normalize(e);if(i in this.cache)throw new Error("Cannot re-register: `"+e+"`, as it has already been looked up.");this.registry[i]=t,this._options[i]=n||{}},unregister:function(e){var t=this.normalize(e);delete this.registry[t],delete this.cache[t],delete this.factoryCache[t],delete this.resolveCache[t],delete this._options[t]},resolve:function(e){return s(this,this.normalize(e))},describe:function(e){return e},normalizeFullName:function(e){return e},normalize:function(e){return this.normalizeCache[e]||(this.normalizeCache[e]=this.normalizeFullName(e))},makeToString:function(e){return e.toString()},lookup:function(e,t){return a(this,this.normalize(e),t)},lookupFactory:function(e){return d(this,this.normalize(e))},has:function(e){return o(this,this.normalize(e))},optionsForType:function(e,t){this.parent&&l("optionsForType"),this._typeOptions[e]=t},options:function(e,t){this.optionsForType(e,t)},typeInjection:function(e,t,n){this.parent&&l("typeInjection");var i=n.split(":")[0];if(i===e)throw new Error("Cannot inject a `"+n+"` on other "+e+"(s). Register the `"+n+"` as a different type and perform the typeInjection.");v(this.typeInjections,e,t,n)},injection:function(e,t,n){this.parent&&l("injection"),y(n);var i=this.normalize(n);if(-1===e.indexOf(":"))return this.typeInjection(e,t,i);var r=this.normalize(e);if(this.cache[r])throw new Error("Attempted to register an injection for a type that has already been looked up. ('"+r+"', '"+t+"', '"+n+"')");b(this.injections,r,t,i)},factoryTypeInjection:function(e,t,n){this.parent&&l("factoryTypeInjection"),v(this.factoryTypeInjections,e,t,this.normalize(n))},factoryInjection:function(e,t,n){this.parent&&l("injection");var i=this.normalize(e),r=this.normalize(n);if(y(n),-1===e.indexOf(":"))return this.factoryTypeInjection(i,t,r);if(this.factoryCache[i])throw new Error("Attempted to register a factoryInjection for a type that has already been looked up. ('"+i+"', '"+t+"', '"+n+"')");b(this.factoryInjections,i,t,r)},destroy:function(){for(var e=0,t=this.children.length;t>e;e++)this.children[e].destroy();this.children=[],_(this,function(e){e.destroy()}),this.parent=void 0,this.isDestroyed=!0},reset:function(){for(var e=0,t=this.children.length;t>e;e++)g(this.children[e]);g(this)}};var S=/^[^:]+.+:[^:]+$/;i["default"]=r}),e("ember-application",["ember-metal/core","ember-runtime/system/lazy_load","ember-application/system/dag","ember-application/system/resolver","ember-application/system/application","ember-application/ext/controller"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t.runLoadHooks,a=n["default"],l=i.Resolver,u=i["default"],c=r["default"];s.Application=c,s.DAG=a,s.Resolver=l,s.DefaultResolver=u,o("Ember.Application",c)}),e("ember-application/ext/controller",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/error","ember-metal/utils","ember-metal/computed","ember-runtime/mixins/controller","ember-routing/system/controller_for","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e,t,n){var i,r,s,o=[];for(r=0,s=n.length;s>r;r++)i=n[r],-1===i.indexOf(":")&&(i="controller:"+i),t.has(i)||o.push(i);if(o.length)throw new h(d(e)+" needs [ "+o.join(", ")+" ] but "+(o.length>1?"they":"it")+" could not be found")}var c=(e["default"],t.get),h=(n.set,i["default"]),d=r.inspect,p=s.computed,m=o["default"],f=(r.meta,a["default"]),_=p(function(){var e=this;return{needs:c(e,"needs"),container:c(e,"container"),unknownProperty:function(t){var n,i,r,s=this.needs;for(i=0,r=s.length;r>i;i++)if(n=s[i],n===t)return this.container.lookup("controller:"+t);var o=d(e)+"#needs does not include `"+t+"`. To access the "+t+" controller from "+d(e)+", "+d(e)+" should have a `needs` property that is an array of the controllers it has access to.";throw new ReferenceError(o)},setUnknownProperty:function(t){throw new Error("You cannot overwrite the value of `controllers."+t+"` of "+d(e))}}});m.reopen({concatenatedProperties:["needs"],needs:[],init:function(){var e=c(this,"needs"),t=c(e,"length");t>0&&(this.container&&u(this,this.container,e),c(this,"controllers")),this._super.apply(this,arguments)},controllerFor:function(e){return f(c(this,"container"),e)},controllers:_}),l["default"]=m}),e("ember-application/system/application",["ember-metal","ember-metal/property_get","ember-metal/property_set","ember-runtime/system/lazy_load","ember-application/system/dag","ember-runtime/system/namespace","ember-runtime/mixins/deferred","ember-application/system/resolver","ember-metal/platform","ember-metal/run_loop","ember-metal/utils","container/container","ember-runtime/controllers/controller","ember-metal/enumerable_utils","ember-runtime/controllers/object_controller","ember-runtime/controllers/array_controller","ember-handlebars/controls/select","ember-views/system/event_dispatcher","ember-views/system/jquery","ember-routing/system/route","ember-routing/system/router","ember-routing/location/hash_location","ember-routing/location/history_location","ember-routing/location/auto_location","ember-routing/location/none_location","ember-routing/system/cache","ember-metal/core","ember-handlebars-compiler","exports"],function(e,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S,I,E,k,T,P){"use strict";function A(e){var t=[];for(var n in e)t.push(n);return t}function M(e){function t(e){return i.resolve(e)}e.get("resolver");var n=e.get("resolver")||e.get("Resolver")||H,i=n.create({namespace:e});return t.describe=function(e){return i.lookupDescription(e)},t.makeToString=function(e,t){return i.makeToString(e,t)},t.normalize=function(e){return i.normalize?i.normalize(e):e},t.__resolver__=i,t}var O,D=e["default"],L=n.get,R=i.set,B=r.runLoadHooks,N=s["default"],F=o["default"],z=a["default"],H=l["default"],W=u.create,V=c["default"],j=(h.canInvoke,d["default"]),U=p["default"],q=m["default"],K=f["default"],J=_["default"],G=g["default"],$=v["default"],Y=y["default"],Z=b["default"],X=w["default"],Q=C["default"],et=x["default"],tt=S["default"],nt=I["default"],it=E["default"],rt=k.K,st=T["default"],ot=F.extend(z,{_suppressDeferredDeprecation:!0,rootElement:"body",eventDispatcher:null,customEvents:null,_readinessDeferrals:1,init:function(){if(this.$||(this.$=Y),this.__container__=this.buildContainer(),this.Router=this.defaultRouter(),this._super(),this.scheduleInitialize(),D.libraries.registerCoreLibrary("Handlebars"+(st.compile?"":"-runtime"),st.VERSION),D.libraries.registerCoreLibrary("jQuery",Y().jquery),D.LOG_VERSION){D.LOG_VERSION=!1;var e=q.map(D.libraries,function(e){return L(e,"name.length")}),t=Math.max.apply(this,e);D.libraries.each(function(e){new Array(t-e.length+1).join(" ")})}},buildContainer:function(){var e=this.__container__=ot.buildContainer(this);return e},defaultRouter:function(){if(this.Router!==!1){var e=this.__container__;return this.Router&&(e.unregister("router:main"),e.register("router:main",this.Router)),e.lookupFactory("router:main")}},scheduleInitialize:function(){var e=this;!this.$||this.$.isReady?V.schedule("actions",e,"_initialize"):this.$().ready(function(){V(e,"_initialize")})},deferReadiness:function(){this._readinessDeferrals++},advanceReadiness:function(){this._readinessDeferrals--,0===this._readinessDeferrals&&V.once(this,this.didBecomeReady)},register:function(){var e=this.__container__;e.register.apply(e,arguments)},inject:function(){var e=this.__container__;e.injection.apply(e,arguments)},initialize:function(){},_initialize:function(){if(!this.isDestroyed){if(this.Router){var e=this.__container__;e.unregister("router:main"),e.register("router:main",this.Router)}return this.runInitializers(),B("application",this),this.advanceReadiness(),this}},reset:function(){function e(){var e=this.__container__.lookup("router:main");e.reset(),V(this.__container__,"destroy"),this.buildContainer(),V.schedule("actions",this,function(){this._initialize()})}this._readinessDeferrals=1,V.join(this,e)},runInitializers:function(){for(var e,t=L(this.constructor,"initializers"),n=A(t),i=this.__container__,r=new N,s=this,o=0;o<n.length;o++)e=t[n[o]],r.addEdges(e.name,e.initialize,e.before,e.after);r.topsort(function(e){var t=e.value;t(i,s)})},didBecomeReady:function(){this.setupEventDispatcher(),this.ready(),this.startRouting(),D.testing||(D.Namespace.processAll(),D.BOOTED=!0),this.resolve(this)},setupEventDispatcher:function(){var e=L(this,"customEvents"),t=L(this,"rootElement"),n=this.__container__.lookup("event_dispatcher:main");R(this,"eventDispatcher",n),n.setup(e,t)},startRouting:function(){var e=this.__container__.lookup("router:main");e&&e.startRouting()},handleURL:function(e){var t=this.__container__.lookup("router:main");t.handleURL(e)},ready:rt,resolver:null,Resolver:null,willDestroy:function(){D.BOOTED=!1,this.__container__.lookup("router:main").reset(),this.__container__.destroy()},initializer:function(e){this.constructor.initializer(e)},then:function(){this._super.apply(this,arguments)}});ot.reopenClass({initializers:W(null),initializer:function(e){void 0!==this.superclass.initializers&&this.superclass.initializers===this.initializers&&this.reopenClass({initializers:W(this.initializers)}),this.initializers[e.name]=e},buildContainer:function(e){var n=new j;return n.set=R,n.resolver=M(e),n.normalizeFullName=n.resolver.normalize,n.describe=n.resolver.describe,n.makeToString=n.resolver.makeToString,n.optionsForType("component",{singleton:!1}),n.optionsForType("view",{singleton:!1}),n.optionsForType("template",{instantiate:!1}),n.optionsForType("helper",{instantiate:!1}),n.register("application:main",e,{instantiate:!1}),n.register("controller:basic",U,{instantiate:!1}),n.register("controller:object",K,{instantiate:!1}),n.register("controller:array",J,{instantiate:!1}),n.register("view:select",G),n.register("route:basic",Z,{instantiate:!1}),n.register("event_dispatcher:main",$),n.register("router:main",X),n.injection("router:main","namespace","application:main"),n.register("location:auto",tt),n.register("location:hash",Q),n.register("location:history",et),n.register("location:none",nt),n.injection("controller","target","router:main"),n.injection("controller","namespace","application:main"),n.register("-bucket-cache:main",it),n.injection("router","_bucketCache","-bucket-cache:main"),n.injection("route","_bucketCache","-bucket-cache:main"),n.injection("controller","_bucketCache","-bucket-cache:main"),n.injection("route","router","router:main"),n.injection("location","rootURL","-location-setting:root-url"),n.register("resolver-for-debugging:main",n.resolver.__resolver__,{instantiate:!1}),n.injection("container-debug-adapter:main","resolver","resolver-for-debugging:main"),n.injection("data-adapter:main","containerDebugAdapter","container-debug-adapter:main"),O||(O=t("ember-extension-support/container_debug_adapter")["default"]),n.register("container-debug-adapter:main",O),n
}}),P["default"]=ot}),e("ember-application/system/dag",["ember-metal/error","exports"],function(e,t){"use strict";function n(e,t,i,r){var s,o=e.name,a=e.incoming,l=e.incomingNames,u=l.length;if(i||(i={}),r||(r=[]),!i.hasOwnProperty(o)){for(r.push(o),i[o]=!0,s=0;u>s;s++)n(a[l[s]],t,i,r);t(e,r),r.pop()}}function i(){this.names=[],this.vertices=Object.create(null)}function r(e){this.name=e,this.incoming={},this.incomingNames=[],this.hasOutgoing=!1,this.value=null}var s=e["default"];i.prototype.add=function(e){if(!e)throw new Error("Can't add Vertex without name");if(void 0!==this.vertices[e])return this.vertices[e];var t=new r(e);return this.vertices[e]=t,this.names.push(e),t},i.prototype.map=function(e,t){this.add(e).value=t},i.prototype.addEdge=function(e,t){function i(e,n){if(e.name===t)throw new s("cycle detected: "+t+" <- "+n.join(" <- "))}if(e&&t&&e!==t){var r=this.add(e),o=this.add(t);o.incoming.hasOwnProperty(e)||(n(r,i),r.hasOutgoing=!0,o.incoming[e]=r,o.incomingNames.push(e))}},i.prototype.topsort=function(e){var t,i,r={},s=this.vertices,o=this.names,a=o.length;for(t=0;a>t;t++)i=s[o[t]],i.hasOutgoing||n(i,e,r)},i.prototype.addEdges=function(e,t,n,i){var r;if(this.map(e,t),n)if("string"==typeof n)this.addEdge(e,n);else for(r=0;r<n.length;r++)this.addEdge(e,n[r]);if(i)if("string"==typeof i)this.addEdge(i,e);else for(r=0;r<i.length;r++)this.addEdge(i[r],e)},t["default"]=i}),e("ember-application/system/resolver",["ember-metal/core","ember-metal/property_get","ember-metal/logger","ember-runtime/system/string","ember-runtime/system/object","ember-runtime/system/namespace","ember-handlebars","ember-metal/dictionary","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=e["default"],c=t.get,h=n["default"],d=i.classify,p=i.capitalize,m=i.decamelize,f=r["default"],_=s["default"],g=o["default"],v=f.extend({namespace:null,normalize:u.required(Function),resolve:u.required(Function),parseName:u.required(Function),lookupDescription:u.required(Function),makeToString:u.required(Function),resolveOther:u.required(Function),_logLookup:u.required(Function)});l.Resolver=v;var y=a["default"];l["default"]=f.extend({namespace:null,init:function(){this._parseNameCache=y(null)},normalize:function(e){var t=e.split(":",2),n=t[0],i=t[1];if("template"!==n){var r=i;return r.indexOf(".")>-1&&(r=r.replace(/\.(.)/g,function(e){return e.charAt(1).toUpperCase()})),i.indexOf("_")>-1&&(r=r.replace(/_(.)/g,function(e){return e.charAt(1).toUpperCase()})),n+":"+r}return e},resolve:function(e){var t,n=this.parseName(e),i=n.resolveMethodName;if(!n.name||!n.type)throw new TypeError("Invalid fullName: `"+e+"`, must be of the form `type:name` ");return this[i]&&(t=this[i](n)),t||(t=this.resolveOther(n)),n.root&&n.root.LOG_RESOLVER&&this._logLookup(t,n),t},parseName:function(e){return this._parseNameCache[e]||(this._parseNameCache[e]=this._parseName(e))},_parseName:function(e){var t=e.split(":"),n=t[0],i=t[1],r=i,s=c(this,"namespace"),o=s;if("template"!==n&&-1!==r.indexOf("/")){var a=r.split("/");r=a[a.length-1];var l=p(a.slice(0,-1).join("."));o=_.byName(l)}return{fullName:e,type:n,fullNameWithoutType:i,name:r,root:o,resolveMethodName:"resolve"+d(n)}},lookupDescription:function(e){var t=this.parseName(e);if("template"===t.type)return"template at "+t.fullNameWithoutType.replace(/\./g,"/");var n=t.root+"."+d(t.name);return"model"!==t.type&&(n+=d(t.type)),n},makeToString:function(e){return e.toString()},useRouterNaming:function(e){e.name=e.name.replace(/\./g,"_"),"basic"===e.name&&(e.name="")},resolveTemplate:function(e){var t=e.fullNameWithoutType.replace(/\./g,"/");return u.TEMPLATES[t]?u.TEMPLATES[t]:(t=m(t),u.TEMPLATES[t]?u.TEMPLATES[t]:void 0)},resolveView:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveController:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveRoute:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveModel:function(e){var t=d(e.name),n=c(e.root,t);return n?n:void 0},resolveHelper:function(e){return this.resolveOther(e)||g.helpers[e.fullNameWithoutType]},resolveOther:function(e){var t=d(e.name)+d(e.type),n=c(e.root,t);return n?n:void 0},_logLookup:function(e,t){var n,i;n=e?"[]":"[ ]",i=t.fullName.length>60?".":new Array(60-t.fullName.length).join("."),h.info(n,t.fullName,i,this.lookupDescription(t.fullName))}})}),e("ember-extension-support",["ember-metal/core","ember-extension-support/data_adapter","ember-extension-support/container_debug_adapter"],function(e,t,n){"use strict";var i=e["default"],r=t["default"],s=n["default"];i.DataAdapter=r,i.ContainerDebugAdapter=s}),e("ember-extension-support/container_debug_adapter",["ember-metal/core","ember-runtime/system/native_array","ember-metal/utils","ember-runtime/system/string","ember-runtime/system/namespace","ember-runtime/system/object","exports"],function(e,t,n,i,r,s,o){"use strict";var a=e["default"],l=t.A,u=n.typeOf,c=i.dasherize,h=i.classify,d=r["default"],p=s["default"];o["default"]=p.extend({container:null,resolver:null,canCatalogEntriesByType:function(e){return"model"===e||"template"===e?!1:!0},catalogEntriesByType:function(e){var t=l(d.NAMESPACES),n=l(),i=new RegExp(h(e)+"$");return t.forEach(function(e){if(e!==a)for(var t in e)if(e.hasOwnProperty(t)&&i.test(t)){var r=e[t];"class"===u(r)&&n.push(c(t.replace(i,"")))}}),n}})}),e("ember-extension-support/data_adapter",["ember-metal/core","ember-metal/property_get","ember-metal/run_loop","ember-runtime/system/string","ember-runtime/system/namespace","ember-runtime/system/object","ember-runtime/system/native_array","ember-application/system/application","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=e["default"],c=t.get,h=n["default"],d=i.dasherize,p=r["default"],m=s["default"],f=o.A,_=a["default"];l["default"]=m.extend({init:function(){this._super(),this.releaseMethods=f()},container:null,containerDebugAdapter:void 0,attributeLimit:3,releaseMethods:f(),getFilters:function(){return f()},watchModelTypes:function(e,t){var n,i=this.getModelTypes(),r=this,s=f();n=i.map(function(e){var n=e.klass,i=r.wrapModelType(n,e.name);return s.push(r.observeModelType(n,t)),i}),e(n);var o=function(){s.forEach(function(e){e()}),r.releaseMethods.removeObject(o)};return this.releaseMethods.pushObject(o),o},_nameToClass:function(e){return"string"==typeof e&&(e=this.container.lookupFactory("model:"+e)),e},watchRecords:function(e,t,n,i){var r,s=this,o=f(),a=this.getRecords(e),l=function(e){n([e])},c=a.map(function(e){return o.push(s.observeRecord(e,l)),s.wrapRecord(e)}),h=function(e,n,r,a){for(var u=n;n+a>u;u++){var c=e.objectAt(u),h=s.wrapRecord(c);o.push(s.observeRecord(c,l)),t([h])}r&&i(n,r)},d={didChange:h,willChange:u.K};return a.addArrayObserver(s,d),r=function(){o.forEach(function(e){e()}),a.removeArrayObserver(s,d),s.releaseMethods.removeObject(r)},t(c),this.releaseMethods.pushObject(r),r},willDestroy:function(){this._super(),this.releaseMethods.forEach(function(e){e()})},detect:function(){return!1},columnsForType:function(){return f()},observeModelType:function(e,t){var n=this,i=this.getRecords(e),r=function(){t([n.wrapModelType(e)])},s={didChange:function(){h.scheduleOnce("actions",this,r)},willChange:u.K};i.addArrayObserver(this,s);var o=function(){i.removeArrayObserver(n,s)};return o},wrapModelType:function(e,t){var n,i=this.getRecords(e);return n={name:t||e.toString(),count:c(i,"length"),columns:this.columnsForType(e),object:e}},getModelTypes:function(){var e,t=this,n=this.get("containerDebugAdapter");return e=n.canCatalogEntriesByType("model")?n.catalogEntriesByType("model"):this._getObjectsOnNamespaces(),e=f(e).map(function(e){return{klass:t._nameToClass(e),name:e}}),e=f(e).filter(function(e){return t.detect(e.klass)}),f(e)},_getObjectsOnNamespaces:function(){var e=f(p.NAMESPACES),t=f(),n=this;return e.forEach(function(e){for(var i in e)if(e.hasOwnProperty(i)&&n.detect(e[i])){var r=d(i);e instanceof _||!e.toString()||(r=e+"/"+r),t.push(r)}}),t},getRecords:function(){return f()},wrapRecord:function(e){var t={object:e};return t.columnValues=this.getRecordColumnValues(e),t.searchKeywords=this.getRecordKeywords(e),t.filterValues=this.getRecordFilterValues(e),t.color=this.getRecordColor(e),t},getRecordColumnValues:function(){return{}},getRecordKeywords:function(){return f()},getRecordFilterValues:function(){return{}},getRecordColor:function(){return null},observeRecord:function(){return function(){}}})}),e("ember-extension-support/initializers",[],function(){"use strict"}),e("ember-handlebars-compiler",["ember-metal/core","exports"],function(e,i){var r=e["default"];"undefined"==typeof r.assert&&(r.assert=function(){}),"undefined"==typeof r.FEATURES&&(r.FEATURES={isEnabled:function(){}});var s,o,a=Object.create||function(e){function t(){}return t.prototype=e,new t},l=r.imports&&r.imports.Handlebars||this&&this.Handlebars;l||"function"!=typeof n||(l=n("handlebars"));var u=r.Handlebars=a(l);u.helper=function(e,n){s||(s=t("ember-views/views/view")["default"]),o||(o=t("ember-views/views/component")["default"]),s.detect(n)?u.registerHelper(e,u.makeViewHelper(n)):u.registerBoundHelper.apply(null,arguments)},u.makeViewHelper=function(e){return function(t){return u.helpers.view.call(this,e,t)}},u.helpers=a(l.helpers),u.Compiler=function(){},l.Compiler&&(u.Compiler.prototype=a(l.Compiler.prototype)),u.Compiler.prototype.compiler=u.Compiler,u.JavaScriptCompiler=function(){},l.JavaScriptCompiler&&(u.JavaScriptCompiler.prototype=a(l.JavaScriptCompiler.prototype),u.JavaScriptCompiler.prototype.compiler=u.JavaScriptCompiler),u.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",u.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},u.JavaScriptCompiler.prototype.appendToBuffer=function(e){return"data.buffer.push("+e+");"};var c=/helpers\.(.*?)\)/,h=/helpers\['(.*?)'/,d=/(.*blockHelperMissing\.call\(.*)(stack[0-9]+)(,.*)/;u.JavaScriptCompiler.stringifyLastBlockHelperMissingInvocation=function(e){var t=e[e.length-1],n=(c.exec(t)||h.exec(t))[1],i=d.exec(t);e[e.length-1]=i[1]+"'"+n+"'"+i[3]};var p=u.JavaScriptCompiler.stringifyLastBlockHelperMissingInvocation,m=u.JavaScriptCompiler.prototype.blockValue;u.JavaScriptCompiler.prototype.blockValue=function(){m.apply(this,arguments),p(this.source)};var f=u.JavaScriptCompiler.prototype.ambiguousBlockValue;u.JavaScriptCompiler.prototype.ambiguousBlockValue=function(){f.apply(this,arguments),p(this.source)},u.Compiler.prototype.mustache=function(e){if(!e.params.length&&!e.hash){var t=new l.AST.IdNode([{part:"_triageMustache"}]);e.escaped||(e.hash=e.hash||new l.AST.HashNode([]),e.hash.pairs.push(["unescaped",new l.AST.StringNode("true")])),e=new l.AST.MustacheNode([t].concat([e.id]),e.hash,!e.escaped)}return l.Compiler.prototype.mustache.call(this,e)},u.precompile=function(e,t){var n=l.parse(e),i={knownHelpers:{action:!0,unbound:!0,"bind-attr":!0,template:!0,view:!0,_triageMustache:!0},data:!0,stringParams:!0};t=void 0===t?!0:t;var r=(new u.Compiler).compile(n,i);return(new u.JavaScriptCompiler).compile(r,i,void 0,t)},l.compile&&(u.compile=function(e){var t=l.parse(e),n={data:!0,stringParams:!0},i=(new u.Compiler).compile(t,n),r=(new u.JavaScriptCompiler).compile(i,n,void 0,!0),s=u.template(r);return s.isMethod=!1,s}),i["default"]=u}),e("ember-handlebars",["ember-handlebars-compiler","ember-metal/core","ember-runtime/system/lazy_load","ember-handlebars/loader","ember-handlebars/ext","ember-handlebars/string","ember-handlebars/helpers/shared","ember-handlebars/helpers/binding","ember-handlebars/helpers/collection","ember-handlebars/helpers/view","ember-handlebars/helpers/unbound","ember-handlebars/helpers/debug","ember-handlebars/helpers/each","ember-handlebars/helpers/template","ember-handlebars/helpers/partial","ember-handlebars/helpers/yield","ember-handlebars/helpers/loc","ember-handlebars/controls/checkbox","ember-handlebars/controls/select","ember-handlebars/controls/text_area","ember-handlebars/controls/text_field","ember-handlebars/controls/text_support","ember-handlebars/controls","ember-handlebars/component_lookup","ember-handlebars/views/handlebars_bound_view","ember-handlebars/views/metamorph_view","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S,I,E){"use strict";var k=e["default"],T=t["default"],P=n.runLoadHooks,A=i["default"],M=r.normalizePath,O=r.template,D=r.makeBoundHelper,L=r.registerBoundHelper,R=r.resolveHash,B=r.resolveParams,N=r.getEscaped,F=r.handlebarsGet,z=r.evaluateUnboundHelper,H=r.helperMissingHelper,W=r.blockHelperMissingHelper,V=o["default"],j=a.bind,U=a._triageMustacheHelper,q=a.resolveHelper,K=a.bindHelper,J=a.boundIfHelper,G=a.unboundIfHelper,$=a.withHelper,Y=a.ifHelper,Z=a.unlessHelper,X=a.bindAttrHelper,Q=a.bindAttrHelperDeprecated,et=a.bindClasses,tt=l["default"],nt=u.ViewHelper,it=u.viewHelper,rt=c["default"],st=h.logHelper,ot=h.debuggerHelper,at=d.EachView,lt=d.GroupedEach,ut=d.eachHelper,ct=p["default"],ht=m["default"],dt=f["default"],pt=_["default"],mt=g["default"],ft=v.Select,_t=v.SelectOption,gt=v.SelectOptgroup,vt=y["default"],yt=b["default"],bt=w["default"],wt=C.inputHelper,Ct=C.textareaHelper,xt=x["default"],St=S._HandlebarsBoundView,It=S.SimpleHandlebarsView,Et=I._wrapMap,kt=I._SimpleMetamorphView,Tt=I._MetamorphView,Pt=I._Metamorph;k.bootstrap=A,k.template=O,k.makeBoundHelper=D,k.registerBoundHelper=L,k.resolveHash=R,k.resolveParams=B,k.resolveHelper=q,k.get=F,k.getEscaped=N,k.evaluateUnboundHelper=z,k.bind=j,k.bindClasses=et,k.EachView=at,k.GroupedEach=lt,k.resolvePaths=V,k.ViewHelper=nt,k.normalizePath=M,T.Handlebars=k,T.ComponentLookup=xt,T._SimpleHandlebarsView=It,T._HandlebarsBoundView=St,T._SimpleMetamorphView=kt,T._MetamorphView=Tt,T._Metamorph=Pt,T._metamorphWrapMap=Et,T.TextSupport=bt,T.Checkbox=mt,T.Select=ft,T.SelectOption=_t,T.SelectOptgroup=gt,T.TextArea=vt,T.TextField=yt,T.TextSupport=bt,k.registerHelper("helperMissing",H),k.registerHelper("blockHelperMissing",W),k.registerHelper("bind",K),k.registerHelper("boundIf",J),k.registerHelper("_triageMustache",U),k.registerHelper("unboundIf",G),k.registerHelper("with",$),k.registerHelper("if",Y),k.registerHelper("unless",Z),k.registerHelper("bind-attr",X),k.registerHelper("bindAttr",Q),k.registerHelper("collection",tt),k.registerHelper("log",st),k.registerHelper("debugger",ot),k.registerHelper("each",ut),k.registerHelper("loc",pt),k.registerHelper("partial",ht),k.registerHelper("template",ct),k.registerHelper("yield",dt),k.registerHelper("view",it),k.registerHelper("unbound",rt),k.registerHelper("input",wt),k.registerHelper("textarea",Ct),P("Ember.Handlebars",k),E["default"]=k}),e("ember-handlebars/component_lookup",["ember-runtime/system/object","exports"],function(e,t){"use strict";var n=e["default"],i=n.extend({lookupFactory:function(e,t){t=t||this.container;var n="component:"+e,i="template:components/"+e,s=t&&t.has(i);s&&t.injection(n,"layout",i);var o=t.lookupFactory(n);return s||o?(o||(t.register(n,r.Component),o=t.lookupFactory(n)),o):void 0}});t["default"]=i}),e("ember-handlebars/controls",["ember-handlebars/controls/checkbox","ember-handlebars/controls/text_field","ember-handlebars/controls/text_area","ember-metal/core","ember-handlebars-compiler","ember-handlebars/ext","exports"],function(e,t,n,i,r,s,o){"use strict";function a(e,t,n){return"ID"===t.hashTypes[n]?m(e,t.hash[n],t):t.hash[n]}function l(e){var t=e.hash,n=e.hashTypes,i=a(this,e,"type"),r=t.on;return"checkbox"===i?(delete t.type,delete n.type,f.view.call(this,c,e)):(delete t.on,t.onEvent=r||"enter",f.view.call(this,h,e))}function u(e){e.hash,e.hashTypes;return f.view.call(this,d,e)}var c=e["default"],h=t["default"],d=n["default"],p=(i["default"],r["default"]),m=s.handlebarsGet,f=p.helpers;o.inputHelper=l,o.textareaHelper=u}),e("ember-handlebars/controls/checkbox",["ember-metal/property_get","ember-metal/property_set","ember-views/views/view","exports"],function(e,t,n,i){"use strict";var r=e.get,s=t.set,o=n["default"];i["default"]=o.extend({instrumentDisplay:'{{input type="checkbox"}}',classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","indeterminate","disabled","tabindex","name","autofocus","required","form"],type:"checkbox",checked:!1,disabled:!1,indeterminate:!1,init:function(){this._super(),this.on("change",this,this._updateElementValue)},didInsertElement:function(){this._super(),r(this,"element").indeterminate=!!r(this,"indeterminate")},_updateElementValue:function(){s(this,"checked",this.$().prop("checked"))}})}),e("ember-handlebars/controls/select",["ember-handlebars-compiler","ember-metal/enumerable_utils","ember-metal/property_get","ember-metal/property_set","ember-views/views/view","ember-views/views/collection_view","ember-metal/utils","ember-metal/is_none","ember-metal/computed","ember-runtime/system/native_array","ember-metal/mixin","ember-metal/properties","exports"],function(e,t,n,i,s,o,a,l,u,c,h,d,p){"use strict";var m=e["default"],f=t.forEach,_=t.indexOf,g=t.indexesOf,v=t.replace,y=n.get,b=i.set,w=s["default"],C=o["default"],x=a.isArray,S=l["default"],I=u.computed,E=c.A,k=h.observer,T=d.defineProperty,P=(m.compile,w.extend({instrumentDisplay:"Ember.SelectOption",tagName:"option",attributeBindings:["value","selected"],defaultTemplate:function(e,t){t={data:t.data,hash:{}},m.helpers.bind.call(e,"view.label",t)},init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},selected:I(function(){var e=y(this,"content"),t=y(this,"parentView.selection");return y(this,"parentView.multiple")?t&&_(t,e.valueOf())>-1:e==t}).property("content","parentView.selection"),labelPathDidChange:k("parentView.optionLabelPath",function(){var e=y(this,"parentView.optionLabelPath");e&&T(this,"label",I(function(){return y(this,e)}).property(e))}),valuePathDidChange:k("parentView.optionValuePath",function(){var e=y(this,"parentView.optionValuePath");e&&T(this,"value",I(function(){return y(this,e)}).property(e))})})),A=C.extend({instrumentDisplay:"Ember.SelectOptgroup",tagName:"optgroup",attributeBindings:["label"],selectionBinding:"parentView.selection",multipleBinding:"parentView.multiple",optionLabelPathBinding:"parentView.optionLabelPath",optionValuePathBinding:"parentView.optionValuePath",itemViewClassBinding:"parentView.optionView"}),M=w.extend({instrumentDisplay:"Ember.Select",tagName:"select",classNames:["ember-select"],defaultTemplate:r.Handlebars.template(function(e,t,n,i,s){function o(e,t){var i,r="";return t.buffer.push('<option value="">'),i=n._triageMustache.call(e,"view.prompt",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(i||0===i)&&t.buffer.push(i),t.buffer.push("</option>"),r}function a(e,t){var i;i=n.each.call(e,"view.groupedContent",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,l,t),contexts:[e],types:["ID"],data:t}),t.buffer.push(i||0===i?i:"")}function l(e,t){t.buffer.push(p(n.view.call(e,"view.groupView",{hash:{content:"content",label:"label"},hashTypes:{content:"ID",label:"ID"},hashContexts:{content:e,label:e},contexts:[e],types:["ID"],data:t})))}function u(e,t){var i;i=n.each.call(e,"view.content",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(7,c,t),contexts:[e],types:["ID"],data:t}),t.buffer.push(i||0===i?i:"")}function c(e,t){t.buffer.push(p(n.view.call(e,"view.optionView",{hash:{content:""},hashTypes:{content:"ID"},hashContexts:{content:e},contexts:[e],types:["ID"],data:t})))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,r.Handlebars.helpers),s=s||{};var h,d="",p=this.escapeExpression,m=this;return h=n["if"].call(t,"view.prompt",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,o,s),contexts:[t],types:["ID"],data:s}),(h||0===h)&&s.buffer.push(h),h=n["if"].call(t,"view.optionGroupPath",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(6,u,s),fn:m.program(3,a,s),contexts:[t],types:["ID"],data:s}),(h||0===h)&&s.buffer.push(h),d}),attributeBindings:["multiple","disabled","tabindex","name","required","autofocus","form","size"],multiple:!1,disabled:!1,required:!1,content:null,selection:null,value:I(function(e,t){if(2===arguments.length)return t;var n=y(this,"optionValuePath").replace(/^content\.?/,"");return n?y(this,"selection."+n):y(this,"selection")}).property("selection"),prompt:null,optionLabelPath:"content",optionValuePath:"content",optionGroupPath:null,groupView:A,groupedContent:I(function(){var e=y(this,"optionGroupPath"),t=E(),n=y(this,"content")||[];return f(n,function(n){var i=y(n,e);y(t,"lastObject.label")!==i&&t.pushObject({label:i,content:E()}),y(t,"lastObject.content").push(n)}),t}).property("optionGroupPath","content.@each"),optionView:P,_change:function(){y(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:k("selection.@each",function(){var e=y(this,"selection");if(y(this,"multiple")){if(!x(e))return void b(this,"selection",E([e]));this._selectionDidChangeMultiple()}else this._selectionDidChangeSingle()}),valueDidChange:k("value",function(){var e,t=y(this,"content"),n=y(this,"value"),i=y(this,"optionValuePath").replace(/^content\.?/,""),r=i?y(this,"selection."+i):y(this,"selection");n!==r&&(e=t?t.find(function(e){return n===(i?y(e,i):e)}):null,this.set("selection",e))}),_triggerChange:function(){var e=y(this,"selection"),t=y(this,"value");S(e)||this.selectionDidChange(),S(t)||this.valueDidChange(),this._change()},_changeSingle:function(){var e=this.$()[0].selectedIndex,t=y(this,"content"),n=y(this,"prompt");if(t&&y(t,"length")){if(n&&0===e)return void b(this,"selection",null);n&&(e-=1),b(this,"selection",t.objectAt(e))}},_changeMultiple:function(){var e=this.$("option:selected"),t=y(this,"prompt"),n=t?1:0,i=y(this,"content"),r=y(this,"selection");if(i&&e){var s=e.map(function(){return this.index-n}).toArray(),o=i.objectsAt(s);x(r)?v(r,0,y(r,"length"),o):b(this,"selection",o)}},_selectionDidChangeSingle:function(){var e=this.get("element");if(e){var t=y(this,"content"),n=y(this,"selection"),i=t?_(t,n):-1,r=y(this,"prompt");r&&(i+=1),e&&(e.selectedIndex=i)}},_selectionDidChangeMultiple:function(){var e,t=y(this,"content"),n=y(this,"selection"),i=t?g(t,n):[-1],r=y(this,"prompt"),s=r?1:0,o=this.$("option");o&&o.each(function(){e=this.index>-1?this.index-s:-1,this.selected=_(i,e)>-1})},init:function(){this._super(),this.on("didInsertElement",this,this._triggerChange),this.on("change",this,this._change)}});p["default"]=M,p.Select=M,p.SelectOption=P,p.SelectOptgroup=A}),e("ember-handlebars/controls/text_area",["ember-metal/property_get","ember-views/views/component","ember-handlebars/controls/text_support","ember-metal/mixin","exports"],function(e,t,n,i,r){"use strict";var s=e.get,o=t["default"],a=n["default"],l=i.observer;r["default"]=o.extend(a,{instrumentDisplay:"{{textarea}}",classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols","name","selectionEnd","selectionStart","wrap","lang","dir"],rows:null,cols:null,_updateElementValue:l("value",function(){var e=s(this,"value"),t=this.$();t&&e!==t.val()&&t.val(e)}),init:function(){this._super(),this.on("didInsertElement",this,this._updateElementValue)}})}),e("ember-handlebars/controls/text_field",["ember-metal/property_get","ember-metal/property_set","ember-views/views/component","ember-handlebars/controls/text_support","exports"],function(e,t,n,i,r){"use strict";var s=(e.get,t.set,n["default"]),o=i["default"];r["default"]=s.extend(o,{instrumentDisplay:'{{input type="text"}}',classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size","pattern","name","min","max","accept","autocomplete","autosave","formaction","formenctype","formmethod","formnovalidate","formtarget","height","inputmode","list","multiple","step","lang","dir","width"],value:"",type:"text",size:null,pattern:null,min:null,max:null})}),e("ember-handlebars/controls/text_support",["ember-metal/property_get","ember-metal/property_set","ember-metal/mixin","ember-runtime/mixins/target_action_support","exports"],function(e,t,n,i,r){"use strict";function s(e,t,n){var i=o(t,e),r=o(t,"onEvent"),s=o(t,"value");(r===e||"keyPress"===r&&"key-press"===e)&&t.sendAction("action",s),t.sendAction(e,s),(i||r===e)&&(o(t,"bubbles")||n.stopPropagation())}var o=e.get,a=t.set,l=n.Mixin,u=i["default"],c=l.create(u,{value:"",attributeBindings:["placeholder","disabled","maxlength","tabindex","readonly","autofocus","form","selectionDirection","spellcheck","required","title","autocapitalize","autocorrect"],placeholder:null,disabled:!1,maxlength:null,init:function(){this._super(),this.on("focusOut",this,this._elementValueDidChange),this.on("change",this,this._elementValueDidChange),this.on("paste",this,this._elementValueDidChange),this.on("cut",this,this._elementValueDidChange),this.on("input",this,this._elementValueDidChange),this.on("keyUp",this,this.interpretKeyEvents)},action:null,onEvent:"enter",bubbles:!1,interpretKeyEvents:function(e){var t=c.KEY_EVENTS,n=t[e.keyCode];return this._elementValueDidChange(),n?this[n](e):void 0},_elementValueDidChange:function(){a(this,"value",this.$().val())},insertNewline:function(e){s("enter",this,e),s("insert-newline",this,e)},cancel:function(e){s("escape-press",this,e)},focusIn:function(e){s("focus-in",this,e)},focusOut:function(e){s("focus-out",this,e)},keyPress:function(e){s("key-press",this,e)}});c.KEY_EVENTS={13:"insertNewline",27:"cancel"},r["default"]=c}),e("ember-handlebars/ext",["ember-metal/core","ember-runtime/system/string","ember-handlebars-compiler","ember-metal/property_get","ember-metal/error","ember-metal/mixin","ember-views/views/view","ember-handlebars/views/metamorph_view","ember-metal/path_cache","ember-metal/is_empty","ember-metal/cache","exports"],function(e,n,i,r,s,o,a,l,u,c,h,d){"use strict";function p(e,t,n){var i,r,s=n&&n.keywords||{};return i=W.get(t),s.hasOwnProperty(i)&&(e=s[i],r=!0,t=t===i?"":t.substr(i.length+1)),{root:e,path:t,isKeyword:r}}function m(e,t,n){var i,r=n&&n.data,s=p(e,t,r);return e=s.root,t=s.path,(e||""===t)&&(i=D(e,t)),B(t)&&(void 0===i&&e!==P.lookup&&(e=P.lookup,i=D(e,t)),e===P.lookup||null===e),i}function f(e,t){return e.lookupFactory("view:"+t)}function _(e){var t;return B(e)?t=D(e):void 0}function g(e,t,n,i){var r,s,o;if(i&&(s=i.data,o=i.types&&i.types[0]),"string"==typeof t){if("STRING"===o&&n&&(r=f(n,t)),r||(r=_(t)),!r){if(s){var a=p(e,t,s);e=a.root,t=a.path}r=e&&D(e,t),r||(r=f(n,t))}}else r=t;return"string"==typeof r&&s&&s.view&&(r=g(s.view,r,n,{data:s,types:["ID"]})),r}function v(e,t,n){var i=m(e,t,n);return null===i||void 0===i?i="":i instanceof Handlebars.SafeString||(i=String(i)),n.hash.unescaped||(i=Handlebars.Utils.escapeExpression(i)),i}function y(e,t,n){for(var i,r,s=[],o=n.types,a=0,l=t.length;l>a;a++)i=t[a],r=o[a],s.push("ID"===r?m(e,i,n):i);return s}function b(e,t,n){var i,r={},s=n.hashTypes;for(var o in t)t.hasOwnProperty(o)&&(i=s[o],r[o]="ID"===i?m(e,t[o],n):t[o]);return r}function w(e){k||(k=t("ember-handlebars/helpers/binding").resolveHelper);var n,i="",r=arguments[arguments.length-1],s=k(r.data.view.container,e);if(s)return s.apply(this,F.call(arguments,1));throw n="%@ Handlebars error: Could not find property '%@' on object %@.",r.data&&(i=r.data.view),new L(A(n,[i,e,this]))}function C(e){k||(k=t("ember-handlebars/helpers/binding").resolveHelper);var n=arguments[arguments.length-1],i=k(n.data.view.container,e);return i?i.apply(this,F.call(arguments,1)):O.helperMissing.call(this,e)}function x(e){var t=F.call(arguments,1),n=S.apply(this,t);M.registerHelper(e,n)}function S(e){function n(){var t,n,r,s,o,a=F.call(arguments,0,-1),l=a.length,u=arguments[arguments.length-1],c=[],h=u.data,d=h.isUnbound?F.call(u.types,1):u.types,m=u.hash,f=u.hashTypes,_=h.view,g=u.contexts,v=g&&g.length?g[0]:this,y="",b=T.prototype.normalizedValue,w=m.boundOptions={};for(r in m)R.test(r)?w[r.slice(0,-7)]=m[r]:"ID"===f[r]&&(w[r]=m[r]);var C=[];for(h.properties=[],t=0;l>t;++t)if(h.properties.push(a[t]),"ID"===d[t]){var x=p(v,a[t],h);c.push(x),C.push(x)}else c.push(h.isUnbound?{path:a[t]}:null);if(h.isUnbound)return I(this,e,c,u);var S=new T(null,null,!u.hash.unescaped,u.data);S.normalizedValue=function(){var n,i=[];for(n in w)w.hasOwnProperty(n)&&(o=p(v,w[n],h),S.path=o.path,S.pathRoot=o.root,m[n]=b.call(S));for(t=0;l>t;++t)o=c[t],o?(S.path=o.path,S.pathRoot=o.root,i.push(b.call(S))):i.push(a[t]);return i.push(u),e.apply(v,i)},_.appendChild(S);for(s in w)w.hasOwnProperty(s)&&C.push(p(v,w[s],h));for(t=0,n=C.length;n>t;++t)o=C[t],_.registerObserver(o.root,o.path,S,S.rerender);if("ID"===d[0]&&0!==c.length){var E=c[0],k=E.root,P=E.path;N(P)||(y=P+".");for(var A=0,M=i.length;M>A;A++)_.registerObserver(k,y+i[A],S,S.rerender)}}T||(T=t("ember-handlebars/views/handlebars_bound_view").SimpleHandlebarsView);var i=F.call(arguments,1);return n._rawFunction=e,n}function I(e,t,n,i){var r,s,o,a,l,u=[],c=i.hash,h=c.boundOptions,d=F.call(i.types,1);for(l in h)h.hasOwnProperty(l)&&(c[l]=m(e,h[l],i));for(r=0,s=n.length;s>r;++r)o=n[r],a=d[r],u.push("ID"===a?m(o.root,o.path,i):o.path);return u.push(i),t.apply(e,u)}function E(e){var t=z(e);return t.isTop=!0,t}var k,T,P=e["default"],A=n.fmt,M=i["default"],O=M.helpers,D=r.get,L=s["default"],R=o.IS_BINDING,B=(a["default"],l._Metamorph,u.isGlobal),N=c["default"],F=[].slice,z=M.template,H=h["default"],W=new H(1e3,function(e){return e.split(".",1)[0]});d.getEscaped=v,d.resolveParams=y,d.resolveHash=b,d.helperMissingHelper=w,d.blockHelperMissingHelper=C,d.registerBoundHelper=x,d.template=E,d.normalizePath=p,d.makeBoundHelper=S,d.handlebarsGet=m,d.handlebarsGetView=g,d.evaluateUnboundHelper=I}),e("ember-handlebars/helpers/binding",["ember-metal/core","ember-handlebars-compiler","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-runtime/system/string","ember-metal/platform","ember-metal/is_none","ember-metal/enumerable_utils","ember-metal/array","ember-views/views/view","ember-metal/run_loop","ember-metal/observer","ember-metal/binding","ember-views/system/jquery","ember-handlebars/ext","ember-metal/keys","ember-metal/cache","ember-handlebars/views/handlebars_bound_view","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y){"use strict";function b(e){return!H(e)}function w(e,t,n,i,r,s){var o,a,l,u=t.data,c=t.fn,h=t.inverse,d=u.view,p=this||window;if(o=et(p,e,u),u.insideGroup){a=function(){for(;d._contextView;)d=d._contextView;j.once(d,"rerender")};var m,f,_=tt(p,e,t);_=r?r(_):_,f=n?p:_,i(_)?m=c:h&&(m=h),m(f,{data:t.data})}else{var g=X,v={preserveContext:n,shouldDisplayFunc:i,valueNormalizerFunc:r,displayTemplate:c,inverseTemplate:h,path:e,pathRoot:p,previousContext:p,isEscaped:!t.hash.unescaped,templateData:t.data,templateHash:t.hash,helperName:t.helperName};t.isWithHelper&&(g=ot);var y=d.createChildView(g,v);d.appendChild(y),a=function(){j.scheduleOnce("render",y,"rerenderIfNeeded")}}if("object"==typeof this&&""!==o.path&&(d.registerObserver(o.root,o.path,a),s))for(l=0;l<s.length;l++)d.registerObserver(o.root,o.path+"."+s[l],a)}function C(e,t,n){var i,r,s,o,a=n.data,l=a.view;if(i=et(e,t,a),s=i.root,s&&"object"==typeof s){if(a.insideGroup)r=function(){for(;l._contextView;)l=l._contextView;j.once(l,"rerender")},o=$(e,t,n),a.buffer.push(o);else{var u=new Q(t,e,!n.hash.unescaped,n.data);u._parentView=l,l.appendChild(u),r=function(){j.scheduleOnce("render",u,"rerender")}}""!==i.path&&l.registerObserver(i.root,i.path,r)}else o=$(e,t,n),a.buffer.push(o)}function x(e){var t=e&&B(e,"isTruthy");return"boolean"==typeof t?t:G(e)?0!==B(e,"length"):!!e}function S(e,t){var n=R.resolveHelper(t.data.view.container,e);return n?n.call(this,t):rt.bind.call(this,e,t)}function I(e,t){if(rt[t])return rt[t];if(e&&!at.get(t)){var n=e.lookup("helper:"+t);if(!n){var i=e.lookup("component-lookup:main"),r=i.lookupFactory(t,e);r&&(n=R.makeViewHelper(r),e.register("helper:"+t,n))}return n}}function E(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this;return t.fn?(t.helperName="bind",w.call(n,e,t,!1,b)):C(n,e,t)}function k(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this;return t.helperName=t.helperName||"boundIf",w.call(n,e,t,!0,x,x,["isTruthy","length"])
}function T(e,t){var n,i,r=t.contexts&&t.contexts.length?t.contexts[0]:this,s=t.data,o=t.fn,a=t.inverse;n=et(r,e,s),i=tt(r,e,t),x(i)||(o=a),o(r,{data:s})}function P(e,t){var n,i,r="with";if(4===arguments.length){var s,o,a,l,u;t=arguments[3],s=arguments[2],o=arguments[0],o&&(r+=" "+o+" as "+s);var c=z(t);if(c.data=z(t.data),c.data.keywords=z(t.data.keywords||{}),q(o))u=o;else{l=et(this,o,t.data),o=l.path,a=l.root;var h=J.expando+nt(a);c.data.keywords[h]=a,u=o?h+"."+o:h}c.hash.keywordName=s,c.hash.keywordPath=u,n=this,e=u,t=c,i=!0}else r+=" "+e,n=t.contexts[0],i=!1;return t.helperName=r,t.isWithHelper=!0,w.call(n,e,t,i,b)}function A(e,t){return t.helperName=t.helperName||"if "+e,t.data.isUnbound?rt.unboundIf.call(t.contexts[0],e,t):rt.boundIf.call(t.contexts[0],e,t)}function M(e,t){var n=t.fn,i=t.inverse,r="unless";return e&&(r+=" "+e),t.fn=i,t.inverse=n,t.helperName=t.helperName||r,t.data.isUnbound?rt.unboundIf.call(t.contexts[0],e,t):rt.boundIf.call(t.contexts[0],e,t)}function O(e){var t=e.hash,n=e.data.view,i=[],r=this||window,s=F(),o=t["class"];if(null!=o){var a=L(r,o,n,s,e);i.push('class="'+Handlebars.Utils.escapeExpression(a.join(" "))+'"'),delete t["class"]}var l=Y(t);return W.call(l,function(o){var a,l=t[o];a=et(r,l,e.data);var u,c="this"===l?a.root:tt(r,l,e),h=it(c);u=function d(){var t=tt(r,l,e),i=n.$("[data-bindattr-"+s+"='"+s+"']");return i&&0!==i.length?void V.applyAttributeBindings(i,o,t):void U(a.root,a.path,d)},"this"===l||a.isKeyword&&""===a.path||n.registerObserver(a.root,a.path,u),"string"===h||"number"===h&&!isNaN(c)?i.push(o+'="'+Handlebars.Utils.escapeExpression(c)+'"'):c&&"boolean"===h&&i.push(o+'="'+o+'"')},this),i.push("data-bindattr-"+s+'="'+s+'"'),new st(i.join(" "))}function D(){return rt["bind-attr"].apply(this,arguments)}function L(e,t,n,i,r){var s,o,a,l=[],u=function(e,t,n){var i,r=t.path;return i="this"===r?e:""===r?!0:tt(e,r,n),V._classStringForValue(r,i,t.className,t.falsyClassName)};return W.call(t.split(" "),function(t){var c,h,d,p=V._parsePropertyPath(t),m=p.path,f=e;""!==m&&"this"!==m&&(d=et(e,m,r.data),f=d.root,m=d.path),h=function(){s=u(e,p,r),a=i?n.$("[data-bindattr-"+i+"='"+i+"']"):n.$(),a&&0!==a.length?(c&&a.removeClass(c),s?(a.addClass(s),c=s):c=null):U(f,m,h)},""!==m&&"this"!==m&&n.registerObserver(f,m,h),o=u(e,p,r),o&&(l.push(o),c=o)}),l}var R=(e["default"],t["default"]),B=n.get,N=(i.set,r.apply),F=r.uuid,z=(s.fmt,o.create),H=a["default"],W=(l["default"],u.forEach),V=c["default"],j=h["default"],U=d.removeObserver,q=p.isGlobalPath,K=p.bind,J=m["default"],G=r.isArray,$=f.getEscaped,Y=_["default"],Z=g["default"],X=v._HandlebarsBoundView,Q=v.SimpleHandlebarsView,et=f.normalizePath,tt=f.handlebarsGet,nt=(f.getEscaped,r.guidFor),it=r.typeOf,rt=R.helpers,st=R.SafeString,ot=X.extend({init:function(){var e;N(this,this._super,arguments);var t=this.templateData.keywords,n=this.templateHash.keywordName,i=this.templateHash.keywordPath,r=this.templateHash.controller,s=this.preserveContext;if(r){var o=this.previousContext;if(e=this.container.lookupFactory("controller:"+r).create({parentController:o,target:o}),this._generatedController=e,s){var a=J.expando+nt(e);t[a]=e,K(t,a+".model",i),i=a}else this.set("controller",e),this.valueNormalizerFunc=function(t){return e.set("model",t),e}}s&&K(t,n,i)},willDestroy:function(){this._super(),this._generatedController&&this._generatedController.destroy()}}),at=new Z(1e3,function(e){return-1===e.indexOf("-")});y.ISNT_HELPER_CACHE=at,y.bind=w,y._triageMustacheHelper=S,y.resolveHelper=I,y.bindHelper=E,y.boundIfHelper=k,y.unboundIfHelper=T,y.withHelper=P,y.ifHelper=A,y.unlessHelper=M,y.bindAttrHelper=O,y.bindAttrHelperDeprecated=D,y.bindClasses=L}),e("ember-handlebars/helpers/collection",["ember-metal/core","ember-metal/utils","ember-handlebars-compiler","ember-runtime/system/string","ember-metal/property_get","ember-handlebars/ext","ember-handlebars/helpers/view","ember-metal/computed","ember-views/views/collection_view","exports"],function(e,t,n,i,r,s,o,a,l,u){"use strict";function c(e,t){e&&e.data&&e.data.isRenderData&&(t=e,e=void 0);var n,i=t.fn,r=t.data,s=t.inverse,o=t.data.view,a=o.controller&&o.controller.container?o.controller.container:o.container;n=e?m(this,e,a,t):g;var l,u,c=t.hash,_={},y=n.proto();u=c.itemView?m(this,c.itemView,a,t):c.itemViewClass?m(y,c.itemViewClass,a,t):m(y,y.itemViewClass,a,t),delete c.itemViewClass,delete c.itemView;for(var b in c)c.hasOwnProperty(b)&&(l=b.match(/^item(.)(.*)$/),l&&"itemController"!==b&&(_[l[1].toLowerCase()+l[2]]=c[b],delete c[b]));i&&(_.template=i,delete t.fn);var w;s&&s!==h.VM.noop?(w=p(y,"emptyViewClass"),w=w.extend({template:s,tagName:_.tagName})):c.emptyViewClass&&(w=m(this,c.emptyViewClass,a,t)),w&&(c.emptyView=w),_._context=c.keyword?this:v("content");var C=f.propertiesFromHTMLOptions({data:r,hash:_},this);return c.itemViewClass=u.extend(C),t.helperName=t.helperName||"collection",d.view.call(this,n,t)}var h=(e["default"],t.inspect,n["default"]),d=h.helpers,p=(i.fmt,r.get),m=(s.handlebarsGet,s.handlebarsGetView),f=o.ViewHelper,_=a.computed,g=l["default"],v=_.alias;u["default"]=c}),e("ember-handlebars/helpers/debug",["ember-metal/core","ember-metal/utils","ember-metal/logger","ember-metal/property_get","ember-handlebars/ext","exports"],function(e,t,n,i,r,s){"use strict";function o(){for(var e=d.call(arguments,0,-1),t=arguments[arguments.length-1],n=u.log,i=[],r=!0,s=0;s<e.length;s++){var o=t.types[s];if("ID"!==o&&r)i.push(e[s]);else{var a=t.contexts&&t.contexts[s]||this,l=c(a,e[s],t.data);i.push("this"===l.path?l.root:h(l.root,l.path,t))}}n.apply(n,i)}function a(){{var e=this;l(e)}}var l=(e["default"],t.inspect),u=n["default"],c=(i.get,r.normalizePath),h=r.handlebarsGet,d=[].slice;s.logHelper=o,s.debuggerHelper=a}),e("ember-handlebars/helpers/each",["ember-metal/core","ember-handlebars-compiler","ember-runtime/system/string","ember-metal/property_get","ember-metal/property_set","ember-views/views/collection_view","ember-metal/binding","ember-runtime/mixins/controller","ember-runtime/controllers/array_controller","ember-runtime/mixins/array","ember-runtime/copy","ember-metal/run_loop","ember-metal/events","ember-handlebars/ext","ember-metal/computed","ember-metal/observer","ember-handlebars/views/metamorph_view","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g){"use strict";function v(e,t){var n,i="each";if(4===arguments.length){var r=arguments[0];t=arguments[3],e=arguments[2],i+=" "+r+" in "+e,""===e&&(e="this"),t.hash.keyword=r}else 1===arguments.length?(t=e,e="this"):i+=" "+e;return t.hash.dataSourceBinding=e,n=this||window,t.helperName=t.helperName||i,!t.data.insideGroup||t.hash.groupedRows||t.hash.itemViewClass?C.collection.call(n,w.EachView,t):void new N(n,e,t).render()}var y=e["default"],b=y.K,w=t["default"],C=w.helpers,x=(n.fmt,i.get),S=r.set,I=s["default"],E=o.Binding,k=(a["default"],l["default"],u["default"],c["default"]),T=h["default"],P=(d.on,p.handlebarsGet),A=(m.computed,f.addObserver),M=f.removeObserver,O=f.addBeforeObserver,D=f.removeBeforeObserver,L=_._Metamorph,R=_._MetamorphView,B=I.extend(L,{init:function(){var e,t=x(this,"itemController");if(t){var n=x(this,"controller.container").lookupFactory("controller:array").create({_isVirtual:!0,parentController:x(this,"controller"),itemController:t,target:x(this,"controller"),_eachView:this});this.disableContentObservers(function(){S(this,"content",n),e=new E("content","_eachView.dataSource").oneWay(),e.connect(n)}),S(this,"_arrayController",n)}else this.disableContentObservers(function(){e=new E("content","dataSource").oneWay(),e.connect(this)});return this._super()},_assertArrayLike:function(){},disableContentObservers:function(e){D(this,"content",null,"_contentWillChange"),M(this,"content",null,"_contentDidChange"),e.call(this),O(this,"content",null,"_contentWillChange"),A(this,"content",null,"_contentDidChange")},itemViewClass:R,emptyViewClass:R,createChildView:function(e,t){e=this._super(e,t);var n=x(this,"keyword"),i=x(e,"content");if(n){var r=x(e,"templateData");r=k(r),r.keywords=e.cloneKeywords(),S(e,"templateData",r),r.keywords[n]=i}return i&&i.isController&&S(e,"controller",i),e},destroy:function(){if(this._super()){var e=x(this,"_arrayController");return e&&e.destroy(),this}}}),N=w.GroupedEach=function(e,t,n){var i=this,r=w.normalizePath(e,t,n.data);this.context=e,this.path=t,this.options=n,this.template=n.fn,this.containingView=n.data.view,this.normalizedRoot=r.root,this.normalizedPath=r.path,this.content=this.lookupContent(),this.addContentObservers(),this.addArrayObservers(),this.containingView.on("willClearRender",function(){i.destroy()})};N.prototype={contentWillChange:function(){this.removeArrayObservers()},contentDidChange:function(){this.content=this.lookupContent(),this.addArrayObservers(),this.rerenderContainingView()},contentArrayWillChange:b,contentArrayDidChange:function(){this.rerenderContainingView()},lookupContent:function(){return P(this.normalizedRoot,this.normalizedPath,this.options)},addArrayObservers:function(){this.content&&this.content.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},removeArrayObservers:function(){this.content&&this.content.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},addContentObservers:function(){O(this.normalizedRoot,this.normalizedPath,this,this.contentWillChange),A(this.normalizedRoot,this.normalizedPath,this,this.contentDidChange)},removeContentObservers:function(){D(this.normalizedRoot,this.normalizedPath,this.contentWillChange),M(this.normalizedRoot,this.normalizedPath,this.contentDidChange)},render:function(){if(this.content){var e=this.content,t=x(e,"length"),n=this.options,i=n.data,r=this.template;i.insideEach=!0;for(var s=0;t>s;s++){var o=e.objectAt(s);n.data.keywords[n.hash.keyword]=o,r(o,{data:i})}}},rerenderContainingView:function(){var e=this;T.scheduleOnce("render",this,function(){e.destroyed||e.containingView.rerender()})},destroy:function(){this.removeContentObservers(),this.content&&this.removeArrayObservers(),this.destroyed=!0}},g.EachView=B,g.GroupedEach=N,g.eachHelper=v}),e("ember-handlebars/helpers/loc",["ember-runtime/system/string","exports"],function(e,t){"use strict";var n=e.loc;t["default"]=n}),e("ember-handlebars/helpers/partial",["ember-metal/core","ember-metal/is_none","ember-handlebars/ext","ember-handlebars/helpers/binding","exports"],function(e,t,n,i,r){"use strict";function s(e){return!a(e)}function o(e,t,n){var i=t.split("/"),r=i[i.length-1];i[i.length-1]="_"+r;var s=n.data.view,o=i.join("/"),a=s.templateForName(o),l=!a&&s.templateForName(t);(a=a||l)(e,{data:n.data})}var a=(e["default"],t.isNone),l=n.handlebarsGet,u=i.bind;r["default"]=function(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this;return t.helperName=t.helperName||"partial","ID"===t.types[0]?(t.fn=function(t,n){var i=l(t,e,n);o(t,i,n)},u.call(n,e,t,!0,s)):void o(n,e,t)}}),e("ember-handlebars/helpers/shared",["ember-handlebars/ext","exports"],function(e,t){"use strict";var n=e.handlebarsGet;t["default"]=function(e){for(var t=[],i=e.contexts,r=e.roots,s=e.data,o=0,a=i.length;a>o;o++)t.push(n(r[o],i[o],{data:s}));return t}}),e("ember-handlebars/helpers/template",["ember-metal/core","ember-handlebars-compiler","exports"],function(e,t,n){"use strict";var i=(e["default"],t["default"]),r=i.helpers;n["default"]=function(e,t){return t.helperName=t.helperName||"template",r.partial.apply(this,arguments)}}),e("ember-handlebars/helpers/unbound",["ember-handlebars-compiler","ember-handlebars/helpers/binding","ember-handlebars/ext","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=r.helpers,o=t.resolveHelper,a=n.handlebarsGet,l=[].slice;i["default"]=function(e,t){var n,i,r,u,c=arguments[arguments.length-1],h=c.data.view.container;return u=this,arguments.length>2?(c.data.isUnbound=!0,n=o(h,e)||s.helperMissing,r=n.apply(u,l.call(arguments,1)),delete c.data.isUnbound,r):(i=t.contexts&&t.contexts.length?t.contexts[0]:u,a(i,e,t))}}),e("ember-handlebars/helpers/view",["ember-metal/core","ember-runtime/system/object","ember-metal/property_get","ember-metal/property_set","ember-metal/mixin","ember-views/system/jquery","ember-views/views/view","ember-metal/binding","ember-metal/keys","ember-handlebars/ext","ember-runtime/system/string","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e,t){var n=t.hash,i=t.hashTypes;for(var r in n)if("ID"===i[r]){var s=n[r];f.test(r)||(n[r+"Binding"]=s,i[r+"Binding"]="STRING",delete n[r],delete i[r])}n.hasOwnProperty("idBinding")&&(n.id=b(e,n.idBinding,t),i.id="STRING",delete n.idBinding,delete i.idBinding)}function p(e,t){return e&&e.data&&e.data.isRenderData&&(t=e,e=t.data&&t.data.view&&t.data.view.container?t.data.view.container.lookupFactory("view:toplevel"):_),t.helperName=t.helperName||"view",C.helper(this,e,t)}var m=(e["default"],t["default"]),f=(n.get,i.set,r.IS_BINDING),_=(s["default"],o["default"]),g=a.isGlobalPath,v=l["default"],y=u.normalizePath,b=u.handlebarsGet,w=u.handlebarsGetView,C=(c["default"],m.create({propertiesFromHTMLOptions:function(e){var t=e.hash,n=e.data,i=t["class"],r={helperName:e.helperName||""};t.id&&(r.elementId=t.id),t.tag&&(r.tagName=t.tag),i&&(i=i.split(" "),r.classNames=i),t.classBinding&&(r.classNameBindings=t.classBinding.split(" ")),t.classNameBindings&&(void 0===r.classNameBindings&&(r.classNameBindings=[]),r.classNameBindings=r.classNameBindings.concat(t.classNameBindings.split(" "))),t.attributeBindings&&(r.attributeBindings=null);for(var s,o=v(t),a=0,l=o.length;l>a;a++){var u=o[a],c=f.test(u);"classNameBindings"!==u&&(r[u]=t[u]),c&&"string"==typeof r[u]&&(s=this.contextualizeBindingPath(t[u],n),s&&(r[u]=s))}if(r.classNameBindings)for(var h=0,d=r.classNameBindings.length;d>h;h++){var p=r.classNameBindings[h];if("string"==typeof p){var m=_._parsePropertyPath(p);""!==m.path&&(s=this.contextualizeBindingPath(m.path,n),s&&(r.classNameBindings[h]=s+m.classNames))}}return r},contextualizeBindingPath:function(e,t){var n=y(null,e,t);return n.isKeyword?"templateData.keywords."+e:g(e)?null:"this"===e||""===e?"_parentView.context":"_parentView.context."+e},helper:function(e,t,n){var i,r,s=n.data,o=n.fn;d(e,n);var a=this.container||s&&s.view&&s.view.container;i=w(e,t,a,n),r=_.detectInstance(i)?i:i.proto();var l=this.propertiesFromHTMLOptions(n,e),u=s.view;l.templateData=s,o&&(l.template=o),r.controller||r.controllerBinding||l.controller||l.controllerBinding||(l._context=e),u.appendChild(i,l)},instanceHelper:function(e,t,n){var i=n.data,r=n.fn;d(e,n);var s=this.propertiesFromHTMLOptions(n,e),o=i.view;s.templateData=i,r&&(s.template=r),t.controller||t.controllerBinding||s.controller||s.controllerBinding||(s._context=e),o.appendChild(t,s)}}));h.ViewHelper=C,h.viewHelper=p}),e("ember-handlebars/helpers/yield",["ember-metal/core","ember-metal/property_get","exports"],function(e,t,n){"use strict";var i=(e["default"],t.get);n["default"]=function(e){for(var t=e.data.view;t&&!i(t,"layout");)t=t._contextView?t._contextView:i(t,"_parentView");t._yield(this,e)}}),e("ember-handlebars/loader",["ember-handlebars/component_lookup","ember-views/system/jquery","ember-metal/error","ember-runtime/system/lazy_load","ember-handlebars-compiler","exports"],function(e,t,n,i,s,o){"use strict";function a(e){var t='script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]';h(t,e).each(function(){var e=h(this),t="text/x-raw-handlebars"===e.attr("type")?h.proxy(Handlebars.compile,Handlebars):h.proxy(m.compile,m),n=e.attr("data-template-name")||e.attr("id")||"application",i=t(e.html());if(void 0!==r.TEMPLATES[n])throw new d('Template named "'+n+'" already exists.');r.TEMPLATES[n]=i,e.remove()})}function l(){a(h(document))}function u(e){e.register("component-lookup:main",c)}var c=e["default"],h=t["default"],d=n["default"],p=i.onLoad,m=s["default"];p("Ember.Application",function(e){e.initializer({name:"domTemplates",initialize:l}),e.initializer({name:"registerComponentLookup",after:"domTemplates",initialize:u})}),o["default"]=a}),e("ember-handlebars/string",["ember-runtime/system/string","exports"],function(e,t){"use strict";function n(e){return"string"!=typeof e&&(e=""+e),new Handlebars.SafeString(e)}var i=e["default"];i.htmlSafe=n,(r.EXTEND_PROTOTYPES===!0||r.EXTEND_PROTOTYPES.String)&&(String.prototype.htmlSafe=function(){return n(this)}),t["default"]=n}),e("ember-handlebars/views/handlebars_bound_view",["ember-handlebars-compiler","ember-metal/core","ember-metal/error","ember-metal/property_get","ember-metal/property_set","ember-metal/merge","ember-metal/run_loop","ember-views/views/view","ember-handlebars/string","ember-views/views/states","ember-handlebars/views/metamorph_view","ember-handlebars/ext","ember-metal/utils","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";function m(e,t,n,i){this.path=e,this.pathRoot=t,this.isEscaped=n,this.templateData=i,this[g.GUID_KEY]=A(),this._lastNormalizedValue=void 0,this.state="preRender",this.updateId=null,this._parentView=null,this.buffer=null,this._morph=null}var f=e["default"],_=f.SafeString,g=t["default"],v=g.K,y=n["default"],b=i.get,w=r.set,C=s["default"],x=o["default"],S=(a["default"],l["default"]),I=u.cloneStates,E=u.states,k=E,T=c["default"],P=h.handlebarsGet,A=d.uuid;m.prototype={isVirtual:!0,isView:!0,destroy:function(){this.updateId&&(x.cancel(this.updateId),this.updateId=null),this._parentView&&this._parentView.removeChild(this),this.morph=null,this.state="destroyed"},propertyWillChange:v,propertyDidChange:v,normalizedValue:function(){var e,t,n=this.path,i=this.pathRoot,r=this.isEscaped;return""===n?e=i:(t=this.templateData,e=P(i,n,{data:t})),r||e instanceof _||(e=S(e)),e},render:function(e){var t=this.normalizedValue();this._lastNormalizedValue=t,e._element=t},rerender:function(){switch(this.state){case"preRender":case"destroyed":break;case"inBuffer":throw new y("Something you did tried to replace an {{expression}} before it was inserted into the DOM.");case"hasElement":case"inDOM":this.updateId=x.scheduleOnce("render",this,"update")}return this},update:function(){this.updateId=null;var e=this.normalizedValue();e!==this._lastNormalizedValue&&(this._lastNormalizedValue=e,this._morph.update(e))},_transitionTo:function(e){this.state=e}},E=I(k),C(E._default,{rerenderIfNeeded:v}),C(E.inDOM,{rerenderIfNeeded:function(e){e.normalizedValue()!==e._lastNormalizedValue&&e.rerender()}});var M=T.extend({instrumentName:"boundHandlebars",_states:E,shouldDisplayFunc:null,preserveContext:!1,previousContext:null,displayTemplate:null,inverseTemplate:null,path:null,pathRoot:null,normalizedValue:function(){var e,t,n=b(this,"path"),i=b(this,"pathRoot"),r=b(this,"valueNormalizerFunc");return""===n?e=i:(t=b(this,"templateData"),e=P(i,n,{data:t})),r?r(e):e},rerenderIfNeeded:function(){this.currentState.rerenderIfNeeded(this)},render:function(e){var t=b(this,"isEscaped"),n=b(this,"shouldDisplayFunc"),i=b(this,"preserveContext"),r=b(this,"previousContext"),s=b(this,"inverseTemplate"),o=b(this,"displayTemplate"),a=this.normalizedValue();if(this._lastNormalizedValue=a,n(a))if(w(this,"template",o),i)w(this,"_context",r);else{if(!o)return null===a||void 0===a?a="":a instanceof _||(a=String(a)),t&&(a=Handlebars.Utils.escapeExpression(a)),void e.push(a);w(this,"_context",a)}else s?(w(this,"template",s),i?w(this,"_context",r):w(this,"_context",a)):w(this,"template",function(){return""});return this._super(e)}});p._HandlebarsBoundView=M,p.SimpleHandlebarsView=m}),e("ember-handlebars/views/metamorph_view",["ember-metal/core","ember-views/views/core_view","ember-views/views/view","ember-metal/mixin","ember-metal/run_loop","exports"],function(e,t,n,i,r,s){"use strict";var o=(e["default"],t["default"]),a=n["default"],l=i.Mixin,u=(r["default"],l.create({isVirtual:!0,tagName:"",instrumentName:"metamorph",init:function(){this._super()}}));s._Metamorph=u;var c=a.extend(u);s._MetamorphView=c;var h=o.extend(u);s._SimpleMetamorphView=h,s["default"]=a.extend(u)}),e("ember-metal-views",["ember-metal-views/renderer","exports"],function(e,t){"use strict";var n=e["default"];t.Renderer=n}),e("ember-metal-views/renderer",["morph","exports"],function(e,t){"use strict";function n(){this._uuid=0,this._views=new Array(2e3),this._queue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._parents=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._elements=new Array(17),this._inserts={},this._dom=new l}function i(e,t,n){var i=this._views;i[0]=e;var r=void 0===n?-1:n,s=0,o=1,a=t?t._level+1:0,l=null==t?e:t._root,u=!!l._morph,c=this._queue;c[0]=0;for(var h,d,p,m=1,f=-1,_=this._parents,g=t||null,v=this._elements,y=null,b=null,w=0,C=e;m;){if(v[w]=y,C._morph||(C._morph=null),C._root=l,this.uuid(C),C._level=a+w,C._elementCreated&&this.remove(C,!1,!0),this.willCreateElement(C),b=C._morph&&C._morph.contextualElement,!b&&g&&g._childViewsMorph&&(b=g._childViewsMorph.contextualElement),!b&&C._didCreateElementWithoutMorph&&(b=document.body),y=this.createElement(C,b),_[w++]=f,f=s,g=C,c[m++]=s,h=this.childViews(C))for(d=h.length-1;d>=0;d--)p=h[d],s=o++,i[s]=p,c[m++]=s,C=p;for(s=c[--m],C=i[s];f===s;){if(w--,C._elementCreated=!0,this.didCreateElement(C),u&&this.willInsertElement(C),0===w){m--;break}f=_[w],g=-1===f?t:i[f],this.insertElement(C,g,y,-1),s=c[--m],C=i[s],y=v[w],v[w]=null}}for(this.insertElement(C,t,y,r),d=o-1;d>=0;d--)u&&(i[d]._elementInserted=!0,this.didInsertElement(i[d])),i[d]=null;return y}function r(e,t,n){var i=this.uuid(e);if(this._inserts[i]&&(this.cancelRender(this._inserts[i]),this._inserts[i]=void 0),e._elementCreated){var r,s,o,a,l,u,c,h=[],d=[],p=e._morph;for(h.push(e),r=0;r<h.length;r++)if(o=h[r],a=!t&&o._childViewsMorph?h:d,this.beforeRemove(h[r]),l=o._childViews)for(u=0,c=l.length;c>u;u++)a.push(l[u]);for(r=0;r<d.length;r++)if(o=d[r],this.beforeRemove(d[r]),l=o._childViews)for(u=0,c=l.length;c>u;u++)d.push(l[u]);for(p&&!n&&p.destroy(),r=0,s=h.length;s>r;r++)this.afterRemove(h[r],!1);for(r=0,s=d.length;s>r;r++)this.afterRemove(d[r],!0);n&&(e._morph=p)}}function s(e,t,n,i){null!==n&&void 0!==n&&(e._morph?e._morph.update(n):t&&(e._morph=-1===i?t._childViewsMorph.append(n):t._childViewsMorph.insert(i,n)))}function o(e){e._elementCreated&&this.willDestroyElement(e),e._elementInserted&&this.willRemoveElement(e)}function a(e,t){e._elementInserted=!1,e._morph=null,e._childViewsMorph=null,e._elementCreated&&(e._elementCreated=!1,this.didDestroyElement(e)),t&&this.destroyView(e)}var l=e.DOMHelper;n.prototype.uuid=function(e){return void 0===e._uuid&&(e._uuid=++this._uuid,e._renderer=this),e._uuid},n.prototype.scheduleInsert=function(e,t){if(e._morph||e._elementCreated)throw new Error("You cannot insert a View that has already been rendered");e._morph=t;var n=this.uuid(e);this._inserts[n]=this.scheduleRender(this,function(){this._inserts[n]=null,this.renderTree(e)})},n.prototype.appendTo=function(e,t){var n=this._dom.appendMorph(t);this.scheduleInsert(e,n)},n.prototype.replaceIn=function(e,t){var n=this._dom.createMorph(t,null,null);this.scheduleInsert(e,n)},n.prototype.remove=r,n.prototype.destroy=function(e){this.remove(e,!0)},n.prototype.renderTree=i,n.prototype.insertElement=s,n.prototype.beforeRemove=o,n.prototype.afterRemove=a;var u=function(){};n.prototype.willCreateElement=u,n.prototype.createElement=u,n.prototype.didCreateElement=u,n.prototype.willInsertElement=u,n.prototype.didInsertElement=u,n.prototype.willRemoveElement=u,n.prototype.willDestroyElement=u,n.prototype.didDestroyElement=u,n.prototype.destroyView=u,n.prototype.childViews=u,t["default"]=n}),e("ember-metal",["ember-metal/core","ember-metal/merge","ember-metal/instrumentation","ember-metal/utils","ember-metal/error","ember-metal/enumerable_utils","ember-metal/cache","ember-metal/platform","ember-metal/array","ember-metal/logger","ember-metal/property_get","ember-metal/events","ember-metal/observer_set","ember-metal/property_events","ember-metal/properties","ember-metal/property_set","ember-metal/map","ember-metal/get_properties","ember-metal/set_properties","ember-metal/watch_key","ember-metal/chains","ember-metal/watch_path","ember-metal/watching","ember-metal/expand_properties","ember-metal/computed","ember-metal/computed_macros","ember-metal/observer","ember-metal/mixin","ember-metal/binding","ember-metal/run_loop","ember-metal/libraries","ember-metal/is_none","ember-metal/is_empty","ember-metal/is_blank","ember-metal/is_present","ember-metal/keys","exports"],function(e,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S,I,E,k,T,P,A,M,O,D,L,R,B,N){"use strict";var F=e["default"],z=n["default"],H=i.instrument,W=i.subscribe,V=i.unsubscribe,j=i.reset,U=r.generateGuid,q=r.GUID_KEY,K=r.guidFor,J=r.META_DESC,G=r.EMPTY_META,$=r.meta,Y=r.getMeta,Z=r.setMeta,X=r.metaPath,Q=r.inspect,et=r.typeOf,tt=r.tryCatchFinally,nt=r.isArray,it=r.makeArray,rt=r.canInvoke,st=r.tryInvoke,ot=r.tryFinally,at=r.wrap,lt=r.apply,ut=r.applyStr,ct=r.uuid,ht=s["default"],dt=o["default"],pt=a["default"],mt=l.create,ft=l.hasPropertyAccessors,_t=u.filter,gt=u.forEach,vt=u.indexOf,yt=u.map,bt=c["default"],wt=h.get,Ct=h.getWithDefault,xt=h.normalizeTuple,St=h._getPath,It=d.on,Et=d.addListener,kt=d.removeListener,Tt=d.suspendListener,Pt=d.suspendListeners,At=d.sendEvent,Mt=d.hasListeners,Ot=d.watchedEvents,Dt=d.listenersFor,Lt=d.listenersDiff,Rt=d.listenersUnion,Bt=p["default"],Nt=m.propertyWillChange,Ft=m.propertyDidChange,zt=m.overrideChains,Ht=m.beginPropertyChanges,Wt=m.endPropertyChanges,Vt=m.changeProperties,jt=f.Descriptor,Ut=f.defineProperty,qt=_.set,Kt=_.trySet,Jt=g.OrderedSet,Gt=g.Map,$t=g.MapWithDefault,Yt=v["default"],Zt=y["default"],Xt=b.watchKey,Qt=b.unwatchKey,en=w.flushPendingChains,tn=w.removeChainWatcher,nn=w.ChainNode,rn=w.finishChains,sn=C.watchPath,on=C.unwatchPath,an=x.watch,ln=x.isWatching,un=x.unwatch,cn=x.rewatch,hn=x.destroy,dn=S["default"],pn=I.ComputedProperty,mn=I.computed,fn=I.cacheFor,_n=k.addObserver,gn=k.observersFor,vn=k.removeObserver,yn=k.addBeforeObserver,bn=k._suspendBeforeObserver,wn=k._suspendObserver,Cn=k._suspendBeforeObservers,xn=k._suspendObservers,Sn=k.beforeObserversFor,In=k.removeBeforeObserver,En=T.IS_BINDING,kn=T.mixin,Tn=T.Mixin,Pn=T.required,An=T.aliasMethod,Mn=T.observer,On=T.immediateObserver,Dn=T.beforeObserver,Ln=P.Binding,Rn=P.isGlobalPath,Bn=P.bind,Nn=P.oneWay,Fn=A["default"],zn=M["default"],Hn=O.isNone,Wn=O.none,Vn=D.isEmpty,jn=D.empty,Un=L["default"],qn=R["default"],Kn=B["default"],Jn=F.Instrumentation={};Jn.instrument=H,Jn.subscribe=W,Jn.unsubscribe=V,Jn.reset=j,F.instrument=H,F.subscribe=W,F._Cache=pt,F.generateGuid=U,F.GUID_KEY=q,F.create=mt,F.keys=Kn,F.platform={defineProperty:Ut,hasPropertyAccessors:ft};var Gn=F.ArrayPolyfills={};Gn.map=yt,Gn.forEach=gt,Gn.filter=_t,Gn.indexOf=vt,F.Error=ht,F.guidFor=K,F.META_DESC=J,F.EMPTY_META=G,F.meta=$,F.getMeta=Y,F.setMeta=Z,F.metaPath=X,F.inspect=Q,F.typeOf=et,F.tryCatchFinally=tt,F.isArray=nt,F.makeArray=it,F.canInvoke=rt,F.tryInvoke=st,F.tryFinally=ot,F.wrap=at,F.apply=lt,F.applyStr=ut,F.uuid=ct,F.Logger=bt,F.get=wt,F.getWithDefault=Ct,F.normalizeTuple=xt,F._getPath=St,F.EnumerableUtils=dt,F.on=It,F.addListener=Et,F.removeListener=kt,F._suspendListener=Tt,F._suspendListeners=Pt,F.sendEvent=At,F.hasListeners=Mt,F.watchedEvents=Ot,F.listenersFor=Dt,F.listenersDiff=Lt,F.listenersUnion=Rt,F._ObserverSet=Bt,F.propertyWillChange=Nt,F.propertyDidChange=Ft,F.overrideChains=zt,F.beginPropertyChanges=Ht,F.endPropertyChanges=Wt,F.changeProperties=Vt,F.Descriptor=jt,F.defineProperty=Ut,F.set=qt,F.trySet=Kt,F.OrderedSet=Jt,F.Map=Gt,F.MapWithDefault=$t,F.getProperties=Yt,F.setProperties=Zt,F.watchKey=Xt,F.unwatchKey=Qt,F.flushPendingChains=en,F.removeChainWatcher=tn,F._ChainNode=nn,F.finishChains=rn,F.watchPath=sn,F.unwatchPath=on,F.watch=an,F.isWatching=ln,F.unwatch=un,F.rewatch=cn,F.destroy=hn,F.expandProperties=dn,F.ComputedProperty=pn,F.computed=mn,F.cacheFor=fn,F.addObserver=_n,F.observersFor=gn,F.removeObserver=vn,F.addBeforeObserver=yn,F._suspendBeforeObserver=bn,F._suspendBeforeObservers=Cn,F._suspendObserver=wn,F._suspendObservers=xn,F.beforeObserversFor=Sn,F.removeBeforeObserver=In,F.IS_BINDING=En,F.required=Pn,F.aliasMethod=An,F.observer=Mn,F.immediateObserver=On,F.beforeObserver=Dn,F.mixin=kn,F.Mixin=Tn,F.oneWay=Nn,F.bind=Bn,F.Binding=Ln,F.isGlobalPath=Rn,F.run=Fn,F.libraries=zn,F.libraries.registerCoreLibrary("Ember",F.VERSION),F.isNone=Hn,F.none=Wn,F.isEmpty=Vn,F.empty=jn,F.isBlank=Un,F.isPresent=qn,F.merge=z,F.onerror=null,F.__loader.registry["ember-debug"]&&t("ember-debug"),N["default"]=F}),e("ember-metal/alias",["ember-metal/property_get","ember-metal/property_set","ember-metal/error","ember-metal/properties","ember-metal/computed","ember-metal/platform","ember-metal/utils","ember-metal/dependent_keys","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e){return new c(e)}function c(e){this.altKey=e,this._dependentKeys=[e]}function h(e,t){throw new f('Cannot set read-only property "'+t+'" on object: '+w(e))}function d(e,t,n){return g(e,t,null),m(e,t,n)}var p=e.get,m=t.set,f=n["default"],_=i.Descriptor,g=i.defineProperty,v=r.ComputedProperty,y=s.create,b=o.meta,w=o.inspect,C=a.addDependentKeys,x=a.removeDependentKeys;l.alias=u,l.AliasedProperty=c,c.prototype=y(_.prototype),c.prototype.get=function(e){return p(e,this.altKey)},c.prototype.set=function(e,t,n){return m(e,this.altKey,n)},c.prototype.willWatch=function(e,t){C(this,e,t,b(e))},c.prototype.didUnwatch=function(e,t){x(this,e,t,b(e))},c.prototype.setup=function(e,t){var n=b(e);n.watching[t]&&C(this,e,t,n)},c.prototype.teardown=function(e,t){var n=b(e);n.watching[t]&&x(this,e,t,n)},c.prototype.readOnly=function(){return this.set=h,this},c.prototype.oneWay=function(){return this.set=d,this},c.prototype._meta=void 0,c.prototype.meta=v.prototype.meta}),e("ember-metal/array",["exports"],function(e){"use strict";var t=Array.prototype,n=function(e){return e&&Function.prototype.toString.call(e).indexOf("[native code]")>-1},i=function(e,t){return n(e)?e:t},s=i(t.map,function(e){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=new Array(n),r=arguments[1],s=0;n>s;s++)s in t&&(i[s]=e.call(r,t[s],s,t));return i}),o=i(t.forEach,function(e){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=0;n>r;r++)r in t&&e.call(i,t[r],r,t)}),a=i(t.indexOf,function(e,t){null===t||void 0===t?t=0:0>t&&(t=Math.max(0,this.length+t));for(var n=t,i=this.length;i>n;n++)if(this[n]===e)return n;return-1}),l=i(t.lastIndexOf,function(e,t){var n,i=this.length;for(t=void 0===t?i-1:0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=i),n=t;n>=0;n--)if(this[n]===e)return n;return-1}),u=i(t.filter,function(e,t){var n,i,r=[],s=this.length;for(n=0;s>n;n++)this.hasOwnProperty(n)&&(i=this[n],e.call(t,i,n,this)&&r.push(i));return r});r.SHIM_ES5&&(t.map=t.map||s,t.forEach=t.forEach||o,t.filter=t.filter||u,t.indexOf=t.indexOf||a,t.lastIndexOf=t.lastIndexOf||l),e.map=s,e.forEach=o,e.filter=u,e.indexOf=a,e.lastIndexOf=l}),e("ember-metal/binding",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/observer","ember-metal/run_loop","ember-metal/path_cache","exports"],function(e,t,n,i,r,s,o,a){"use strict";function l(e,t){return m(w(t)?p.lookup:e,t)}function u(e,t){this._direction=void 0,this._from=t,this._to=e,this._readyToSync=void 0,this._oneWay=void 0}function c(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function h(e,t,n){return new u(t,n).connect(e)}function d(e,t,n){return new u(t,n).oneWay().connect(e)}var p=e["default"],m=t.get,f=(n.set,n.trySet),_=i.guidFor,g=r.addObserver,v=r.removeObserver,y=r._suspendObserver,b=s["default"],w=o.isGlobal;p.LOG_BINDINGS=!1||!!p.ENV.LOG_BINDINGS,u.prototype={copy:function(){var e=new u(this._to,this._from);return this._oneWay&&(e._oneWay=!0),e},from:function(e){return this._from=e,this},to:function(e){return this._to=e,this},oneWay:function(){return this._oneWay=!0,this},toString:function(){var e=this._oneWay?"[oneWay]":"";
return"Ember.Binding<"+_(this)+">("+this._from+" -> "+this._to+")"+e},connect:function(e){var t=this._from,n=this._to;return f(e,n,l(e,t)),g(e,t,this,this.fromDidChange),this._oneWay||g(e,n,this,this.toDidChange),this._readyToSync=!0,this},disconnect:function(e){var t=!this._oneWay;return v(e,this._from,this,this.fromDidChange),t&&v(e,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(e){this._scheduleSync(e,"fwd")},toDidChange:function(e){this._scheduleSync(e,"back")},_scheduleSync:function(e,t){var n=this._direction;void 0===n&&(b.schedule("sync",this,this._sync,e),this._direction=t),"back"===n&&"fwd"===t&&(this._direction="fwd")},_sync:function(e){var t=p.LOG_BINDINGS;if(!e.isDestroyed&&this._readyToSync){var n=this._direction,i=this._from,r=this._to;if(this._direction=void 0,"fwd"===n){var s=l(e,this._from);t&&p.Logger.log(" ",this.toString(),"->",s,e),this._oneWay?f(e,r,s):y(e,r,this,this.toDidChange,function(){f(e,r,s)})}else if("back"===n){var o=m(e,this._to);t&&p.Logger.log(" ",this.toString(),"<-",o,e),y(e,i,this,this.fromDidChange,function(){f(w(i)?p.lookup:e,i,o)})}}}},c(u,{from:function(e){var t=this;return new t(void 0,e)},to:function(e){var t=this;return new t(e,void 0)},oneWay:function(e,t){var n=this;return new n(void 0,e).oneWay(t)}}),a.bind=h,a.oneWay=d,a.Binding=u,a.isGlobalPath=w}),e("ember-metal/cache",["ember-metal/dictionary","exports"],function(e,t){"use strict";function n(e,t){this.store=i(null),this.size=0,this.misses=0,this.hits=0,this.limit=e,this.func=t}var i=e["default"];t["default"]=n;var r=function(){};n.prototype={set:function(e,t){return this.limit>this.size&&(this.size++,this.store[e]=void 0===t?r:t),t},get:function(e){var t=this.store[e];return void 0===t?(this.misses++,t=this.set(e,this.func(e))):t===r?(this.hits++,t=void 0):this.hits++,t},purge:function(){this.store=i(null),this.size=0,this.hits=0,this.misses=0}}}),e("ember-metal/chains",["ember-metal/core","ember-metal/property_get","ember-metal/utils","ember-metal/array","ember-metal/watch_key","exports"],function(e,t,n,i,r,s){"use strict";function o(e){return e.match(C)[0]}function a(){if(0!==x.length){var e=x;x=[],g.call(e,function(e){e[0].add(e[1])}),w("Watching an undefined global, Ember expects watched globals to be setup by the time the run loop is flushed, check for typos",0===x.length)}}function l(e,t,n){if(e&&"object"==typeof e){var i=b(e),r=i.chainWatchers;i.hasOwnProperty("chainWatchers")||(r=i.chainWatchers={}),r[t]||(r[t]=[]),r[t].push(n),v(e,t,i)}}function u(e,t,n){if(e&&"object"==typeof e){var i=e.__ember_meta__;if(!i||i.hasOwnProperty("chainWatchers")){var r=i&&i.chainWatchers;if(r&&r[t]){r=r[t];for(var s=0,o=r.length;o>s;s++)if(r[s]===n){r.splice(s,1);break}}y(e,t,i)}}}function c(e,t,n){this._parent=e,this._key=t,this._watching=void 0===n,this._value=n,this._paths={},this._watching&&(this._object=e.value(),this._object&&l(this._object,this._key,this)),this._parent&&"@each"===this._parent._key&&this.value()}function h(e,t){if(!e)return void 0;var n=e.__ember_meta__;if(n&&n.proto===e)return void 0;if("@each"===t)return m(e,t);var i=n&&n.descs[t];return i&&i._cacheable?t in n.cache?n.cache[t]:void 0:m(e,t)}function d(e){var t,n,i,r=e.__ember_meta__;if(r){if(n=r.chainWatchers)for(var s in n)if(n.hasOwnProperty(s)&&(i=n[s]))for(var o=0,a=i.length;a>o;o++)i[o].didChange(null);t=r.chains,t&&t.value()!==e&&(b(e).chains=t=t.copy(e))}}var p=e["default"],m=t.get,f=t.normalizeTuple,_=n.meta,g=i.forEach,v=r.watchKey,y=r.unwatchKey,b=_,w=p.warn,C=/^([^\.]+)/,x=[];s.flushPendingChains=a;var S=c.prototype;S.value=function(){if(void 0===this._value&&this._watching){var e=this._parent.value();this._value=h(e,this._key)}return this._value},S.destroy=function(){if(this._watching){var e=this._object;e&&u(e,this._key,this),this._watching=!1}},S.copy=function(e){var t,n=new c(null,null,e),i=this._paths;for(t in i)i[t]<=0||n.add(t);return n},S.add=function(e){var t,n,i,r,s;if(s=this._paths,s[e]=(s[e]||0)+1,t=this.value(),n=f(t,e),n[0]&&n[0]===t)e=n[1],i=o(e),e=e.slice(i.length+1);else{if(!n[0])return x.push([this,e]),void(n.length=0);r=n[0],i=e.slice(0,0-(n[1].length+1)),e=n[1]}n.length=0,this.chain(i,e,r)},S.remove=function(e){var t,n,i,r,s;s=this._paths,s[e]>0&&s[e]--,t=this.value(),n=f(t,e),n[0]===t?(e=n[1],i=o(e),e=e.slice(i.length+1)):(r=n[0],i=e.slice(0,0-(n[1].length+1)),e=n[1]),n.length=0,this.unchain(i,e)},S.count=0,S.chain=function(e,t,n){var i,r=this._chains;r||(r=this._chains={}),i=r[e],i||(i=r[e]=new c(this,e,n)),i.count++,t&&(e=o(t),t=t.slice(e.length+1),i.chain(e,t))},S.unchain=function(e,t){var n=this._chains,i=n[e];t&&t.length>1&&(e=o(t),t=t.slice(e.length+1),i.unchain(e,t)),i.count--,i.count<=0&&(delete n[i._key],i.destroy())},S.willChange=function(e){var t=this._chains;if(t)for(var n in t)t.hasOwnProperty(n)&&t[n].willChange(e);this._parent&&this._parent.chainWillChange(this,this._key,1,e)},S.chainWillChange=function(e,t,n,i){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainWillChange(this,t,n+1,i):(n>1&&i.push(this.value(),t),t="this."+t,this._paths[t]>0&&i.push(this.value(),t))},S.chainDidChange=function(e,t,n,i){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainDidChange(this,t,n+1,i):(n>1&&i.push(this.value(),t),t="this."+t,this._paths[t]>0&&i.push(this.value(),t))},S.didChange=function(e){if(this._watching){var t=this._parent.value();t!==this._object&&(u(this._object,this._key,this),this._object=t,l(t,this._key,this)),this._value=void 0,this._parent&&"@each"===this._parent._key&&this.value()}var n=this._chains;if(n)for(var i in n)n.hasOwnProperty(i)&&n[i].didChange(e);null!==e&&this._parent&&this._parent.chainDidChange(this,this._key,1,e)},s.finishChains=d,s.removeChainWatcher=u,s.ChainNode=c}),e("ember-metal/computed",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/expand_properties","ember-metal/error","ember-metal/properties","ember-metal/property_events","ember-metal/dependent_keys","exports"],function(e,t,n,i,r,s,o,a,l,u){"use strict";function c(){}function h(e,t){e.__ember_arity__=e.length,this.func=e,this._cacheable=t&&void 0!==t.cacheable?t.cacheable:!0,this._dependentKeys=t&&t.dependentKeys,this._readOnly=t&&(void 0!==t.readOnly||!!t.readOnly)||!1}function d(e){for(var t=0,n=e.length;n>t;t++)e[t].didChange(null)}function p(e){var t;if(arguments.length>1&&(t=k.call(arguments),e=t.pop()),"function"!=typeof e)throw new y("Computed Property declared without a property function");var n=new h(e);return t&&n.property.apply(n,t),n}function m(e,t){var n=e.__ember_meta__,i=n&&n.cache,r=i&&i[t];return r===c?void 0:r}var f=(e["default"],t.get,n.set),_=i.meta,g=i.inspect,v=r["default"],y=s["default"],b=o.Descriptor,w=o.defineProperty,C=a.propertyWillChange,x=a.propertyDidChange,S=l.addDependentKeys,I=l.removeDependentKeys,E=_,k=[].slice;h.prototype=new b;var T=h.prototype;T._dependentKeys=void 0,T._suspended=void 0,T._meta=void 0,T.cacheable=function(e){return this._cacheable=e!==!1,this},T["volatile"]=function(){return this.cacheable(!1)},T.readOnly=function(e){return this._readOnly=void 0===e||!!e,this},T.property=function(){var e,t=function(t){e.push(t)};e=[];for(var n=0,i=arguments.length;i>n;n++)v(arguments[n],t);return this._dependentKeys=e,this},T.meta=function(e){return 0===arguments.length?this._meta||{}:(this._meta=e,this)},T.didChange=function(e,t){if(this._cacheable&&this._suspended!==e){var n=E(e);void 0!==n.cache[t]&&(n.cache[t]=void 0,I(this,e,t,n))}},T.get=function(e,t){var n,i,r,s;if(this._cacheable){r=E(e),i=r.cache;var o=i[t];if(o===c)return void 0;if(void 0!==o)return o;n=this.func.call(e,t),i[t]=void 0===n?c:n,s=r.chainWatchers&&r.chainWatchers[t],s&&d(s),S(this,e,t,r)}else n=this.func.call(e,t);return n},T.set=function(e,t,n){var i=this._suspended;this._suspended=e;try{this._set(e,t,n)}finally{this._suspended=i}},T._set=function(e,t,n){var i,r,s,o=this._cacheable,a=this.func,l=E(e,o),u=l.cache,h=!1;if(this._readOnly)throw new y('Cannot set read-only property "'+t+'" on object: '+g(e));if(o&&void 0!==u[t]&&(u[t]!==c&&(r=u[t]),h=!0),i=a.wrappedFunction?a.wrappedFunction.__ember_arity__:a.__ember_arity__,3===i)s=a.call(e,t,n,r);else{if(2!==i)return w(e,t,null,r),void f(e,t,n);s=a.call(e,t,n)}if(!h||r!==s){var d=l.watching[t];return d&&C(e,t),h&&(u[t]=void 0),o&&(h||S(this,e,t,l),u[t]=void 0===s?c:s),d&&x(e,t),s}},T.teardown=function(e,t){var n=E(e);return t in n.cache&&I(this,e,t,n),this._cacheable&&delete n.cache[t],null},m.set=function(e,t,n){e[t]=void 0===n?c:n},m.get=function(e,t){var n=e[t];return n===c?void 0:n},m.remove=function(e,t){e[t]=void 0},u.ComputedProperty=h,u.computed=p,u.cacheFor=m}),e("ember-metal/computed_macros",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/computed","ember-metal/is_empty","ember-metal/is_none","ember-metal/alias"],function(e,t,n,i,r,s,o){"use strict";function a(e,t){for(var n={},i=0;i<t.length;i++)n[t[i]]=c(e,t[i]);return n}function l(e,t){d[e]=function(e){var n=_.call(arguments);return d(e,function(){return t.apply(this,n)})}}function u(e,t){d[e]=function(){var e=_.call(arguments),n=d(function(){return t.apply(this,[a(this,e)])});return n.property.apply(n,e)}}var c=(e["default"],t.get),h=n.set,d=i.computed,p=r["default"],m=s.isNone,f=o.alias,_=[].slice;d.empty=function(e){return d(e+".length",function(){return p(c(this,e))})},d.notEmpty=function(e){return d(e+".length",function(){return!p(c(this,e))})},l("none",function(e){return m(c(this,e))}),l("not",function(e){return!c(this,e)}),l("bool",function(e){return!!c(this,e)}),l("match",function(e,t){var n=c(this,e);return"string"==typeof n?t.test(n):!1}),l("equal",function(e,t){return c(this,e)===t}),l("gt",function(e,t){return c(this,e)>t}),l("gte",function(e,t){return c(this,e)>=t}),l("lt",function(e,t){return c(this,e)<t}),l("lte",function(e,t){return c(this,e)<=t}),u("and",function(e){for(var t in e)if(e.hasOwnProperty(t)&&!e[t])return!1;return!0}),u("or",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1}),u("any",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return e[t];return null}),u("collect",function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(m(e[n])?null:e[n]);return t}),d.alias=f,d.oneWay=function(e){return f(e).oneWay()},d.reads=d.oneWay,d.readOnly=function(e){return f(e).readOnly()},d.defaultTo=function(e){return d(function(t,n){return 1===arguments.length?c(this,e):null!=n?n:c(this,e)})},d.deprecatingAlias=function(e){return d(e,function(t,n){return arguments.length>1?(h(this,e,n),n):c(this,e)})}}),e("ember-metal/core",["exports"],function(e){"use strict";"undefined"==typeof r&&(r={});{var t=(r.imports=r.imports||this,r.exports=r.exports||this);r.lookup=r.lookup||this}t.Em=t.Ember=r,r.isNamespace=!0,r.toString=function(){return"Ember"},r.VERSION="1.8.1",r.ENV||(r.ENV="undefined"!=typeof EmberENV?EmberENV:"undefined"!=typeof ENV?ENV:{}),r.config=r.config||{},"undefined"==typeof r.ENV.DISABLE_RANGE_API&&(r.ENV.DISABLE_RANGE_API=!0),"undefined"==typeof MetamorphENV&&(t.MetamorphENV={}),MetamorphENV.DISABLE_RANGE_API=r.ENV.DISABLE_RANGE_API,r.FEATURES=r.ENV.FEATURES||{},r.FEATURES.isEnabled=function(e){var t=r.FEATURES[e];return r.ENV.ENABLE_ALL_FEATURES?!0:t===!0||t===!1||void 0===t?t:r.ENV.ENABLE_OPTIONAL_FEATURES?!0:!1},r.EXTEND_PROTOTYPES=r.ENV.EXTEND_PROTOTYPES,"undefined"==typeof r.EXTEND_PROTOTYPES&&(r.EXTEND_PROTOTYPES=!0),r.LOG_STACKTRACE_ON_DEPRECATION=r.ENV.LOG_STACKTRACE_ON_DEPRECATION!==!1,r.SHIM_ES5=r.ENV.SHIM_ES5===!1?!1:r.EXTEND_PROTOTYPES,r.LOG_VERSION=r.ENV.LOG_VERSION===!1?!1:!0;var n=function(){return this},n=n;e.K=n,r.K=n,"undefined"==typeof r.assert&&(r.assert=r.K),"undefined"==typeof r.warn&&(r.warn=r.K),"undefined"==typeof r.debug&&(r.debug=r.K),"undefined"==typeof r.runInDebug&&(r.runInDebug=r.K),"undefined"==typeof r.deprecate&&(r.deprecate=r.K),"undefined"==typeof r.deprecateFunc&&(r.deprecateFunc=function(e,t){return t}),e["default"]=r}),e("ember-metal/dependent_keys",["ember-metal/platform","ember-metal/watching","exports"],function(e,t,n){function i(e,t){var n=e[t];return n?e.hasOwnProperty(t)||(n=e[t]=a(n)):n=e[t]={},n}function r(e){return i(e,"deps")}function s(e,t,n,s){var o,a,u,c,h,d=e._dependentKeys;if(d)for(o=r(s),a=0,u=d.length;u>a;a++)c=d[a],h=i(o,c),h[n]=(h[n]||0)+1,l(t,c,s)}function o(e,t,n,s){var o,a,l,c,h,d=e._dependentKeys;if(d)for(o=r(s),a=0,l=d.length;l>a;a++)c=d[a],h=i(o,c),h[n]=(h[n]||0)-1,u(t,c,s)}var a=e.create,l=t.watch,u=t.unwatch;n.addDependentKeys=s,n.removeDependentKeys=o}),e("ember-metal/deprecate_property",["ember-metal/core","ember-metal/platform","ember-metal/properties","ember-metal/property_get","ember-metal/property_set","exports"],function(e,t,n,i,r,s){"use strict";function o(e,t,n){function i(){}a&&l(e,t,{configurable:!0,enumerable:!1,set:function(e){i(),c(this,n,e)},get:function(){return i(),u(this,n)}})}var a=(e["default"],t.hasPropertyAccessors),l=n.defineProperty,u=i.get,c=r.set;s.deprecateProperty=o}),e("ember-metal/dictionary",["ember-metal/platform","exports"],function(e,t){"use strict";var n=e.create;t["default"]=function(e){var t=n(e);return t._dict=null,delete t._dict,t}}),e("ember-metal/enumerable_utils",["ember-metal/array","exports"],function(e,t){"use strict";function n(e,t,n){return e.map?e.map(t,n):f.call(e,t,n)}function i(e,t,n){return e.forEach?e.forEach(t,n):p.call(e,t,n)}function r(e,t,n){return e.filter?e.filter(t,n):d.call(e,t,n)}function s(e,t,n){return e.indexOf?e.indexOf(t,n):m.call(e,t,n)}function o(e,t){return void 0===t?[]:n(t,function(t){return s(e,t)})}function a(e,t){var n=s(e,t);-1===n&&e.push(t)}function l(e,t){var n=s(e,t);-1!==n&&e.splice(n,1)}function u(e,t,n,i){for(var r,s,o=[].concat(i),a=[],l=6e4,u=t,c=n;o.length;)r=c>l?l:c,0>=r&&(r=0),s=o.splice(0,l),s=[u,r].concat(s),u+=l,c-=r,a=a.concat(_.apply(e,s));return a}function c(e,t,n,i){return e.replace?e.replace(t,n,i):u(e,t,n,i)}function h(e,t){var n=[];return i(e,function(e){s(t,e)>=0&&n.push(e)}),n}var d=e.filter,p=e.forEach,m=e.indexOf,f=e.map,_=Array.prototype.splice;t.map=n,t.forEach=i,t.filter=r,t.indexOf=s,t.indexesOf=o,t.addObject=a,t.removeObject=l,t._replace=u,t.replace=c,t.intersection=h,t["default"]={_replace:u,addObject:a,filter:r,forEach:i,indexOf:s,indexesOf:o,intersection:h,map:n,removeObject:l,replace:c}}),e("ember-metal/error",["ember-metal/platform","exports"],function(e,t){"use strict";function n(){var e=Error.apply(this,arguments);Error.captureStackTrace&&Error.captureStackTrace(this,r.Error);for(var t=0;t<s.length;t++)this[s[t]]=e[s[t]]}var i=e.create,s=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=i(Error.prototype),t["default"]=n}),e("ember-metal/events",["ember-metal/core","ember-metal/utils","ember-metal/platform","exports"],function(e,t,n,i){function r(e,t,n){for(var i=-1,r=e.length-3;r>=0;r-=3)if(t===e[r]&&n===e[r+1]){i=r;break}return i}function s(e,t){var n,i=S(e,!0);return i.listeners||(i.listeners={}),i.hasOwnProperty("listeners")||(i.listeners=C(i.listeners)),n=i.listeners[t],n&&!i.listeners.hasOwnProperty(t)?n=i.listeners[t]=i.listeners[t].slice():n||(n=i.listeners[t]=[]),n}function o(e,t,n){var i=e.__ember_meta__,s=i&&i.listeners&&i.listeners[t];if(s)for(var o=s.length-3;o>=0;o-=3){var a=s[o],l=s[o+1],u=s[o+2],c=r(n,a,l);-1===c&&n.push(a,l,u)}}function a(e,t,n){var i=e.__ember_meta__,s=i&&i.listeners&&i.listeners[t],o=[];if(s){for(var a=s.length-3;a>=0;a-=3){var l=s[a],u=s[a+1],c=s[a+2],h=r(n,l,u);-1===h&&(n.push(l,u,c),o.push(l,u,c))}return o}}function l(e,t,n,i,o){i||"function"!=typeof n||(i=n,n=null);var a=s(e,t),l=r(a,n,i),u=0;o&&(u|=I),-1===l&&(a.push(n,i,u),"function"==typeof e.didAddListener&&e.didAddListener(t,n,i))}function u(e,t,n,i){function o(n,i){var o=s(e,t),a=r(o,n,i);-1!==a&&(o.splice(a,3),"function"==typeof e.didRemoveListener&&e.didRemoveListener(t,n,i))}if(i||"function"!=typeof n||(i=n,n=null),i)o(n,i);else{var a=e.__ember_meta__,l=a&&a.listeners&&a.listeners[t];if(!l)return;for(var u=l.length-3;u>=0;u-=3)o(l[u],l[u+1])}}function c(e,t,n,i,o){function a(){return o.call(n)}function l(){-1!==c&&(u[c+2]&=~E)}i||"function"!=typeof n||(i=n,n=null);var u=s(e,t),c=r(u,n,i);return-1!==c&&(u[c+2]|=E),y(a,l)}function h(e,t,n,i,o){function a(){return o.call(n)}function l(){for(var e=0,t=p.length;t>e;e++){var n=p[e];m[e][n+2]&=~E}}i||"function"!=typeof n||(i=n,n=null);var u,c,h,d,p=[],m=[];for(h=0,d=t.length;d>h;h++){u=t[h],c=s(e,u);var f=r(c,n,i);-1!==f&&(c[f+2]|=E,p.push(f),m.push(c))}return y(a,l)}function d(e){var t=e.__ember_meta__.listeners,n=[];if(t)for(var i in t)t[i]&&n.push(i);return n}function p(e,t,n,i){if(e!==g&&"function"==typeof e.sendEvent&&e.sendEvent(t,n),!i){var r=e.__ember_meta__;i=r&&r.listeners&&r.listeners[t]}if(i){for(var s=i.length-3;s>=0;s-=3){var o=i[s],a=i[s+1],l=i[s+2];a&&(l&E||(l&I&&u(e,t,o,a),o||(o=e),"string"==typeof a?n?w(o,a,n):o[a]():n?b(o,a,n):a.call(o)))}return!0}}function m(e,t){var n=e.__ember_meta__,i=n&&n.listeners&&n.listeners[t];return!(!i||!i.length)}function f(e,t){var n=[],i=e.__ember_meta__,r=i&&i.listeners&&i.listeners[t];if(!r)return n;for(var s=0,o=r.length;o>s;s+=3){var a=r[s],l=r[s+1];n.push([a,l])}return n}function _(){var e=x.call(arguments,-1)[0],t=x.call(arguments,0,-1);return e.__ember_listens__=t,e}var g=e["default"],v=t.meta,y=t.tryFinally,b=t.apply,w=t.applyStr,C=n.create,x=[].slice,S=v,I=1,E=2;i.listenersUnion=o,i.listenersDiff=a,i.addListener=l,i.suspendListener=c,i.suspendListeners=h,i.watchedEvents=d,i.sendEvent=p,i.hasListeners=m,i.listenersFor=f,i.on=_,i.removeListener=u}),e("ember-metal/expand_properties",["ember-metal/core","ember-metal/error","ember-metal/enumerable_utils","exports"],function(e,t,n,i){"use strict";function r(e,t){if("string"===o.typeOf(e)){var n=e.split(u),i=[n];l(n,function(e,t){e.indexOf(",")>=0&&(i=s(i,e.split(","),t))}),l(i,function(e){t(e.join(""))})}else t(e)}function s(e,t,n){var i=[];return l(e,function(e){l(t,function(t){var r=e.slice(0);r[n]=t,i.push(r)})}),i}var o=e["default"],a=t["default"],l=n.forEach,u=/\{|\}/;i["default"]=function(e,t){if(e.indexOf(" ")>-1)throw new a("Brace expanded properties cannot contain spaces, e.g. `user.{firstName, lastName}` should be `user.{firstName,lastName}`");return r(e,t)}}),e("ember-metal/get_properties",["ember-metal/property_get","ember-metal/utils","exports"],function(e,t,n){"use strict";var i=e.get,r=t.typeOf;n["default"]=function(e){var t={},n=arguments,s=1;2===arguments.length&&"array"===r(arguments[1])&&(s=0,n=arguments[1]);for(var o=n.length;o>s;s++)t[n[s]]=i(e,n[s]);return t}}),e("ember-metal/instrumentation",["ember-metal/core","ember-metal/utils","exports"],function(e,t,n){"use strict";function i(e,t,n,i){if(0===c.length)return n.call(i);var s=t||{},o=r(e,function(){return s});if(o){var a=function(){return n.call(i)},l=function(e){s.exception=e};return u(a,l,o)}return n.call(i)}function r(e,t){var n=h[e];if(n||(n=d(e)),0!==n.length){var i,r=t(),s=l.STRUCTURED_PROFILE;s&&(i=e+": "+r.object,console.time(i));var o,a,u=n.length,c=new Array(u),m=p();for(o=0;u>o;o++)a=n[o],c[o]=a.before(e,m,r);return function(){var t,o,a,l=p();for(t=0,o=n.length;o>t;t++)a=n[t],a.after(e,l,r,c[t]);s&&console.timeEnd(i)}}}function s(e,t){for(var n,i=e.split("."),r=[],s=0,o=i.length;o>s;s++)n=i[s],r.push("*"===n?"[^\\.]*":n);r=r.join("\\."),r+="(\\..*)?";var a={pattern:e,regex:new RegExp("^"+r+"$"),object:t};return c.push(a),h={},a}function o(e){for(var t,n=0,i=c.length;i>n;n++)c[n]===e&&(t=n);c.splice(t,1),h={}}function a(){c.length=0,h={}}var l=e["default"],u=t.tryCatchFinally,c=[];n.subscribers=c;var h={},d=function(e){for(var t,n=[],i=0,r=c.length;r>i;i++)t=c[i],t.regex.test(e)&&n.push(t.object);return h[e]=n,n},p=function(){var e="undefined"!=typeof window?window.performance||{}:{},t=e.now||e.mozNow||e.webkitNow||e.msNow||e.oNow;return t?t.bind(e):function(){return+new Date}}();n.instrument=i,n._instrumentStart=r,n.subscribe=s,n.unsubscribe=o,n.reset=a}),e("ember-metal/is_blank",["ember-metal/core","ember-metal/is_empty","exports"],function(e,t,n){"use strict";var i=(e["default"],t["default"]);n["default"]=function(e){return i(e)||"string"==typeof e&&null===e.match(/\S/)}}),e("ember-metal/is_empty",["ember-metal/core","ember-metal/property_get","ember-metal/is_none","exports"],function(e,t,n,i){"use strict";function r(e){var t=a(e);if(t)return t;if("number"==typeof e.size)return!e.size;var n=typeof e;if("object"===n){var i=o(e,"size");if("number"==typeof i)return!i}if("number"==typeof e.length&&"function"!==n)return!e.length;if("object"===n){var r=o(e,"length");if("number"==typeof r)return!r}return!1}var s=e["default"],o=t.get,a=n["default"],l=s.deprecateFunc("Ember.empty is deprecated. Please use Ember.isEmpty instead.",r);i.empty=l,i["default"]=r,i.isEmpty=r,i.empty=l}),e("ember-metal/is_none",["ember-metal/core","exports"],function(e,t){"use strict";function n(e){return null===e||void 0===e}var i=e["default"],r=i.deprecateFunc("Ember.none is deprecated. Please use Ember.isNone instead.",n);t.none=r,t["default"]=n,t.isNone=n}),e("ember-metal/is_present",["ember-metal/is_blank","exports"],function(e,t){"use strict";var n,i=e["default"];n=function(e){return!i(e)},t["default"]=n}),e("ember-metal/keys",["ember-metal/platform","exports"],function(e,t){"use strict";var n=e.canDefineNonEnumerableProperties,i=Object.keys;i&&n||(i=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var s,o,a=[];for(s in r)"_super"!==s&&0!==s.lastIndexOf("__",0)&&e.call(r,s)&&a.push(s);if(t)for(o=0;i>o;o++)e.call(r,n[o])&&a.push(n[o]);return a}}()),t["default"]=i}),e("ember-metal/libraries",["ember-metal/enumerable_utils","exports"],function(e,t){"use strict";var n=e.forEach,i=e.indexOf,r=function(){var e=[],t=0,r=function(t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n]};return e.register=function(t,n){r(t)||e.push({name:t,version:n})},e.registerCoreLibrary=function(n,i){r(n)||e.splice(t++,0,{name:n,version:i})},e.deRegister=function(t){var n=r(t);n&&e.splice(i(e,n),1)},e.each=function(t){n(e,function(e){t(e.name,e.version)})},e}();t["default"]=r}),e("ember-metal/logger",["ember-metal/core","ember-metal/error","exports"],function(e,t,n){"use strict";function i(e){var t,n;s.imports.console?t=s.imports.console:"undefined"!=typeof console&&(t=console);var i="object"==typeof t?t[e]:null;return i?"function"==typeof i.apply?(n=function(){i.apply(t,arguments)},n.displayName="console."+e,n):function(){var e=Array.prototype.join.call(arguments,", ");i(e)}:void 0}function r(e,t){if(!e)try{throw new o("assertion failed: "+t)}catch(n){setTimeout(function(){throw n},0)}}var s=e["default"],o=t["default"];n["default"]={log:i("log")||s.K,warn:i("warn")||s.K,error:i("error")||s.K,info:i("info")||s.K,debug:i("debug")||i("info")||s.K,assert:i("assert")||r}}),e("ember-metal/map",["ember-metal/utils","ember-metal/array","ember-metal/platform","ember-metal/deprecate_property","exports"],function(e,t,n,i,s){"use strict";function o(e){throw new TypeError(""+Object.prototype.toString.call(e)+" is not a function")}function a(e){throw new TypeError("Constructor "+e+"requires 'new'")}function l(e){var t=f(null);for(var n in e)t[n]=e[n];return t}function u(e,t){var n=e.keys.copy(),i=l(e.values);return t.keys=n,t.values=i,t.size=e.size,t}function c(){this instanceof c?(this.clear(),this._silenceRemoveDeprecation=!1):a("OrderedSet")}function h(){this instanceof this.constructor?(this.keys=c.create(),this.keys._silenceRemoveDeprecation=!0,this.values=f(null),this.size=0):a("OrderedSet")}function d(e){this._super$constructor(),this.defaultValue=e.defaultValue}var p=e.guidFor,m=t.indexOf,f=n.create,_=i.deprecateProperty;c.create=function(){var e=this;return new e},c.prototype={constructor:c,clear:function(){this.presenceSet=f(null),this.list=[],this.size=0},add:function(e,t){var n=t||p(e),i=this.presenceSet,r=this.list;return i[n]!==!0?(i[n]=!0,this.size=r.push(e),this):void 0},remove:function(e,t){return this["delete"](e,t)},"delete":function(e,t){var n=t||p(e),i=this.presenceSet,r=this.list;if(i[n]===!0){delete i[n];var s=m.call(r,e);return s>-1&&r.splice(s,1),this.size=r.length,!0}return!1},isEmpty:function(){return 0===this.size},has:function(e){if(0===this.size)return!1;var t=p(e),n=this.presenceSet;return n[t]===!0},forEach:function(e){if("function"!=typeof e&&o(e),0!==this.size){var t,n=this.list,i=arguments.length;if(2===i)for(t=0;t<n.length;t++)e.call(arguments[1],n[t]);else for(t=0;t<n.length;t++)e(n[t])}},toArray:function(){return this.list.slice()},copy:function(){var e=this.constructor,t=new e;return t._silenceRemoveDeprecation=this._silenceRemoveDeprecation,t.presenceSet=l(this.presenceSet),t.list=this.toArray(),t.size=this.size,t}},_(c.prototype,"length","size"),r.Map=h,h.create=function(){var e=this;return new e},h.prototype={constructor:h,size:0,get:function(e){if(0!==this.size){var t=this.values,n=p(e);return t[n]}},set:function(e,t){var n=this.keys,i=this.values,r=p(e),s=e===-0?0:e;return n.add(s,r),i[r]=t,this.size=n.size,this},remove:function(e){return this["delete"](e)},"delete":function(e){if(0===this.size)return!1;var t=this.keys,n=this.values,i=p(e);return t["delete"](e,i)?(delete n[i],this.size=t.size,!0):!1},has:function(e){return this.keys.has(e)},forEach:function(e){if("function"!=typeof e&&o(e),0!==this.size){var t,n,i=arguments.length,r=this;2===i?(n=arguments[1],t=function(t){e.call(n,r.get(t),t)}):t=function(t){e(r.get(t),t)},this.keys.forEach(t)}},clear:function(){this.keys.clear(),this.values=f(null),this.size=0},copy:function(){return u(this,new h)}},_(h.prototype,"length","size"),d.create=function(e){return e?new d(e):new h},d.prototype=f(h.prototype),d.prototype.constructor=d,d.prototype._super$constructor=h,d.prototype._super$get=h.prototype.get,d.prototype.get=function(e){var t=this.has(e);if(t)return this._super$get(e);var n=this.defaultValue(e);return this.set(e,n),n},d.prototype.copy=function(){var e=this.constructor;return u(this,new e({defaultValue:this.defaultValue}))},s["default"]=h,s.OrderedSet=c,s.Map=h,s.MapWithDefault=d}),e("ember-metal/merge",["ember-metal/keys","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){if(!t||"object"!=typeof t)return e;for(var i,r=n(t),s=r.length,o=0;s>o;o++)i=r[o],e[i]=t[i];return e}}),e("ember-metal/mixin",["ember-metal/core","ember-metal/merge","ember-metal/array","ember-metal/platform","ember-metal/utils","ember-metal/expand_properties","ember-metal/properties","ember-metal/computed","ember-metal/binding","ember-metal/observer","ember-metal/events","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h){function d(){var e,t=this.__nextSuper;if(t){for(var n=new Array(arguments.length),i=0,r=n.length;r>i;i++)n[i]=arguments[i];this.__nextSuper=null,e=X(this,t,n),this.__nextSuper=t}return e}function p(e){var t=ft(e,!0),n=t.mixins;return n?t.hasOwnProperty("mixins")||(n=t.mixins=mt(n)):n=t.mixins={},n}function m(e,t){return t&&t.length>0&&(e.mixins=ct.call(t,function(e){if(e instanceof O)return e;var t=new O;return t.properties=e,t})),e}function f(e){return"function"==typeof e&&e.isMethod!==!1&&e!==Boolean&&e!==Object&&e!==Number&&e!==Array&&e!==Date&&e!==String}function _(e,t){var n;return t instanceof O?(n=G(t),e[n]?_t:(e[n]=t,t.properties)):t}function g(e,t,n,i){var r;return r=n[e]||i[e],t[e]&&(r=r?r.concat(t[e]):t[e]),r}function v(e,t,n,i,r){var s;return void 0===i[t]&&(s=r[t]),s=s||e.descs[t],void 0!==s&&s instanceof nt?(n=mt(n),n.func=Y(n.func,s.func),n):n}function y(e,t,n,i,r){var s;return void 0===r[t]&&(s=i[t]),s=s||e[t],void 0===s||"function"!=typeof s?n:Y(n,s)}function b(e,t,n,i){var r=i[t]||e[t];return r?"function"==typeof r.concat?r.concat(n):Z(r).concat(n):Z(n)}function w(e,t,n,i){var r=i[t]||e[t];if(!r)return n;var s=j({},r),o=!1;for(var a in n)if(n.hasOwnProperty(a)){var l=n[a];f(l)?(o=!0,s[a]=y(e,a,l,r,{})):s[a]=l}return o&&(s._super=d),s}function C(e,t,n,i,r,s,o,a){if(n instanceof et){if(n===W&&r[t])return _t;n.func&&(n=v(i,t,n,s,r)),r[t]=n,s[t]=void 0}else o&&ht.call(o,t)>=0||"concatenatedProperties"===t||"mergedProperties"===t?n=b(e,t,n,s):a&&ht.call(a,t)>=0?n=w(e,t,n,s):f(n)&&(n=y(e,t,n,s,r)),r[t]=void 0,s[t]=n}function x(e,t,n,i,r,s){function o(e){delete n[e],delete i[e]}for(var a,l,u,c,h,d,p=0,m=e.length;m>p;p++)if(a=e[p],l=_(t,a),l!==_t)if(l){d=ft(r),r.willMergeMixin&&r.willMergeMixin(l),c=g("concatenatedProperties",l,i,r),h=g("mergedProperties",l,i,r);for(u in l)l.hasOwnProperty(u)&&(s.push(u),C(r,u,l[u],d,n,i,c,h));l.hasOwnProperty("toString")&&(r.toString=l.toString)}else a.mixins&&(x(a.mixins,t,n,i,r,s),a._without&&dt.call(a._without,o))}function S(e,t,n,i){if(gt.test(t)){var r=i.bindings;r?i.hasOwnProperty("bindings")||(r=i.bindings=mt(i.bindings)):r=i.bindings={},r[t]=n}}function I(e,t){var n,i,r,s=t.bindings;if(s){for(n in s)i=s[n],i&&(r=n.slice(0,-7),i instanceof it?(i=i.copy(),i.to(r)):i=new it(r,i),i.connect(e),e[n]=i);t.bindings={}}}function E(e,t){return I(e,t||ft(e)),e}function k(e,t,n,i,r){var s,o=t.methodName;return i[o]||r[o]?(s=r[o],t=i[o]):n.descs[o]?(t=n.descs[o],s=void 0):(t=void 0,s=e[o]),{desc:t,value:s}}function T(e,t,n,i,r){var s=n[i];if(s)for(var o=0,a=s.length;a>o;o++)r(e,s[o],null,t)}function P(e,t,n){var i=e[t];"function"==typeof i&&(T(e,t,i,"__ember_observesBefore__",at),T(e,t,i,"__ember_observes__",st),T(e,t,i,"__ember_listens__",ut)),"function"==typeof n&&(T(e,t,n,"__ember_observesBefore__",ot),T(e,t,n,"__ember_observes__",rt),T(e,t,n,"__ember_listens__",lt))}function A(e,t,n){var i,r,s,o={},a={},l=ft(e),u=[];e._super=d,x(t,p(e),o,a,e,u);for(var c=0,h=u.length;h>c;c++)if(i=u[c],"constructor"!==i&&a.hasOwnProperty(i)&&(s=o[i],r=a[i],s!==W)){for(;s&&s instanceof B;){var m=k(e,s,l,o,a);s=m.desc,r=m.value}(void 0!==s||void 0!==r)&&(P(e,i,r),S(e,i,r,l),tt(e,i,s,r,l))}return n||E(e,l),e}function M(e){var t=pt.call(arguments,1);return A(e,t,!1),e}function O(){return m(this,arguments)}function D(e,t,n){var i=G(e);if(n[i])return!1;if(n[i]=!0,e===t)return!0;for(var r=e.mixins,s=r?r.length:0;--s>=0;)if(D(r[s],t,n))return!0;return!1}function L(e,t,n){if(!n[G(t)])if(n[G(t)]=!0,t.properties){var i=t.properties;for(var r in i)i.hasOwnProperty(r)&&(e[r]=!0)}else t.mixins&&dt.call(t.mixins,function(t){L(e,t,n)})}function R(){return W}function B(e){this.methodName=e}function N(e){return new B(e)}function F(){var e,t=pt.call(arguments,-1)[0],n=function(t){e.push(t)},i=pt.call(arguments,0,-1);"function"!=typeof t&&(t=arguments[0],i=pt.call(arguments,1)),e=[];for(var r=0;r<i.length;++r)Q(i[r],n);if("function"!=typeof t)throw new V.Error("Ember.observer called without a function");return t.__ember_observes__=e,t}function z(){for(var e=0,t=arguments.length;t>e;e++){arguments[e]}return F.apply(this,arguments)}function H(){var e,t=pt.call(arguments,-1)[0],n=function(t){e.push(t)},i=pt.call(arguments,0,-1);"function"!=typeof t&&(t=arguments[0],i=pt.call(arguments,1)),e=[];for(var r=0;r<i.length;++r)Q(i[r],n);if("function"!=typeof t)throw new V.Error("Ember.beforeObserver called without a function");return t.__ember_observesBefore__=e,t}var W,V=e["default"],j=t["default"],U=n.map,q=n.indexOf,K=n.forEach,J=i.create,G=r.guidFor,$=r.meta,Y=r.wrap,Z=r.makeArray,X=r.apply,Q=(r.isArray,s["default"]),et=o.Descriptor,tt=o.defineProperty,nt=a.ComputedProperty,it=l.Binding,rt=u.addObserver,st=u.removeObserver,ot=u.addBeforeObserver,at=u.removeBeforeObserver,lt=c.addListener,ut=c.removeListener,ct=U,ht=q,dt=K,pt=[].slice,mt=J,ft=$,_t={},gt=/^.+Binding$/;h.mixin=M,h["default"]=O,O.prototype={properties:null,mixins:null,ownerConstructor:null},O._apply=A,O.applyPartial=function(e){var t=pt.call(arguments,1);return A(e,t,!0)},O.finishPartial=E,V.anyUnprocessedMixins=!1,O.create=function(){V.anyUnprocessedMixins=!0;
var e=this;return m(new e,arguments)};var vt=O.prototype;vt.reopen=function(){var e,t;this.properties?(e=O.create(),e.properties=this.properties,delete this.properties,this.mixins=[e]):this.mixins||(this.mixins=[]);var n,i=arguments.length,r=this.mixins;for(n=0;i>n;n++)e=arguments[n],e instanceof O?r.push(e):(t=O.create(),t.properties=e,r.push(t));return this},vt.apply=function(e){return A(e,[this],!1)},vt.applyPartial=function(e){return A(e,[this],!0)},vt.detect=function(e){if(!e)return!1;if(e instanceof O)return D(e,this,{});var t=e.__ember_meta__,n=t&&t.mixins;return n?!!n[G(this)]:!1},vt.without=function(){var e=new O(this);return e._without=pt.call(arguments),e},vt.keys=function(){var e={},t={},n=[];L(e,this,t);for(var i in e)e.hasOwnProperty(i)&&n.push(i);return n},O.mixins=function(e){var t=e.__ember_meta__,n=t&&t.mixins,i=[];if(!n)return i;for(var r in n){var s=n[r];s.properties||i.push(s)}return i},W=new et,W.toString=function(){return"(Required Property)"},h.required=R,B.prototype=new et,h.aliasMethod=N,h.observer=F,h.immediateObserver=z,h.beforeObserver=H,h.IS_BINDING=gt,h.Mixin=O}),e("ember-metal/observer",["ember-metal/watching","ember-metal/array","ember-metal/events","exports"],function(e,t,n,i){"use strict";function r(e){return e+S}function s(e){return e+I}function o(e,t,n,i){return b(e,r(t),n,i),_(e,t),this}function a(e,t){return y(e,r(t))}function l(e,t,n,i){return g(e,t),w(e,r(t),n,i),this}function u(e,t,n,i){return b(e,s(t),n,i),_(e,t),this}function c(e,t,n,i,r){return x(e,s(t),n,i,r)}function h(e,t,n,i,s){return x(e,r(t),n,i,s)}function d(e,t,n,i,r){var o=v.call(t,s);return C(e,o,n,i,r)}function p(e,t,n,i,s){var o=v.call(t,r);return C(e,o,n,i,s)}function m(e,t){return y(e,s(t))}function f(e,t,n,i){return g(e,t),w(e,s(t),n,i),this}var _=e.watch,g=e.unwatch,v=t.map,y=n.listenersFor,b=n.addListener,w=n.removeListener,C=n.suspendListeners,x=n.suspendListener,S=":change",I=":before";i.addObserver=o,i.observersFor=a,i.removeObserver=l,i.addBeforeObserver=u,i._suspendBeforeObserver=c,i._suspendObserver=h,i._suspendBeforeObservers=d,i._suspendObservers=p,i.beforeObserversFor=m,i.removeBeforeObserver=f}),e("ember-metal/observer_set",["ember-metal/utils","ember-metal/events","exports"],function(e,t,n){"use strict";function i(){this.clear()}var r=e.guidFor,s=t.sendEvent;n["default"]=i,i.prototype.add=function(e,t,n){var i,s=this.observerSet,o=this.observers,a=r(e),l=s[a];return l||(s[a]=l={}),i=l[t],void 0===i&&(i=o.push({sender:e,keyName:t,eventName:n,listeners:[]})-1,l[t]=i),o[i].listeners},i.prototype.flush=function(){var e,t,n,i,r=this.observers;for(this.clear(),e=0,t=r.length;t>e;++e)n=r[e],i=n.sender,i.isDestroying||i.isDestroyed||s(i,n.eventName,[i,n.keyName],n.listeners)},i.prototype.clear=function(){this.observerSet={},this.observers=[]}}),e("ember-metal/path_cache",["ember-metal/cache","exports"],function(e,t){"use strict";function n(e){return c.get(e)}function i(e){return h.get(e)}function r(e){return d.get(e)}function s(e){return p.get(e)}var o=e["default"],a=/^([A-Z$]|([0-9][A-Z$]))/,l=/^([A-Z$]|([0-9][A-Z$])).*[\.]/,u="this.",c=new o(1e3,function(e){return a.test(e)}),h=new o(1e3,function(e){return l.test(e)}),d=new o(1e3,function(e){return-1!==e.indexOf(u)}),p=new o(1e3,function(e){return-1!==e.indexOf(".")}),m={isGlobalCache:c,isGlobalPathCache:h,hasThisCache:d,isPathCache:p};t.caches=m,t.isGlobal=n,t.isGlobalPath=i,t.hasThis=r,t.isPath=s}),e("ember-metal/platform",["ember-metal/platform/define_property","ember-metal/platform/define_properties","ember-metal/platform/create","exports"],function(e,t,n,i){"use strict";var r=e.hasES5CompliantDefineProperty,s=e.defineProperty,o=t["default"],a=n["default"],l=r,u=r;i.create=a,i.defineProperty=s,i.defineProperties=o,i.hasPropertyAccessors=l,i.canDefineNonEnumerableProperties=u}),e("ember-metal/platform/create",["exports"],function(e){var t;if(!Object.create||Object.create(null).hasOwnProperty){var n,i=!({__proto__:null}instanceof Object);n=i||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function e(){}var t=document.createElement("iframe"),i=document.body||document.documentElement;t.style.display="none",i.appendChild(t),t.src="javascript:";var r=t.contentWindow.Object.prototype;return i.removeChild(t),t=null,delete r.constructor,delete r.hasOwnProperty,delete r.propertyIsEnumerable,delete r.isPrototypeOf,delete r.toLocaleString,delete r.toString,delete r.valueOf,e.prototype=r,n=function(){return new e},new e},t=Object.create=function(e,t){function i(){}var r;if(null===e)r=n();else{if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null");i.prototype=e,r=new i}return void 0!==t&&Object.defineProperties(r,t),r}}else t=Object.create;e["default"]=t}),e("ember-metal/platform/define_properties",["ember-metal/platform/define_property","exports"],function(e,t){"use strict";var n=e.defineProperty,i=Object.defineProperties;i||(i=function(e,t){for(var i in t)t.hasOwnProperty(i)&&"__proto__"!==i&&n(e,i,t[i]);return e},Object.defineProperties=i),t["default"]=i}),e("ember-metal/platform/define_property",["exports"],function(e){"use strict";var t=function(e){if(e)try{var t=5,n={};if(e(n,"a",{configurable:!0,enumerable:!0,get:function(){return t},set:function(e){t=e}}),5!==n.a)return;if(n.a=10,10!==t)return;e(n,"a",{configurable:!0,enumerable:!1,writable:!0,value:!0});for(var i in n)if("a"===i)return;if(n.a!==!0)return;return e}catch(r){return}}(Object.defineProperty),n=!!t;if(n&&"undefined"!=typeof document){var i=function(){try{return t(document.createElement("div"),"definePropertyOnDOM",{}),!0}catch(e){}return!1}();i||(t=function(e,t,n){var i;return i="object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName,i?e[t]=n.value:Object.defineProperty(e,t,n)})}n||(t=function(e,t,n){n.get||(e[t]=n.value)}),e.hasES5CompliantDefineProperty=n,e.defineProperty=t}),e("ember-metal/properties",["ember-metal/core","ember-metal/utils","ember-metal/platform","ember-metal/property_events","exports"],function(e,t,n,i,r){"use strict";function s(){}function o(){return function(){}}function a(e){return function(){var t=this.__ember_meta__;return t&&t.values[e]}}function l(e,t,n,i,r){var o,a,l,d;r||(r=u(e)),o=r.descs,a=r.descs[t];var p=r.watching[t];return l=void 0!==p&&p>0,a instanceof s&&a.teardown(e,t),n instanceof s?(d=n,o[t]=n,e[t]=void 0,n.setup&&n.setup(e,t)):(o[t]=void 0,null==n?(d=i,e[t]=i):(d=n,c(e,t,n))),l&&h(e,t,r),e.didDefineProperty&&e.didDefineProperty(e,t,d),this}var u=(e["default"],t.meta),c=n.defineProperty,h=(n.hasPropertyAccessors,i.overrideChains);r.Descriptor=s,r.MANDATORY_SETTER_FUNCTION=o,r.DEFAULT_GETTER_FUNCTION=a,r.defineProperty=l}),e("ember-metal/property_events",["ember-metal/utils","ember-metal/events","ember-metal/observer_set","exports"],function(e,t,n,i){"use strict";function r(e,t){var n=e.__ember_meta__,i=n&&n.watching[t]>0||"length"===t,r=n&&n.proto,s=n&&n.descs[t];i&&r!==e&&(s&&s.willChange&&s.willChange(e,t),o(e,t,n),c(e,t,n),_(e,t))}function s(e,t){var n=e.__ember_meta__,i=n&&n.watching[t]>0||"length"===t,r=n&&n.proto,s=n&&n.descs[t];r!==e&&(s&&s.didChange&&s.didChange(e,t),(i||"length"===t)&&(n&&n.deps&&n.deps[t]&&a(e,t,n),h(e,t,n,!1),g(e,t)))}function o(e,t,n){if(!e.isDestroying){var i;if(n&&n.deps&&(i=n.deps[t])){var s=v,o=!s;o&&(s=v={}),u(r,e,i,t,s,n),o&&(v=null)}}}function a(e,t,n){if(!e.isDestroying){var i;if(n&&n.deps&&(i=n.deps[t])){var r=y,o=!r;o&&(r=y={}),u(s,e,i,t,r,n),o&&(y=null)}}}function l(e){var t=[];for(var n in e)t.push(n);return t}function u(e,t,n,i,r,s){var o,a,u,c,h=b(t),d=r[h];if(d||(d=r[h]={}),!d[i]&&(d[i]=!0,n)){o=l(n);var p=s.descs;for(u=0;u<o.length;u++)a=o[u],c=p[a],c&&c._suspended===t||e(t,a)}}function c(e,t,n){if(n.hasOwnProperty("chainWatchers")&&n.chainWatchers[t]){var i,s,o=n.chainWatchers[t],a=[];for(i=0,s=o.length;s>i;i++)o[i].willChange(a);for(i=0,s=a.length;s>i;i+=2)r(a[i],a[i+1])}}function h(e,t,n,i){if(n&&n.hasOwnProperty("chainWatchers")&&n.chainWatchers[t]){var r,o,a=n.chainWatchers[t],l=i?null:[];for(r=0,o=a.length;o>r;r++)a[r].didChange(l);if(!i)for(r=0,o=l.length;o>r;r+=2)s(l[r],l[r+1])}}function d(e,t,n){h(e,t,n,!0)}function p(){T++}function m(){T--,0>=T&&(E.clear(),k.flush())}function f(e,t){p(),w(e,m,t)}function _(e,t){if(!e.isDestroying){var n,i,r=t+":before";T?(n=E.add(e,t,r),i=S(e,r,n),C(e,r,[e,t],i)):C(e,r,[e,t])}}function g(e,t){if(!e.isDestroying){var n,i=t+":change";T?(n=k.add(e,t,i),x(e,i,n)):C(e,i,[e,t])}}var v,y,b=e.guidFor,w=e.tryFinally,C=t.sendEvent,x=t.listenersUnion,S=t.listenersDiff,I=n["default"],E=new I,k=new I,T=0;i.propertyWillChange=r,i.propertyDidChange=s,i.overrideChains=d,i.beginPropertyChanges=p,i.endPropertyChanges=m,i.changeProperties=f}),e("ember-metal/property_get",["ember-metal/core","ember-metal/error","ember-metal/path_cache","ember-metal/platform","exports"],function(e,t,n,i,r){"use strict";function s(e,t){var n,i=d(t),r=!i&&c(t);if((!e||r)&&(e=l.lookup),i&&(t=t.slice(5)),e===l.lookup&&(n=t.match(p)[0],e=m(e,n),t=t.slice(n.length+1)),!t||0===t.length)throw new u("Path cannot be empty");return[e,t]}function o(e,t){var n,i,r,o,a;if(null===e&&!h(t))return m(l.lookup,t);for(n=d(t),(!e||n)&&(r=s(e,t),e=r[0],t=r[1],r.length=0),i=t.split("."),a=i.length,o=0;null!=e&&a>o;o++)if(e=m(e,i[o],!0),e&&e.isDestroyed)return void 0;return e}function a(e,t,n){var i=m(e,t);return void 0===i?n:i}var l=e["default"],u=t["default"],c=n.isGlobalPath,h=n.isPath,d=n.hasThis,p=(i.hasPropertyAccessors,/^([^\.]+)/),m=function(e,t){if(""===t)return e;if(t||"string"!=typeof e||(t=e,e=null),null===e){var n=o(e,t);return n}var i,r=e.__ember_meta__,s=r&&r.descs[t];return void 0===s&&h(t)?o(e,t):s?s.get(e,t):(i=e[t],void 0!==i||"object"!=typeof e||t in e||"function"!=typeof e.unknownProperty?i:e.unknownProperty(t))};l.config.overrideAccessors&&(l.get=m,l.config.overrideAccessors(),m=l.get),r.getWithDefault=a,r["default"]=m,r.get=m,r.normalizeTuple=s,r._getPath=o}),e("ember-metal/property_set",["ember-metal/core","ember-metal/property_get","ember-metal/property_events","ember-metal/properties","ember-metal/error","ember-metal/path_cache","ember-metal/platform","exports"],function(e,t,n,i,r,s,o,a){"use strict";function l(e,t,n,i){var r;if(r=t.slice(t.lastIndexOf(".")+1),t=t===r?r:t.slice(0,t.length-(r.length+1)),"this"!==t&&(e=h(e,t)),!r||0===r.length)throw new m("Property set failed: You passed an empty path");if(!e){if(i)return;throw new m('Property set failed: object in path "'+t+'" could not be found or was destroyed.')}return _(e,r,n)}function u(e,t,n){return _(e,t,n,!0)}var c=e["default"],h=t._getPath,d=n.propertyWillChange,p=n.propertyDidChange,m=(i.defineProperty,r["default"]),f=s.isPath,_=(o.hasPropertyAccessors,function(e,t,n,i){if("string"==typeof e&&(n=t,t=e,e=null),!e)return l(e,t,n,i);var r,s,o=e.__ember_meta__,a=o&&o.descs[t];if(void 0===a&&f(t))return l(e,t,n,i);if(void 0!==a)a.set(e,t,n);else{if("object"==typeof e&&null!==e&&void 0!==n&&e[t]===n)return n;r="object"==typeof e&&!(t in e),r&&"function"==typeof e.setUnknownProperty?e.setUnknownProperty(t,n):o&&o.watching[t]>0?(s=e[t],n!==s&&(d(e,t),e[t]=n,p(e,t))):e[t]=n}return n});c.config.overrideAccessors&&(c.set=_,c.config.overrideAccessors(),_=c.set),a.trySet=u,a.set=_}),e("ember-metal/run_loop",["ember-metal/core","ember-metal/utils","ember-metal/array","ember-metal/property_events","backburner","exports"],function(e,t,n,i,r,s){"use strict";function o(e){l.currentRunLoop=e}function a(e,t){l.currentRunLoop=t}function l(){return g.run.apply(g,arguments)}function u(){!l.currentRunLoop}{var c=e["default"],h=t.apply,d=t.GUID_KEY,p=n.indexOf,m=i.beginPropertyChanges,f=i.endPropertyChanges,_=r["default"],g=new _(["sync","actions","destroy"],{GUID_KEY:d,sync:{before:m,after:f},defaultQueue:"actions",onBegin:o,onEnd:a,onErrorTarget:c,onErrorMethod:"onerror"}),v=[].slice;[].concat}s["default"]=l,l.join=function(){if(!l.currentRunLoop)return c.run.apply(c,arguments);var e=v.call(arguments);e.unshift("actions"),l.schedule.apply(l,e)},l.bind=function(){var e=v.call(arguments);return function(){return l.join.apply(l,e.concat(v.call(arguments)))}},l.backburner=g,l.currentRunLoop=null,l.queues=g.queueNames,l.begin=function(){g.begin()},l.end=function(){g.end()},l.schedule=function(){u(),g.schedule.apply(g,arguments)},l.hasScheduledTimers=function(){return g.hasTimers()},l.cancelTimers=function(){g.cancelTimers()},l.sync=function(){g.currentInstance&&g.currentInstance.queues.sync.flush()},l.later=function(){return g.later.apply(g,arguments)},l.once=function(){u();var e=v.call(arguments);return e.unshift("actions"),h(g,g.scheduleOnce,e)},l.scheduleOnce=function(){return u(),g.scheduleOnce.apply(g,arguments)},l.next=function(){var e=v.call(arguments);return e.push(1),h(g,g.later,e)},l.cancel=function(e){return g.cancel(e)},l.debounce=function(){return g.debounce.apply(g,arguments)},l.throttle=function(){return g.throttle.apply(g,arguments)},l._addQueue=function(e,t){-1===p.call(l.queues,e)&&l.queues.splice(p.call(l.queues,t)+1,0,e)}}),e("ember-metal/set_properties",["ember-metal/property_events","ember-metal/property_set","ember-metal/keys","exports"],function(e,t,n,i){"use strict";var r=e.changeProperties,s=t.set,o=n["default"];i["default"]=function(e,t){return t&&"object"==typeof t?(r(function(){for(var n,i=o(t),r=0,a=i.length;a>r;r++)n=i[r],s(e,n,t[n])}),e):e}}),e("ember-metal/utils",["ember-metal/core","ember-metal/platform","ember-metal/array","exports"],function(e,t,n,i){function r(){return++k}function s(e){var t={};t[e]=1;for(var n in t)if(n===e)return n;return e}function o(e,t){t||(t=T);var n=t+r();return e&&(null===e[O]?e[O]=n:(D.value=n,x(e,O,D))),n}function a(e){if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t,n=typeof e;switch(n){case"number":return t=A[e],t||(t=A[e]="nu"+e),t;case"string":return t=M[e],t||(t=M[e]="st"+r()),t;case"boolean":return e?"(true)":"(false)";default:return e[O]?e[O]:e===Object?"(Object)":e===Array?"(Array)":(t=T+r(),null===e[O]?e[O]=t:(D.value=t,x(e,O,D)),t)}}function l(e){this.descs={},this.watching={},this.cache={},this.cacheMeta={},this.source=e}function u(e,t){var n=e.__ember_meta__;return t===!1?n||R:(n?n.source!==e&&(S&&x(e,"__ember_meta__",L),n=P(n),n.descs=P(n.descs),n.watching=P(n.watching),n.cache={},n.cacheMeta={},n.source=e,e.__ember_meta__=n):(S&&x(e,"__ember_meta__",L),n=new l(e),e.__ember_meta__=n,n.descs.constructor=null),n)}function c(e,t){var n=u(e,!1);return n[t]}function h(e,t,n){var i=u(e,!0);return i[t]=n,n}function d(e,t,n){for(var i,r,s=u(e,n),o=0,a=t.length;a>o;o++){if(i=t[o],r=s[i]){if(r.__ember_source__!==e){if(!n)return void 0;r=s[i]=P(r),r.__ember_source__=e}}else{if(!n)return void 0;r=s[i]={__ember_source__:e}}s=r}return r}function p(e,t){function n(){for(var n,i=this&&this.__nextSuper,r=new Array(arguments.length),s=0,o=r.length;o>s;s++)r[s]=arguments[s];return this&&(this.__nextSuper=t),n=b(this,e,r),this&&(this.__nextSuper=i),n}return n.wrappedFunction=e,n.wrappedFunction.__ember_arity__=e.length,n.__ember_observes__=e.__ember_observes__,n.__ember_observesBefore__=e.__ember_observesBefore__,n.__ember_listens__=e.__ember_listens__,n}function m(e){var t,n;return"undefined"==typeof B&&(t="ember-runtime/mixins/array",C.__loader.registry[t]&&(B=C.__loader.require(t)["default"])),!e||e.setInterval?!1:Array.isArray&&Array.isArray(e)?!0:B&&B.detect(e)?!0:(n=v(e),"array"===n?!0:void 0!==e.length&&"object"===n?!0:!1)}function f(e){return null===e||void 0===e?[]:m(e)?e:[e]}function _(e,t){return!(!e||"function"!=typeof e[t])}function g(e,t,n){return _(e,t)?n?w(e,t,n):w(e,t):void 0}function v(e){var t,n;return"undefined"==typeof V&&(n="ember-runtime/system/object",C.__loader.registry[n]&&(V=C.__loader.require(n)["default"])),t=null===e||void 0===e?String(e):H[j.call(e)]||"object","function"===t?V&&V.detect(e)&&(t="class"):"object"===t&&(e instanceof Error?t="error":V&&e instanceof V?t="instance":e instanceof Date&&(t="date")),t}function y(e){var t=v(e);if("array"===t)return"["+e+"]";if("object"!==t)return e+"";var n,i=[];for(var r in e)if(e.hasOwnProperty(r)){if(n=e[r],"toString"===n)continue;"function"===v(n)&&(n="function() { ... }"),i.push(n&&"function"!=typeof n.toString?r+": "+j.call(n):r+": "+n)}return"{"+i.join(", ")+"}"}function b(e,t,n){var i=n&&n.length;if(!n||!i)return t.call(e);switch(i){case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function w(e,t,n){var i=n&&n.length;if(!n||!i)return e[t]();switch(i){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);default:return e[t].apply(e,n)}}var C=e["default"],x=t.defineProperty,S=t.canDefineNonEnumerableProperties,I=(t.hasPropertyAccessors,t.create),E=n.forEach,k=0;i.uuid=r;var T="ember",P=I,A=[],M={},O=s("__ember"+ +new Date),D={writable:!1,configurable:!1,enumerable:!1,value:null};i.generateGuid=o,i.guidFor=a;var L={writable:!0,configurable:!1,enumerable:!1,value:null};l.prototype={descs:null,deps:null,watching:null,listeners:null,cache:null,cacheMeta:null,source:null,mixins:null,bindings:null,chains:null,chainWatchers:null,values:null,proto:null},S||(l.prototype.__preventPlainObject__=!0,l.prototype.toJSON=function(){});var R=new l(null);i.getMeta=c,i.setMeta=h,i.metaPath=d,i.wrap=p;var B;i.makeArray=f,i.tryInvoke=g;var N,F=function(){var e=0;try{try{}finally{throw e++,new Error("needsFinallyFixTest")}}catch(t){}return 1!==e}();N=F?function(e,t,n){var i,r,s;n=n||this;try{i=e.call(n)}finally{try{r=t.call(n)}catch(o){s=o}}if(s)throw s;return void 0===r?i:r}:function(e,t,n){var i,r;n=n||this;try{i=e.call(n)}finally{r=t.call(n)}return void 0===r?i:r};var z;z=F?function(e,t,n,i){var r,s,o;i=i||this;try{r=e.call(i)}catch(a){r=t.call(i,a)}finally{try{s=n.call(i)}catch(l){o=l}}if(o)throw o;return void 0===s?r:s}:function(e,t,n,i){var r,s;i=i||this;try{r=e.call(i)}catch(o){r=t.call(i,o)}finally{s=n.call(i)}return void 0===s?r:s};var H={},W="Boolean Number String Function Array Date RegExp Object".split(" ");E.call(W,function(e){H["[object "+e+"]"]=e.toLowerCase()});var V,j=Object.prototype.toString;i.inspect=y,i.apply=b,i.applyStr=w,i.GUID_KEY=O,i.META_DESC=L,i.EMPTY_META=R,i.meta=u,i.typeOf=v,i.tryCatchFinally=z,i.isArray=m,i.canInvoke=_,i.tryFinally=N}),e("ember-metal/watch_key",["ember-metal/core","ember-metal/utils","ember-metal/platform","ember-metal/properties","exports"],function(e,t,n,i,r){"use strict";function s(e,t,n){if("length"!==t||"array"!==l(e)){var i=n||u(e),r=i.watching;if(r[t])r[t]=(r[t]||0)+1;else{r[t]=1;var s=i.descs[t];s&&s.willWatch&&s.willWatch(e,t),"function"==typeof e.willWatchProperty&&e.willWatchProperty(t)}}}function o(e,t,n){var i=n||u(e),r=i.watching;if(1===r[t]){r[t]=0;var s=i.descs[t];s&&s.didUnwatch&&s.didUnwatch(e,t),"function"==typeof e.didUnwatchProperty&&e.didUnwatchProperty(t)}else r[t]>1&&r[t]--}var a=(e["default"],t.meta),l=t.typeOf,u=(n.defineProperty,n.hasPropertyAccessors,i.MANDATORY_SETTER_FUNCTION,i.DEFAULT_GETTER_FUNCTION,a);r.watchKey=s,r.unwatchKey=o}),e("ember-metal/watch_path",["ember-metal/utils","ember-metal/chains","exports"],function(e,t,n){"use strict";function i(e,t){var n=t||u(e),i=n.chains;return i?i.value()!==e&&(i=n.chains=i.copy(e)):i=n.chains=new l(null,null,e),i}function r(e,t,n){if("length"!==t||"array"!==a(e)){var r=n||u(e),s=r.watching;s[t]?s[t]=(s[t]||0)+1:(s[t]=1,i(e,r).add(t))}}function s(e,t,n){var r=n||u(e),s=r.watching;1===s[t]?(s[t]=0,i(e,r).remove(t)):s[t]>1&&s[t]--}var o=e.meta,a=e.typeOf,l=t.ChainNode,u=o;n.watchPath=r,n.unwatchPath=s}),e("ember-metal/watching",["ember-metal/utils","ember-metal/chains","ember-metal/watch_key","ember-metal/watch_path","ember-metal/path_cache","exports"],function(e,t,n,i,r,s){"use strict";function o(e,t,n){("length"!==t||"array"!==d(e))&&(b(t)?v(e,t,n):_(e,t,n))}function a(e,t){var n=e.__ember_meta__;return(n&&n.watching[t])>0}function l(e,t,n){("length"!==t||"array"!==d(e))&&(b(t)?y(e,t,n):g(e,t,n))}function u(e){var t=e.__ember_meta__,n=t&&t.chains;h in e&&!e.hasOwnProperty(h)&&p(e),n&&n.value()!==e&&(t.chains=n.copy(e))}function c(e){var t,n,i,r,s=e.__ember_meta__;if(s&&(e.__ember_meta__=null,t=s.chains))for(w.push(t);w.length>0;){if(t=w.pop(),n=t._chains)for(i in n)n.hasOwnProperty(i)&&w.push(n[i]);t._watching&&(r=t._object,r&&m(r,t._key,t))}}var h=(e.meta,e.GUID_KEY),d=e.typeOf,p=e.generateGuid,m=t.removeChainWatcher,f=t.flushPendingChains,_=n.watchKey,g=n.unwatchKey,v=i.watchPath,y=i.unwatchPath,b=r.isPath;s.watch=o,s.isWatching=a,o.flushPending=f,s.unwatch=l,s.rewatch=u;var w=[];s.destroy=c}),e("ember-routing-handlebars",["ember-metal/core","ember-handlebars","ember-routing/system/router","ember-routing-handlebars/helpers/shared","ember-routing-handlebars/helpers/link_to","ember-routing-handlebars/helpers/outlet","ember-routing-handlebars/helpers/render","ember-routing-handlebars/helpers/action","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=e["default"],c=t["default"],h=n["default"],d=i.resolvePaths,p=i.resolveParams,m=r.deprecatedLinkToHelper,f=r.linkToHelper,_=r.LinkView,g=r.queryParamsHelper,v=s.outletHelper,y=s.OutletView,b=o["default"],w=a.ActionHelper,C=a.actionHelper;h.resolveParams=p,h.resolvePaths=d,u.LinkView=_,c.ActionHelper=w,c.OutletView=y,c.registerHelper("render",b),c.registerHelper("action",C),c.registerHelper("outlet",v),c.registerHelper("link-to",f),c.registerHelper("linkTo",m),c.registerHelper("query-params",g),l["default"]=u}),e("ember-routing-handlebars/helpers/action",["ember-metal/core","ember-metal/property_get","ember-metal/array","ember-metal/utils","ember-metal/run_loop","ember-views/system/utils","ember-views/system/action_manager","ember-routing/system/router","ember-handlebars","ember-handlebars/ext","ember-handlebars/helpers/view","ember-routing-handlebars/helpers/shared","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";function p(e,t){var n=[];t&&n.push(t);var i=e.options.types.slice(1),r=e.options.data;return n.concat(C(e.context,e.params,{types:i,data:r}))}function m(e){var t=arguments[arguments.length-1],n=S.call(arguments,1,-1),i=t.hash,r=t.data.keywords.controller,s={eventName:i.on||"click",parameters:{context:this,options:t,params:n},view:t.data.view,bubbles:i.bubbles,preventDefault:i.preventDefault,target:{options:t},withKeyCode:i.withKeyCode,boundProperty:"ID"===t.types[0]};i.target?(s.target.root=this,s.target.target=i.target):r&&(s.target.root=r);var o=I.registerAction(e,s,i.allowedKeys);return new x('data-ember-action="'+o+'"')}var f=(e["default"],t.get,n.forEach),_=i.uuid,g=r["default"],v=s.isSimpleClick,y=o["default"],b=(a["default"],l["default"]),w=u.handlebarsGet,C=(c.viewHelper,h.resolveParams),x=(h.resolvePath,b.SafeString),S=Array.prototype.slice,I={};I.registeredActions=y.registeredActions,d.ActionHelper=I;var E=["alt","shift","meta","ctrl"],k=/^click|mouse|touch/,T=function(e,t){if("undefined"==typeof t){if(k.test(e.type))return v(e);t=""}if(t.indexOf("any")>=0)return!0;var n=!0;return f.call(E,function(i){e[i+"Key"]&&-1===t.indexOf(i)&&(n=!1)}),n};I.registerAction=function(e,t,n){var i=_();return y.registeredActions[i]={eventName:t.eventName,handler:function(i){if(!T(i,n))return!0;t.preventDefault!==!1&&i.preventDefault(),t.bubbles===!1&&i.stopPropagation();{var r,s=t.target,o=t.parameters;t.eventName}s=s.target?w(s.root,s.target,s.options):s.root,t.boundProperty&&(r=C(o.context,[e],{types:["ID"],data:o.options.data})[0],("undefined"==typeof r||"function"==typeof r)&&(r=e)),r||(r=e),g(function(){s.send?s.send.apply(s,p(o,r)):s[r].apply(s,p(o))})}},t.view.on("willClearRender",function(){delete y.registeredActions[i]}),i},d.actionHelper=m}),e("ember-routing-handlebars/helpers/link_to",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/merge","ember-metal/run_loop","ember-metal/computed","ember-runtime/system/lazy_load","ember-runtime/system/string","ember-runtime/system/object","ember-metal/keys","ember-views/system/utils","ember-views/views/component","ember-handlebars","ember-handlebars/helpers/view","ember-routing/system/router","ember-routing-handlebars/helpers/shared","exports"],function(e,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g){"use strict";function v(e){var t=e.options.types,n=e.options.data;return N(e.context,e.params,{types:t,data:n})}function y(){var e=z.call(arguments,-1)[0],t=z.call(arguments,0,-1),n=e.hash;if(t[t.length-1]instanceof W&&(n.queryParamsObject=t.pop()),n.disabledBinding=n.disabledWhen,!e.fn){var i=t.shift(),r=e.types.shift(),s=this;"ID"===r?(e.linkTextPath=i,e.fn=function(){return L.getEscaped(s,i,e)}):e.fn=function(){return i}}return n.parameters={context:this,options:e,params:t},e.helperName=e.helperName||"link-to",R.call(this,V,e)}function b(e){return W.create({values:e.hash,types:e.hashTypes})}function w(){return y.apply(this,arguments)}function C(e){var t=e.parameters,n=e.queryParamsObject,i={};if(!n)return i;var r=n.values;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s],a=n.types[s];if("ID"===a){var l=x(o,t);o=L.get(l.root,l.path,t.options)}i[s]=o}return i}function x(e,t){return L.normalizePath(t.context,e,t.options.data)}function S(e){for(var t=0,n=e.length;n>t;++t){var i=e[t];if(null===i||"undefined"==typeof i)return!1}return!0}function I(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;for(n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}var E=e["default"],k=n.get,T=(i.set,r["default"]),P=s["default"],A=o.computed,M=(a.onLoad,l.fmt,u["default"]),O=(c["default"],h.isSimpleClick),D=d["default"],L=p["default"],R=m.viewHelper,B=(f["default"],_.resolveParams),N=_.resolvePaths,F=_.routeArgs,z=[].slice;t("ember-handlebars");var H=function(e,t){for(var n=0,i=0,r=t.length;r>i&&(n+=t[i].names.length,t[i].handler!==e);i++);return n},W=M.extend({values:null}),V=E.LinkView=D.extend({tagName:"a",currentWhen:null,"current-when":null,title:null,rel:null,activeClass:"active",loadingClass:"loading",disabledClass:"disabled",_isDisabled:!1,replace:!1,attributeBindings:["href","title","rel","tabindex"],classNameBindings:["active","loading","disabled"],eventName:"click",init:function(){this._super.apply(this,arguments);var e=k(this,"eventName");this.on(e,this,this._invoke)},_paramsChanged:function(){this.notifyPropertyChange("resolvedParams")},_setupPathObservers:function(){var e,t,n,i=this.parameters,r=i.options.linkTextPath,s=v(i),o=s.length;for(r&&(n=x(r,i),this.registerObserver(n.root,n.path,this,this.rerender)),t=0;o>t;t++)e=s[t],null!==e&&(n=x(e,i),this.registerObserver(n.root,n.path,this,this._paramsChanged));var a=this.queryParamsObject;if(a){var l=a.values;for(var u in l)l.hasOwnProperty(u)&&"ID"===a.types[u]&&(n=x(l[u],i),this.registerObserver(n.root,n.path,this,this._paramsChanged))}},afterRender:function(){this._super.apply(this,arguments),this._setupPathObservers()},disabled:A(function(e,t){return void 0!==t&&this.set("_isDisabled",t),t?k(this,"disabledClass"):!1}),active:A("loadedParams",function(){function e(e){var r=t.router.recognizer.handlersFor(e),o=r[r.length-1].handler,a=H(e,r);i.length>a&&(e=o);var l=F(e,i,null),u=t.isActive.apply(t,l);if(!u)return!1;var c=E.isEmpty(E.keys(n.queryParams));if(!s&&!c&&u){var h={};T(h,n.queryParams),t._prepareQueryParams(n.targetRouteName,n.models,h),u=I(h,t.router.state.queryParams)}return u}if(k(this,"loading"))return!1;var t=k(this,"router"),n=k(this,"loadedParams"),i=n.models,r=this["current-when"]||this.currentWhen,s=Boolean(r);r=r||n.targetRouteName,r=r.split(" ");for(var o=0,a=r.length;a>o;o++)if(e(r[o]))return k(this,"activeClass")}),loading:A("loadedParams",function(){return k(this,"loadedParams")?void 0:k(this,"loadingClass")}),router:A(function(){var e=k(this,"controller");return e&&e.container?e.container.lookup("router:main"):void 0}),_invoke:function(e){if(!O(e))return!0;if(this.preventDefault!==!1){var t=k(this,"target");t&&"_self"!==t||e.preventDefault()}if(this.bubbles===!1&&e.stopPropagation(),k(this,"_isDisabled"))return!1;if(k(this,"loading"))return E.Logger.warn("This link-to is in an inactive loading state because at least one of its parameters presently has a null/undefined value, or the provided route name is invalid."),!1;var n=k(this,"target");if(n&&"_self"!==n)return!1;var i=k(this,"router"),r=k(this,"loadedParams"),s=i._doTransition(r.targetRouteName,r.models,r.queryParams);k(this,"replace")&&s.method("replace");var o=F(r.targetRouteName,r.models,s.state.queryParams),a=i.router.generate.apply(i.router,o);P.scheduleOnce("routerTransitions",this,this._eagerUpdateUrl,s,a)},_eagerUpdateUrl:function(e,t){if(e.isActive&&e.urlMethod){0===t.indexOf("#")&&(t=t.slice(1));var n=k(this,"router.router");"update"===e.urlMethod?n.updateURL(t):"replace"===e.urlMethod&&n.replaceURL(t),e.method(null)}},resolvedParams:A("router.url",function(){var e,t,n=this.parameters,i=n.options,r=i.types,s=i.data,o=0===n.params.length;if(o){var a=this.container.lookup("controller:application");e=k(a,"currentRouteName"),t=[]}else t=B(n.context,n.params,{types:r,data:s}),e=t.shift();var l=C(this,e);return{targetRouteName:e,models:t,queryParams:l}}),loadedParams:A("resolvedParams",function(){var e=k(this,"router");if(e){var t=k(this,"resolvedParams"),n=t.targetRouteName;if(n&&S(t.models))return t}}),queryParamsObject:null,href:A("loadedParams",function(){if("a"===k(this,"tagName")){var e=k(this,"router"),t=k(this,"loadedParams");if(!t)return k(this,"loadingHref");var n={};T(n,t.queryParams),e._prepareQueryParams(t.targetRouteName,t.models,n);var i=F(t.targetRouteName,t.models,n),r=e.generate.apply(e,i);return r}}),loadingHref:"#"});V.toString=function(){return"LinkView"},V.reopen({attributeBindings:["target"],target:null}),g.queryParamsHelper=b,g.LinkView=V,g.deprecatedLinkToHelper=w,g.linkToHelper=y}),e("ember-routing-handlebars/helpers/outlet",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-runtime/system/lazy_load","ember-views/views/container_view","ember-handlebars/views/metamorph_view","ember-handlebars/helpers/view","exports"],function(e,t,n,i,r,s,o,a){"use strict";function l(e,t){var n,i,r,s,o;for(e&&e.data&&e.data.isRenderData&&(t=e,e="main"),i=t.data.view.container,n=t.data.view;!n.get("template.isTop");)n=n.get("_parentView");return r=t.hash.view,r&&(o="view:"+r),s=r?i.lookupFactory(o):t.hash.viewClass||d,t.data.view.set("outletSource",n),t.hash.currentViewBinding="_view.outletSource._outlets."+e,t.helperName=t.helperName||"outlet",h.call(this,s,t)}var u=(e["default"],t.get,n.set,i.onLoad,r["default"]),c=s._Metamorph,h=o.viewHelper,d=u.extend(c);a.OutletView=d,a.outletHelper=l}),e("ember-routing-handlebars/helpers/render",["ember-metal/core","ember-metal/error","ember-metal/property_get","ember-metal/property_set","ember-runtime/system/string","ember-routing/system/generate_controller","ember-handlebars/ext","ember-handlebars/helpers/view","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=(e["default"],t["default"]),c=(n.get,i.set,r.camelize),h=s.generateControllerFactory,d=s["default"],p=o.handlebarsGet,m=a.ViewHelper;l["default"]=function(e,t,n){var i,r,s,o,a,l=arguments.length;if(i=(n||t).data.keywords.controller.container,r=i.lookup("router:main"),2===l)n=t,t=void 0;else{if(3!==l)throw new u("You must pass a templateName to render");a=p(n.contexts[1],t,n)}e=e.replace(/\//g,"."),o=i.lookup("view:"+e)||i.lookup("view:default");var f=n.hash.controller||e,_="controller:"+f;n.hash.controller;var g=n.data.keywords.controller;if(l>2){var v=i.lookupFactory(_)||h(i,f,a);s=v.create({model:a,parentController:g,target:g}),o.one("willDestroyElement",function(){s.destroy()})}else s=i.lookup(_)||d(i,f),s.setProperties({target:g,parentController:g});var y=n.contexts[1];y&&o.registerObserver(y,t,function(){s.set("model",p(y,t,n))
}),n.hash.viewName=c(e);var b="template:"+e;n.hash.template=i.lookup(b),n.hash.controller=s,r&&!a&&r._connectActiveView(e,o),n.helperName=n.helperName||'render "'+e+'"',m.instanceHelper(this,o,n)}}),e("ember-routing-handlebars/helpers/shared",["ember-metal/property_get","ember-metal/array","ember-runtime/mixins/controller","ember-handlebars/ext","ember-metal/utils","exports"],function(e,t,n,i,r,s){"use strict";function o(e,t,n){var i=[];return"string"===_(e)&&i.push(""+e),i.push.apply(i,t),i.push({queryParams:n}),i}function a(e){var t=e.activeTransition?e.activeTransition.state.handlerInfos:e.state.handlerInfos;return t[t.length-1].name}function l(e,t,n){return d.call(c(e,t,n),function(i,r){return null===i?t[r]:f(e,i,n)})}function u(e,t){if(!t._namesStashed){for(var n=t[t.length-1].name,i=e.router.recognizer.handlersFor(n),r=null,s=0,o=t.length;o>s;++s){var a=t[s],l=i[s].names;l.length&&(r=a),a._names=l;var u=a.handler;u._stashNames(a,r)}t._namesStashed=!0}}function c(e,t,n){function i(e,t){return"controller"===t?t:p.detect(e)?i(h(e,"model"),t?t+".model":"model"):t}var r=m(e,t,n),s=n.types;return d.call(r,function(e,n){return"ID"===s[n]?i(e,t[n]):null})}var h=e.get,d=t.map,p=n["default"],m=i.resolveParams,f=i.handlebarsGet,_=r.typeOf,h=e.get;s.routeArgs=o,s.getActiveTargetName=a,s.resolveParams=l,s.stashParamNames=u,s.resolvePaths=c}),e("ember-routing",["ember-handlebars","ember-metal/core","ember-routing/ext/run_loop","ember-routing/ext/controller","ember-routing/ext/view","ember-routing/location/api","ember-routing/location/none_location","ember-routing/location/hash_location","ember-routing/location/history_location","ember-routing/location/auto_location","ember-routing/system/generate_controller","ember-routing/system/controller_for","ember-routing/system/dsl","ember-routing/system/router","ember-routing/system/route","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";var _=(e["default"],t["default"]),g=s["default"],v=o["default"],y=a["default"],b=l["default"],w=u["default"],C=c.generateControllerFactory,x=c["default"],S=h["default"],I=d["default"],E=p["default"],k=m["default"];_.Location=g,_.AutoLocation=w,_.HashLocation=y,_.HistoryLocation=b,_.NoneLocation=v,_.controllerFor=S,_.generateControllerFactory=C,_.generateController=x,_.RouterDSL=I,_.Router=E,_.Route=k,f["default"]=_}),e("ember-routing/ext/controller",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/computed","ember-metal/utils","ember-metal/merge","ember-metal/enumerable_utils","ember-runtime/mixins/controller","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e,t){var n,i=e;"string"===m(i)&&(n={},n[i]={as:null},i=n);for(var r in i){if(!i.hasOwnProperty(r))return;var s=i[r];"string"===m(s)&&(s={as:s}),n=t[r]||{as:null,scope:"model"},_(n,s),t[r]=n}}function c(e){var t=h(e,"_normalizedQueryParams");for(var n in t)t.hasOwnProperty(n)&&e.addObserver(n+".[]",e,e._qpChanged)}var h=(e["default"],t.get),d=n.set,p=i.computed,m=r.typeOf,f=r.meta,_=s["default"],g=(o.map,a["default"]);g.reopen({concatenatedProperties:["queryParams","_pCacheMeta"],init:function(){this._super.apply(this,arguments),c(this)},queryParams:null,_qpDelegate:null,_normalizedQueryParams:p(function(){var e=f(this);if(e.proto!==this)return h(e.proto,"_normalizedQueryParams");var t=h(this,"queryParams");if(t._qpMap)return t._qpMap;for(var n=t._qpMap={},i=0,r=t.length;r>i;++i)u(t[i],n);return n}),_cacheMeta:p(function(){var e=f(this);if(e.proto!==this)return h(e.proto,"_cacheMeta");var t={},n=h(this,"_normalizedQueryParams");for(var i in n)if(n.hasOwnProperty(i)){var r,s=n[i],o=s.scope;"controller"===o&&(r=[]),t[i]={parts:r,values:null,scope:o,prefix:"",def:h(this,i)}}return t}),_updateCacheParams:function(e){var t=h(this,"_cacheMeta");for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.values=e;var r=this._calculateCacheKey(i.prefix,i.parts,i.values),s=this._bucketCache;if(s){var o=s.lookup(r,n,i.def);d(this,n,o)}}},_qpChanged:function(e,t){var n=t.substr(0,t.length-3),i=h(e,"_cacheMeta"),r=i[n],s=e._calculateCacheKey(r.prefix||"",r.parts,r.values),o=h(e,n),a=this._bucketCache;a&&e._bucketCache.stash(s,n,o);var l=e._qpDelegate;l&&l(e,n)},_calculateCacheKey:function(e,t,n){for(var i=t||[],r="",s=0,o=i.length;o>s;++s){var a=i[s],l=h(n,a);r+="::"+a+":"+l}return e+r.replace(v,"-")},transitionToRoute:function(){var e=h(this,"target"),t=e.transitionToRoute||e.transitionTo;return t.apply(e,arguments)},transitionTo:function(){return this.transitionToRoute.apply(this,arguments)},replaceRoute:function(){var e=h(this,"target"),t=e.replaceRoute||e.replaceWith;return t.apply(e,arguments)},replaceWith:function(){return this.replaceRoute.apply(this,arguments)}});var v=/\./g;l["default"]=g}),e("ember-routing/ext/run_loop",["ember-metal/run_loop"],function(e){"use strict";{var t=e["default"];t.queues}t._addQueue("routerTransitions","actions")}),e("ember-routing/ext/view",["ember-metal/property_get","ember-metal/property_set","ember-metal/run_loop","ember-views/views/view","exports"],function(e,t,n,i,r){"use strict";var s=e.get,o=t.set,a=n["default"],l=i["default"];l.reopen({init:function(){o(this,"_outlets",{}),this._super()},connectOutlet:function(e,t){if(this._pendingDisconnections&&delete this._pendingDisconnections[e],this._hasEquivalentView(e,t))return void t.destroy();var n=s(this,"_outlets"),i=s(this,"container"),r=i&&i.lookup("router:main"),a=s(t,"renderedName");o(n,e,t),r&&a&&r._connectActiveView(a,t)},_hasEquivalentView:function(e,t){var n=s(this,"_outlets."+e);return n&&n.constructor===t.constructor&&n.get("template")===t.get("template")&&n.get("context")===t.get("context")},disconnectOutlet:function(e){this._pendingDisconnections||(this._pendingDisconnections={}),this._pendingDisconnections[e]=!0,a.once(this,"_finishDisconnections")},_finishDisconnections:function(){if(!this.isDestroyed){var e=s(this,"_outlets"),t=this._pendingDisconnections;this._pendingDisconnections=null;for(var n in t)o(e,n,null)}}}),r["default"]=l}),e("ember-routing/location/api",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","exports"],function(e,t,n,i){"use strict";e["default"],t.get,n.set;i["default"]={create:function(e){var t=e&&e.implementation,n=this.implementations[t];return n.create.apply(n,arguments)},registerImplementation:function(e,t){this.implementations[e]=t},implementations:{},_location:window.location,_getHash:function(){var e=(this._location||this.location).href,t=e.indexOf("#");return-1===t?"":e.substr(t)}}}),e("ember-routing/location/auto_location",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-routing/location/api","ember-routing/location/history_location","ember-routing/location/hash_location","ember-routing/location/none_location","exports"],function(e,t,n,i,r,s,o,a){"use strict";var l=(e["default"],t.get,n.set),u=i["default"],c=r["default"],h=s["default"],d=o["default"];a["default"]={cancelRouterSetup:!1,rootURL:"/",_window:window,_location:window.location,_history:window.history,_HistoryLocation:c,_HashLocation:h,_NoneLocation:d,_getOrigin:function(){var e=this._location,t=e.origin;return t||(t=e.protocol+"//"+e.hostname,e.port&&(t+=":"+e.port)),t},_getSupportsHistory:function(){var e=this._window.navigator.userAgent;return-1!==e.indexOf("Android 2")&&-1!==e.indexOf("Mobile Safari")&&-1===e.indexOf("Chrome")?!1:!!(this._history&&"pushState"in this._history)},_getSupportsHashChange:function(){var e=this._window,t=e.document.documentMode;return"onhashchange"in e&&(void 0===t||t>7)},_replacePath:function(e){this._location.replace(this._getOrigin()+e)},_getRootURL:function(){return this.rootURL},_getPath:function(){var e=this._location.pathname;return"/"!==e.charAt(0)&&(e="/"+e),e},_getHash:u._getHash,_getQuery:function(){return this._location.search},_getFullPath:function(){return this._getPath()+this._getQuery()+this._getHash()},_getHistoryPath:function(){{var e,t,n=this._getRootURL(),i=this._getPath(),r=this._getHash(),s=this._getQuery();i.indexOf(n)}return"#/"===r.substr(0,2)?(t=r.substr(1).split("#"),e=t.shift(),"/"===i.slice(-1)&&(e=e.substr(1)),i+=e,i+=s,t.length&&(i+="#"+t.join("#"))):(i+=s,i+=r),i},_getHashPath:function(){var e=this._getRootURL(),t=e,n=this._getHistoryPath(),i=n.substr(e.length);return""!==i&&("/"!==i.charAt(0)&&(i="/"+i),t+="#"+i),t},create:function(e){e&&e.rootURL&&(this.rootURL=e.rootURL);var t,n,i=!1,r=this._NoneLocation,s=this._getFullPath();this._getSupportsHistory()?(t=this._getHistoryPath(),s===t?r=this._HistoryLocation:"/#"===s.substr(0,2)?(this._history.replaceState({path:t},null,t),r=this._HistoryLocation):(i=!0,this._replacePath(t))):this._getSupportsHashChange()&&(n=this._getHashPath(),s===n||"/"===s&&"/#/"===n?r=this._HashLocation:(i=!0,this._replacePath(n)));var o=r.create.apply(r,arguments);return i&&l(o,"cancelRouterSetup",!0),o}}}),e("ember-routing/location/hash_location",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/run_loop","ember-metal/utils","ember-runtime/system/object","ember-routing/location/api","exports"],function(e,t,n,i,r,s,o,a){"use strict";var l=e["default"],u=t.get,c=n.set,h=i["default"],d=r.guidFor,p=s["default"],m=o["default"];a["default"]=p.extend({implementation:"hash",init:function(){c(this,"location",u(this,"_location")||window.location)},getHash:m._getHash,getURL:function(){var e=this.getHash().substr(1);return e},setURL:function(e){u(this,"location").hash=e,c(this,"lastSetURL",e)},replaceURL:function(e){u(this,"location").replace("#"+e),c(this,"lastSetURL",e)},onUpdateURL:function(e){var t=this,n=d(this);l.$(window).on("hashchange.ember-location-"+n,function(){h(function(){var n=t.getURL();u(t,"lastSetURL")!==n&&(c(t,"lastSetURL",null),e(n))})})},formatURL:function(e){return"#"+e},willDestroy:function(){var e=d(this);l.$(window).off("hashchange.ember-location-"+e)}})}),e("ember-routing/location/history_location",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-runtime/system/object","ember-views/system/jquery","exports"],function(e,t,n,i,r,s,o){"use strict";var a=(e["default"],t.get),l=n.set,u=i.guidFor,c=r["default"],h=s["default"],d=!1,p=window.history&&"state"in window.history;o["default"]=c.extend({implementation:"history",init:function(){l(this,"location",a(this,"location")||window.location),l(this,"baseURL",h("base").attr("href")||"")},initState:function(){l(this,"history",a(this,"history")||window.history),this.replaceState(this.formatURL(this.getURL()))},rootURL:"/",getURL:function(){var e=a(this,"rootURL"),t=a(this,"location"),n=t.pathname,i=a(this,"baseURL");e=e.replace(/\/$/,""),i=i.replace(/\/$/,"");var r=n.replace(i,"").replace(e,""),s=t.search||"";return r+=s},setURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path===e||this.pushState(e)},replaceURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path===e||this.replaceState(e)},getState:function(){return p?a(this,"history").state:this._historyState},pushState:function(e){var t={path:e};a(this,"history").pushState(t,null,e),p||(this._historyState=t),this._previousURL=this.getURL()},replaceState:function(e){var t={path:e};a(this,"history").replaceState(t,null,e),p||(this._historyState=t),this._previousURL=this.getURL()},onUpdateURL:function(e){var t=u(this),n=this;h(window).on("popstate.ember-location-"+t,function(){(d||(d=!0,n.getURL()!==n._previousURL))&&e(n.getURL())})},formatURL:function(e){var t=a(this,"rootURL"),n=a(this,"baseURL");return""!==e?(t=t.replace(/\/$/,""),n=n.replace(/\/$/,"")):n.match(/^\//)&&t.match(/^\//)&&(n=n.replace(/\/$/,"")),n+t+e},willDestroy:function(){var e=u(this);h(window).off("popstate.ember-location-"+e)}})}),e("ember-routing/location/none_location",["ember-metal/property_get","ember-metal/property_set","ember-runtime/system/object","exports"],function(e,t,n,i){"use strict";var r=e.get,s=t.set,o=n["default"];i["default"]=o.extend({implementation:"none",path:"",getURL:function(){return r(this,"path")},setURL:function(e){s(this,"path",e)},onUpdateURL:function(e){this.updateCallback=e},handleURL:function(e){s(this,"path",e),this.updateCallback(e)},formatURL:function(e){return e}})}),e("ember-routing/system/cache",["ember-runtime/system/object","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=n.extend({init:function(){this.cache={}},has:function(e){return e in this.cache},stash:function(e,t,n){var i=this.cache[e];i||(i=this.cache[e]={}),i[t]=n},lookup:function(e,t,n){var i=this.cache;if(!(e in i))return n;var r=i[e];return t in r?r[t]:n},cache:null})}),e("ember-routing/system/controller_for",["exports"],function(e){"use strict";e["default"]=function(e,t,n){return e.lookup("controller:"+t,n)}}),e("ember-routing/system/dsl",["ember-metal/core","exports"],function(e,t){"use strict";function n(e){this.parent=e,this.matches=[]}function i(e){return e.parent&&"application"!==e.parent}function r(e,t,n){n=n||{},"string"!=typeof n.path&&(n.path="/"+t),i(e)&&n.resetNamespace!==!0&&(t=e.parent+"."+t),e.push(n.path,t,null)}e["default"];t["default"]=n,n.prototype={route:function(e,t,s){2===arguments.length&&"function"==typeof t&&(s=t,t={}),1===arguments.length&&(t={});t.resetNamespace===!0?"resource":"route";if("string"!=typeof t.path&&(t.path="/"+e),i(this)&&t.resetNamespace!==!0&&(e=this.parent+"."+e),s){var o=new n(e);r(o,"loading"),r(o,"error",{path:"/_unused_dummy_error_path_route_"+e+"/:error"}),s&&s.call(o),this.push(t.path,e,o.generate())}else this.push(t.path,e,null)},push:function(e,t,n){var i=t.split(".");(""===e||"/"===e||"index"===i[i.length-1])&&(this.explicitIndex=!0),this.matches.push([e,t,n])},resource:function(e,t,n){2===arguments.length&&"function"==typeof t&&(n=t,t={}),1===arguments.length&&(t={}),t.resetNamespace=!0,this.route(e,t,n)},generate:function(){var e=this.matches;return this.explicitIndex||r(this,"index",{path:"/"}),function(t){for(var n=0,i=e.length;i>n;n++){var r=e[n];t(r[0]).to(r[1],r[2])}}}},n.map=function(e){var t=new n;return e.call(t),t}}),e("ember-routing/system/generate_controller",["ember-metal/core","ember-metal/property_get","ember-metal/utils","exports"],function(e,t,n,i){"use strict";function r(e,t,n){var i,r,s,a;return a=n&&o(n)?"array":n?"object":"basic",s="controller:"+a,i=e.lookupFactory(s).extend({isGenerated:!0,toString:function(){return"(generated "+t+" controller)"}}),r="controller:"+t,e.register(r,i),i}var s=(e["default"],t.get),o=n.isArray;i.generateControllerFactory=r,i["default"]=function(e,t,n){r(e,t,n);var i="controller:"+t,o=e.lookup(i);return s(o,"namespace.LOG_ACTIVE_GENERATION"),o}}),e("ember-routing/system/route",["ember-metal/core","ember-metal/error","ember-metal/property_get","ember-metal/property_set","ember-metal/get_properties","ember-metal/enumerable_utils","ember-metal/is_none","ember-metal/computed","ember-metal/merge","ember-metal/utils","ember-metal/run_loop","ember-metal/keys","ember-runtime/copy","ember-runtime/system/string","ember-runtime/system/object","ember-runtime/mixins/action_handler","ember-routing/system/generate_controller","ember-routing-handlebars/helpers/shared","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v){"use strict";function y(e){var t=b(e,e.router.router.state.handlerInfos,-1);return t&&t.handler}function b(e,t,n){if(t)for(var i,r=n||0,s=0,o=t.length;o>s;s++)if(i=t[s].handler,i===e)return t[s+r]}function w(e){var t,n=y(e);if(n)return(t=n.lastRenderedTemplate)?t:w(n)}function C(e,t,n,i){i=i||{},i.into=i.into?i.into.replace(/\//g,"."):w(e),i.outlet=i.outlet||"main",i.name=t,i.template=n,i.LOG_VIEW_LOOKUPS=O(e.router,"namespace.LOG_VIEW_LOOKUPS");var r=i.controller,s=i.model;if(r=i.controller?i.controller:i.namePassed?e.container.lookup("controller:"+t)||e.controllerName||e.routeName:e.controllerName||e.container.lookup("controller:"+t),"string"==typeof r){var o=r;if(r=e.container.lookup("controller:"+o),!r)throw new M("You passed `controller: '"+o+"'` into the `render` method, but no such controller could be found.")}return s&&r.set("model",s),i.controller=r,i}function x(e,t,n){if(e)n.LOG_VIEW_LOOKUPS;else{var i=n.into?"view:default":"view:toplevel";e=t.lookup(i),n.LOG_VIEW_LOOKUPS}return O(e,"templateName")||(D(e,"template",n.template),D(e,"_debugTemplateName",n.name)),D(e,"renderedName",n.name),D(e,"controller",n.controller),e}function S(e,t,n){if(n.into){var i=e.router._lookupActiveView(n.into),r=E(i,n.outlet);e.teardownOutletViews||(e.teardownOutletViews=[]),B(e.teardownOutletViews,0,0,[r]),i.connectOutlet(n.outlet,t)}else{var s=O(e,"router.namespace.rootElement");e.teardownTopLevelView&&e.teardownTopLevelView(),e.router._connectActiveView(n.name,t),e.teardownTopLevelView=I(t),t.appendTo(s)}}function I(e){return function(){e.destroy()}}function E(e,t){return function(){e.disconnectOutlet(t)}}function k(e,t){if(t.fullQueryParams)return t.fullQueryParams;t.fullQueryParams={},F(t.fullQueryParams,t.queryParams);var n=t.handlerInfos[t.handlerInfos.length-1].name;return e._deserializeQueryParams(n,t.fullQueryParams),t.fullQueryParams}function T(e,t){t.queryParamsFor=t.queryParamsFor||{};var n=e.routeName;if(t.queryParamsFor[n])return t.queryParamsFor[n];for(var i=k(e.router,t),r=t.queryParamsFor[n]={},s=O(e,"_qp"),o=s.qps,a=0,l=o.length;l>a;++a){var u=o[a],c=u.prop in i;r[u.prop]=c?i[u.prop]:P(u.def)}return r}function P(e){return z(e)?A.A(e.slice()):e}var A=e["default"],M=t["default"],O=n.get,D=i.set,L=r["default"],R=s.forEach,B=s.replace,N=(o.isNone,a.computed),F=l["default"],z=u.isArray,H=u.typeOf,W=c["default"],V=h["default"],j=d["default"],U=(p.classify,p.fmt,m["default"]),q=f["default"],K=_["default"],J=g.stashParamNames,G=U.extend(q,{queryParams:{},_qp:N(function(){var e=this.controllerName||this.routeName,t=this.container.lookupFactory("controller:"+e);if(!t)return $;var n=t.proto(),i=O(n,"_normalizedQueryParams"),r=O(n,"_cacheMeta"),s=[],o={},a=this;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l],c=u.as||this.serializeQueryParamKey(l),h=O(n,l);z(h)&&(h=A.A(h.slice()));var d=H(h),p=this.serializeQueryParam(h,c,d),m=e+":"+l,f={def:h,sdef:p,type:d,urlKey:c,prop:l,fprop:m,ctrl:e,cProto:n,svalue:p,cacheType:u.scope,route:this,cacheMeta:r[l]};o[l]=o[c]=o[m]=f,s.push(f)}return{qps:s,map:o,states:{active:function(e,t){return a._activeQPChanged(e,o[t])},allowOverrides:function(e,t){return a._updatingQPChanged(e,o[t])},changingKeys:function(e,t){return a._updateSerializedQPValue(e,o[t])}}}}),_names:null,_stashNames:function(e,t){var n=e;if(!this._names){var i=this._names=n._names;i.length||(n=t,i=n&&n._names||[]);for(var r=O(this,"_qp.qps"),s=r.length,o=new Array(i.length),a=0,l=i.length;l>a;++a)o[a]=n.name+"."+i[a];for(var u=0;s>u;++u){var c=r[u],h=c.cacheMeta;"model"===h.scope&&(h.parts=o),h.prefix=c.ctrl}}},_updateSerializedQPValue:function(e,t){var n=O(e,t.prop);t.svalue=this.serializeQueryParam(n,t.urlKey,t.type)},_activeQPChanged:function(e,t){var n=O(e,t.prop);this.router._queuedQPChanges[t.fprop]=n,W.once(this,this._fireQueryParamTransition)},_updatingQPChanged:function(e,t){var n=this.router;n._qpUpdates||(n._qpUpdates={}),n._qpUpdates[t.urlKey]=!0},mergedProperties:["events","queryParams"],paramsFor:function(e){var t=this.container.lookup("route:"+e);if(!t)return{};var n=this.router.router.activeTransition,i=n?n.state:this.router.router.state,r={};return F(r,i.params[e]),F(r,T(t,i)),r},serializeQueryParamKey:function(e){return e},serializeQueryParam:function(e,t,n){return"array"===n?JSON.stringify(e):""+e},deserializeQueryParam:function(e,t,n){return"boolean"===n?"true"===e?!0:!1:"number"===n?Number(e).valueOf():"array"===n?A.A(JSON.parse(e)):e},_fireQueryParamTransition:function(){this.transitionTo({queryParams:this.router._queuedQPChanges}),this.router._queuedQPChanges={}},resetController:A.K,exit:function(){this.deactivate(),this.teardownViews()},_reset:function(e,t){var n=this.controller;n._qpDelegate=O(this,"_qp.states.inactive"),this.resetController(n,e,t)},enter:function(){this.activate()},viewName:null,templateName:null,controllerName:null,_actions:{queryParamsDidChange:function(e,t,n){for(var i=V(e).concat(V(n)),r=0,s=i.length;s>r;++r){var o=i[r],a=O(this.queryParams,o)||{};O(a,"refreshModel")&&this.refresh()}return!0},finalizeQueryParamChange:function(e,t,n){if("application"!==this.routeName)return!0;if(n){var i,r=n.state.handlerInfos,s=this.router,o=s._queryParamsFor(r[r.length-1].name),a=s._qpUpdates;J(s,r);for(var l=0,u=o.qps.length;u>l;++l){var c,h,d=o.qps[l],p=d.route,m=p.controller,f=d.urlKey in e&&d.urlKey;a&&d.urlKey in a?(c=O(m,d.prop),h=p.serializeQueryParam(c,d.urlKey,d.type)):f?(h=e[f],c=p.deserializeQueryParam(h,d.urlKey,d.type)):(h=d.sdef,c=P(d.def)),m._qpDelegate=O(this,"_qp.states.inactive");var _=h!==d.svalue;if(_){var g=O(p,"queryParams."+d.urlKey)||{};if(n.queryParamsOnly&&i!==!1){var v=O(g,"replace");v?i=!0:v===!1&&(i=!1)}D(m,d.prop,c)}d.svalue=h;var y=d.sdef===h;y||t.push({value:h,visible:!0,key:f||d.urlKey})}i&&n.method("replace"),R(o.qps,function(e){var t=O(e.route,"_qp"),n=e.route.controller;n._qpDelegate=O(t,"states.active")}),s._qpUpdates=null}}},events:null,deactivate:A.K,activate:A.K,transitionTo:function(){var e=this.router;return e.transitionTo.apply(e,arguments)},intermediateTransitionTo:function(){var e=this.router;e.intermediateTransitionTo.apply(e,arguments)},refresh:function(){return this.router.router.refresh(this)},replaceWith:function(){var e=this.router;return e.replaceWith.apply(e,arguments)},send:function(){return this.router.send.apply(this.router,arguments)},setup:function(e,t){var n=this.controllerName||this.routeName,i=this.controllerFor(n,!0);if(i||(i=this.generateController(n,e)),this.controller=i,this.setupControllers)this.setupControllers(i,e);else{var r=O(this,"_qp.states");if(t&&(J(this.router,t.state.handlerInfos),i._qpDelegate=r.changingKeys,i._updateCacheParams(t.params)),i._qpDelegate=r.allowOverrides,t){var s=T(this,t.state);i.setProperties(s)}this.setupController(i,e,t)}this.renderTemplates?this.renderTemplates(e):this.renderTemplate(i,e)},beforeModel:A.K,afterModel:A.K,redirect:A.K,contextDidChange:function(){this.currentModel=this.context},model:function(e,t){var n,i,r,s,o=O(this,"_qp.map");for(var a in e)"queryParams"===a||o&&a in o||((n=a.match(/^(.*)_id$/))&&(i=n[1],s=e[a]),r=!0);if(!i&&r)return j(e);if(!i){if(t.resolveIndex<1)return;var l=t.state.handlerInfos[t.resolveIndex-1].context;return l}return this.findModel(i,s)},deserialize:function(e,t){return this.model(this.paramsFor(this.routeName),t)},findModel:function(){var e=O(this,"store");return e.find.apply(e,arguments)},store:N(function(){{var e=this.container;this.routeName,O(this,"router.namespace")}return{find:function(t,n){var i=e.lookupFactory("model:"+t);if(i)return i.find(n)}}}),serialize:function(e,t){if(!(t.length<1)&&e){var n=t[0],i={};return/_id$/.test(n)&&1===t.length?i[n]=O(e,"id"):i=L(e,t),i}},setupController:function(e,t){e&&void 0!==t&&D(e,"model",t)},controllerFor:function(e){var t,n=this.container,i=n.lookup("route:"+e);return i&&i.controllerName&&(e=i.controllerName),t=n.lookup("controller:"+e)},generateController:function(e,t){var n=this.container;return t=t||this.modelFor(e),K(n,e,t)},modelFor:function(e){var t=this.container.lookup("route:"+e),n=this.router?this.router.router.activeTransition:null;if(n){var i=t&&t.routeName||e;if(n.resolvedModels.hasOwnProperty(i))return n.resolvedModels[i]}return t&&t.currentModel},renderTemplate:function(){this.render()},render:function(e,t){var n="string"==typeof e&&!!e;"object"!=typeof e||t||(t=e,e=this.routeName),t=t||{},t.namePassed=n;var i;e?(e=e.replace(/\//g,"."),i=e):(e=this.routeName,i=this.templateName||e);var r=t.view||n&&e||this.viewName||e,s=this.container,o=s.lookup("view:"+r),a=o?o.get("template"):null;return a||(a=s.lookup("template:"+i)),o||a?(t=C(this,e,a,t),o=x(o,s,t),"main"===t.outlet&&(this.lastRenderedTemplate=e),void S(this,o,t)):void O(this.router,"namespace.LOG_VIEW_LOOKUPS")},disconnectOutlet:function(e){if(!e||"string"==typeof e){var t=e;e={},e.outlet=t}e.parentView=e.parentView?e.parentView.replace(/\//g,"."):w(this),e.outlet=e.outlet||"main";var n=this.router._lookupActiveView(e.parentView);n&&n.disconnectOutlet(e.outlet)},willDestroy:function(){this.teardownViews()},teardownViews:function(){this.teardownTopLevelView&&this.teardownTopLevelView();var e=this.teardownOutletViews||[];R(e,function(e){e()}),delete this.teardownTopLevelView,delete this.teardownOutletViews,delete this.lastRenderedTemplate}}),$={qps:[],map:{},states:{}};v["default"]=G}),e("ember-routing/system/router",["ember-metal/core","ember-metal/error","ember-metal/property_get","ember-metal/property_set","ember-metal/properties","ember-metal/computed","ember-metal/merge","ember-metal/run_loop","ember-metal/enumerable_utils","ember-runtime/system/string","ember-runtime/system/object","ember-runtime/mixins/evented","ember-routing/system/dsl","ember-views/views/view","ember-routing/location/api","ember-handlebars/views/metamorph_view","ember-routing-handlebars/helpers/shared","ember-metal/platform","exports"],function(e,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y){"use strict";function b(e,t,n){for(var i,r,s=t.state.handlerInfos,o=!1,a=s.length-1;a>=0;--a)if(i=s[a],r=i.handler,o){if(n(r,s[a+1].handler)!==!0)return!1}else e===r&&(o=!0);return!0}function w(e,t){var n=[];t&&n.push(t),e&&(e.message&&n.push(e.message),e.stack&&n.push(e.stack),"string"==typeof e&&n.push(e)),A.Logger.error.apply(this,n)}function C(e,t,n){var i,r=e.router,s=(t.routeName.split(".").pop(),"application"===e.routeName?"":e.routeName+".");return i=s+n,x(r,i)?i:void 0}function x(e,t){var n=e.container;return e.hasRoute(t)&&(n.has("template:"+t)||n.has("route:"+t))}function S(e,t,n){var i=n.shift();if(!e){if(t)return;throw new M("Can't trigger action '"+i+"' because your app hasn't finished transitioning into its first route. To trigger an action on destination routes during a transition, you can call `.send()` on the `Transition` object passed to the `model/beforeModel/afterModel` hooks.")}for(var r,s,o=!1,a=e.length-1;a>=0;a--)if(r=e[a],s=r.handler,s._actions&&s._actions[i]){if(s._actions[i].apply(s,n)!==!0)return;o=!0}if(Y[i])return void Y[i].apply(null,n);if(!o&&!t)throw new M("Nothing handled the action '"+i+"'. If you did handle the action, this error can be caused by returning true from an action handler in a controller, causing the action to bubble.")}function I(e,t,n){for(var i=e.router,r=i.applyIntent(t,n),s=r.handlerInfos,o=r.params,a=0,l=s.length;l>a;++a){var u=s[a];u.isResolved||(u=u.becomeResolved(null,u.context)),o[u.name]=u.params}return r}function E(e){var t=e.container.lookup("controller:application");if(t){var n=e.router.currentHandlerInfos,i=$._routePath(n);"currentPath"in t||L(t,"currentPath"),D(t,"currentPath",i),"currentRouteName"in t||L(t,"currentRouteName"),D(t,"currentRouteName",n[n.length-1].name)}}function k(e){e.then(null,function(e){return e&&e.name?("UnrecognizedURLError"===e.name,e):void 0},"Ember: Process errors from Router")}function T(e){return"string"==typeof e&&(""===e||"/"===e.charAt(0))}function P(e,t,n,i){{var r=e._queryParamsFor(t);r.qps}for(var s in n)if(n.hasOwnProperty(s)){var o=n[s],a=r.map[s];a&&i(s,o,a)}}var A=e["default"],M=n["default"],O=i.get,D=r.set,L=s.defineProperty,R=o.computed,B=a["default"],N=l["default"],F=(u.forEach,c.fmt,h["default"]),z=d["default"],H=p["default"],W=m["default"],V=f["default"],j=_["default"],U=g.routeArgs,q=g.getActiveTargetName,K=g.stashParamNames,J=(v.create,t("router")["default"]),G=(t("router/transition").Transition,[].slice),$=F.extend(z,{location:"hash",rootURL:"/",init:function(){this.router=this.constructor.router||this.constructor.map(A.K),this._activeViews={},this._setupLocation(),this._qpCache={},this._queuedQPChanges={},O(this,"namespace.LOG_TRANSITIONS_INTERNAL")&&(this.router.log=A.Logger.debug)},url:R(function(){return O(this,"location").getURL()}),startRouting:function(){this.router=this.router||this.constructor.map(A.K);var e=this.router,t=O(this,"location"),n=this.container,i=this,r=O(this,"initialURL");O(t,"cancelRouterSetup")||(this._setupRouter(e,t),n.register("view:default",j),n.register("view:toplevel",W.extend()),t.onUpdateURL(function(e){i.handleURL(e)}),"undefined"==typeof r&&(r=t.getURL()),this.handleURL(r))},didTransition:function(e){E(this),this._cancelLoadingEvent(),this.notifyPropertyChange("url"),N.once(this,this.trigger,"didTransition"),O(this,"namespace").LOG_TRANSITIONS&&A.Logger.log("Transitioned into '"+$._routePath(e)+"'")},handleURL:function(e){return this._doURLTransition("handleURL",e)},_doURLTransition:function(e,t){var n=this.router[e](t||"/");return k(n),n},transitionTo:function(){var e,t=G.call(arguments);if(T(t[0]))return this._doURLTransition("transitionTo",t[0]);var n=t[t.length-1];e=n&&n.hasOwnProperty("queryParams")?t.pop().queryParams:{};var i=t.shift();return this._doTransition(i,t,e)},intermediateTransitionTo:function(){this.router.intermediateTransitionTo.apply(this.router,arguments),E(this);var e=this.router.currentHandlerInfos;O(this,"namespace").LOG_TRANSITIONS&&A.Logger.log("Intermediate-transitioned into '"+$._routePath(e)+"'")},replaceWith:function(){return this.transitionTo.apply(this,arguments).method("replace")},generate:function(){var e=this.router.generate.apply(this.router,arguments);return this.location.formatURL(e)},isActive:function(){var e=this.router;return e.isActive.apply(e,arguments)},isActiveIntent:function(){var e=this.router;return e.isActive.apply(e,arguments)},send:function(){this.router.trigger.apply(this.router,arguments)},hasRoute:function(e){return this.router.hasRoute(e)},reset:function(){this.router.reset()},_lookupActiveView:function(e){var t=this._activeViews[e];return t&&t[0]},_connectActiveView:function(e,t){function n(){delete this._activeViews[e]}var i=this._activeViews[e];i&&i[0].off("willDestroyElement",this,i[1]),this._activeViews[e]=[t,n],t.one("willDestroyElement",this,n)},_setupLocation:function(){var e=O(this,"location"),t=O(this,"rootURL");if(t&&this.container&&!this.container.has("-location-setting:root-url")&&this.container.register("-location-setting:root-url",t,{instantiate:!1}),"string"==typeof e&&this.container){var n=this.container.lookup("location:"+e);if("undefined"!=typeof n)e=D(this,"location",n);else{var i={implementation:e};e=D(this,"location",V.create(i))}}null!==e&&"object"==typeof e&&(t&&"string"==typeof t&&(e.rootURL=t),"function"==typeof e.initState&&e.initState())},_getHandlerFunction:function(){var e={},t=this.container,n=t.lookupFactory("route:basic"),i=this;return function(r){var s="route:"+r,o=t.lookup(s);return e[r]?o:(e[r]=!0,o||(t.register(s,n.extend()),o=t.lookup(s),O(i,"namespace.LOG_ACTIVE_GENERATION")),o.routeName=r,o)}},_setupRouter:function(e,t){var n,i=this;e.getHandler=this._getHandlerFunction();var r=function(){t.setURL(n)};if(e.updateURL=function(e){n=e,N.once(r)},t.replaceURL){var s=function(){t.replaceURL(n)};e.replaceURL=function(e){n=e,N.once(s)}}e.didTransition=function(e){i.didTransition(e)}},_serializeQueryParams:function(e,t){var n={};P(this,e,t,function(e,i,r){var s=r.urlKey;n[s]||(n[s]=[]),n[s].push({qp:r,value:i}),delete t[e]});for(var i in n){var r=n[i];if(r.length>1){r[0].qp,r[1].qp}var s=r[0].qp;t[s.urlKey]=s.route.serializeQueryParam(r[0].value,s.urlKey,s.type)}},_deserializeQueryParams:function(e,t){P(this,e,t,function(e,n,i){delete t[e],t[i.prop]=i.route.deserializeQueryParam(n,i.urlKey,i.type)})},_pruneDefaultQueryParamValues:function(e,t){var n=this._queryParamsFor(e);for(var i in t){var r=n.map[i];r&&r.sdef===t[i]&&delete t[i]}},_doTransition:function(e,t,n){var i=e||q(this.router),r={};B(r,n),this._prepareQueryParams(i,t,r);var s=U(i,t,r),o=this.router.transitionTo.apply(this.router,s);return k(o),o},_prepareQueryParams:function(e,t,n){this._hydrateUnsuppliedQueryParams(e,t,n),this._serializeQueryParams(e,n),this._pruneDefaultQueryParamValues(e,n)},_queryParamsFor:function(e){if(this._qpCache[e])return this._qpCache[e];
for(var t={},n=[],i=(this._qpCache[e]={map:t,qps:n},this.router),r=i.recognizer.handlersFor(e),s=0,o=r.length;o>s;++s){var a=r[s],l=i.getHandler(a.handler),u=O(l,"_qp");u&&(B(t,u.map),n.push.apply(n,u.qps))}return{qps:n,map:t}},_hydrateUnsuppliedQueryParams:function(e,t,n){var i=I(this,e,t),r=i.handlerInfos,s=this._bucketCache;K(this,r);for(var o=0,a=r.length;a>o;++o)for(var l=r[o].handler,u=O(l,"_qp"),c=0,h=u.qps.length;h>c;++c){var d=u.qps[c],p=d.prop in n&&d.prop||d.fprop in n&&d.fprop;if(p)p!==d.fprop&&(n[d.fprop]=n[p],delete n[p]);else{var m=d.cProto,f=O(m,"_cacheMeta"),_=m._calculateCacheKey(d.ctrl,f[d.prop].parts,i.params);n[d.fprop]=s.lookup(_,d.prop,d.def)}}},_scheduleLoadingEvent:function(e,t){this._cancelLoadingEvent(),this._loadingStateTimer=N.scheduleOnce("routerTransitions",this,"_fireLoadingEvent",e,t)},_fireLoadingEvent:function(e,t){this.router.activeTransition&&e.trigger(!0,"loading",e,t)},_cancelLoadingEvent:function(){this._loadingStateTimer&&N.cancel(this._loadingStateTimer),this._loadingStateTimer=null}}),Y={willResolveModel:function(e,t){t.router._scheduleLoadingEvent(e,t)},error:function(e,t,n){var i=n.router,r=b(n,t,function(t,n){var r=C(t,n,"error");return r?void i.intermediateTransitionTo(r,e):!0});return r&&x(n.router,"application_error")?void i.intermediateTransitionTo("application_error",e):void w(e,"Error while processing route: "+t.targetName)},loading:function(e,t){var n=t.router,i=b(t,e,function(t,i){var r=C(t,i,"loading");return r?void n.intermediateTransitionTo(r):e.pivotHandler!==t?!0:void 0});return i&&x(t.router,"application_loading")?void n.intermediateTransitionTo("application_loading"):void 0}};$.reopenClass({router:null,map:function(e){var t=this.router;t||(t=new J,t._triggerWillChangeContext=A.K,t._triggerWillLeave=A.K,t.callbacks=[],t.triggerEvent=S,this.reopenClass({router:t}));var n=H.map(function(){this.resource("application",{path:"/"},function(){for(var n=0;n<t.callbacks.length;n++)t.callbacks[n].call(this);e.call(this)})});return t.callbacks.push(e),t.map(n.generate()),t},_routePath:function(e){function t(e,t){for(var n=0,i=e.length;i>n;++n)if(e[n]!==t[n])return!1;return!0}for(var n,i,r,s=[],o=1,a=e.length;a>o;o++){for(n=e[o].name,i=n.split("."),r=G.call(s);r.length&&!t(r,i);)r.shift();s.push.apply(s,i.slice(r.length))}return s.join(".")}}),y["default"]=$}),e("ember-runtime",["ember-metal","ember-runtime/core","ember-runtime/compare","ember-runtime/copy","ember-runtime/system/namespace","ember-runtime/system/object","ember-runtime/system/tracked_array","ember-runtime/system/subarray","ember-runtime/system/container","ember-runtime/system/application","ember-runtime/system/array_proxy","ember-runtime/system/object_proxy","ember-runtime/system/core_object","ember-runtime/system/each_proxy","ember-runtime/system/native_array","ember-runtime/system/set","ember-runtime/system/string","ember-runtime/system/deferred","ember-runtime/system/lazy_load","ember-runtime/mixins/array","ember-runtime/mixins/comparable","ember-runtime/mixins/copyable","ember-runtime/mixins/enumerable","ember-runtime/mixins/freezable","ember-runtime/mixins/-proxy","ember-runtime/mixins/observable","ember-runtime/mixins/action_handler","ember-runtime/mixins/deferred","ember-runtime/mixins/mutable_enumerable","ember-runtime/mixins/mutable_array","ember-runtime/mixins/target_action_support","ember-runtime/mixins/evented","ember-runtime/mixins/promise_proxy","ember-runtime/mixins/sortable","ember-runtime/computed/array_computed","ember-runtime/computed/reduce_computed","ember-runtime/computed/reduce_computed_macros","ember-runtime/controllers/array_controller","ember-runtime/controllers/object_controller","ember-runtime/controllers/controller","ember-runtime/mixins/controller","ember-runtime/ext/rsvp","ember-runtime/ext/string","ember-runtime/ext/function","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S,I,E,k,T,P,A,M,O,D,L,R,B,N,F,z,H,W,V,j,U){"use strict";var q=e["default"],K=t.isEqual,J=n["default"],G=i["default"],$=r["default"],Y=s["default"],Z=o["default"],X=a["default"],Q=l["default"],et=(u["default"],c["default"]),tt=h["default"],nt=d["default"],it=p.EachArray,rt=p.EachProxy,st=m["default"],ot=f["default"],at=_["default"],lt=g["default"],ut=v.onLoad,ct=v.runLoadHooks,ht=y["default"],dt=b["default"],pt=w["default"],mt=C["default"],ft=x.Freezable,_t=x.FROZEN_ERROR,gt=S["default"],vt=I["default"],yt=E["default"],bt=k["default"],wt=T["default"],Ct=P["default"],xt=A["default"],St=M["default"],It=O["default"],Et=D["default"],kt=L.arrayComputed,Tt=L.ArrayComputedProperty,Pt=R.reduceComputed,At=R.ReduceComputedProperty,Mt=B.sum,Ot=B.min,Dt=B.max,Lt=B.map,Rt=B.sort,Bt=B.setDiff,Nt=B.mapBy,Ft=B.mapProperty,zt=B.filter,Ht=B.filterBy,Wt=B.filterProperty,Vt=B.uniq,jt=B.union,Ut=B.intersect,qt=N["default"],Kt=F["default"],Jt=z["default"],Gt=H["default"],$t=W["default"];q.compare=J,q.copy=G,q.isEqual=K,q.Array=ht,q.Comparable=dt,q.Copyable=pt,q.SortableMixin=Et,q.Freezable=ft,q.FROZEN_ERROR=_t,q.DeferredMixin=bt,q.MutableEnumerable=wt,q.MutableArray=Ct,q.TargetActionSupport=xt,q.Evented=St,q.PromiseProxyMixin=It,q.Observable=vt,q.arrayComputed=kt,q.ArrayComputedProperty=Tt,q.reduceComputed=Pt,q.ReduceComputedProperty=At;var Yt=q.computed;Yt.sum=Mt,Yt.min=Ot,Yt.max=Dt,Yt.map=Lt,Yt.sort=Rt,Yt.setDiff=Bt,Yt.mapBy=Nt,Yt.mapProperty=Ft,Yt.filter=zt,Yt.filterBy=Ht,Yt.filterProperty=Wt,Yt.uniq=Vt,Yt.union=jt,Yt.intersect=Ut,q.String=at,q.Object=Y,q.TrackedArray=Z,q.SubArray=X,q.Container=Q,q.Namespace=$,q.Enumerable=mt,q.ArrayProxy=et,q.ObjectProxy=tt,q.ActionHandler=yt,q.CoreObject=nt,q.EachArray=it,q.EachProxy=rt,q.NativeArray=st,q.Set=ot,q.Deferred=lt,q.onLoad=ut,q.runLoadHooks=ct,q.ArrayController=qt,q.ObjectController=Kt,q.Controller=Jt,q.ControllerMixin=Gt,q._ProxyMixin=gt,q.RSVP=$t,U["default"]=q}),e("ember-runtime/compare",["ember-metal/utils","ember-runtime/mixins/comparable","exports"],function(e,t,n){"use strict";function i(e,t){var n=e-t;return(n>0)-(0>n)}var r=e.typeOf,s=t["default"],o={undefined:0,"null":1,"boolean":2,number:3,string:4,array:5,object:6,instance:7,"function":8,"class":9,date:10};n["default"]=function a(e,t){if(e===t)return 0;var n=r(e),l=r(t);if(s){if("instance"===n&&s.detect(e.constructor))return e.constructor.compare(e,t);if("instance"===l&&s.detect(t.constructor))return 1-t.constructor.compare(t,e)}var u=i(o[n],o[l]);if(0!==u)return u;switch(n){case"boolean":case"number":return i(e,t);case"string":return i(e.localeCompare(t),0);case"array":for(var c=e.length,h=t.length,d=Math.min(c,h),p=0;d>p;p++){var m=a(e[p],t[p]);if(0!==m)return m}return i(c,h);case"instance":return s&&s.detect(e)?e.compare(e,t):0;case"date":return i(e.getTime(),t.getTime());default:return 0}}}),e("ember-runtime/computed/array_computed",["ember-metal/core","ember-runtime/computed/reduce_computed","ember-metal/enumerable_utils","ember-metal/platform","ember-metal/observer","ember-metal/error","exports"],function(e,t,n,i,r,s,o){"use strict";function a(){var e=this;return c.apply(this,arguments),this.func=function(t){return function(n){return e._hasInstanceMeta(this,n)||h(e._dependentKeys,function(t){p(this,t,function(){e.recomputeOnce.call(this,n)})},this),t.apply(this,arguments)}}(this.func),this}function l(e){var t;if(arguments.length>1&&(t=f.call(arguments,0,-1),e=f.call(arguments,-1)[0]),"object"!=typeof e)throw new m("Array Computed Property declared without an options hash");var n=new a(e);return t&&n.property.apply(n,t),n}var u=e["default"],c=(t.reduceComputed,t.ReduceComputedProperty),h=n.forEach,d=i.create,p=r.addObserver,m=s["default"],f=[].slice;a.prototype=d(c.prototype),a.prototype.initialValue=function(){return u.A()},a.prototype.resetValue=function(e){return e.clear(),e},a.prototype.didChange=function(){},o.arrayComputed=l,o.ArrayComputedProperty=a}),e("ember-runtime/computed/reduce_computed",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/error","ember-metal/property_events","ember-metal/expand_properties","ember-metal/observer","ember-metal/computed","ember-metal/platform","ember-metal/enumerable_utils","ember-runtime/system/tracked_array","ember-runtime/mixins/array","ember-metal/run_loop","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m){"use strict";function f(e,t){return"@this"===t?e:T(e,t)}function _(e,t,n){this.callbacks=e,this.cp=t,this.instanceMeta=n,this.dependentKeysByGuid={},this.trackedArraysByGuid={},this.suspended=!1,this.changedItems={},this.changedItemCount=0}function g(e,t,n){this.dependentArray=e,this.index=t,this.item=e.objectAt(t),this.trackedArray=n,this.beforeObserver=null,this.observer=null,this.destroyed=!1}function v(e,t,n){return 0>e?Math.max(0,t+e):t>e?e:Math.min(t-n,e)}function y(e,t,n){return Math.min(n,t-e)}function b(e,t,n,i,r,s,o){this.arrayChanged=e,this.index=n,this.item=t,this.propertyName=i,this.property=r,this.changedCount=s,o&&(this.previousValues=o)}function w(e,t,n,i,r){V(e,function(s,o){r.setValue(t.addedItem.call(this,r.getValue(),s,new b(e,s,o,i,n,e.length),r.sugarMeta))},this),t.flushedChanges.call(this,r.getValue(),r.sugarMeta)}function C(e,t){var n=(e._callbacks(),e._hasInstanceMeta(this,t)),i=e._instanceMeta(this,t);n&&i.setValue(e.resetValue(i.getValue())),e.options.initialize&&e.options.initialize.call(this,i.getValue(),{property:e,propertyName:t},i.sugarMeta)}function x(e,t){if(X.test(t))return!1;var n=f(e,t);return U.detect(n)}function S(e,t,n){this.context=e,this.propertyName=t,this.cache=A(e).cache,this.dependentArrays={},this.sugarMeta={},this.initialValue=n}function I(e){var t=this;this.options=e,this._dependentKeys=null,this._itemPropertyKeys={},this._previousItemPropertyKeys={},this.readOnly(),this.cacheable(),this.recomputeOnce=function(e){q.once(this,n,e)};var n=function(e){var n=(t._dependentKeys,t._instanceMeta(this,e)),i=t._callbacks();C.call(this,t,e),n.dependentArraysObserver.suspendArrayObservers(function(){V(t._dependentKeys,function(e){if(x(this,e)){var i=f(this,e),r=n.dependentArrays[e];i===r?t._previousItemPropertyKeys[e]&&(delete t._previousItemPropertyKeys[e],n.dependentArraysObserver.setupPropertyObservers(e,t._itemPropertyKeys[e])):(n.dependentArrays[e]=i,r&&n.dependentArraysObserver.teardownObservers(r,e),i&&n.dependentArraysObserver.setupObservers(i,e))}},this)},this),V(t._dependentKeys,function(r){if(x(this,r)){var s=f(this,r);s&&w.call(this,s,i,t,e,n)}},this)};this.func=function(e){return n.call(this,e),t._instanceMeta(this,e).getValue()}}function E(e){return e}function k(e){var t;if(arguments.length>1&&(t=$.call(arguments,0,-1),e=$.call(arguments,-1)[0]),"object"!=typeof e)throw new M("Reduce Computed Property declared without an options hash");if(!("initialValue"in e))throw new M("Reduce Computed Property declared without an initial value");var n=new I(e);return t&&n.property.apply(n,t),n}var T=(e["default"],t.get),P=(n.set,i.guidFor),A=i.meta,M=r["default"],O=s.propertyWillChange,D=s.propertyDidChange,L=o["default"],R=a.addObserver,B=(a.observersFor,a.removeObserver),N=a.addBeforeObserver,F=a.removeBeforeObserver,z=l.ComputedProperty,H=l.cacheFor,W=u.create,V=c.forEach,j=h["default"],U=d["default"],q=p["default"],K=(i.isArray,H.set),J=H.get,G=H.remove,$=[].slice,Y=/^(.*)\.@each\.(.*)/,Z=/(.*\.@each){2,}/,X=/\.\[\]$/;_.prototype={setValue:function(e){this.instanceMeta.setValue(e,!0)},getValue:function(){return this.instanceMeta.getValue()},setupObservers:function(e,t){this.dependentKeysByGuid[P(e)]=t,e.addArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"}),this.cp._itemPropertyKeys[t]&&this.setupPropertyObservers(t,this.cp._itemPropertyKeys[t])},teardownObservers:function(e,t){var n=this.cp._itemPropertyKeys[t]||[];delete this.dependentKeysByGuid[P(e)],this.teardownPropertyObservers(t,n),e.removeArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"})},suspendArrayObservers:function(e,t){var n=this.suspended;this.suspended=!0,e.call(t),this.suspended=n},setupPropertyObservers:function(e,t){var n=f(this.instanceMeta.context,e),i=f(n,"length"),r=new Array(i);this.resetTransformations(e,r),V(n,function(i,s){var o=this.createPropertyObserverContext(n,s,this.trackedArraysByGuid[e]);r[s]=o,V(t,function(e){N(i,e,this,o.beforeObserver),R(i,e,this,o.observer)},this)},this)},teardownPropertyObservers:function(e,t){var n,i,r,s=this,o=this.trackedArraysByGuid[e];o&&o.apply(function(e,o,a){a!==j.DELETE&&V(e,function(e){e.destroyed=!0,n=e.beforeObserver,i=e.observer,r=e.item,V(t,function(e){F(r,e,s,n),B(r,e,s,i)})})})},createPropertyObserverContext:function(e,t,n){var i=new g(e,t,n);return this.createPropertyObserver(i),i},createPropertyObserver:function(e){var t=this;e.beforeObserver=function(n,i){return t.itemPropertyWillChange(n,i,e.dependentArray,e)},e.observer=function(n,i){return t.itemPropertyDidChange(n,i,e.dependentArray,e)}},resetTransformations:function(e,t){this.trackedArraysByGuid[e]=new j(t)},trackAdd:function(e,t,n){var i=this.trackedArraysByGuid[e];i&&i.addItems(t,n)},trackRemove:function(e,t,n){var i=this.trackedArraysByGuid[e];return i?i.removeItems(t,n):[]},updateIndexes:function(e,t){var n=f(t,"length");e.apply(function(e,t,i,r){i!==j.DELETE&&(0!==r||i!==j.RETAIN||e.length!==n||0!==t)&&V(e,function(e,n){e.index=n+t})})},dependentArrayWillChange:function(e,t,n){function i(e){l[a].destroyed=!0,F(s,e,this,l[a].beforeObserver),B(s,e,this,l[a].observer)}if(!this.suspended){var r,s,o,a,l,u=this.callbacks.removedItem,c=P(e),h=this.dependentKeysByGuid[c],d=this.cp._itemPropertyKeys[h]||[],p=f(e,"length"),m=v(t,p,0),_=y(m,p,n);for(l=this.trackRemove(h,m,_),a=_-1;a>=0&&(o=m+a,!(o>=p));--a)s=e.objectAt(o),V(d,i,this),r=new b(e,s,o,this.instanceMeta.propertyName,this.cp,_),this.setValue(u.call(this.instanceMeta.context,this.getValue(),s,r,this.instanceMeta.sugarMeta));this.callbacks.flushedChanges.call(this.instanceMeta.context,this.getValue(),this.instanceMeta.sugarMeta)}},dependentArrayDidChange:function(e,t,n,i){if(!this.suspended){var r,s,o=this.callbacks.addedItem,a=P(e),l=this.dependentKeysByGuid[a],u=new Array(i),c=this.cp._itemPropertyKeys[l],h=f(e,"length"),d=v(t,h,i),p=d+i;V(e.slice(d,p),function(t,n){c&&(s=this.createPropertyObserverContext(e,d+n,this.trackedArraysByGuid[l]),u[n]=s,V(c,function(e){N(t,e,this,s.beforeObserver),R(t,e,this,s.observer)},this)),r=new b(e,t,d+n,this.instanceMeta.propertyName,this.cp,i),this.setValue(o.call(this.instanceMeta.context,this.getValue(),t,r,this.instanceMeta.sugarMeta))},this),this.callbacks.flushedChanges.call(this.instanceMeta.context,this.getValue(),this.instanceMeta.sugarMeta),this.trackAdd(l,d,u)}},itemPropertyWillChange:function(e,t,n,i){var r=P(e);this.changedItems[r]||(this.changedItems[r]={array:n,observerContext:i,obj:e,previousValues:{}}),++this.changedItemCount,this.changedItems[r].previousValues[t]=f(e,t)},itemPropertyDidChange:function(){0===--this.changedItemCount&&this.flushChanges()},flushChanges:function(){var e,t,n,i=this.changedItems;for(e in i)t=i[e],t.observerContext.destroyed||(this.updateIndexes(t.observerContext.trackedArray,t.observerContext.dependentArray),n=new b(t.array,t.obj,t.observerContext.index,this.instanceMeta.propertyName,this.cp,i.length,t.previousValues),this.setValue(this.callbacks.removedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta)),this.setValue(this.callbacks.addedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta)));this.changedItems={},this.callbacks.flushedChanges.call(this.instanceMeta.context,this.getValue(),this.instanceMeta.sugarMeta)}},S.prototype={getValue:function(){var e=J(this.cache,this.propertyName);return void 0!==e?e:this.initialValue},setValue:function(e,t){e!==J(this.cache,this.propertyName)&&(t&&O(this.context,this.propertyName),void 0===e?G(this.cache,this.propertyName):K(this.cache,this.propertyName,e),t&&D(this.context,this.propertyName))}},m.ReduceComputedProperty=I,I.prototype=W(z.prototype),I.prototype._callbacks=function(){if(!this.callbacks){var e=this.options;this.callbacks={removedItem:e.removedItem||E,addedItem:e.addedItem||E,flushedChanges:e.flushedChanges||E}}return this.callbacks},I.prototype._hasInstanceMeta=function(e,t){return!!A(e).cacheMeta[t]},I.prototype._instanceMeta=function(e,t){var n=A(e).cacheMeta,i=n[t];return i||(i=n[t]=new S(e,t,this.initialValue()),i.dependentArraysObserver=new _(this._callbacks(),this,i,e,t,i.sugarMeta)),i},I.prototype.initialValue=function(){return"function"==typeof this.options.initialValue?this.options.initialValue():this.options.initialValue},I.prototype.resetValue=function(){return this.initialValue()},I.prototype.itemPropertyKey=function(e,t){this._itemPropertyKeys[e]=this._itemPropertyKeys[e]||[],this._itemPropertyKeys[e].push(t)},I.prototype.clearItemPropertyKeys=function(e){this._itemPropertyKeys[e]&&(this._previousItemPropertyKeys[e]=this._itemPropertyKeys[e],this._itemPropertyKeys[e]=[])},I.prototype.property=function(){var e,t,n=this,i=$.call(arguments),r={};V(i,function(i){if(Z.test(i))throw new M("Nested @each properties not supported: "+i);if(e=Y.exec(i)){t=e[1];var s=e[2],o=function(e){n.itemPropertyKey(t,e)};L(s,o),r[P(t)]=t}else r[P(i)]=i});var s=[];for(var o in r)s.push(r[o]);return z.prototype.property.apply(this,s)},m.reduceComputed=k}),e("ember-runtime/computed/reduce_computed_macros",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/error","ember-metal/enumerable_utils","ember-metal/run_loop","ember-metal/observer","ember-runtime/computed/array_computed","ember-runtime/computed/reduce_computed","ember-runtime/system/subarray","ember-metal/keys","ember-runtime/compare","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";function m(e){return B(e,{initialValue:0,addedItem:function(e,t){return e+t},removedItem:function(e,t){return e-t}})}function f(e){return B(e,{initialValue:-1/0,addedItem:function(e,t){return Math.max(e,t)},removedItem:function(e,t){return e>t?e:void 0}})}function _(e){return B(e,{initialValue:1/0,addedItem:function(e,t){return Math.min(e,t)},removedItem:function(e,t){return t>e?e:void 0}})}function g(e,t){var n={addedItem:function(e,n,i){var r=t.call(this,n,i.index);return e.insertAt(i.index,r),e},removedItem:function(e,t,n){return e.removeAt(n.index,1),e}};return R(e,n)}function v(e,t){var n=function(e){return P(e,t)};return g(e+".@each."+t,n)}function y(e,t){var n={initialize:function(e,t,n){n.filteredArrayIndexes=new N},addedItem:function(e,n,i,r){var s=!!t.call(this,n,i.index),o=r.filteredArrayIndexes.addItem(i.index,s);return s&&e.insertAt(o,n),e},removedItem:function(e,t,n,i){var r=i.filteredArrayIndexes.removeItem(n.index);return r>-1&&e.removeAt(r),e}};return R(e,n)}function b(e,t,n){var i;return i=2===arguments.length?function(e){return P(e,t)}:function(e){return P(e,t)===n},y(e+".@each."+t,i)}function w(){var e=H.call(arguments);return e.push({initialize:function(e,t,n){n.itemCounts={}},addedItem:function(e,t,n,i){var r=A(t);return i.itemCounts[r]?++i.itemCounts[r]:(i.itemCounts[r]=1,e.pushObject(t)),e},removedItem:function(e,t,n,i){var r=A(t),s=i.itemCounts;return 0===--s[r]&&e.removeObject(t),e}}),R.apply(null,e)}function C(){var e=H.call(arguments);return e.push({initialize:function(e,t,n){n.itemCounts={}},addedItem:function(e,t,n,i){var r=A(t),s=A(n.arrayChanged),o=n.property._dependentKeys.length,a=i.itemCounts;return a[r]||(a[r]={}),void 0===a[r][s]&&(a[r][s]=0),1===++a[r][s]&&o===F(a[r]).length&&e.addObject(t),e},removedItem:function(e,t,n,i){var r,s=A(t),o=A(n.arrayChanged),a=(n.property._dependentKeys.length,i.itemCounts);return void 0===a[s][o]&&(a[s][o]=0),0===--a[s][o]&&(delete a[s][o],r=F(a[s]).length,0===r&&delete a[s],e.removeObject(t)),e}}),R.apply(null,e)}function x(e,t){if(2!==arguments.length)throw new M("setDiff requires exactly two dependent arrays.");return R(e,t,{addedItem:function(n,i,r){var s=P(this,e),o=P(this,t);return r.arrayChanged===s?o.contains(i)||n.addObject(i):n.removeObject(i),n},removedItem:function(n,i,r){var s=P(this,e),o=P(this,t);return r.arrayChanged===o?s.contains(i)&&n.addObject(i):n.removeObject(i),n}})}function S(e,t,n,i){var r,s,o,a,l;return arguments.length<4&&(i=P(e,"length")),arguments.length<3&&(n=0),n===i?n:(r=n+Math.floor((i-n)/2),s=e.objectAt(r),a=A(s),l=A(t),a===l?r:(o=this.order(s,t),0===o&&(o=l>a?-1:1),0>o?this.binarySearch(e,t,r+1,i):o>0?this.binarySearch(e,t,n,r):r))}function I(e,t){return"function"==typeof t?E(e,t):k(e,t)}function E(e,t){return R(e,{initialize:function(e,n,i){i.order=t,i.binarySearch=S,i.waitingInsertions=[],i.insertWaiting=function(){var t,n,r=i.waitingInsertions;i.waitingInsertions=[];for(var s=0;s<r.length;s++)n=r[s],t=i.binarySearch(e,n),e.insertAt(t,n)},i.insertLater=function(e){this.waitingInsertions.push(e)}},addedItem:function(e,t,n,i){return i.insertLater(t),e},removedItem:function(e,t){return e.removeObject(t),e},flushedChanges:function(e,t){t.insertWaiting()}})}function k(e,t){return R(e,{initialize:function(n,i,r){function s(){var n,s,a,l=P(this,t),u=r.sortProperties=[],c=r.sortPropertyAscending={};i.property.clearItemPropertyKeys(e),O(l,function(t){-1!==(s=t.indexOf(":"))?(n=t.substring(0,s),a="desc"!==t.substring(s+1).toLowerCase()):(n=t,a=!0),u.push(n),c[n]=a,i.property.itemPropertyKey(e,n)}),l.addObserver("@each",this,o)}function o(){D.once(this,a,i.propertyName)}function a(e){s.call(this),i.property.recomputeOnce.call(this,e)}L(this,t,o),s.call(this),r.order=function(e,t){for(var n,i,r,s=this.keyFor(e),o=this.keyFor(t),a=0;a<this.sortProperties.length;++a)if(n=this.sortProperties[a],i=z(s[n],o[n]),0!==i)return r=this.sortPropertyAscending[n],r?i:-1*i;return 0},r.binarySearch=S,T(r)},addedItem:function(e,t,n,i){var r=i.binarySearch(e,t);return e.insertAt(r,t),e},removedItem:function(e,t,n,i){var r=i.binarySearch(e,t);return e.removeAt(r),i.dropKeyFor(t),e}})}function T(e){e.keyFor=function(e){var t=A(e);if(this.keyCache[t])return this.keyCache[t];for(var n,i={},r=0;r<this.sortProperties.length;++r)n=this.sortProperties[r],i[n]=P(e,n);return this.keyCache[t]=i},e.dropKeyFor=function(e){var t=A(e);this.keyCache[t]=null},e.keyCache={}}var P=(e["default"],t.get),A=(n.set,i.isArray,i.guidFor),M=r["default"],O=s.forEach,D=o["default"],L=a.addObserver,R=l.arrayComputed,B=u.reduceComputed,N=c["default"],F=h["default"],z=d["default"],H=[].slice;p.sum=m,p.max=f,p.min=_,p.map=g,p.mapBy=v;var W=v;p.mapProperty=W,p.filter=y,p.filterBy=b;var V=b;p.filterProperty=V,p.uniq=w;var j=w;p.union=j,p.intersect=C,p.setDiff=x,p.sort=I}),e("ember-runtime/controllers/array_controller",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/enumerable_utils","ember-runtime/system/array_proxy","ember-runtime/mixins/sortable","ember-runtime/mixins/controller","ember-metal/computed","ember-metal/error","exports"],function(e,t,n,i,r,s,o,a,l,u){"use strict";var c=e["default"],h=t.get,d=(n.set,i.forEach),p=i.replace,m=r["default"],f=s["default"],_=o["default"],g=a.computed,v=l["default"];u["default"]=m.extend(_,f,{itemController:null,lookupItemController:function(){return h(this,"itemController")},objectAtContent:function(e){var t,n=h(this,"length"),i=h(this,"arrangedContent"),r=i&&i.objectAt(e);return e>=0&&n>e&&(t=this.lookupItemController(r))?this.controllerAt(e,r,t):r},arrangedContentDidChange:function(){this._super(),this._resetSubControllers()},arrayContentDidChange:function(e,t,n){var i=this._subControllers;if(i.length){var r=i.slice(e,e+t);d(r,function(e){e&&e.destroy()}),p(i,e,t,new Array(n))}this._super(e,t,n)},init:function(){this._super(),this._subControllers=[]},model:g(function(){return c.A()}),_isVirtual:!1,controllerAt:function(e,t,n){var i,r,s,o=h(this,"container"),a=this._subControllers;if(a.length>e&&(r=a[e]))return r;if(s=this._isVirtual?h(this,"parentController"):this,i="controller:"+n,!o.has(i))throw new v('Could not resolve itemController: "'+n+'"');return r=o.lookupFactory(i).create({target:s,parentController:s,model:t}),a[e]=r,r},_subControllers:null,_resetSubControllers:function(){var e,t=this._subControllers;if(t.length){for(var n=0,i=t.length;i>n;n++)e=t[n],e&&e.destroy();t.length=0}},willDestroy:function(){this._resetSubControllers(),this._super()}})}),e("ember-runtime/controllers/controller",["ember-runtime/system/object","ember-runtime/mixins/controller","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n["default"]=i.extend(r)}),e("ember-runtime/controllers/object_controller",["ember-runtime/mixins/controller","ember-runtime/system/object_proxy","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n["default"]=r.extend(i)}),e("ember-runtime/copy",["ember-metal/enumerable_utils","ember-metal/utils","ember-runtime/system/object","ember-runtime/mixins/copyable","exports"],function(e,t,n,i,r){"use strict";function s(e,t,n,i){var r,u,c;if("object"!=typeof e||null===e)return e;if(t&&(u=o(n,e))>=0)return i[u];if("array"===a(e)){if(r=e.slice(),t)for(u=r.length;--u>=0;)r[u]=s(r[u],t,n,i)}else if(l&&l.detect(e))r=e.copy(t,n,i);else if(e instanceof Date)r=new Date(e.getTime());else{r={};for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&"__"!==c.substring(0,2)&&(r[c]=t?s(e[c],t,n,i):e[c])}return t&&(n.push(e),i.push(r)),r}var o=e.indexOf,a=t.typeOf,l=(n["default"],i["default"]);r["default"]=function(e,t){return"object"!=typeof e||null===e?e:l&&l.detect(e)?e.copy(t):s(e,t,t?[]:null,t?[]:null)}}),e("ember-runtime/core",["exports"],function(e){"use strict";var t=function(e,t){return e&&"function"==typeof e.isEqual?e.isEqual(t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t};e.isEqual=t}),e("ember-runtime/ext/function",["ember-metal/core","ember-metal/expand_properties","ember-metal/computed","ember-metal/mixin"],function(e,t,n,i){"use strict";var r=e["default"],s=t["default"],o=n.computed,a=i.observer,l=Array.prototype.slice,u=Function.prototype;(r.EXTEND_PROTOTYPES===!0||r.EXTEND_PROTOTYPES.Function)&&(u.property=function(){var e=o(this);return e.property.apply(e,arguments)},u.observes=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return a.apply(this,t.concat(this))},u.observesImmediately=function(){for(var e=0,t=arguments.length;t>e;e++){arguments[e]}return this.observes.apply(this,arguments)},u.observesBefore=function(){for(var e=[],t=function(t){e.push(t)},n=0,i=arguments.length;i>n;++n)s(arguments[n],t);return this.__ember_observesBefore__=e,this},u.on=function(){var e=l.call(arguments);return this.__ember_listens__=e,this})}),e("ember-runtime/ext/rsvp",["ember-metal/core","ember-metal/logger","ember-metal/run_loop","exports"],function(e,n,i,r){"use strict";var s,o=e["default"],a=n["default"],l=i["default"],u=t("rsvp"),c="ember-testing/test",h=function(){o.Test&&o.Test.adapter&&o.Test.adapter.asyncStart()},d=function(){o.Test&&o.Test.adapter&&o.Test.adapter.asyncEnd()};u.configure("async",function(e,t){var n=!l.currentRunLoop;o.testing&&n&&h(),l.backburner.schedule("actions",function(){o.testing&&n&&d(),e(t)})}),u.Promise.prototype.fail=function(e,t){return this["catch"](e,t)},u.onerrorDefault=function(e){if(e instanceof Error)if(o.testing){if(!s&&o.__loader.registry[c]&&(s=t(c)["default"]),!s||!s.adapter)throw e;s.adapter.exception(e)}else o.onerror?o.onerror(e):a.error(e.stack)},u.on("error",u.onerrorDefault),r["default"]=u}),e("ember-runtime/ext/string",["ember-metal/core","ember-runtime/system/string"],function(e,t){"use strict";var n=e["default"],i=t.fmt,r=t.w,s=t.loc,o=t.camelize,a=t.decamelize,l=t.dasherize,u=t.underscore,c=t.capitalize,h=t.classify,d=String.prototype;(n.EXTEND_PROTOTYPES===!0||n.EXTEND_PROTOTYPES.String)&&(d.fmt=function(){return i(this,arguments)},d.w=function(){return r(this)},d.loc=function(){return s(this,arguments)},d.camelize=function(){return o(this)},d.decamelize=function(){return a(this)},d.dasherize=function(){return l(this)},d.underscore=function(){return u(this)},d.classify=function(){return h(this)},d.capitalize=function(){return c(this)})}),e("ember-runtime/mixins/-proxy",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/observer","ember-metal/property_events","ember-metal/computed","ember-metal/properties","ember-metal/mixin","ember-runtime/system/string","ember-runtime/system/object","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e,t){var n=t.slice(8);n in this||w(this,n)}function p(e,t){var n=t.slice(8);n in this||C(this,n)}{var m=(e["default"],t.get),f=n.set,_=i.meta,g=r.addObserver,v=r.removeObserver,y=r.addBeforeObserver,b=r.removeBeforeObserver,w=s.propertyWillChange,C=s.propertyDidChange,x=o.computed,S=a.defineProperty,I=l.Mixin,E=l.observer;u.fmt,c["default"]}h["default"]=I.create({content:null,_contentDidChange:E("content",function(){}),isTruthy:x.bool("content"),_debugContainerKey:null,willWatchProperty:function(e){var t="content."+e;y(this,t,null,d),g(this,t,null,p)},didUnwatchProperty:function(e){var t="content."+e;b(this,t,null,d),v(this,t,null,p)},unknownProperty:function(e){var t=m(this,"content");return t?m(t,e):void 0},setUnknownProperty:function(e,t){var n=_(this);if(n.proto===this)return S(this,e,null,t),t;var i=m(this,"content");return f(i,e,t)}})}),e("ember-runtime/mixins/action_handler",["ember-metal/merge","ember-metal/mixin","ember-metal/property_get","ember-metal/utils","exports"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t.Mixin,a=n.get,l=i.typeOf,u=o.create({mergedProperties:["_actions"],willMergeMixin:function(e){var t;e._actions||("object"===l(e.actions)?t="actions":"object"===l(e.events)&&(t="events"),t&&(e._actions=s(e._actions||{},e[t])),delete e[t])},send:function(e){var t,n=[].slice.call(arguments,1);this._actions&&this._actions[e]&&this._actions[e].apply(this,n)!==!0||(t=a(this,"target"))&&t.send.apply(t,arguments)}});r["default"]=u}),e("ember-runtime/mixins/array",["ember-metal/core","ember-metal/property_get","ember-metal/computed","ember-metal/is_none","ember-runtime/mixins/enumerable","ember-metal/enumerable_utils","ember-metal/mixin","ember-metal/property_events","ember-metal/events","ember-metal/watching","exports"],function(e,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e,t,n,i,r){var s=n&&n.willChange||"arrayWillChange",o=n&&n.didChange||"arrayDidChange",a=m(e,"hasArrayObservers");return a===r&&C(e,"hasArrayObservers"),i(e,"@array:before",t,s),i(e,"@array:change",t,o),a===r&&x(e,"hasArrayObservers"),e}var p=e["default"],m=n.get,f=i.computed,_=i.cacheFor,g=r.isNone,v=(r.none,s["default"]),y=o.map,b=a.Mixin,w=a.required,C=l.propertyWillChange,x=l.propertyDidChange,S=u.addListener,I=u.removeListener,E=u.sendEvent,k=u.hasListeners,T=c.isWatching;h["default"]=b.create(v,{length:w(),objectAt:function(e){return 0>e||e>=m(this,"length")?void 0:m(this,e)},objectsAt:function(e){var t=this;return y(e,function(e){return t.objectAt(e)})},nextObject:function(e){return this.objectAt(e)},"[]":f(function(e,t){return void 0!==t&&this.replace(0,m(this,"length"),t),this}),firstObject:f(function(){return this.objectAt(0)}),lastObject:f(function(){return this.objectAt(m(this,"length")-1)}),contains:function(e){return this.indexOf(e)>=0},slice:function(e,t){var n=p.A(),i=m(this,"length");for(g(e)&&(e=0),(g(t)||t>i)&&(t=i),0>e&&(e=i+e),0>t&&(t=i+t);t>e;)n[n.length]=this.objectAt(e++);return n},indexOf:function(e,t){var n,i=m(this,"length");for(void 0===t&&(t=0),0>t&&(t+=i),n=t;i>n;n++)if(this.objectAt(n)===e)return n;return-1},lastIndexOf:function(e,t){var n,i=m(this,"length");for((void 0===t||t>=i)&&(t=i-1),0>t&&(t+=i),n=t;n>=0;n--)if(this.objectAt(n)===e)return n;return-1},addArrayObserver:function(e,t){return d(this,e,t,S,!1)},removeArrayObserver:function(e,t){return d(this,e,t,I,!0)},hasArrayObservers:f(function(){return k(this,"@array:change")||k(this,"@array:before")}),arrayContentWillChange:function(e,t,n){var i,r;
if(void 0===e?(e=0,t=n=-1):(void 0===t&&(t=-1),void 0===n&&(n=-1)),T(this,"@each")&&m(this,"@each"),E(this,"@array:before",[this,e,t,n]),e>=0&&t>=0&&m(this,"hasEnumerableObservers")){i=[],r=e+t;for(var s=e;r>s;s++)i.push(this.objectAt(s))}else i=t;return this.enumerableContentWillChange(i,n),this},arrayContentDidChange:function(e,t,n){var i,r;if(void 0===e?(e=0,t=n=-1):(void 0===t&&(t=-1),void 0===n&&(n=-1)),e>=0&&n>=0&&m(this,"hasEnumerableObservers")){i=[],r=e+n;for(var s=e;r>s;s++)i.push(this.objectAt(s))}else i=n;this.enumerableContentDidChange(t,i),E(this,"@array:change",[this,e,t,n]);var o=m(this,"length"),a=_(this,"firstObject"),l=_(this,"lastObject");return this.objectAt(0)!==a&&(C(this,"firstObject"),x(this,"firstObject")),this.objectAt(o-1)!==l&&(C(this,"lastObject"),x(this,"lastObject")),this},"@each":f(function(){if(!this.__each){var e=t("ember-runtime/system/each_proxy").EachProxy;this.__each=new e(this)}return this.__each})})}),e("ember-runtime/mixins/comparable",["ember-metal/mixin","exports"],function(e,t){"use strict";var n=e.Mixin,i=e.required;t["default"]=n.create({compare:i(Function)})}),e("ember-runtime/mixins/controller",["ember-metal/core","ember-metal/property_get","ember-runtime/system/object","ember-metal/mixin","ember-metal/computed","ember-runtime/mixins/action_handler","ember-runtime/mixins/controller_content_model_alias_deprecation","exports"],function(e,t,n,i,r,s,o,a){"use strict";var l=(e["default"],t.get,n["default"],i.Mixin),u=r.computed,c=s["default"],h=o["default"];a["default"]=l.create(c,h,{isController:!0,target:null,container:null,parentController:null,store:null,model:null,content:u.alias("model")})}),e("ember-runtime/mixins/controller_content_model_alias_deprecation",["ember-metal/core","ember-metal/property_get","ember-metal/mixin","exports"],function(e,t,n,i){"use strict";var r=(e["default"],t.get,n.Mixin);i["default"]=r.create({willMergeMixin:function(e){this._super.apply(this,arguments);var t=!!e.model;e.content&&!t&&(e.model=e.content,delete e.content)}})}),e("ember-runtime/mixins/copyable",["ember-metal/property_get","ember-metal/property_set","ember-metal/mixin","ember-runtime/mixins/freezable","ember-runtime/system/string","ember-metal/error","exports"],function(e,t,n,i,r,s,o){"use strict";var a=e.get,l=(t.set,n.required),u=i.Freezable,c=n.Mixin,h=r.fmt,d=s["default"];o["default"]=c.create({copy:l(Function),frozenCopy:function(){if(u&&u.detect(this))return a(this,"isFrozen")?this:this.copy().freeze();throw new d(h("%@ does not support freezing",[this]))}})}),e("ember-runtime/mixins/deferred",["ember-metal/core","ember-metal/property_get","ember-metal/mixin","ember-metal/computed","ember-runtime/ext/rsvp","exports"],function(e,t,n,i,r,s){"use strict";var o=(e["default"],t.get),a=n.Mixin,l=i.computed,u=r["default"];s["default"]=a.create({then:function(e,t,n){function i(t){return e(t===s?a:t)}var r,s,a;return a=this,r=o(this,"_deferred"),s=r.promise,s.then(e&&i,t,n)},resolve:function(e){var t,n;t=o(this,"_deferred"),n=t.promise,t.resolve(e===this?n:e)},reject:function(e){o(this,"_deferred").reject(e)},_deferred:l(function(){return u.defer("Ember: DeferredMixin - "+this)})})}),e("ember-runtime/mixins/enumerable",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/mixin","ember-metal/enumerable_utils","ember-metal/computed","ember-metal/property_events","ember-metal/events","ember-runtime/compare","exports"],function(e,t,n,i,r,s,o,a,l,u,c){"use strict";function h(){return 0===M.length?{}:M.pop()}function d(e){return M.push(e),null}function p(e,t){function n(n){var r=f(n,e);return i?t===r:!!r}var i=2===arguments.length;return n}var m=e["default"],f=t.get,_=n.set,g=i.apply,v=r.Mixin,y=r.required,b=r.aliasMethod,w=s.indexOf,C=o.computed,x=a.propertyWillChange,S=a.propertyDidChange,I=l.addListener,E=l.removeListener,k=l.sendEvent,T=l.hasListeners,P=u["default"],A=Array.prototype.slice,M=[];c["default"]=v.create({nextObject:y(Function),firstObject:C("[]",function(){if(0===f(this,"length"))return void 0;var e,t=h();return e=this.nextObject(0,null,t),d(t),e}),lastObject:C("[]",function(){var e=f(this,"length");if(0===e)return void 0;var t,n=h(),i=0,r=null;do r=t,t=this.nextObject(i++,r,n);while(void 0!==t);return d(n),r}),contains:function(e){return void 0!==this.find(function(t){return t===e})},forEach:function(e,t){if("function"!=typeof e)throw new TypeError;var n=f(this,"length"),i=null,r=h();void 0===t&&(t=null);for(var s=0;n>s;s++){var o=this.nextObject(s,i,r);e.call(t,o,s,this),i=o}return i=null,r=d(r),this},getEach:function(e){return this.mapBy(e)},setEach:function(e,t){return this.forEach(function(n){_(n,e,t)})},map:function(e,t){var n=m.A();return this.forEach(function(i,r,s){n[r]=e.call(t,i,r,s)}),n},mapBy:function(e){return this.map(function(t){return f(t,e)})},mapProperty:b("mapBy"),filter:function(e,t){var n=m.A();return this.forEach(function(i,r,s){e.call(t,i,r,s)&&n.push(i)}),n},reject:function(e,t){return this.filter(function(){return!g(t,e,arguments)})},filterBy:function(){return this.filter(g(this,p,arguments))},filterProperty:b("filterBy"),rejectBy:function(e,t){var n=function(n){return f(n,e)===t},i=function(t){return!!f(t,e)},r=2===arguments.length?n:i;return this.reject(r)},rejectProperty:b("rejectBy"),find:function(e,t){var n=f(this,"length");void 0===t&&(t=null);for(var i,r,s=null,o=!1,a=h(),l=0;n>l&&!o;l++)i=this.nextObject(l,s,a),(o=e.call(t,i,l,this))&&(r=i),s=i;return i=s=null,a=d(a),r},findBy:function(){return this.find(g(this,p,arguments))},findProperty:b("findBy"),every:function(e,t){return!this.find(function(n,i,r){return!e.call(t,n,i,r)})},everyBy:b("isEvery"),everyProperty:b("isEvery"),isEvery:function(){return this.every(g(this,p,arguments))},any:function(e,t){var n,i,r=f(this,"length"),s=h(),o=!1,a=null;for(void 0===t&&(t=null),i=0;r>i&&!o;i++)n=this.nextObject(i,a,s),o=e.call(t,n,i,this),a=n;return n=a=null,s=d(s),o},some:b("any"),isAny:function(){return this.any(g(this,p,arguments))},anyBy:b("isAny"),someProperty:b("isAny"),reduce:function(e,t,n){if("function"!=typeof e)throw new TypeError;var i=t;return this.forEach(function(t,r){i=e(i,t,r,this,n)},this),i},invoke:function(e){var t,n=m.A();return arguments.length>1&&(t=A.call(arguments,1)),this.forEach(function(i,r){var s=i&&i[e];"function"==typeof s&&(n[r]=t?g(i,s,t):i[e]())},this),n},toArray:function(){var e=m.A();return this.forEach(function(t,n){e[n]=t}),e},compact:function(){return this.filter(function(e){return null!=e})},without:function(e){if(!this.contains(e))return this;var t=m.A();return this.forEach(function(n){n!==e&&(t[t.length]=n)}),t},uniq:function(){var e=m.A();return this.forEach(function(t){w(e,t)<0&&e.push(t)}),e},"[]":C(function(){return this}),addEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",r=f(this,"hasEnumerableObservers");return r||x(this,"hasEnumerableObservers"),I(this,"@enumerable:before",e,n),I(this,"@enumerable:change",e,i),r||S(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",r=f(this,"hasEnumerableObservers");return r&&x(this,"hasEnumerableObservers"),E(this,"@enumerable:before",e,n),E(this,"@enumerable:change",e,i),r&&S(this,"hasEnumerableObservers"),this},hasEnumerableObservers:C(function(){return T(this,"@enumerable:change")||T(this,"@enumerable:before")}),enumerableContentWillChange:function(e,t){var n,i,r;return n="number"==typeof e?e:e?f(e,"length"):e=-1,i="number"==typeof t?t:t?f(t,"length"):t=-1,r=0>i||0>n||i-n!==0,-1===e&&(e=null),-1===t&&(t=null),x(this,"[]"),r&&x(this,"length"),k(this,"@enumerable:before",[this,e,t]),this},enumerableContentDidChange:function(e,t){var n,i,r;return n="number"==typeof e?e:e?f(e,"length"):e=-1,i="number"==typeof t?t:t?f(t,"length"):t=-1,r=0>i||0>n||i-n!==0,-1===e&&(e=null),-1===t&&(t=null),k(this,"@enumerable:change",[this,e,t]),r&&S(this,"length"),S(this,"[]"),this},sortBy:function(){var e=arguments;return this.toArray().sort(function(t,n){for(var i=0;i<e.length;i++){var r=e[i],s=f(t,r),o=f(n,r),a=P(s,o);if(a)return a}return 0})}})}),e("ember-runtime/mixins/evented",["ember-metal/mixin","ember-metal/events","exports"],function(e,t,n){"use strict";var i=e.Mixin,r=t.addListener,s=t.removeListener,o=t.hasListeners,a=t.sendEvent;n["default"]=i.create({on:function(e,t,n){return r(this,e,t,n),this},one:function(e,t,n){return n||(n=t,t=null),r(this,e,t,n,!0),this},trigger:function(e){for(var t=arguments.length,n=new Array(t-1),i=1;t>i;i++)n[i-1]=arguments[i];a(this,e,n)},off:function(e,t,n){return s(this,e,t,n),this},has:function(e){return o(this,e)}})}),e("ember-runtime/mixins/freezable",["ember-metal/mixin","ember-metal/property_get","ember-metal/property_set","exports"],function(e,t,n,i){"use strict";var r=e.Mixin,s=t.get,o=n.set,a=r.create({isFrozen:!1,freeze:function(){return s(this,"isFrozen")?this:(o(this,"isFrozen",!0),this)}});i.Freezable=a;var l="Frozen object cannot be modified.";i.FROZEN_ERROR=l}),e("ember-runtime/mixins/mutable_array",["ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/error","ember-metal/mixin","ember-runtime/mixins/array","ember-runtime/mixins/mutable_enumerable","ember-runtime/mixins/enumerable","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u="Index out of range",c=[],h=e.get,d=(t.set,n.isArray),p=i["default"],m=r.Mixin,f=r.required,_=s["default"],g=o["default"],v=a["default"];l["default"]=m.create(_,g,{replace:f(),clear:function(){var e=h(this,"length");return 0===e?this:(this.replace(0,e,c),this)},insertAt:function(e,t){if(e>h(this,"length"))throw new p(u);return this.replace(e,0,[t]),this},removeAt:function(e,t){if("number"==typeof e){if(0>e||e>=h(this,"length"))throw new p(u);void 0===t&&(t=1),this.replace(e,t,c)}return this},pushObject:function(e){return this.insertAt(h(this,"length"),e),e},pushObjects:function(e){if(!v.detect(e)&&!d(e))throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects");return this.replace(h(this,"length"),0,e),this},popObject:function(){var e=h(this,"length");if(0===e)return null;var t=this.objectAt(e-1);return this.removeAt(e-1,1),t},shiftObject:function(){if(0===h(this,"length"))return null;var e=this.objectAt(0);return this.removeAt(0),e},unshiftObject:function(e){return this.insertAt(0,e),e},unshiftObjects:function(e){return this.replace(0,0,e),this},reverseObjects:function(){var e=h(this,"length");if(0===e)return this;var t=this.toArray().reverse();return this.replace(0,e,t),this},setObjects:function(e){if(0===e.length)return this.clear();var t=h(this,"length");return this.replace(0,t,e),this},removeObject:function(e){for(var t=h(this,"length")||0;--t>=0;){var n=this.objectAt(t);n===e&&this.removeAt(t)}return this},addObject:function(e){return this.contains(e)||this.pushObject(e),this}})}),e("ember-runtime/mixins/mutable_enumerable",["ember-metal/enumerable_utils","ember-runtime/mixins/enumerable","ember-metal/mixin","ember-metal/property_events","exports"],function(e,t,n,i,r){"use strict";var s=e.forEach,o=t["default"],a=n.Mixin,l=n.required,u=i.beginPropertyChanges,c=i.endPropertyChanges;r["default"]=a.create(o,{addObject:l(Function),addObjects:function(e){return u(this),s(e,function(e){this.addObject(e)},this),c(this),this},removeObject:l(Function),removeObjects:function(e){u(this);for(var t=e.length-1;t>=0;t--)this.removeObject(e[t]);return c(this),this}})}),e("ember-runtime/mixins/observable",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/get_properties","ember-metal/set_properties","ember-metal/mixin","ember-metal/events","ember-metal/property_events","ember-metal/observer","ember-metal/computed","ember-metal/is_none","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";var p=(e["default"],t.get),m=t.getWithDefault,f=n.set,_=i.apply,g=r["default"],v=s["default"],y=o.Mixin,b=a.hasListeners,w=l.beginPropertyChanges,C=l.propertyWillChange,x=l.propertyDidChange,S=l.endPropertyChanges,I=u.addObserver,E=u.addBeforeObserver,k=u.removeObserver,T=u.observersFor,P=c.cacheFor,A=h.isNone,M=Array.prototype.slice;d["default"]=y.create({get:function(e){return p(this,e)},getProperties:function(){return _(null,g,[this].concat(M.call(arguments)))},set:function(e,t){return f(this,e,t),this},setProperties:function(e){return v(this,e)},beginPropertyChanges:function(){return w(),this},endPropertyChanges:function(){return S(),this},propertyWillChange:function(e){return C(this,e),this},propertyDidChange:function(e){return x(this,e),this},notifyPropertyChange:function(e){return this.propertyWillChange(e),this.propertyDidChange(e),this},addBeforeObserver:function(e,t,n){E(this,e,t,n)},addObserver:function(e,t,n){I(this,e,t,n)},removeObserver:function(e,t,n){k(this,e,t,n)},hasObserverFor:function(e){return b(this,e+":change")},getWithDefault:function(e,t){return m(this,e,t)},incrementProperty:function(e,t){return A(t)&&(t=1),f(this,e,(parseFloat(p(this,e))||0)+t),p(this,e)},decrementProperty:function(e,t){return A(t)&&(t=1),f(this,e,(p(this,e)||0)-t),p(this,e)},toggleProperty:function(e){return f(this,e,!p(this,e)),p(this,e)},cacheFor:function(e){return P(this,e)},observersForKey:function(e){return T(this,e)}})}),e("ember-runtime/mixins/promise_proxy",["ember-metal/property_get","ember-metal/set_properties","ember-metal/computed","ember-metal/mixin","ember-metal/error","exports"],function(e,t,n,i,r,s){"use strict";function o(e,t){return u(e,{isFulfilled:!1,isRejected:!1}),t.then(function(t){return u(e,{content:t,isFulfilled:!0}),t},function(t){throw u(e,{reason:t,isRejected:!0}),t},"Ember: PromiseProxy")}function a(e){return function(){var t=l(this,"promise");return t[e].apply(t,arguments)}}var l=e.get,u=t["default"],c=n.computed,h=i.Mixin,d=r["default"],p=c.not,m=c.or;s["default"]=h.create({reason:null,isPending:p("isSettled").readOnly(),isSettled:m("isRejected","isFulfilled").readOnly(),isRejected:!1,isFulfilled:!1,promise:c(function(e,t){if(2===arguments.length)return o(this,t);throw new d("PromiseProxy's promise must be set")}),then:a("then"),"catch":a("catch"),"finally":a("finally")})}),e("ember-runtime/mixins/sortable",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/enumerable_utils","ember-metal/mixin","ember-runtime/mixins/mutable_enumerable","ember-runtime/compare","ember-metal/observer","ember-metal/computed","exports"],function(e,t,n,i,r,s,o,a,l,u){"use strict";var c=e["default"],h=t.get,d=(n.set,i.forEach),p=r.Mixin,m=s["default"],f=o["default"],_=a.addObserver,g=a.removeObserver,v=l.computed,y=r.beforeObserver,b=r.observer;u["default"]=p.create(m,{sortProperties:null,sortAscending:!0,sortFunction:f,orderBy:function(e,t){var n=0,i=h(this,"sortProperties"),r=h(this,"sortAscending"),s=h(this,"sortFunction");return d(i,function(i){0===n&&(n=s.call(this,h(e,i),h(t,i)),0===n||r||(n=-1*n))},this),n},destroy:function(){var e=h(this,"content"),t=h(this,"sortProperties");return e&&t&&d(e,function(e){d(t,function(t){g(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},isSorted:v.notEmpty("sortProperties"),arrangedContent:v("content","sortProperties.@each",function(){var e=h(this,"content"),t=h(this,"isSorted"),n=h(this,"sortProperties"),i=this;return e&&t?(e=e.slice(),e.sort(function(e,t){return i.orderBy(e,t)}),d(e,function(e){d(n,function(t){_(e,t,this,"contentItemSortPropertyDidChange")},this)},this),c.A(e)):e}),_contentWillChange:y("content",function(){var e=h(this,"content"),t=h(this,"sortProperties");e&&t&&d(e,function(e){d(t,function(t){g(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()}),sortPropertiesWillChange:y("sortProperties",function(){this._lastSortAscending=void 0}),sortPropertiesDidChange:b("sortProperties",function(){this._lastSortAscending=void 0}),sortAscendingWillChange:y("sortAscending",function(){this._lastSortAscending=h(this,"sortAscending")}),sortAscendingDidChange:b("sortAscending",function(){if(void 0!==this._lastSortAscending&&h(this,"sortAscending")!==this._lastSortAscending){var e=h(this,"arrangedContent");e.reverseObjects()}}),contentArrayWillChange:function(e,t,n,i){var r=h(this,"isSorted");if(r){var s=h(this,"arrangedContent"),o=e.slice(t,t+n),a=h(this,"sortProperties");d(o,function(e){s.removeObject(e),d(a,function(t){g(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(e,t,n,i)},contentArrayDidChange:function(e,t,n,i){var r=h(this,"isSorted"),s=h(this,"sortProperties");if(r){var o=e.slice(t,t+i);d(o,function(e){this.insertItemSorted(e),d(s,function(t){_(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(e,t,n,i)},insertItemSorted:function(e){var t=h(this,"arrangedContent"),n=h(t,"length"),i=this._binarySearch(e,0,n);t.insertAt(i,e)},contentItemSortPropertyDidChange:function(e){var t=h(this,"arrangedContent"),n=t.indexOf(e),i=t.objectAt(n-1),r=t.objectAt(n+1),s=i&&this.orderBy(e,i),o=r&&this.orderBy(e,r);(0>s||o>0)&&(t.removeObject(e),this.insertItemSorted(e))},_binarySearch:function(e,t,n){var i,r,s,o;return t===n?t:(o=h(this,"arrangedContent"),i=t+Math.floor((n-t)/2),r=o.objectAt(i),s=this.orderBy(r,e),0>s?this._binarySearch(e,i+1,n):s>0?this._binarySearch(e,t,i):i)}})}),e("ember-runtime/mixins/target_action_support",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/mixin","ember-metal/computed","exports"],function(e,t,n,i,r,s,o){"use strict";var a=e["default"],l=t.get,u=(n.set,i.typeOf),c=r.Mixin,h=s.computed,d=c.create({target:null,action:null,actionContext:null,targetObject:h(function(){var e=l(this,"target");if("string"===u(e)){var t=l(this,e);return void 0===t&&(t=l(a.lookup,e)),t}return e}).property("target"),actionContextObject:h(function(){var e=l(this,"actionContext");if("string"===u(e)){var t=l(this,e);return void 0===t&&(t=l(a.lookup,e)),t}return e}).property("actionContext"),triggerAction:function(e){function t(e,t){var n=[];return t&&n.push(t),n.concat(e)}e=e||{};var n=e.action||l(this,"action"),i=e.target||l(this,"targetObject"),r=e.actionContext;if("undefined"==typeof r&&(r=l(this,"actionContextObject")||this),i&&n){var s;return s=i.send?i.send.apply(i,t(r,n)):i[n].apply(i,t(r)),s!==!1&&(s=!0),s}return!1}});o["default"]=d}),e("ember-runtime/system/application",["ember-runtime/system/namespace","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=n.extend()}),e("ember-runtime/system/array_proxy",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/computed","ember-metal/mixin","ember-metal/property_events","ember-metal/error","ember-runtime/system/object","ember-runtime/mixins/mutable_array","ember-runtime/mixins/enumerable","ember-runtime/system/string","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";var p=e["default"],m=t.get,f=(n.set,i.isArray),_=i.apply,g=r.computed,v=s.beforeObserver,y=s.observer,b=o.beginPropertyChanges,w=o.endPropertyChanges,C=a["default"],x=l["default"],S=u["default"],I=c["default"],E=(h.fmt,"Index out of range"),k=[],T=g.alias,P=p.K,A=x.extend(S,{content:null,arrangedContent:T("content"),objectAtContent:function(e){return m(this,"arrangedContent").objectAt(e)},replaceContent:function(e,t,n){m(this,"content").replace(e,t,n)},_contentWillChange:v("content",function(){this._teardownContent()}),_teardownContent:function(){var e=m(this,"content");e&&e.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},contentArrayWillChange:P,contentArrayDidChange:P,_contentDidChange:y("content",function(){m(this,"content");this._setupContent()}),_setupContent:function(){var e=m(this,"content");e&&e.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},_arrangedContentWillChange:v("arrangedContent",function(){var e=m(this,"arrangedContent"),t=e?m(e,"length"):0;this.arrangedContentArrayWillChange(this,0,t,void 0),this.arrangedContentWillChange(this),this._teardownArrangedContent(e)}),_arrangedContentDidChange:y("arrangedContent",function(){var e=m(this,"arrangedContent"),t=e?m(e,"length"):0;this._setupArrangedContent(),this.arrangedContentDidChange(this),this.arrangedContentArrayDidChange(this,0,void 0,t)}),_setupArrangedContent:function(){var e=m(this,"arrangedContent");e&&e.addArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},_teardownArrangedContent:function(){var e=m(this,"arrangedContent");e&&e.removeArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},arrangedContentWillChange:P,arrangedContentDidChange:P,objectAt:function(e){return m(this,"content")&&this.objectAtContent(e)},length:g(function(){var e=m(this,"arrangedContent");return e?m(e,"length"):0}),_replace:function(e,t,n){var i=m(this,"content");return i&&this.replaceContent(e,t,n),this},replace:function(){if(m(this,"arrangedContent")!==m(this,"content"))throw new C("Using replace on an arranged ArrayProxy is not allowed.");_(this,this._replace,arguments)},_insertAt:function(e,t){if(e>m(this,"content.length"))throw new C(E);return this._replace(e,0,[t]),this},insertAt:function(e,t){if(m(this,"arrangedContent")===m(this,"content"))return this._insertAt(e,t);throw new C("Using insertAt on an arranged ArrayProxy is not allowed.")},removeAt:function(e,t){if("number"==typeof e){var n,i=m(this,"content"),r=m(this,"arrangedContent"),s=[];if(0>e||e>=m(this,"length"))throw new C(E);for(void 0===t&&(t=1),n=e;e+t>n;n++)s.push(i.indexOf(r.objectAt(n)));for(s.sort(function(e,t){return t-e}),b(),n=0;n<s.length;n++)this._replace(s[n],1,k);w()}return this},pushObject:function(e){return this._insertAt(m(this,"content.length"),e),e},pushObjects:function(e){if(!I.detect(e)&&!f(e))throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects");return this._replace(m(this,"length"),0,e),this},setObjects:function(e){if(0===e.length)return this.clear();var t=m(this,"length");return this._replace(0,t,e),this},unshiftObject:function(e){return this._insertAt(0,e),e},unshiftObjects:function(e){return this._replace(0,0,e),this},slice:function(){var e=this.toArray();return e.slice.apply(e,arguments)},arrangedContentArrayWillChange:function(e,t,n,i){this.arrayContentWillChange(t,n,i)},arrangedContentArrayDidChange:function(e,t,n,i){this.arrayContentDidChange(t,n,i)},init:function(){this._super(),this._setupContent(),this._setupArrangedContent()},willDestroy:function(){this._teardownArrangedContent(),this._teardownContent()}});d["default"]=A}),e("ember-runtime/system/container",["ember-metal/property_set","exports"],function(e,n){"use strict";var i=e["default"],r=t("container")["default"];r.set=i,n["default"]=r}),e("ember-runtime/system/core_object",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/platform","ember-metal/watching","ember-metal/chains","ember-metal/events","ember-metal/mixin","ember-metal/enumerable_utils","ember-metal/error","ember-metal/keys","ember-runtime/mixins/action_handler","ember-metal/properties","ember-metal/binding","ember-metal/computed","ember-metal/run_loop","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g){function v(){var e,t,n=!1,i=function(){n||i.proto(),N(this,E,Y),N(this,"__nextSuper",$);var r=k(this),s=r.proto;if(r.proto=this,e){var o=e;e=null,x(this,this.reopen,o)}if(t){var a=t;t=null;for(var l=this.concatenatedProperties,u=0,c=a.length;c>u;u++){var h=a[u];if("object"!=typeof h&&void 0!==h)throw new B("Ember.Object.create only accepts objects.");if(h)for(var d=F(h),p=0,m=d.length;m>p;p++){var f=d[p];if(h.hasOwnProperty(f)){var _=h[f];if(O.test(f)){var g=r.bindings;g?r.hasOwnProperty("bindings")||(g=r.bindings=S(r.bindings)):g=r.bindings={},g[f]=_}var v=r.descs[f];if(l&&R(l,f)>=0){var y=this[f];_=y?"function"==typeof y.concat?y.concat(_):T(y).concat(_):T(_)}v?v.set(this,f,_):"function"!=typeof this.setUnknownProperty||f in this?this[f]=_:this.setUnknownProperty(f,_)}}}}K(this,r);for(var b=arguments.length,w=new Array(b),C=0;b>C;C++)w[C]=arguments[C];x(this,this.init,w),r.proto=s,A(this),M(this,"init")};return i.toString=D.prototype.toString,i.willReopen=function(){n&&(i.PrototypeMixin=D.create(i.PrototypeMixin)),n=!1},i._initMixins=function(t){e=t},i._initProperties=function(e){t=e},i.proto=function(){var e=i.superclass;return e&&e.proto(),n||(n=!0,i.PrototypeMixin.applyPartial(i.prototype),P(i.prototype)),this.prototype},i}function y(e){return function(){return e}}var b=e["default"],w=t.get,C=(n.set,i.guidFor),x=i.apply,S=r.create,I=i.generateGuid,E=i.GUID_KEY,k=i.meta,T=i.makeArray,P=s.rewatch,A=o.finishChains,M=a.sendEvent,O=l.IS_BINDING,D=l.Mixin,L=l.required,R=u.indexOf,B=c["default"],N=r.defineProperty,F=h["default"],z=(d["default"],p.defineProperty,m.Binding),H=f.ComputedProperty,W=_["default"],V=s.destroy,j=e.K,U=(r.hasPropertyAccessors,W.schedule),q=D._apply,K=D.finishPartial,J=D.prototype.reopen,G=!1,$={configurable:!0,writable:!0,enumerable:!1,value:void 0},Y={configurable:!0,writable:!0,enumerable:!1,value:null},Z=v();Z.toString=function(){return"Ember.CoreObject"},Z.PrototypeMixin=D.create({reopen:function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return q(this,t,!0),this},init:function(){},concatenatedProperties:null,isDestroyed:!1,isDestroying:!1,destroy:function(){return this.isDestroying?void 0:(this.isDestroying=!0,U("actions",this,this.willDestroy),U("destroy",this,this._scheduledDestroy),this)},willDestroy:j,_scheduledDestroy:function(){this.isDestroyed||(V(this),this.isDestroyed=!0)},bind:function(e,t){return t instanceof z||(t=z.from(t)),t.to(e).connect(this),t},toString:function(){var e="function"==typeof this.toStringExtension,t=e?":"+this.toStringExtension():"",n="<"+this.constructor.toString()+":"+C(this)+t+">";return this.toString=y(n),n}}),Z.PrototypeMixin.ownerConstructor=Z,b.config.overridePrototypeMixin&&b.config.overridePrototypeMixin(Z.PrototypeMixin),Z.__super__=null;var X=D.create({ClassMixin:L(),PrototypeMixin:L(),isClass:!0,isMethod:!1,extend:function(){var e,t=v();return t.ClassMixin=D.create(this.ClassMixin),t.PrototypeMixin=D.create(this.PrototypeMixin),t.ClassMixin.ownerConstructor=t,t.PrototypeMixin.ownerConstructor=t,J.apply(t.PrototypeMixin,arguments),t.superclass=this,t.__super__=this.prototype,e=t.prototype=S(this.prototype),e.constructor=t,I(e),k(e).proto=e,t.ClassMixin.apply(t),t},createWithMixins:function(){var e=this,t=arguments.length;if(t>0){for(var n=new Array(t),i=0;t>i;i++)n[i]=arguments[i];this._initMixins(n)}return new e},create:function(){var e=this,t=arguments.length;if(t>0){for(var n=new Array(t),i=0;t>i;i++)n[i]=arguments[i];this._initProperties(n)}return new e},reopen:function(){this.willReopen();var e=arguments.length,t=new Array(e);if(e>0)for(var n=0;e>n;n++)t[n]=arguments[n];return x(this.PrototypeMixin,J,t),this},reopenClass:function(){var e=arguments.length,t=new Array(e);if(e>0)for(var n=0;e>n;n++)t[n]=arguments[n];return x(this.ClassMixin,J,t),q(this,arguments,!1),this},detect:function(e){if("function"!=typeof e)return!1;for(;e;){if(e===this)return!0;e=e.superclass}return!1},detectInstance:function(e){return e instanceof this},metaForProperty:function(e){var t=this.proto().__ember_meta__,n=t&&t.descs[e];return n._meta||{}},_computedProperties:b.computed(function(){G=!0;var e,t=this.proto(),n=k(t).descs,i=[];for(var r in n)e=n[r],e instanceof H&&i.push({name:r,meta:e._meta});return i}).readOnly(),eachComputedProperty:function(e,t){for(var n,i,r={},s=w(this,"_computedProperties"),o=0,a=s.length;a>o;o++)n=s[o],i=n.name,e.call(t||this,n.name,n.meta||r)}});X.ownerConstructor=Z,b.config.overrideClassMixin&&b.config.overrideClassMixin(X),Z.ClassMixin=X,X.apply(Z),Z.reopen({didDefineProperty:function(e,t,n){if(G!==!1&&n instanceof b.ComputedProperty){var i=b.meta(this.constructor).cache;void 0!==i._computedProperties&&(i._computedProperties=void 0)}}}),g["default"]=Z}),e("ember-runtime/system/deferred",["ember-metal/core","ember-runtime/mixins/deferred","ember-metal/property_get","ember-runtime/system/object","exports"],function(e,t,n,i,r){"use strict";var s=(e["default"],t["default"]),o=(n.get,i["default"]),a=o.extend(s,{init:function(){this._super()}});a.reopenClass({promise:function(e,t){var n=a.create();return e.call(t,n),n}}),r["default"]=a}),e("ember-runtime/system/each_proxy",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/enumerable_utils","ember-metal/array","ember-runtime/mixins/array","ember-runtime/system/object","ember-metal/computed","ember-metal/observer","ember-metal/events","ember-metal/properties","ember-metal/property_events","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";function m(e,t,n,i,r){var s,o=n._objects;for(o||(o=n._objects={});--r>=i;){var a=e.objectAt(r);a&&(S(a,t,n,"contentKeyWillChange"),x(a,t,n,"contentKeyDidChange"),s=g(a),o[s]||(o[s]=[]),o[s].push(r))}}function f(e,t,n,i,r){var s=n._objects;s||(s=n._objects={});for(var o,a;--r>=i;){var l=e.objectAt(r);l&&(I(l,t,n,"contentKeyWillChange"),E(l,t,n,"contentKeyDidChange"),a=g(l),o=s[a],o[y.call(o,r)]=null)}}var _=(e["default"],t.get),g=(n.set,i.guidFor),v=r.forEach,y=s.indexOf,b=o["default"],w=a["default"],C=l.computed,x=u.addObserver,S=u.addBeforeObserver,I=u.removeBeforeObserver,E=u.removeObserver,k=(i.typeOf,c.watchedEvents),T=h.defineProperty,P=d.beginPropertyChanges,A=d.propertyDidChange,M=d.propertyWillChange,O=d.endPropertyChanges,D=d.changeProperties,L=w.extend(b,{init:function(e,t,n){this._super(),this._keyName=t,this._owner=n,this._content=e},objectAt:function(e){var t=this._content.objectAt(e);return t&&_(t,this._keyName)},length:C(function(){var e=this._content;return e?_(e,"length"):0})}),R=/^.+:(before|change)$/,B=w.extend({init:function(e){this._super(),this._content=e,e.addArrayObserver(this),v(k(this),function(e){this.didAddListener(e)},this)},unknownProperty:function(e){var t;return t=new L(this._content,e,this),T(this,e,null,t),this.beginObservingContentKey(e),t},arrayWillChange:function(e,t,n){var i,r,s=this._keys;r=n>0?t+n:-1,P(this);for(i in s)s.hasOwnProperty(i)&&(r>0&&f(e,i,this,t,r),M(this,i));M(this._content,"@each"),O(this)},arrayDidChange:function(e,t,n,i){var r,s=this._keys;r=i>0?t+i:-1,D(function(){for(var n in s)s.hasOwnProperty(n)&&(r>0&&m(e,n,this,t,r),A(this,n));A(this._content,"@each")},this)},didAddListener:function(e){R.test(e)&&this.beginObservingContentKey(e.slice(0,-7))},didRemoveListener:function(e){R.test(e)&&this.stopObservingContentKey(e.slice(0,-7))},beginObservingContentKey:function(e){var t=this._keys;if(t||(t=this._keys={}),t[e])t[e]++;else{t[e]=1;var n=this._content,i=_(n,"length");m(n,e,this,0,i)}},stopObservingContentKey:function(e){var t=this._keys;if(t&&t[e]>0&&--t[e]<=0){var n=this._content,i=_(n,"length");f(n,e,this,0,i)}},contentKeyWillChange:function(e,t){M(this,t)},contentKeyDidChange:function(e,t){A(this,t)}});p.EachArray=L,p.EachProxy=B}),e("ember-runtime/system/lazy_load",["ember-metal/core","ember-metal/array","ember-runtime/system/native_array","exports"],function(e,t,n,i){"use strict";function r(e,t){var n;l[e]=l[e]||o.A(),l[e].pushObject(t),(n=u[e])&&t(n)}function s(e,t){if(u[e]=t,"object"==typeof window&&"function"==typeof window.dispatchEvent&&"function"==typeof CustomEvent){var n=new CustomEvent(e,{detail:t,name:e});window.dispatchEvent(n)}l[e]&&a.call(l[e],function(e){e(t)})}var o=e["default"],a=t.forEach,l=o.ENV.EMBER_LOAD_HOOKS||{},u={};i.onLoad=r,i.runLoadHooks=s}),e("ember-runtime/system/namespace",["ember-metal/core","ember-metal/property_get","ember-metal/array","ember-metal/utils","ember-metal/mixin","ember-runtime/system/object","exports"],function(e,t,n,i,r,s,o){"use strict";
function a(e,t,n){var i=e.length;C[e.join(".")]=t;for(var r in t)if(x.call(t,r)){var s=t[r];if(e[i]=r,s&&s.toString===h)s.toString=p(e.join(".")),s[I]=e.join(".");else if(s&&s.isNamespace){if(n[v(s)])continue;n[v(s)]=!0,a(e,s,n)}}e.length=i}function l(e,t){try{var n=e[t];return n&&n.isNamespace&&n}catch(i){}}function u(){var e,t=m.lookup;if(!w.PROCESSED)for(var n in t)S.test(n)&&(!t.hasOwnProperty||t.hasOwnProperty(n))&&(e=l(t,n),e&&(e[I]=n))}function c(e){var t=e.superclass;return t?t[I]?t[I]:c(t):void 0}function h(){m.BOOTED||this[I]||d();var e;if(this[I])e=this[I];else if(this._toString)e=this._toString;else{var t=c(this);e=t?"(subclass of "+t+")":"(unknown mixin)",this.toString=p(e)}return e}function d(){var e=!w.PROCESSED,t=m.anyUnprocessedMixins;if(e&&(u(),w.PROCESSED=!0),e||t){for(var n,i=w.NAMESPACES,r=0,s=i.length;s>r;r++)n=i[r],a([n.toString()],n,{});m.anyUnprocessedMixins=!1}}function p(e){return function(){return e}}var m=e["default"],f=t.get,_=n.indexOf,g=i.GUID_KEY,v=i.guidFor,y=r.Mixin,b=s["default"],w=b.extend({isNamespace:!0,init:function(){w.NAMESPACES.push(this),w.PROCESSED=!1},toString:function(){var e=f(this,"name")||f(this,"modulePrefix");return e?e:(u(),this[I])},nameClasses:function(){a([this.toString()],this,{})},destroy:function(){var e=w.NAMESPACES,t=this.toString();t&&(m.lookup[t]=void 0,delete w.NAMESPACES_BY_ID[t]),e.splice(_.call(e,this),1),this._super()}});w.reopenClass({NAMESPACES:[m],NAMESPACES_BY_ID:{},PROCESSED:!1,processAll:d,byName:function(e){return m.BOOTED||d(),C[e]}});var C=w.NAMESPACES_BY_ID,x={}.hasOwnProperty,S=/^[A-Z]/,I=m.NAME_KEY=g+"_name";y.prototype.toString=h,o["default"]=w}),e("ember-runtime/system/native_array",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/enumerable_utils","ember-metal/mixin","ember-metal/array","ember-runtime/mixins/array","ember-runtime/mixins/mutable_array","ember-runtime/mixins/observable","ember-runtime/mixins/copyable","ember-runtime/mixins/freezable","ember-runtime/copy","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";var p=e["default"],m=t.get,f=(n.set,i._replace),_=i.forEach,g=r.Mixin,v=s.indexOf,y=s.lastIndexOf,b=o["default"],w=a["default"],C=l["default"],x=u["default"],S=c.FROZEN_ERROR,I=h["default"],E=g.create(w,C,x,{get:function(e){return"length"===e?this.length:"number"==typeof e?this[e]:this._super(e)},objectAt:function(e){return this[e]},replace:function(e,t,n){if(this.isFrozen)throw S;var i=n?m(n,"length"):0;return this.arrayContentWillChange(e,t,i),0===i?this.splice(e,t):f(this,e,t,n),this.arrayContentDidChange(e,t,i),this},unknownProperty:function(e,t){var n;return void 0!==t&&void 0===n&&(n=this[e]=t),n},indexOf:v,lastIndexOf:y,copy:function(e){return e?this.map(function(e){return I(e,!0)}):this.slice()}}),k=["length"];_(E.keys(),function(e){Array.prototype[e]&&k.push(e)}),k.length>0&&(E=E.without.apply(E,k));var T=function(e){return void 0===e&&(e=[]),b.detect(e)?e:E.apply(e)};E.activate=function(){E.apply(Array.prototype),T=function(e){return e||[]}},(p.EXTEND_PROTOTYPES===!0||p.EXTEND_PROTOTYPES.Array)&&E.activate(),p.A=T,d.A=T,d.NativeArray=E,d["default"]=E}),e("ember-runtime/system/object",["ember-runtime/system/core_object","ember-runtime/mixins/observable","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"],s=i.extend(r);s.toString=function(){return"Ember.Object"},n["default"]=s}),e("ember-runtime/system/object_proxy",["ember-runtime/system/object","ember-runtime/mixins/-proxy","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n["default"]=i.extend(r)}),e("ember-runtime/system/set",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/utils","ember-metal/is_none","ember-runtime/system/string","ember-runtime/system/core_object","ember-runtime/mixins/mutable_enumerable","ember-runtime/mixins/enumerable","ember-runtime/mixins/copyable","ember-runtime/mixins/freezable","ember-metal/error","ember-metal/property_events","ember-metal/mixin","ember-metal/computed","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";var _=(e["default"],t.get),g=n.set,v=i.guidFor,y=r.isNone,b=s.fmt,w=o["default"],C=a["default"],x=l["default"],S=u["default"],I=c.Freezable,E=c.FROZEN_ERROR,k=h["default"],T=d.propertyWillChange,P=d.propertyDidChange,A=p.aliasMethod,M=m.computed;f["default"]=w.extend(C,S,I,{length:0,clear:function(){if(this.isFrozen)throw new k(E);var e=_(this,"length");if(0===e)return this;var t;this.enumerableContentWillChange(e,0),T(this,"firstObject"),T(this,"lastObject");for(var n=0;e>n;n++)t=v(this[n]),delete this[t],delete this[n];return g(this,"length",0),P(this,"firstObject"),P(this,"lastObject"),this.enumerableContentDidChange(e,0),this},isEqual:function(e){if(!x.detect(e))return!1;var t=_(this,"length");if(_(e,"length")!==t)return!1;for(;--t>=0;)if(!e.contains(this[t]))return!1;return!0},add:A("addObject"),remove:A("removeObject"),pop:function(){if(_(this,"isFrozen"))throw new k(E);var e=this.length>0?this[this.length-1]:null;return this.remove(e),e},push:A("addObject"),shift:A("pop"),unshift:A("push"),addEach:A("addObjects"),removeEach:A("removeObjects"),init:function(e){this._super(),e&&this.addObjects(e)},nextObject:function(e){return this[e]},firstObject:M(function(){return this.length>0?this[0]:void 0}),lastObject:M(function(){return this.length>0?this[this.length-1]:void 0}),addObject:function(e){if(_(this,"isFrozen"))throw new k(E);if(y(e))return this;var t,n=v(e),i=this[n],r=_(this,"length");return i>=0&&r>i&&this[i]===e?this:(t=[e],this.enumerableContentWillChange(null,t),T(this,"lastObject"),r=_(this,"length"),this[n]=r,this[r]=e,g(this,"length",r+1),P(this,"lastObject"),this.enumerableContentDidChange(null,t),this)},removeObject:function(e){if(_(this,"isFrozen"))throw new k(E);if(y(e))return this;var t,n,i=v(e),r=this[i],s=_(this,"length"),o=0===r,a=r===s-1;return r>=0&&s>r&&this[r]===e&&(n=[e],this.enumerableContentWillChange(n,null),o&&T(this,"firstObject"),a&&T(this,"lastObject"),s-1>r&&(t=this[s-1],this[r]=t,this[v(t)]=r),delete this[i],delete this[s-1],g(this,"length",s-1),o&&P(this,"firstObject"),a&&P(this,"lastObject"),this.enumerableContentDidChange(n,null)),this},contains:function(e){return this[v(e)]>=0},copy:function(){var e=this.constructor,t=new e,n=_(this,"length");for(g(t,"length",n);--n>=0;)t[n]=this[n],t[v(this[n])]=n;return t},toString:function(){var e,t=this.length,n=[];for(e=0;t>e;e++)n[e]=this[e];return b("Ember.Set<%@>",[n.join(",")])}})}),e("ember-runtime/system/string",["ember-metal/core","ember-metal/utils","ember-metal/cache","exports"],function(e,t,n,i){"use strict";function r(e,t){var n=t;if(!m(n)||arguments.length>2){n=new Array(arguments.length-1);for(var i=1,r=arguments.length;r>i;i++)n[i-1]=arguments[i]}var s=0;return e.replace(/%@([0-9]+)?/g,function(e,t){return t=t?parseInt(t,10)-1:s++,e=n[t],null===e?"(null)":void 0===e?"":f(e)})}function s(e,t){return(!m(t)||arguments.length>2)&&(t=Array.prototype.slice.call(arguments,1)),e=p.STRINGS[e]||e,r(e,t)}function o(e){return e.split(/\s+/)}function a(e){return x.get(e)}function l(e){return v.get(e)}function u(e){return y.get(e)}function c(e){return b.get(e)}function h(e){return w.get(e)}function d(e){return C.get(e)}var p=e["default"],m=t.isArray,f=t.inspect,_=n["default"],g=/[ _]/g,v=new _(1e3,function(e){return a(e).replace(g,"-")}),y=new _(1e3,function(e){return e.replace(I,function(e,t,n){return n?n.toUpperCase():""}).replace(/^([A-Z])/,function(e){return e.toLowerCase()})}),b=new _(1e3,function(e){for(var t=e.split("."),n=[],i=0,r=t.length;r>i;i++){var s=u(t[i]);n.push(s.charAt(0).toUpperCase()+s.substr(1))}return n.join(".")}),w=new _(1e3,function(e){return e.replace(E,"$1_$2").replace(k,"_").toLowerCase()}),C=new _(1e3,function(e){return e.charAt(0).toUpperCase()+e.substr(1)}),x=new _(1e3,function(e){return e.replace(S,"$1_$2").toLowerCase()}),S=/([a-z\d])([A-Z])/g,I=/(\-|_|\.|\s)+(.)?/g,E=/([a-z\d])([A-Z]+)/g,k=/\-|\s+/g;p.STRINGS={},i["default"]={fmt:r,loc:s,w:o,decamelize:a,dasherize:l,camelize:u,classify:c,underscore:h,capitalize:d},i.fmt=r,i.loc=s,i.w=o,i.decamelize=a,i.dasherize=l,i.camelize=u,i.classify=c,i.underscore=h,i.capitalize=d}),e("ember-runtime/system/subarray",["ember-metal/property_get","ember-metal/error","ember-metal/enumerable_utils","exports"],function(e,t,n,i){"use strict";function r(e,t){this.type=e,this.count=t}function s(e){arguments.length<1&&(e=0),this._operations=e>0?[new r(l,e)]:[]}var o=(e.get,t["default"]),a=n["default"],l="r",u="f";i["default"]=s,s.prototype={addItem:function(e,t){var n=-1,i=t?l:u,s=this;return this._findOperation(e,function(o,a,u,c,h){var d,p;i===o.type?++o.count:e===u?s._operations.splice(a,0,new r(i,1)):(d=new r(i,1),p=new r(o.type,c-e+1),o.count=e-u,s._operations.splice(a+1,0,d,p)),t&&(n=o.type===l?h+(e-u):h),s._composeAt(a)},function(e){s._operations.push(new r(i,1)),t&&(n=e),s._composeAt(s._operations.length-1)}),n},removeItem:function(e){var t=-1,n=this;return this._findOperation(e,function(i,r,s,o,a){i.type===l&&(t=a+(e-s)),i.count>1?--i.count:(n._operations.splice(r,1),n._composeAt(r))},function(){throw new o("Can't remove an item that has never been added.")}),t},_findOperation:function(e,t,n){var i,r,s,o,a,u=0;for(i=o=0,r=this._operations.length;r>i;o=a+1,++i){if(s=this._operations[i],a=o+s.count-1,e>=o&&a>=e)return void t(s,i,o,a,u);s.type===l&&(u+=s.count)}n(u)},_composeAt:function(e){var t,n=this._operations[e];n&&(e>0&&(t=this._operations[e-1],t.type===n.type&&(n.count+=t.count,this._operations.splice(e-1,1),--e)),e<this._operations.length-1&&(t=this._operations[e+1],t.type===n.type&&(n.count+=t.count,this._operations.splice(e+1,1))))},toString:function(){var e="";return a.forEach(this._operations,function(t){e+=" "+t.type+":"+t.count}),e.substring(1)}}}),e("ember-runtime/system/tracked_array",["ember-metal/property_get","ember-metal/enumerable_utils","exports"],function(e,t,n){"use strict";function i(e){arguments.length<1&&(e=[]);var t=o(e,"length");this._operations=t?[new r(l,t,e)]:[]}function r(e,t,n){this.type=e,this.count=t,this.items=n}function s(e,t,n,i){this.operation=e,this.index=t,this.split=n,this.rangeStart=i}var o=e.get,a=t.forEach,l="r",u="i",c="d";n["default"]=i,i.RETAIN=l,i.INSERT=u,i.DELETE=c,i.prototype={addItems:function(e,t){var n=o(t,"length");if(!(1>n)){var i,s,a=this._findArrayOperation(e),l=a.operation,c=a.index,h=a.rangeStart;s=new r(u,n,t),l?a.split?(this._split(c,e-h,s),i=c+1):(this._operations.splice(c,0,s),i=c):(this._operations.push(s),i=c),this._composeInsert(i)}},removeItems:function(e,t){if(!(1>t)){var n,i,s=this._findArrayOperation(e),o=(s.operation,s.index),a=s.rangeStart;return n=new r(c,t),s.split?(this._split(o,e-a,n),i=o+1):(this._operations.splice(o,0,n),i=o),this._composeDelete(i)}},apply:function(e){var t=[],n=0;a(this._operations,function(i,r){e(i.items,n,i.type,r),i.type!==c&&(n+=i.count,t=t.concat(i.items))}),this._operations=[new r(l,t.length,t)]},_findArrayOperation:function(e){var t,n,i,r,o,a=!1;for(t=i=0,o=this._operations.length;o>t;++t)if(n=this._operations[t],n.type!==c){if(r=i+n.count-1,e===i)break;if(e>i&&r>=e){a=!0;break}i=r+1}return new s(n,t,a,i)},_split:function(e,t,n){var i=this._operations[e],s=i.items.slice(t),o=new r(i.type,s.length,s);i.count=t,i.items=i.items.slice(0,t),this._operations.splice(e+1,0,n,o)},_composeInsert:function(e){var t=this._operations[e],n=this._operations[e-1],i=this._operations[e+1],r=n&&n.type,s=i&&i.type;r===u?(n.count+=t.count,n.items=n.items.concat(t.items),s===u?(n.count+=i.count,n.items=n.items.concat(i.items),this._operations.splice(e,2)):this._operations.splice(e,1)):s===u&&(t.count+=i.count,t.items=t.items.concat(i.items),this._operations.splice(e+1,1))},_composeDelete:function(e){var t,n,i,r=this._operations[e],s=r.count,o=this._operations[e-1],a=o&&o.type,l=!1,h=[];a===c&&(r=o,e-=1);for(var d=e+1;s>0;++d)t=this._operations[d],n=t.type,i=t.count,n!==c?(i>s?(h=h.concat(t.items.splice(0,s)),t.count-=s,d-=1,i=s,s=0):(i===s&&(l=!0),h=h.concat(t.items),s-=i),n===u&&(r.count-=i)):r.count+=i;return r.count>0?this._operations.splice(e+1,d-1-e):this._operations.splice(e,l?2:1),h},toString:function(){var e="";return a(this._operations,function(t){e+=" "+t.type+":"+t.count}),e.substring(1)}}}),e("ember-views",["ember-runtime","ember-views/system/jquery","ember-views/system/utils","ember-views/system/render_buffer","ember-views/system/ext","ember-views/views/states","ember-views/views/core_view","ember-views/views/view","ember-views/views/container_view","ember-views/views/collection_view","ember-views/views/component","ember-views/system/event_dispatcher","ember-views/mixins/view_target_action_support","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";var m=e["default"],f=t["default"],_=n.isSimpleClick,g=i["default"],v=s.cloneStates,y=s.states,b=o["default"],w=a["default"],C=l["default"],x=u["default"],S=c["default"],I=h["default"],E=d["default"];m.$=f,m.ViewTargetActionSupport=E,m.RenderBuffer=g;var k=m.ViewUtils={};k.isSimpleClick=_,m.CoreView=b,m.View=w,m.View.states=y,m.View.cloneStates=v,m.ContainerView=C,m.CollectionView=x,m.Component=S,m.EventDispatcher=I,p["default"]=m}),e("ember-views/mixins/component_template_deprecation",["ember-metal/core","ember-metal/property_get","ember-metal/mixin","exports"],function(e,t,n,i){"use strict";var r=(e["default"],t.get),s=n.Mixin;i["default"]=s.create({willMergeMixin:function(e){this._super.apply(this,arguments);var t,n,i=e.layoutName||e.layout||r(this,"layoutName");e.templateName&&!i&&(t="templateName",n="layoutName",e.layoutName=e.templateName,delete e.templateName),e.template&&!i&&(t="template",n="layout",e.layout=e.template,delete e.template)}})}),e("ember-views/mixins/view_target_action_support",["ember-metal/mixin","ember-runtime/mixins/target_action_support","ember-metal/computed","exports"],function(e,t,n,i){"use strict";var r=e.Mixin,s=t["default"],o=n.computed,a=o.alias;i["default"]=r.create(s,{target:a("controller"),actionContext:a("context")})}),e("ember-views/system/action_manager",["exports"],function(e){"use strict";function t(){}t.registeredActions={},e["default"]=t}),e("ember-views/system/event_dispatcher",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/is_none","ember-metal/run_loop","ember-metal/utils","ember-runtime/system/string","ember-runtime/system/object","ember-views/system/jquery","ember-views/system/action_manager","ember-views/views/view","ember-metal/merge","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";var p=(e["default"],t.get),m=n.set,f=i.isNone,_=r["default"],g=s.typeOf,v=(o.fmt,a["default"]),y=l["default"],b=u["default"],w=c["default"],C=h["default"];d["default"]=v.extend({events:{touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"},rootElement:"body",canDispatchToEventManager:!0,setup:function(e,t){var n,i=p(this,"events");C(i,e||{}),f(t)||m(this,"rootElement",t),t=y(p(this,"rootElement")),t.addClass("ember-application");for(n in i)i.hasOwnProperty(n)&&this.setupHandler(t,n,i[n])},setupHandler:function(e,t,n){var i=this;e.on(t+".ember",".ember-view",function(e,t){var r=w.views[this.id],s=!0,o=i.canDispatchToEventManager?i._findNearestEventManager(r,n):null;return o&&o!==t?s=i._dispatchEvent(o,e,n,r):r&&(s=i._bubbleEvent(r,e,n)),s}),e.on(t+".ember","[data-ember-action]",function(e){var t=y(e.currentTarget).attr("data-ember-action"),i=b.registeredActions[t];return i&&i.eventName===n?i.handler(e):void 0})},_findNearestEventManager:function(e,t){for(var n=null;e&&(n=p(e,"eventManager"),!n||!n[t]);)e=p(e,"parentView");return n},_dispatchEvent:function(e,t,n,i){var r=!0,s=e[n];return"function"===g(s)?(r=_(e,s,t,i),t.stopPropagation()):r=this._bubbleEvent(i,t,n),r},_bubbleEvent:function(e,t,n){return _(e,e.handleEvent,n,t)},destroy:function(){var e=p(this,"rootElement");return y(e).off(".ember","**").removeClass("ember-application"),this._super()},toString:function(){return"(EventDispatcher)"}})}),e("ember-views/system/ext",["ember-metal/run_loop"],function(e){"use strict";{var t=e["default"];t.queues}t._addQueue("render","actions"),t._addQueue("afterRender","render")}),e("ember-views/system/jquery",["ember-metal/core","ember-runtime/system/string","ember-metal/enumerable_utils","exports"],function(e,t,i,r){"use strict";var s=e["default"],o=t.w,a=i.forEach,l=s.imports&&s.imports.jQuery||this&&this.jQuery;if(l||"function"!=typeof n||(l=n("jquery")),l){var u=o("dragstart drag dragenter dragleave dragover drop dragend");a(u,function(e){l.event.fixHooks[e]={props:["dataTransfer"]}})}r["default"]=l}),e("ember-views/system/render_buffer",["ember-views/system/jquery","morph","ember-metal/core","ember-metal/platform","exports"],function(e,t,n,i,r){"use strict";function s(e,t){if("TABLE"===t.tagName){var n=m.exec(e);if(n)return p[n[1].toLowerCase()]}}function o(){this.seen=d(null),this.list=[]}function a(e){return e&&f.test(e)?e.replace(_,""):e}function l(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(e){return t[e]||"&amp;"},i=e.toString();return v.test(i)?i.replace(g,n):i}function u(e,t){this.tagName=e,this._outerContextualElement=t,this.buffer=null,this.childViews=[],this.dom=new h}var c=e["default"],h=t.DOMHelper,d=(n["default"],i.create),p={tr:document.createElement("tbody"),col:document.createElement("colgroup")},m=/(?:<script)*.*?<([\w:]+)/i;o.prototype={add:function(e){this.seen[e]!==!0&&(this.seen[e]=!0,this.list.push(e))},toDOM:function(){return this.list.join(" ")}};var f=/[^a-zA-Z0-9\-]/,_=/[^a-zA-Z0-9\-]/g,g=/&(?!\w+;)|[<>"'`]/g,v=/[&<>"'`]/,y=function(){var e=document.createElement("div"),t=document.createElement("input");return t.setAttribute("name","foo"),e.appendChild(t),!!e.innerHTML.match("foo")}();r["default"]=function(e,t){return new u(e,t)},u.prototype={reset:function(e,t){this.tagName=e,this.buffer=null,this._element=null,this._outerContextualElement=t,this.elementClasses=null,this.elementId=null,this.elementAttributes=null,this.elementProperties=null,this.elementTag=null,this.elementStyle=null,this.childViews.length=0},_element:null,_outerContextualElement:null,elementClasses:null,classes:null,elementId:null,elementAttributes:null,elementProperties:null,elementTag:null,elementStyle:null,pushChildView:function(e){var t=this.childViews.length;this.childViews[t]=e,this.push("<script id='morph-"+t+"' type='text/x-placeholder'></script>")},hydrateMorphs:function(e){for(var t=this.childViews,n=this._element,i=0,r=t.length;r>i;i++){var s=t[i],o=n.querySelector("#morph-"+i),a=o.parentNode;s._morph=this.dom.insertMorphBefore(a,o,1===a.nodeType?a:e),a.removeChild(o)}},push:function(e){return null===this.buffer&&(this.buffer=""),this.buffer+=e,this},addClass:function(e){return this.elementClasses=this.elementClasses||new o,this.elementClasses.add(e),this.classes=this.elementClasses.list,this},setClasses:function(e){this.elementClasses=null;var t,n=e.length;for(t=0;n>t;t++)this.addClass(e[t])},id:function(e){return this.elementId=e,this},attr:function(e,t){var n=this.elementAttributes=this.elementAttributes||{};return 1===arguments.length?n[e]:(n[e]=t,this)},removeAttr:function(e){var t=this.elementAttributes;return t&&delete t[e],this},prop:function(e,t){var n=this.elementProperties=this.elementProperties||{};return 1===arguments.length?n[e]:(n[e]=t,this)},removeProp:function(e){var t=this.elementProperties;return t&&delete t[e],this},style:function(e,t){return this.elementStyle=this.elementStyle||{},this.elementStyle[e]=t,this},generateElement:function(){var e,t,n,i=this.tagName,r=this.elementId,s=this.classes,o=this.elementAttributes,u=this.elementProperties,h=this.elementStyle,d="";n=o&&o.name&&!y?"<"+a(i)+' name="'+l(o.name)+'">':i;var p=this.dom.createElement(n,this.outerContextualElement()),m=c(p);if(r&&(this.dom.setAttribute(p,"id",r),this.elementId=null),s&&(this.dom.setAttribute(p,"class",s.join(" ")),this.classes=null,this.elementClasses=null),h){for(t in h)h.hasOwnProperty(t)&&(d+=t+":"+h[t]+";");this.dom.setAttribute(p,"style",d),this.elementStyle=null}if(o){for(e in o)o.hasOwnProperty(e)&&this.dom.setAttribute(p,e,o[e]);this.elementAttributes=null}if(u){for(t in u)u.hasOwnProperty(t)&&m.prop(t,u[t]);this.elementProperties=null}this._element=p},element:function(){var e=this.innerContent();if(null===e)return this._element;var t=this.innerContextualElement(e);this.dom.detectNamespace(t),this._element||(this._element=document.createDocumentFragment());for(var n=this.dom.parseHTML(e,t);n[0];)this._element.appendChild(n[0]);return this.hydrateMorphs(t),this._element},string:function(){if(this._element){var e=this.element(),t=e.outerHTML;return"undefined"==typeof t?c("<div/>").append(e).html():t}return this.innerString()},outerContextualElement:function(){return this._outerContextualElement||(this.outerContextualElement=document.body),this._outerContextualElement},innerContextualElement:function(e){var t;t=this._element&&1===this._element.nodeType?this._element:this.outerContextualElement();var n;return e&&(n=s(e,t)),n||t},innerString:function(){var e=this.innerContent();return e&&!e.nodeType?e:void 0},innerContent:function(){return this.buffer}}}),e("ember-views/system/renderer",["ember-metal/core","ember-metal-views/renderer","ember-metal/platform","ember-views/system/render_buffer","ember-metal/run_loop","ember-metal/property_set","ember-metal/instrumentation","exports"],function(e,t,n,i,r,s,o,a){"use strict";function l(){this.buffer=h(),u.call(this)}var u=(e["default"],t["default"]),c=n.create,h=i["default"],d=r["default"],p=s.set,m=o._instrumentStart,f=o.subscribers;l.prototype=c(u.prototype),l.prototype.constructor=l;l.prototype.scheduleRender=function(e,t){return d.scheduleOnce("render",e,t)},l.prototype.cancelRender=function(e){d.cancel(e)},l.prototype.createChildViewsMorph=function(e,t){if(e.createChildViewsMorph)return e.createChildViewsMorph(t);var n=t;return""===e.tagName?e._morph?e._childViewsMorph=e._morph:(n=document.createDocumentFragment(),e._childViewsMorph=this._dom.appendMorph(n)):e._childViewsMorph=this._dom.createMorph(n,n.lastChild,null),n},l.prototype.createElement=function(e,t){{var n=e.tagName,i=e.classNameBindings;""===n&&i.length>0}(null===n||void 0===n)&&(n="div");var r=e.buffer=this.buffer;r.reset(n,t),e.beforeRender&&e.beforeRender(r),""!==n&&(e.applyAttributesToBuffer&&e.applyAttributesToBuffer(r),r.generateElement()),e.render&&e.render(r),e.afterRender&&e.afterRender(r);var s=r.element();return e.isContainer&&this.createChildViewsMorph(e,s),e.buffer=null,s&&1===s.nodeType&&p(e,"element",s),s},l.prototype.destroyView=function(e){e.removedFromDOM=!0,e.destroy()},l.prototype.childViews=function(e){return e._childViews},u.prototype.willCreateElement=function(e){f.length&&e.instrumentDetails&&(e._instrumentEnd=m("render."+e.instrumentName,function(){var t={};return e.instrumentDetails(t),t})),e._transitionTo&&e._transitionTo("inBuffer")},u.prototype.didCreateElement=function(e){e._transitionTo&&e._transitionTo("hasElement"),e._instrumentEnd&&e._instrumentEnd()},u.prototype.willInsertElement=function(e){e.trigger&&e.trigger("willInsertElement")},u.prototype.didInsertElement=function(e){e._transitionTo&&e._transitionTo("inDOM"),e.trigger&&e.trigger("didInsertElement")},u.prototype.willRemoveElement=function(){},u.prototype.willDestroyElement=function(e){e.trigger&&e.trigger("willDestroyElement"),e.trigger&&e.trigger("willClearRender")},u.prototype.didDestroyElement=function(e){p(e,"element",null),e._transitionTo&&e._transitionTo("preRender")},a["default"]=l}),e("ember-views/system/utils",["exports"],function(e){"use strict";function t(e){var t=e.shiftKey||e.metaKey||e.altKey||e.ctrlKey,n=e.which>1;return!t&&!n}e.isSimpleClick=t}),e("ember-views/views/collection_view",["ember-metal/core","ember-metal/platform","ember-metal/binding","ember-metal/merge","ember-metal/property_get","ember-metal/property_set","ember-runtime/system/string","ember-views/views/container_view","ember-views/views/core_view","ember-views/views/view","ember-metal/mixin","ember-handlebars/ext","ember-runtime/mixins/array","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";var m=(e["default"],t.create,n.isGlobalPath),f=(i["default"],r.get),_=s.set,g=(o.fmt,a["default"]),v=l["default"],y=u["default"],b=c.observer,w=c.beforeObserver,C=h.handlebarsGetView,x=(d["default"],g.extend({content:null,emptyViewClass:y,emptyView:null,itemViewClass:y,init:function(){var e=this._super();return this._contentDidChange(),e},_contentWillChange:w("content",function(){var e=this.get("content");e&&e.removeArrayObserver(this);var t=e?f(e,"length"):0;this.arrayWillChange(e,0,t)}),_contentDidChange:b("content",function(){var e=f(this,"content");e&&(this._assertArrayLike(e),e.addArrayObserver(this));var t=e?f(e,"length"):0;this.arrayDidChange(e,0,null,t)}),_assertArrayLike:function(){},destroy:function(){if(this._super()){var e=f(this,"content");return e&&e.removeArrayObserver(this),this._createdEmptyView&&this._createdEmptyView.destroy(),this}},arrayWillChange:function(e,t,n){var i=f(this,"emptyView");i&&i instanceof y&&i.removeFromParent();var r,s,o=this._childViews;for(s=t+n-1;s>=t;s--)r=o[s],r.destroy()},arrayDidChange:function(e,t,n,i){var r,s,o,a,l,u,c=[];if(a=e?f(e,"length"):0)for(l=f(this,"itemViewClass"),l=C(e,l,this.container),o=t;t+i>o;o++)s=e.objectAt(o),r=this.createChildView(l,{content:s,contentIndex:o}),c.push(r);else{if(u=f(this,"emptyView"),!u)return;"string"==typeof u&&m(u)&&(u=f(u)||u),u=this.createChildView(u),c.push(u),_(this,"emptyView",u),v.detect(u)&&(this._createdEmptyView=u)}this.replace(t,0,c)},createChildView:function(e,t){e=this._super(e,t);var n=f(e,"tagName");return(null===n||void 0===n)&&(n=x.CONTAINER_MAP[f(this,"tagName")],_(e,"tagName",n)),e}}));x.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"},p["default"]=x}),e("ember-views/views/component",["ember-metal/core","ember-views/mixins/component_template_deprecation","ember-runtime/mixins/target_action_support","ember-views/views/view","ember-metal/property_get","ember-metal/property_set","ember-metal/is_none","ember-metal/computed","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=e["default"],c=t["default"],h=n["default"],d=i["default"],p=r.get,m=s.set,f=(o.isNone,a.computed),_=Array.prototype.slice,g=d.extend(h,c,{instrumentName:"component",instrumentDisplay:f(function(){return this._debugContainerKey?"{{"+this._debugContainerKey.split(":")[1]+"}}":void 0}),init:function(){this._super(),m(this,"origContext",p(this,"context")),m(this,"context",this),m(this,"controller",this)},defaultLayout:function(e,t){u.Handlebars.helpers["yield"].call(e,t)},template:f(function(e,t){if(void 0!==t)return t;var n=p(this,"templateName"),i=this.templateForName(n,"template");return i||p(this,"defaultTemplate")}).property("templateName"),templateName:null,cloneKeywords:function(){return{view:this,controller:this}},_yield:function(e,t){var n=t.data.view,i=this._parentView,r=p(this,"template");r&&n.appendChild(d,{isVirtual:!0,tagName:"",_contextView:i,template:r,context:t.data.insideGroup?p(this,"origContext"):p(i,"context"),controller:p(i,"controller"),templateData:{keywords:i.cloneKeywords(),insideGroup:t.data.insideGroup}})},targetObject:f(function(){var e=p(this,"_parentView");return e?p(e,"controller"):null}).property("_parentView"),sendAction:function(e){var t,n=_.call(arguments,1);t=void 0===e?p(this,"action"):p(this,e),void 0!==t&&this.triggerAction({action:t,actionContext:n})}});l["default"]=g}),e("ember-views/views/container_view",["ember-metal/core","ember-metal/merge","ember-runtime/mixins/mutable_array","ember-metal/property_get","ember-metal/property_set","ember-views/views/view","ember-views/views/states","ember-metal/error","ember-metal/enumerable_utils","ember-metal/computed","ember-metal/run_loop","ember-metal/properties","ember-views/system/render_buffer","ember-metal/mixin","ember-runtime/system/native_array","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";var _=e["default"],g=t["default"],v=n["default"],y=i.get,b=r.set,w=s["default"],C=o.cloneStates,x=o.states,S=a["default"],I=l.forEach,E=u.computed,k=c["default"],T=h.defineProperty,P=(d["default"],p.observer),A=p.beforeObserver,M=(m.A,C(x)),O=w.extend(v,{isContainer:!0,_states:M,willWatchProperty:function(){},init:function(){this._super();var e=y(this,"childViews");T(this,"childViews",w.childViewsProperty);var t=this._childViews;I(e,function(e,n){var i;"string"==typeof e?(i=y(this,e),i=this.createChildView(i),b(this,e,i)):i=this.createChildView(e),t[n]=i},this);var n=y(this,"currentView");n&&(t.length||(t=this._childViews=this._childViews.slice()),t.push(this.createChildView(n)))},replace:function(e,t,n){var i=n?y(n,"length"):0;if(this.arrayContentWillChange(e,t,i),this.childViewsWillChange(this._childViews,e,t),0===i)this._childViews.splice(e,t);else{var r=[e,t].concat(n);n.length&&!this._childViews.length&&(this._childViews=this._childViews.slice()),this._childViews.splice.apply(this._childViews,r)}return this.arrayContentDidChange(e,t,i),this.childViewsDidChange(this._childViews,e,t,i),this},objectAt:function(e){return this._childViews[e]},length:E(function(){return this._childViews.length})["volatile"](),render:function(){},instrumentName:"container",childViewsWillChange:function(e,t,n){if(this.propertyWillChange("childViews"),n>0){var i=e.slice(t,t+n);this.currentState.childViewsWillChange(this,e,t,n),this.initializeViews(i,null,null)}},removeChild:function(e){return this.removeObject(e),this},childViewsDidChange:function(e,t,n,i){if(i>0){var r=e.slice(t,t+i);this.initializeViews(r,this,y(this,"templateData")),this.currentState.childViewsDidChange(this,e,t,i)}this.propertyDidChange("childViews")},initializeViews:function(e,t,n){I(e,function(e){b(e,"_parentView",t),!e.container&&t&&b(e,"container",t.container),y(e,"templateData")||b(e,"templateData",n)})},currentView:null,_currentViewWillChange:A("currentView",function(){var e=y(this,"currentView");e&&e.destroy()}),_currentViewDidChange:P("currentView",function(){var e=y(this,"currentView");e&&this.pushObject(e)}),_ensureChildrenAreInDOM:function(){this.currentState.ensureChildrenAreInDOM(this)}});g(M._default,{childViewsWillChange:_.K,childViewsDidChange:_.K,ensureChildrenAreInDOM:_.K}),g(M.inBuffer,{childViewsDidChange:function(){throw new S("You cannot modify child views while in the inBuffer state")}}),g(M.hasElement,{childViewsWillChange:function(e,t,n,i){for(var r=n;n+i>r;r++)t[r].remove()},childViewsDidChange:function(e){k.scheduleOnce("render",e,"_ensureChildrenAreInDOM")},ensureChildrenAreInDOM:function(e){var t,n,i,r=e._childViews,s=e._renderer;for(t=0,n=r.length;n>t;t++)i=r[t],i._elementCreated||s.renderTree(i,e,t)}}),f["default"]=O}),e("ember-views/views/core_view",["ember-views/system/renderer","ember-views/views/states","ember-runtime/system/object","ember-runtime/mixins/evented","ember-runtime/mixins/action_handler","ember-metal/property_get","ember-metal/property_set","ember-metal/computed","ember-metal/utils","ember-metal/instrumentation","exports"],function(e,t,n,i,s,o,a,l,u,c,h){"use strict";var d=e["default"],p=t.cloneStates,m=t.states,f=n["default"],_=i["default"],g=s["default"],v=o.get,y=(a.set,l.computed),b=u.typeOf,w=(c.instrument,f.extend(_,g,{isView:!0,isVirtual:!1,isContainer:!1,_states:p(m),init:function(){this._super(),this._transitionTo("preRender"),this._isVisible=v(this,"isVisible")
},parentView:y("_parentView",function(){var e=this._parentView;return e&&e.isVirtual?v(e,"parentView"):e}),_state:null,_parentView:null,concreteView:y("parentView",function(){return this.isVirtual?v(this,"parentView.concreteView"):this}),instrumentName:"core_view",instrumentDetails:function(e){e.object=this.toString(),e.containerKey=this._debugContainerKey,e.view=this},trigger:function(){this._super.apply(this,arguments);var e=arguments[0],t=this[e];if(t){for(var n=arguments.length,i=new Array(n-1),r=1;n>r;r++)i[r-1]=arguments[r];return t.apply(this,i)}},has:function(e){return"function"===b(this[e])||this._super(e)},destroy:function(){var e=this._parentView;if(this._super())return!this.removedFromDOM&&this._renderer&&this._renderer.remove(this,!0),e&&e.removeChild(this),this._transitionTo("destroying",!1),this},clearRenderedChildren:r.K,_transitionTo:r.K,destroyElement:r.K}));w.reopenClass({renderer:new d}),h["default"]=w}),e("ember-views/views/states",["ember-metal/platform","ember-metal/merge","ember-views/views/states/default","ember-views/views/states/pre_render","ember-views/views/states/in_buffer","ember-views/views/states/has_element","ember-views/views/states/in_dom","ember-views/views/states/destroying","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e){var t={};t._default={},t.preRender=c(t._default),t.destroying=c(t._default),t.inBuffer=c(t._default),t.hasElement=c(t._default),t.inDOM=c(t.hasElement);for(var n in e)e.hasOwnProperty(n)&&h(t[n],e[n]);return t}var c=e.create,h=t["default"],d=n["default"],p=i["default"],m=r["default"],f=s["default"],_=o["default"],g=a["default"];l.cloneStates=u;var v={_default:d,preRender:p,inDOM:_,inBuffer:m,hasElement:f,destroying:g};l.states=v}),e("ember-views/views/states/default",["ember-metal/core","ember-metal/property_get","ember-metal/property_set","ember-metal/run_loop","ember-metal/error","exports"],function(e,t,n,i,r,s){"use strict";var o=e["default"],a=(t.get,n.set,i["default"],r["default"]);s["default"]={appendChild:function(){throw new a("You can't use appendChild outside of the rendering process")},$:function(){return void 0},getElement:function(){return null},handleEvent:function(){return!0},destroyElement:function(e){return e._renderer&&e._renderer.remove(e,!1),e},rerender:o.K,invokeObserver:o.K}}),e("ember-views/views/states/destroying",["ember-metal/merge","ember-metal/platform","ember-runtime/system/string","ember-views/views/states/default","ember-metal/error","exports"],function(e,t,n,i,r,s){"use strict";var o=e["default"],a=t.create,l=n.fmt,u=i["default"],c=r["default"],h="You can't call %@ on a view being destroyed",d=a(u);o(d,{appendChild:function(){throw new c(l(h,["appendChild"]))},rerender:function(){throw new c(l(h,["rerender"]))},destroyElement:function(){throw new c(l(h,["destroyElement"]))}}),s["default"]=d}),e("ember-views/views/states/has_element",["ember-views/views/states/default","ember-metal/run_loop","ember-metal/merge","ember-metal/platform","ember-views/system/jquery","ember-metal/error","ember-metal/property_get","ember-metal/property_set","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";var u=e["default"],c=t["default"],h=n["default"],d=i.create,p=r["default"],m=s["default"],f=o.get,_=(a.set,d(u));h(_,{$:function(e,t){var n=e.get("concreteView").element;return t?p(t,n):p(n)},getElement:function(e){var t=f(e,"parentView");return t&&(t=f(t,"element")),t?e.findElementInParentElement(t):p("#"+f(e,"elementId"))[0]},rerender:function(e){if(e._root._morph&&!e._elementInserted)throw new m("Something you did caused a view to re-render after it rendered but before it was inserted into the DOM.");c.scheduleOnce("render",function(){e.isDestroying||e._renderer.renderTree(e,e._parentView)})},destroyElement:function(e){return e._renderer.remove(e,!1),e},handleEvent:function(e,t,n){return e.has(t)?e.trigger(t,n):!0},invokeObserver:function(e,t){t.call(e)}}),l["default"]=_}),e("ember-views/views/states/in_buffer",["ember-views/views/states/default","ember-metal/error","ember-metal/core","ember-metal/platform","ember-metal/merge","exports"],function(e,t,n,i,r,s){"use strict";var o=e["default"],a=t["default"],l=n["default"],u=i.create,c=r["default"],h=u(o);c(h,{$:function(e){return e.rerender(),l.$()},rerender:function(){throw new a("Something you did caused a view to re-render after it rendered but before it was inserted into the DOM.")},appendChild:function(e,t,n){var i=e.buffer,r=e._childViews;return t=e.createChildView(t,n),r.length||(r=e._childViews=r.slice()),r.push(t),t._morph||i.pushChildView(t),e.propertyDidChange("childViews"),t},invokeObserver:function(e,t){t.call(e)}}),s["default"]=h}),e("ember-views/views/states/in_dom",["ember-metal/core","ember-metal/platform","ember-metal/merge","ember-metal/error","ember-views/views/states/has_element","exports"],function(e,n,i,r,s,o){"use strict";var a,l=(e["default"],n.create),u=i["default"],c=r["default"],h=s["default"],d=l(h);u(d,{enter:function(e){a||(a=t("ember-views/views/view")["default"]),e.isVirtual||(a.views[e.elementId]=e),e.addBeforeObserver("elementId",function(){throw new c("Changing a view's elementId after creation is not allowed")})},exit:function(e){a||(a=t("ember-views/views/view")["default"]),this.isVirtual||delete a.views[e.elementId]}}),o["default"]=d}),e("ember-views/views/states/pre_render",["ember-views/views/states/default","ember-metal/platform","ember-metal/merge","ember-views/system/jquery","exports"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t.create,a=(n["default"],i["default"],o(s));r["default"]=a}),e("ember-views/views/view",["ember-metal/core","ember-runtime/mixins/evented","ember-runtime/system/object","ember-metal/error","ember-metal/property_get","ember-metal/property_set","ember-metal/set_properties","ember-metal/run_loop","ember-metal/observer","ember-metal/properties","ember-metal/utils","ember-metal/computed","ember-metal/mixin","ember-metal/is_none","ember-metal/deprecate_property","ember-runtime/system/native_array","ember-runtime/system/string","ember-metal/enumerable_utils","ember-runtime/copy","ember-metal/binding","ember-metal/property_events","ember-views/system/jquery","ember-views/system/ext","ember-views/views/core_view","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S){"use strict";var I=e["default"],E=t["default"],k=n["default"],T=i["default"],P=r.get,A=s.set,M=o["default"],O=a["default"],D=l.addObserver,L=l.removeObserver,R=u.defineProperty,B=u.deprecateProperty,N=c.guidFor,F=(c.meta,h.computed),z=d.observer,H=c.typeOf,W=c.isArray,V=p.isNone,j=d.Mixin,B=m.deprecateProperty,U=f.A,q=_.dasherize,K=g.forEach,J=g.addObject,G=g.removeObject,$=d.beforeObserver,Y=v["default"],Z=y.isGlobalPath,X=b.propertyWillChange,Q=b.propertyDidChange,et=w["default"],tt=x["default"],nt=F(function(){var e=this._childViews,t=U();return K(e,function(e){var n;e.isVirtual?(n=P(e,"childViews"))&&t.pushObjects(n):t.push(e)}),t.replace=function(){throw new T("childViews is immutable")},t});I.TEMPLATES={};var it=[],rt=tt.extend({concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,instrumentDisplay:F(function(){return this.helperName?"{{"+this.helperName+"}}":void 0}),template:F("templateName",function(e,t){if(void 0!==t)return t;var n=P(this,"templateName"),i=this.templateForName(n,"template");return i||P(this,"defaultTemplate")}),controller:F("_parentView",function(){var e=P(this,"_parentView");return e?P(e,"controller"):null}),layout:F(function(){var e=P(this,"layoutName"),t=this.templateForName(e,"layout");return t||P(this,"defaultLayout")}).property("layoutName"),_yield:function(e,t){var n=P(this,"template");n&&n(e,t)},templateForName:function(e){if(e){if(!this.container)throw new T("Container was not found when looking up a views template. This is most likely due to manually instantiating an Ember.View. See: http://git.io/EKPpnA");return this.container.lookup("template:"+e)}},context:F(function(e,t){return 2===arguments.length?(A(this,"_context",t),t):P(this,"_context")})["volatile"](),_context:F(function(){var e,t;return(t=P(this,"controller"))?t:(e=this._parentView,e?P(e,"_context"):null)}),_contextDidChange:z("context",function(){this.rerender()}),isVisible:!0,childViews:nt,_childViews:it,_childViewsWillChange:$("childViews",function(){if(this.isVirtual){var e=P(this,"parentView");e&&X(e,"childViews")}}),_childViewsDidChange:z("childViews",function(){if(this.isVirtual){var e=P(this,"parentView");e&&Q(e,"childViews")}}),nearestInstanceOf:function(e){for(var t=P(this,"parentView");t;){if(t instanceof e)return t;t=P(t,"parentView")}},nearestOfType:function(e){for(var t=P(this,"parentView"),n=e instanceof j?function(t){return e.detect(t)}:function(t){return e.detect(t.constructor)};t;){if(n(t))return t;t=P(t,"parentView")}},nearestWithProperty:function(e){for(var t=P(this,"parentView");t;){if(e in t)return t;t=P(t,"parentView")}},nearestChildOf:function(e){for(var t=P(this,"parentView");t;){if(P(t,"parentView")instanceof e)return t;t=P(t,"parentView")}},_parentViewDidChange:z("_parentView",function(){this.isDestroying||(this.trigger("parentViewDidChange"),P(this,"parentView.controller")&&!P(this,"controller")&&this.notifyPropertyChange("controller"))}),_controllerDidChange:z("controller",function(){this.isDestroying||(this.rerender(),this.forEachChildView(function(e){e.propertyDidChange("controller")}))}),cloneKeywords:function(){var e=P(this,"templateData"),t=e?Y(e.keywords):{};return A(t,"view",this.isVirtual?t.view:this),A(t,"_view",this),A(t,"controller",P(this,"controller")),t},render:function(e){var t=P(this,"layout")||P(this,"template");if(t){var n,i=P(this,"context"),r=this.cloneKeywords(),s={view:this,buffer:e,isRenderData:!0,keywords:r,insideGroup:P(this,"templateData.insideGroup")};n=t(i,{data:s}),void 0!==n&&e.push(n)}},rerender:function(){return this.currentState.rerender(this)},_applyClassNameBindings:function(e){var t,n,i,r=this.classNames;K(e,function(e){var s,o=rt._parsePropertyPath(e),a=function(){n=this._classStringForProperty(e),t=this.$(),s&&(t.removeClass(s),r.removeObject(s)),n?(t.addClass(n),s=n):s=null};i=this._classStringForProperty(e),i&&(J(r,i),s=i),this.registerObserver(this,o.path,a),this.one("willClearRender",function(){s&&(r.removeObject(s),s=null)})},this)},_unspecifiedAttributeBindings:null,_applyAttributeBindings:function(e,t){var n,i=this._unspecifiedAttributeBindings=this._unspecifiedAttributeBindings||{};K(t,function(t){var r=t.split(":"),s=r[0],o=r[1]||s;s in this?(this._setupAttributeBindingObservation(s,o),n=P(this,s),rt.applyAttributeBindings(e,o,n)):i[s]=o},this),this.setUnknownProperty=this._setUnknownProperty},_setupAttributeBindingObservation:function(e,t){var n,i,r=function(){i=this.$(),n=P(this,e),rt.applyAttributeBindings(i,t,n)};this.registerObserver(this,e,r)},setUnknownProperty:null,_setUnknownProperty:function(e,t){var n=this._unspecifiedAttributeBindings&&this._unspecifiedAttributeBindings[e];return n&&this._setupAttributeBindingObservation(e,n),R(this,e),A(this,e,t)},_classStringForProperty:function(e){var t=rt._parsePropertyPath(e),n=t.path,i=P(this,n);return void 0===i&&Z(n)&&(i=P(I.lookup,n)),rt._classStringForValue(n,i,t.className,t.falsyClassName)},element:null,$:function(e){return this.currentState.$(this,e)},mutateChildViews:function(e){for(var t,n=this._childViews,i=n.length;--i>=0;)t=n[i],e(this,t,i);return this},forEachChildView:function(e){var t=this._childViews;if(!t)return this;var n,i,r=t.length;for(i=0;r>i;i++)n=t[i],e(n);return this},appendTo:function(e){var t=et(e);return this.constructor.renderer.appendTo(this,t[0]),this},replaceIn:function(e){var t=et(e);return this.constructor.renderer.replaceIn(this,t[0]),this},append:function(){return this.appendTo(document.body)},remove:function(){this.removedFromDOM||this.destroyElement()},elementId:null,findElementInParentElement:function(e){var t="#"+this.elementId;return et(t)[0]||et(t,e)[0]},createElement:function(){return this.element?this:(this._didCreateElementWithoutMorph=!0,this.constructor.renderer.renderTree(this),this)},willInsertElement:I.K,didInsertElement:I.K,willClearRender:I.K,destroyElement:function(){return this.currentState.destroyElement(this)},willDestroyElement:I.K,parentViewDidChange:I.K,instrumentName:"view",instrumentDetails:function(e){e.template=P(this,"templateName"),this._super(e)},beforeRender:function(){},afterRender:function(){},applyAttributesToBuffer:function(e){var t=P(this,"classNameBindings");t.length&&this._applyClassNameBindings(t);var n=P(this,"attributeBindings");n.length&&this._applyAttributeBindings(e,n),e.setClasses(this.classNames),e.id(this.elementId);var i=P(this,"ariaRole");i&&e.attr("role",i),P(this,"isVisible")===!1&&e.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:it,attributeBindings:it,init:function(){this.isVirtual||this.elementId||(this.elementId=N(this)),this._super(),this._childViews=this._childViews.slice(),this.classNameBindings=U(this.classNameBindings.slice()),this.classNames=U(this.classNames.slice())},appendChild:function(e,t){return this.currentState.appendChild(this,e,t)},removeChild:function(e){if(!this.isDestroying){A(e,"_parentView",null);var t=this._childViews;return G(t,e),this.propertyDidChange("childViews"),this}},removeAllChildren:function(){return this.mutateChildViews(function(e,t){e.removeChild(t)})},destroyAllChildren:function(){return this.mutateChildViews(function(e,t){t.destroy()})},removeFromParent:function(){var e=this._parentView;return this.remove(),e&&e.removeChild(this),this},destroy:function(){var e=(this._childViews,P(this,"parentView")),t=this.viewName;return this._super()?(t&&e&&e.set(t,null),this):void 0},createChildView:function(e,t){if(!e)throw new TypeError("createChildViews first argument must exist");if(e.isView&&e._parentView===this&&e.container===this.container)return e;if(t=t||{},t._parentView=this,tt.detect(e))t.templateData=t.templateData||P(this,"templateData"),t.container=this.container,e=e.create(t),e.viewName&&A(P(this,"concreteView"),e.viewName,e);else if("string"==typeof e){var n="view:"+e,i=this.container.lookupFactory(n);t.templateData=P(this,"templateData"),e=i.create(t)}else t.container=this.container,P(e,"templateData")||(t.templateData=P(this,"templateData")),M(e,t);return e},becameVisible:I.K,becameHidden:I.K,_isVisibleDidChange:z("isVisible",function(){this._isVisible!==P(this,"isVisible")&&O.scheduleOnce("render",this,this._toggleVisibility)}),_toggleVisibility:function(){var e=this.$(),t=P(this,"isVisible");this._isVisible!==t&&(this._isVisible=t,e&&(e.toggle(t),this._isAncestorHidden()||(t?this._notifyBecameVisible():this._notifyBecameHidden())))},_notifyBecameVisible:function(){this.trigger("becameVisible"),this.forEachChildView(function(e){var t=P(e,"isVisible");(t||null===t)&&e._notifyBecameVisible()})},_notifyBecameHidden:function(){this.trigger("becameHidden"),this.forEachChildView(function(e){var t=P(e,"isVisible");(t||null===t)&&e._notifyBecameHidden()})},_isAncestorHidden:function(){for(var e=P(this,"parentView");e;){if(P(e,"isVisible")===!1)return!0;e=P(e,"parentView")}return!1},transitionTo:function(e,t){this._transitionTo(e,t)},_transitionTo:function(e){var t=this.currentState,n=this.currentState=this._states[e];this._state=e,t&&t.exit&&t.exit(this),n.enter&&n.enter(this)},handleEvent:function(e,t){return this.currentState.handleEvent(this,e,t)},registerObserver:function(e,t,n,i){if(i||"function"!=typeof n||(i=n,n=null),e&&"object"==typeof e){var r=this,s=function(){r.currentState.invokeObserver(this,i)},o=function(){O.scheduleOnce("render",this,s)};D(e,t,n,o),this.one("willClearRender",function(){L(e,t,n,o)})}}});B(rt.prototype,"state","_state"),B(rt.prototype,"states","_states"),rt.reopenClass({_parsePropertyPath:function(e){var t,n,i=e.split(":"),r=i[0],s="";return i.length>1&&(t=i[1],3===i.length&&(n=i[2]),s=":"+t,n&&(s+=":"+n)),{path:r,classNames:s,className:""===t?void 0:t,falsyClassName:n}},_classStringForValue:function(e,t,n,i){if(W(t)&&(t=0!==P(t,"length")),n||i)return n&&t?n:i&&!t?i:null;if(t===!0){var r=e.split(".");return q(r[r.length-1])}return t!==!1&&null!=t?t:null}});var st=k.extend(E).create();rt.addMutationListener=function(e){st.on("change",e)},rt.removeMutationListener=function(e){st.off("change",e)},rt.notifyMutationListeners=function(){st.trigger("change")},rt.views={},rt.childViewsProperty=nt,rt.applyAttributeBindings=function(e,t,n){var i=H(n);"value"===t||"string"!==i&&("number"!==i||isNaN(n))?"value"===t||"boolean"===i?V(n)||n===!1?(e.removeAttr(t),"required"===t?e.removeProp(t):e.prop(t,"")):n!==e.prop(t)&&e.prop(t,n):n||e.removeAttr(t):n!==e.attr(t)&&e.attr(t,n)},S["default"]=rt}),e("ember",["ember-metal","ember-runtime","ember-handlebars","ember-views","ember-routing","ember-routing-handlebars","ember-application","ember-extension-support"],function(){"use strict";r.__loader.registry["ember-testing"]&&t("ember-testing")}),e("morph",["./morph/morph","./morph/dom-helper","exports"],function(e,t,n){"use strict";var i,i=e["default"];n.Morph=i;var r,r=t["default"];n.DOMHelper=r}),e("morph/dom-helper",["../morph/morph","./dom-helper/build-html-dom","exports"],function(e,t,n){"use strict";function i(e){return e===c}function r(e){return e&&e.namespaceURI===c&&!h[e.tagName]?c:null}function s(e,t){if("TABLE"===t.tagName){var n=m.exec(e);if(n){var i=n[1];return"tr"===i||"col"===i}}}function o(e,t){var n=t.document.createElement("div");return n.innerHTML="<svg>"+e+"</svg>",n.firstChild.childNodes}function a(e){this.document=e||window.document,this.namespace=null}var l=e["default"],u=t.buildHTMLDOM,c=t.svgNamespace,h=t.svgHTMLIntegrationPoints,d=function(){var e=document.createElement("div");e.appendChild(document.createTextNode(""));var t=e.cloneNode(!0);return 0===t.childNodes.length}(),p=function(){var e=document.createElement("input");e.setAttribute("checked","checked");var t=e.cloneNode(!1);return!t.checked}(),m=/<([\w:]+)/,f=a.prototype;f.constructor=a,f.insertBefore=function(e,t,n){return e.insertBefore(t,n)},f.appendChild=function(e,t){return e.appendChild(t)},f.appendText=function(e,t){return e.appendChild(this.document.createTextNode(t))},f.setAttribute=function(e,t,n){e.setAttribute(t,n)},f.createElement=document.createElementNS?function(e,t){var n=this.namespace;return t&&(n="svg"===e?c:r(t)),n?this.document.createElementNS(n,e):this.document.createElement(e)}:function(e){return this.document.createElement(e)},f.setNamespace=function(e){this.namespace=e},f.detectNamespace=function(e){this.namespace=r(e)},f.createDocumentFragment=function(){return this.document.createDocumentFragment()},f.createTextNode=function(e){return this.document.createTextNode(e)},f.repairClonedNode=function(e,t,n){if(d&&t.length>0)for(var i=0,r=t.length;r>i;i++){var s=this.document.createTextNode(""),o=t[i],a=e.childNodes[o];a?e.insertBefore(s,a):e.appendChild(s)}p&&n&&e.setAttribute("checked","checked")},f.cloneNode=function(e,t){var n=e.cloneNode(!!t);return n},f.createMorph=function(e,t,n,i){return i||1!==e.nodeType||(i=e),new l(e,t,n,this,i)},f.createMorphAt=function(e,t,n,i){var r=e.childNodes,s=-1===t?null:r[t],o=-1===n?null:r[n];return this.createMorph(e,s,o,i)},f.insertMorphBefore=function(e,t,n){var i=this.document.createTextNode(""),r=this.document.createTextNode("");return e.insertBefore(i,t),e.insertBefore(r,t),this.createMorph(e,i,r,n)},f.appendMorph=function(e,t){var n=this.document.createTextNode(""),i=this.document.createTextNode("");return e.appendChild(n),e.appendChild(i),this.createMorph(e,n,i,t)},f.parseHTML=function(e,t){var n=i(this.namespace)&&!h[t.tagName];if(n)return o(e,this);var r=u(e,t,this);if(s(e,t)){for(var a=r[0];a&&1!==a.nodeType;)a=a.nextSibling;return a.childNodes}return r},n["default"]=a}),e("morph/dom-helper/build-html-dom",["exports"],function(e){"use strict";function t(e,t){t="&shy;"+t,e.innerHTML=t;for(var n=e.childNodes,i=n[0];1===i.nodeType&&!i.nodeName;)i=i.firstChild;if(3===i.nodeType&&""===i.nodeValue.charAt(0)){var r=i.nodeValue.slice(1);r.length?i.nodeValue=i.nodeValue.slice(1):i.parentNode.removeChild(i)}return n}function n(e,n){var i=n.tagName,r=n.outerHTML||(new XMLSerializer).serializeToString(n);if(!r)throw"Can't set innerHTML on "+i+" in this browser";for(var s=d[i.toLowerCase()],o=r.match(new RegExp("<"+i+"([^>]*)>","i"))[0],a="</"+i+">",l=[o,e,a],u=s.length,c=1+u;u--;)l.unshift("<"+s[u]+">"),l.push("</"+s[u]+">");var h=document.createElement("div");t(h,l.join(""));for(var p=h;c--;)for(p=p.firstChild;p&&1!==p.nodeType;)p=p.nextSibling;for(;p&&p.tagName!==i;)p=p.nextSibling;return p?p.childNodes:[]}function i(e,t,n){var i=v(e,t,n);if("SELECT"===t.tagName)for(var r=0;i[r];r++)if("OPTION"===i[r].tagName){o(i[r].parentNode,i[r],e)&&(i[r].parentNode.selectedIndex=-1);break}return i}var r={foreignObject:1,desc:1,title:1};e.svgHTMLIntegrationPoints=r;var s="http://www.w3.org/2000/svg";e.svgNamespace=s;var o,a=document&&document.createElementNS&&function(){var e=document.createElementNS(s,"title");return e.innerHTML="<div></div>",0===e.childNodes.length||1!==e.childNodes[0].nodeType}(),l=document&&function(){var e=document.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",""===e.firstChild.innerHTML}(),u=document&&function(){var e=document.createElement("div");return e.innerHTML="Test: <script type='text/x-placeholder'></script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue}(),c=document&&function(){var e=document.createElement("div");return e.innerHTML="<select><option></option></select>","selected"===e.childNodes[0].childNodes[0].getAttribute("selected")}();if(c){var h=/<option[^>]*selected/;o=function(e,t,n){return 0===e.selectedIndex&&!h.test(n)}}else o=function(e,t){var n=t.getAttribute("selected");return 0===e.selectedIndex&&(null===n||""!==n&&"selected"!==n.toLowerCase())};var d,p,m=document.createElement("table");try{m.innerHTML="<tbody></tbody>"}catch(f){}finally{p=0===m.childNodes.length}p&&(d={colgroup:["table"],table:[],tbody:["table"],tfoot:["table"],thead:["table"],tr:["table","tbody"]});var _=document.createElement("select");_.innerHTML="<option></option>",_&&(d=d||{},d.select=[]);var g;g=l?function(e,n,i){return n=i.cloneNode(n,!1),t(n,e),n.childNodes}:function(e,t,n){return t=n.cloneNode(t,!1),t.innerHTML=e,t.childNodes};var v;v=d||u?function(e,t,i){var r=[],s=[];e=e.replace(/(\s*)(<script)/g,function(e,t,n){return r.push(t),n}),e=e.replace(/(<\/script>)(\s*)/g,function(e,t,n){return s.push(n),t});var o;o=d[t.tagName.toLowerCase()]?n(e,t):g(e,t,i);var a,l,u,c,h=[];for(a=0;u=o[a];a++)if(1===u.nodeType)if("SCRIPT"===u.tagName)h.push(u);else for(c=u.getElementsByTagName("script"),l=0;l<c.length;l++)h.push(c[l]);var p,m,f,_;for(a=0;p=h[a];a++)f=r[a],f&&f.length>0&&(m=i.document.createTextNode(f),p.parentNode.insertBefore(m,p)),_=s[a],_&&_.length>0&&(m=i.document.createTextNode(_),p.parentNode.insertBefore(m,p.nextSibling));return o}:g;var y;y=a?function(e,t,n){return r[t.tagName]?i(e,document.createElement("div"),n):i(e,t,n)}:i,e.buildHTMLDOM=y}),e("morph/morph",["exports"],function(e){"use strict";function t(e,t){if(null===e||null===t)throw new Error("a fragment parent must have boundary nodes in order to detect insertion")}function n(e){if(!e||1!==e.nodeType)throw new Error("An element node must be provided for a contextualElement, you provided "+(e?"nodeType "+e.nodeType:"nothing"))}function i(e,i,r,s,o){11===e.nodeType?(t(i,r),this.element=null):this.element=e,this._parent=e,this.start=i,this.end=r,this.domHelper=s,n(o),this.contextualElement=o,this.reset()}function r(e,t,n){for(var i,r=t,s=n.length;s--;)i=n[s],e.insertBefore(i,r),r=i}function s(e,t,n){var i,r;for(i=null===n?e.lastChild:n.previousSibling;null!==i&&i!==t;)r=i.previousSibling,e.removeChild(i),i=r}var o=Array.prototype.splice;i.prototype.reset=function(){this.text=null,this.owner=null,this.morphs=null,this.before=null,this.after=null,this.escaped=!0},i.prototype.parent=function(){if(!this.element){var e=this.start.parentNode;this._parent!==e&&(this.element=this._parent=e)}return this._parent},i.prototype.destroy=function(){this.owner?this.owner.removeMorph(this):s(this.element||this.parent(),this.start,this.end)},i.prototype.removeMorph=function(e){for(var t=this.morphs,n=0,i=t.length;i>n;n++)if(t[n]===e){this.replace(n,1);break}},i.prototype.update=function(e){this._update(this.element||this.parent(),e)},i.prototype.updateNode=function(e){var t=this.element||this.parent();return e?void this._updateNode(t,e):this._updateText(t,"")},i.prototype.updateText=function(e){this._updateText(this.element||this.parent(),e)},i.prototype.updateHTML=function(e){var t=this.element||this.parent();return e?void this._updateHTML(t,e):this._updateText(t,"")},i.prototype._update=function(e,t){null===t||void 0===t?this._updateText(e,""):"string"==typeof t?this.escaped?this._updateText(e,t):this._updateHTML(e,t):t.nodeType?this._updateNode(e,t):t.string?this._updateHTML(e,t.string):this._updateText(e,t.toString())},i.prototype._updateNode=function(e,t){if(this.text){if(3===t.nodeType)return void(this.text.nodeValue=t.nodeValue);this.text=null}var n=this.start,i=this.end;s(e,n,i),e.insertBefore(t,i),null!==this.before&&(this.before.end=n.nextSibling),null!==this.after&&(this.after.start=i.previousSibling)},i.prototype._updateText=function(e,t){if(this.text)return void(this.text.nodeValue=t);var n=this.domHelper.createTextNode(t);this.text=n,s(e,this.start,this.end),e.insertBefore(n,this.end),null!==this.before&&(this.before.end=n),null!==this.after&&(this.after.start=n)},i.prototype._updateHTML=function(e,t){var n=this.start,i=this.end;s(e,n,i),this.text=null;var o=this.domHelper.parseHTML(t,this.contextualElement);r(e,i,o),null!==this.before&&(this.before.end=n.nextSibling),null!==this.after&&(this.after.start=i.previousSibling)},i.prototype.append=function(e){null===this.morphs&&(this.morphs=[]);var t=this.morphs.length;return this.insert(t,e)},i.prototype.insert=function(e,t){null===this.morphs&&(this.morphs=[]);var n=this.element||this.parent(),r=this.morphs,s=e>0?r[e-1]:null,o=e<r.length?r[e]:null,a=null===s?this.start:null===s.end?n.lastChild:s.end.previousSibling,l=null===o?this.end:null===o.start?n.firstChild:o.start.nextSibling,u=new i(n,a,l,this.domHelper,this.contextualElement);return u.owner=this,u._update(n,t),null!==s&&(u.before=s,s.end=a.nextSibling,s.after=u),null!==o&&(u.after=o,o.before=u,o.start=l.previousSibling),this.morphs.splice(e,0,u),u},i.prototype.replace=function(e,t,n){null===this.morphs&&(this.morphs=[]);var r,a,l,u=this.element||this.parent(),c=this.morphs,h=e>0?c[e-1]:null,d=e+t<c.length?c[e+t]:null,p=null===h?this.start:null===h.end?u.lastChild:h.end.previousSibling,m=null===d?this.end:null===d.start?u.firstChild:d.start.nextSibling,f=void 0===n?0:n.length;if(t>0&&s(u,p,m),0===f)return null!==h&&(h.after=d,h.end=m),null!==d&&(d.before=h,d.start=p),void c.splice(e,t);if(r=new Array(f+2),f>0){for(a=0;f>a;a++)r[a+2]=l=new i(u,p,m,this.domHelper,this.contextualElement),l._update(u,n[a]),l.owner=this,null!==h&&(l.before=h,h.end=p.nextSibling,h.after=l),h=l,p=null===m?u.lastChild:m.previousSibling;null!==d&&(l.after=d,d.before=l,d.start=m.previousSibling)}r[0]=e,r[1]=t,o.apply(c,r)},e["default"]=i}),e("route-recognizer",["route-recognizer/dsl","exports"],function(e,t){"use strict";function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){this.string=e}function r(e){this.name=e}function s(e){this.name=e}function o(){}function a(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));for(var a=e.split("/"),l=[],u=0,c=a.length;c>u;u++){var h,d=a[u];(h=d.match(/^:([^\/]+)$/))?(l.push(new r(h[1])),t.push(h[1]),n.dynamics++):(h=d.match(/^\*([^\/]+)$/))?(l.push(new s(h[1])),t.push(h[1]),n.stars++):""===d?l.push(new o):(l.push(new i(d)),n.statics++)}return l}function l(e){this.charSpec=e,this.nextStates=[]}function u(e){return e.sort(function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0})}function c(e,t){for(var n=[],i=0,r=e.length;r>i;i++){var s=e[i];n=n.concat(s.match(t))}return n}function h(e){this.queryParams=e||{}}function d(e,t,n){for(var i=e.handlers,r=e.regex,s=t.match(r),o=1,a=new h(n),l=0,u=i.length;u>l;l++){for(var c=i[l],d=c.names,p={},m=0,f=d.length;f>m;m++)p[d[m]]=s[o++];a.push({handler:c.handler,params:p,isDynamic:!!d.length})}return a}function p(e,t){return t.eachChar(function(t){e=e.put(t)}),e}var m=e["default"],f=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],_=new RegExp("(\\"+f.join("|\\")+")","g");i.prototype={eachChar:function(e){for(var t,n=this.string,i=0,r=n.length;r>i;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(_,"\\$1")},generate:function(){return this.string}},r.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},s.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},o.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},l.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;i>n;n++){var r=t[n],s=r.charSpec.validChars===e.validChars;if(s=s&&r.charSpec.invalidChars===e.invalidChars)return r}},put:function(e){var t;return(t=this.get(e))?t:(t=new l(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,r=this.nextStates,s=[],o=0,a=r.length;a>o;o++)t=r[o],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?-1!==i.indexOf(e)&&s.push(t):"undefined"!=typeof(i=n.invalidChars)&&-1===i.indexOf(e)&&s.push(t);return s}};var g=Object.create||function(e){function t(){}return t.prototype=e,new t};h.prototype=g({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var v=function(){this.rootState=new l,this.names={}};v.prototype={add:function(e,t){for(var n,i=this.rootState,r="^",s={statics:0,dynamics:0,stars:0},l=[],u=[],c=!0,h=0,d=e.length;d>h;h++){var m=e[h],f=[],_=a(m.path,f,s);u=u.concat(_);for(var g=0,v=_.length;v>g;g++){var y=_[g];y instanceof o||(c=!1,i=i.put({validChars:"/"}),r+="/",i=p(i,y),r+=y.regex())}var b={handler:m.handler,names:f};l.push(b)}c&&(i=i.put({validChars:"/"}),r+="/"),i.handlers=l,i.regex=new RegExp(r+"$"),i.types=s,(n=t&&t.as)&&(this.names[n]={segments:u,handlers:l})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,r=t.handlers.length;r>i;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var r=n.segments,s=0,a=r.length;a>s;s++){var l=r[s];l instanceof o||(i+="/",i+=l.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams,n.handlers)),i},generateQueryString:function(e){var t=[],i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(r);i.sort();for(var s=0,o=i.length;o>s;s++){r=i[s];var a=e[r];if(null!=a){var l=encodeURIComponent(r);if(n(a))for(var u=0,c=a.length;c>u;u++){var h=r+"[]="+encodeURIComponent(a[u]);t.push(h)}else l+="="+encodeURIComponent(a),t.push(l)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var r,s=t[i].split("="),o=decodeURIComponent(s[0]),a=o.length,l=!1;1===s.length?r="true":(a>2&&"[]"===o.slice(a-2)&&(l=!0,o=o.slice(0,a-2),n[o]||(n[o]=[])),r=s[1]?decodeURIComponent(s[1]):""),l?n[o].push(r):n[o]=r
}return n},recognize:function(e){var t,n,i,r,s=[this.rootState],o={},a=!1;if(r=e.indexOf("?"),-1!==r){var l=e.substr(r+1,e.length);e=e.substr(0,r),o=this.parseQueryString(l)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),a=!0),n=0,i=e.length;i>n&&(s=c(s,e.charAt(n)),s.length);n++);var h=[];for(n=0,i=s.length;i>n;n++)s[n].handlers&&h.push(s[n]);s=u(h);var p=h[0];return p&&p.handlers?(a&&"(.+)$"===p.regex.source.slice(-5)&&(e+="/"),d(p,e,o)):void 0}},v.prototype.map=m,t["default"]=v}),e("route-recognizer/dsl",["exports"],function(e){"use strict";function t(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function n(e){this.routes={},this.children={},this.target=e}function i(e,n,r){return function(s,o){var a=e+s;return o?void o(i(a,n,r)):new t(e+s,n,r)}}function r(e,t,n){for(var i=0,r=0,s=e.length;s>r;r++)i+=e[r].path.length;t=t.substr(i);var o={path:t,handler:n};e.push(o)}function s(e,t,n,i){var o=t.routes;for(var a in o)if(o.hasOwnProperty(a)){var l=e.slice();r(l,a,o[a]),t.children[a]?s(l,t.children[a],n,i):n.call(i,l)}}t.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},n.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,r,s){var o=new n(t);this.children[e]=o;var a=i(e,o,s);s&&s.contextEntered&&s.contextEntered(t,a),r(a)}},e["default"]=function(e,t){var r=new n;e(i("",r,this.delegate)),s([],r,function(e){t?t(this,e):this.add(e)},this)}}),e("router",["./router/router","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=n}),e("router/handler-info",["./utils","rsvp/promise","exports"],function(e,t,n){"use strict";function i(e){var t=e||{};o(this,t),this.initialize(t)}function r(e,t){if(!e^!t)return!1;if(!e)return!0;for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}var s=e.bind,o=e.merge,a=(e.serialize,e.promiseLabel),l=e.applyHook,u=t["default"];i.prototype={name:null,handler:null,params:null,context:null,factory:null,initialize:function(){},log:function(e,t){e.log&&e.log(this.name+": "+t)},promiseLabel:function(e){return a("'"+this.name+"' "+e)},getUnresolved:function(){return this},serialize:function(){return this.params||{}},resolve:function(e,t){var n=s(this,this.checkForAbort,e),i=s(this,this.runBeforeModelHook,t),r=s(this,this.getModel,t),o=s(this,this.runAfterModelHook,t),a=s(this,this.becomeResolved,t);return u.resolve(void 0,this.promiseLabel("Start handler")).then(n,null,this.promiseLabel("Check for abort")).then(i,null,this.promiseLabel("Before model")).then(n,null,this.promiseLabel("Check if aborted during 'beforeModel' hook")).then(r,null,this.promiseLabel("Model")).then(n,null,this.promiseLabel("Check if aborted in 'model' hook")).then(o,null,this.promiseLabel("After model")).then(n,null,this.promiseLabel("Check if aborted in 'afterModel' hook")).then(a,null,this.promiseLabel("Become resolved"))},runBeforeModelHook:function(e){return e.trigger&&e.trigger(!0,"willResolveModel",e,this.handler),this.runSharedModelHook(e,"beforeModel",[])},runAfterModelHook:function(e,t){var n=this.name;return this.stashResolvedModel(e,t),this.runSharedModelHook(e,"afterModel",[t]).then(function(){return e.resolvedModels[n]},null,this.promiseLabel("Ignore fulfillment value and return model value"))},runSharedModelHook:function(e,t,n){this.log(e,"calling "+t+" hook"),this.queryParams&&n.push(this.queryParams),n.push(e);var i=l(this.handler,t,n);return i&&i.isTransition&&(i=null),u.resolve(i,this.promiseLabel("Resolve value returned from one of the model hooks"))},getModel:null,checkForAbort:function(e,t){return u.resolve(e(),this.promiseLabel("Check for abort")).then(function(){return t},null,this.promiseLabel("Ignore fulfillment value and continue"))},stashResolvedModel:function(e,t){e.resolvedModels=e.resolvedModels||{},e.resolvedModels[this.name]=t},becomeResolved:function(e,t){var n=this.serialize(t);return e&&(this.stashResolvedModel(e,t),e.params=e.params||{},e.params[this.name]=n),this.factory("resolved",{context:t,name:this.name,handler:this.handler,params:n})},shouldSupercede:function(e){if(!e)return!0;var t=e.context===this.context;return e.name!==this.name||this.hasOwnProperty("context")&&!t||this.hasOwnProperty("params")&&!r(this.params,e.params)}},n["default"]=i}),e("router/handler-info/factory",["router/handler-info/resolved-handler-info","router/handler-info/unresolved-handler-info-by-object","router/handler-info/unresolved-handler-info-by-param","exports"],function(e,t,n,i){"use strict";function r(e,t){var n=r.klasses[e],i=new n(t||{});return i.factory=r,i}var s=e["default"],o=t["default"],a=n["default"];r.klasses={resolved:s,param:a,object:o},i["default"]=r}),e("router/handler-info/resolved-handler-info",["../handler-info","router/utils","rsvp/promise","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=t.subclass,o=(t.promiseLabel,n["default"]),a=s(r,{resolve:function(e,t){return t&&t.resolvedModels&&(t.resolvedModels[this.name]=this.context),o.resolve(this,this.promiseLabel("Resolve"))},getUnresolved:function(){return this.factory("param",{name:this.name,handler:this.handler,params:this.params})},isResolved:!0});i["default"]=a}),e("router/handler-info/unresolved-handler-info-by-object",["../handler-info","router/utils","rsvp/promise","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=(t.merge,t.subclass),o=(t.promiseLabel,t.isParam),a=n["default"],l=s(r,{getModel:function(e){return this.log(e,this.name+": resolving provided model"),a.resolve(this.context)},initialize:function(e){this.names=e.names||[],this.context=e.context},serialize:function(e){var t=e||this.context,n=this.names,i=this.handler,r={};if(o(t))return r[n[0]]=t,r;if(i.serialize)return i.serialize(t,n);if(1===n.length){var s=n[0];return r[s]=/_id$/.test(s)?t.id:t,r}}});i["default"]=l}),e("router/handler-info/unresolved-handler-info-by-param",["../handler-info","router/utils","exports"],function(e,t,n){"use strict";var i=e["default"],r=t.resolveHook,s=t.merge,o=t.subclass,a=(t.promiseLabel,o(i,{initialize:function(e){this.params=e.params||{}},getModel:function(e){var t=this.params;e&&e.queryParams&&(t={},s(t,this.params),t.queryParams=e.queryParams);var n=this.handler,i=r(n,"deserialize")||r(n,"model");return this.runSharedModelHook(e,i,[t])}}));n["default"]=a}),e("router/router",["route-recognizer","rsvp/promise","./utils","./transition-state","./transition","./transition-intent/named-transition-intent","./transition-intent/url-transition-intent","./handler-info","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(){this.recognizer=new w,this.reset()}function c(e,t){var n,i=!!this.activeTransition,r=i?this.activeTransition.state:this.state,s=e.applyToState(r,this.recognizer,this.getHandler,t),o=P(r.queryParams,s.queryParams);return v(s.handlerInfos,r.handlerInfos)?o&&(n=this.queryParamsTransition(o,i,r,s))?n:new L(this):t?void d(this,s):(n=new L(this,e,s),this.activeTransition&&this.activeTransition.abort(),this.activeTransition=n,n.promise=n.promise.then(function(e){return _(n,e.state)},null,A("Settle transition promise when transition is finalized")),i||b(this,s,n),h(this,s,o),n)}function h(e,t,n){n&&(e._changedQueryParams=n.all,x(e,t.handlerInfos,!0,["queryParamsDidChange",n.changed,n.all,n.removed]),e._changedQueryParams=null)}function d(e,t,n){var i=m(e.state,t);E(i.exited,function(e){var t=e.handler;delete t.context,M(t,"reset",!0,n),M(t,"exit",n)});var r=e.oldState=e.state;e.state=t;var s=e.currentHandlerInfos=i.unchanged.slice();try{E(i.reset,function(e){var t=e.handler;M(t,"reset",!1,n)}),E(i.updatedContext,function(e){return p(s,e,!1,n)}),E(i.entered,function(e){return p(s,e,!0,n)})}catch(o){throw e.state=r,e.currentHandlerInfos=r.handlerInfos,o}e.state.queryParams=y(e,s,t.queryParams,n)}function p(e,t,n,i){var r=t.handler,s=t.context;if(n&&M(r,"enter",i),i&&i.isAborted)throw new R;if(r.context=s,M(r,"contextDidChange"),M(r,"setup",s,i),i&&i.isAborted)throw new R;return e.push(t),!0}function m(e,t){var n,i,r,s=e.handlerInfos,o=t.handlerInfos,a={updatedContext:[],exited:[],entered:[],unchanged:[]},l=!1;for(i=0,r=o.length;r>i;i++){var u=s[i],c=o[i];u&&u.handler===c.handler||(n=!0),n?(a.entered.push(c),u&&a.exited.unshift(u)):l||u.context!==c.context?(l=!0,a.updatedContext.push(c)):a.unchanged.push(u)}for(i=o.length,r=s.length;r>i;i++)a.exited.unshift(s[i]);return a.reset=a.updatedContext.slice(),a.reset.reverse(),a}function f(e,t){var n=e.urlMethod;if(n){for(var i=e.router,r=t.handlerInfos,s=r[r.length-1].name,o={},a=r.length-1;a>=0;--a){var l=r[a];k(o,l.params),l.handler.inaccessibleByURL&&(n=null)}if(n){o.queryParams=e._visibleQueryParams||t.queryParams;var u=i.recognizer.generate(s,o);"replace"===n?i.replaceURL(u):i.updateURL(u)}}}function _(e,t){try{S(e.router,e.sequence,"Resolved all models on destination route; finalizing transition.");{var n=e.router,i=t.handlerInfos;e.sequence}return d(n,t,e),e.isAborted?(n.state.handlerInfos=n.currentHandlerInfos,C.reject(D(e))):(f(e,t,e.intent.url),e.isActive=!1,n.activeTransition=null,x(n,n.currentHandlerInfos,!0,["didTransition"]),n.didTransition&&n.didTransition(n.currentHandlerInfos),S(n,e.sequence,"TRANSITION COMPLETE."),i[i.length-1].handler)}catch(r){if(!(r instanceof R)){var s=e.state.handlerInfos;e.trigger(!0,"error",r,e,s[s.length-1].handler),e.abort()}throw r}}function g(e,t,n){var i=t[0]||"/",r=t[t.length-1],s={};r&&r.hasOwnProperty("queryParams")&&(s=F.call(t).queryParams);var o;if(0===t.length){S(e,"Updating query params");var a=e.state.handlerInfos;o=new B({name:a[a.length-1].name,contexts:[],queryParams:s})}else"/"===i.charAt(0)?(S(e,"Attempting URL transition to "+i),o=new N({url:i})):(S(e,"Attempting transition to "+i),o=new B({name:t[0],contexts:I.call(t,1),queryParams:s}));return e.transitionByIntent(o,n)}function v(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;i>n;++n)if(e[n]!==t[n])return!1;return!0}function y(e,t,n,i){for(var r in n)n.hasOwnProperty(r)&&null===n[r]&&delete n[r];var s=[];x(e,t,!0,["finalizeQueryParamChange",n,s,i]),i&&(i._visibleQueryParams={});for(var o={},a=0,l=s.length;l>a;++a){var u=s[a];o[u.key]=u.value,i&&u.visible!==!1&&(i._visibleQueryParams[u.key]=u.value)}return o}function b(e,t,n){var i,r,s,o,a,l,u=e.state.handlerInfos,c=[],h=null;for(o=u.length,s=0;o>s;s++){if(a=u[s],l=t.handlerInfos[s],!l||a.name!==l.name){h=s;break}l.isResolved||c.push(a)}null!==h&&(i=u.slice(h,o),r=function(e){for(var t=0,n=i.length;n>t;t++)if(i[t].name===e)return!0;return!1},e._triggerWillLeave(i,n,r)),c.length>0&&e._triggerWillChangeContext(c,n),x(e,u,!0,["willTransition",n])}var w=e["default"],C=t["default"],x=n.trigger,S=n.log,I=n.slice,E=n.forEach,k=n.merge,T=(n.serialize,n.extractQueryParams),P=n.getChangelist,A=n.promiseLabel,M=n.callHook,O=i["default"],D=r.logAbort,L=r.Transition,R=r.TransitionAborted,B=s["default"],N=o["default"],F=(a.ResolvedHandlerInfo,Array.prototype.pop);u.prototype={map:function(e){this.recognizer.delegate=this.delegate,this.recognizer.map(e,function(e,t){for(var n=t.length-1,i=!0;n>=0&&i;--n){var r=t[n];e.add(t,{as:r.handler}),i="/"===r.path||""===r.path||".index"===r.handler.slice(-6)}})},hasRoute:function(e){return this.recognizer.hasRoute(e)},queryParamsTransition:function(e,t,n,i){var r=this;if(h(this,i,e),!t&&this.activeTransition)return this.activeTransition;var s=new L(this);return s.queryParamsOnly=!0,n.queryParams=y(this,i.handlerInfos,i.queryParams,s),s.promise=s.promise.then(function(e){return f(s,n,!0),r.didTransition&&r.didTransition(r.currentHandlerInfos),e},null,A("Transition complete")),s},transitionByIntent:function(e){try{return c.apply(this,arguments)}catch(t){return new L(this,e,null,t)}},reset:function(){this.state&&E(this.state.handlerInfos.slice().reverse(),function(e){var t=e.handler;M(t,"exit")}),this.state=new O,this.currentHandlerInfos=null},activeTransition:null,handleURL:function(e){var t=I.call(arguments);return"/"!==e.charAt(0)&&(t[0]="/"+e),g(this,t).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(e){this.updateURL(e)},transitionTo:function(){return g(this,arguments)},intermediateTransitionTo:function(){return g(this,arguments,!0)},refresh:function(e){for(var t=this.activeTransition?this.activeTransition.state:this.state,n=t.handlerInfos,i={},r=0,s=n.length;s>r;++r){var o=n[r];i[o.name]=o.params||{}}S(this,"Starting a refresh transition");var a=new B({name:n[n.length-1].name,pivotHandler:e||n[0].handler,contexts:[],queryParams:this._changedQueryParams||t.queryParams||{}});return this.transitionByIntent(a,!1)},replaceWith:function(){return g(this,arguments).method("replace")},generate:function(e){for(var t=T(I.call(arguments,1)),n=t[0],i=t[1],r=new B({name:e,contexts:n}),s=r.applyToState(this.state,this.recognizer,this.getHandler),o={},a=0,l=s.handlerInfos.length;l>a;++a){var u=s.handlerInfos[a],c=u.serialize();k(o,c)}return o.queryParams=i,this.recognizer.generate(e,o)},applyIntent:function(e,t){var n=new B({name:e,contexts:t}),i=this.activeTransition&&this.activeTransition.state||this.state;return n.applyToState(i,this.recognizer,this.getHandler)},isActiveIntent:function(e,t,n){var i,r,s=this.state.handlerInfos;if(!s.length)return!1;var o=s[s.length-1].name,a=this.recognizer.handlersFor(o),l=0;for(r=a.length;r>l&&(i=s[l],i.name!==e);++l);if(l===a.length)return!1;var u=new O;u.handlerInfos=s.slice(0,l+1),a=a.slice(0,l+1);var c=new B({name:o,contexts:t}),h=c.applyToHandlers(u,a,this.getHandler,o,!0,!0),d=v(h.handlerInfos,u.handlerInfos);if(!n||!d)return d;var p={};k(p,n);var m=this.state.queryParams;for(var f in m)m.hasOwnProperty(f)&&p.hasOwnProperty(f)&&(p[f]=m[f]);return d&&!P(p,n)},isActive:function(e){var t=T(I.call(arguments,1));return this.isActiveIntent(e,t[0],t[1])},trigger:function(){var e=I.call(arguments);x(this,this.currentHandlerInfos,!1,e)},log:null,_willChangeContextEvent:"willChangeContext",_triggerWillChangeContext:function(e,t){x(this,e,!0,[this._willChangeContextEvent,t])},_triggerWillLeave:function(e,t,n){x(this,e,!0,["willLeave",t,n])}},l["default"]=u}),e("router/transition-intent",["./utils","exports"],function(e,t){"use strict";function n(e){this.initialize(e),this.data=this.data||{}}e.merge;n.prototype={initialize:null,applyToState:null},t["default"]=n}),e("router/transition-intent/named-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","exports"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t["default"],a=n["default"],l=i.isParam,u=i.extractQueryParams,c=i.merge,h=i.subclass;r["default"]=h(s,{name:null,pivotHandler:null,contexts:null,queryParams:null,initialize:function(e){this.name=e.name,this.pivotHandler=e.pivotHandler,this.contexts=e.contexts||[],this.queryParams=e.queryParams},applyToState:function(e,t,n,i){var r=u([this.name].concat(this.contexts)),s=r[0],o=(r[1],t.handlersFor(s[0])),a=o[o.length-1].handler;return this.applyToHandlers(e,o,n,a,i)},applyToHandlers:function(e,t,n,i,r,s){var a,l,u=new o,h=this.contexts.slice(0),d=t.length;if(this.pivotHandler)for(a=0,l=t.length;l>a;++a)if(n(t[a].handler)===this.pivotHandler){d=a;break}!this.pivotHandler;for(a=t.length-1;a>=0;--a){var p=t[a],m=p.handler,f=n(m),_=e.handlerInfos[a],g=null;if(g=p.names.length>0?a>=d?this.createParamHandlerInfo(m,f,p.names,h,_):this.getHandlerInfoForDynamicSegment(m,f,p.names,h,_,i,a):this.createParamHandlerInfo(m,f,p.names,h,_),s){g=g.becomeResolved(null,g.context);var v=_&&_.context;p.names.length>0&&g.context===v&&(g.params=_&&_.params),g.context=v}var y=_;(a>=d||g.shouldSupercede(_))&&(d=Math.min(a,d),y=g),r&&!s&&(y=y.becomeResolved(null,y.context)),u.handlerInfos.unshift(y)}if(h.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+i);return r||this.invalidateChildren(u.handlerInfos,d),c(u.queryParams,this.queryParams||{}),u},invalidateChildren:function(e,t){for(var n=t,i=e.length;i>n;++n){{e[n]}e[n]=e[n].getUnresolved()}},getHandlerInfoForDynamicSegment:function(e,t,n,i,r,s,o){{var u;n.length}if(i.length>0){if(u=i[i.length-1],l(u))return this.createParamHandlerInfo(e,t,n,i,r);i.pop()}else{if(r&&r.name===e)return r;if(!this.preTransitionState)return r;var c=this.preTransitionState.handlerInfos[o];u=c&&c.context}return a("object",{name:e,handler:t,context:u,names:n})},createParamHandlerInfo:function(e,t,n,i,r){for(var s={},o=n.length;o--;){var u=r&&e===r.name&&r.params||{},c=i[i.length-1],h=n[o];if(l(c))s[h]=""+i.pop();else{if(!u.hasOwnProperty(h))throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+e);s[h]=u[h]}}return a("param",{name:e,handler:t,params:s})}})}),e("router/transition-intent/url-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","exports"],function(e,t,n,i,r){"use strict";function s(e){this.message=e||"UnrecognizedURLError",this.name="UnrecognizedURLError"}var o=e["default"],a=t["default"],l=n["default"],u=(i.oCreate,i.merge),c=i.subclass;r["default"]=c(o,{url:null,initialize:function(e){this.url=e.url},applyToState:function(e,t,n){var i,r,o=new a,c=t.recognize(this.url);if(!c)throw new s(this.url);var h=!1;for(i=0,r=c.length;r>i;++i){var d=c[i],p=d.handler,m=n(p);if(m.inaccessibleByURL)throw new s(this.url);var f=l("param",{name:p,handler:m,params:d.params}),_=e.handlerInfos[i];h||f.shouldSupercede(_)?(h=!0,o.handlerInfos[i]=f):o.handlerInfos[i]=_}return u(o.queryParams,c.queryParams),o}})}),e("router/transition-state",["./handler-info","./utils","rsvp/promise","exports"],function(e,t,n,i){"use strict";function r(){this.handlerInfos=[],this.queryParams={},this.params={}}var s=(e.ResolvedHandlerInfo,t.forEach),o=t.promiseLabel,a=t.callHook,l=n["default"];r.prototype={handlerInfos:null,queryParams:null,params:null,promiseLabel:function(e){var t="";return s(this.handlerInfos,function(e){""!==t&&(t+="."),t+=e.name}),o("'"+t+"': "+e)},resolve:function(e,t){function n(){return l.resolve(e(),c.promiseLabel("Check if should continue"))["catch"](function(e){return h=!0,l.reject(e)},c.promiseLabel("Handle abort"))}function i(e){var n=c.handlerInfos,i=t.resolveIndex>=n.length?n.length-1:t.resolveIndex;return l.reject({error:e,handlerWithError:c.handlerInfos[i].handler,wasAborted:h,state:c})}function r(e){var i=c.handlerInfos[t.resolveIndex].isResolved;if(c.handlerInfos[t.resolveIndex++]=e,!i){var r=e.handler;a(r,"redirect",e.context,t)}return n().then(o,null,c.promiseLabel("Resolve handler"))}function o(){if(t.resolveIndex===c.handlerInfos.length)return{error:null,state:c};var e=c.handlerInfos[t.resolveIndex];return e.resolve(n,t).then(r,null,c.promiseLabel("Proceed"))}var u=this.params;s(this.handlerInfos,function(e){u[e.name]=e.params||{}}),t=t||{},t.resolveIndex=0;var c=this,h=!1;return l.resolve(null,this.promiseLabel("Start transition")).then(o,null,this.promiseLabel("Resolve handler"))["catch"](i,this.promiseLabel("Handle error"))}},i["default"]=r}),e("router/transition",["rsvp/promise","./handler-info","./utils","exports"],function(e,t,n,i){"use strict";function r(e,t,n,i){function o(){return l.isAborted?a.reject(void 0,h("Transition aborted - reject")):void 0}var l=this;if(this.state=n||e.state,this.intent=t,this.router=e,this.data=this.intent&&this.intent.data||{},this.resolvedModels={},this.queryParams={},i)return void(this.promise=a.reject(i));if(n){this.params=n.params,this.queryParams=n.queryParams,this.handlerInfos=n.handlerInfos;var u=n.handlerInfos.length;u&&(this.targetName=n.handlerInfos[u-1].name);for(var c=0;u>c;++c){var d=n.handlerInfos[c];if(!d.isResolved)break;this.pivotHandler=d.handler}this.sequence=r.currentSequence++,this.promise=n.resolve(o,this)["catch"](function(e){return e.wasAborted||l.isAborted?a.reject(s(l)):(l.trigger("error",e.error,l,e.handlerWithError),l.abort(),a.reject(e.error))},h("Handle Abort"))}else this.promise=a.resolve(this.state),this.params={}}function s(e){return c(e.router,e.sequence,"detected abort."),new o}function o(e){this.message=e||"TransitionAborted",this.name="TransitionAborted"}var a=e["default"],l=(t.ResolvedHandlerInfo,n.trigger),u=n.slice,c=n.log,h=n.promiseLabel;r.currentSequence=0,r.prototype={targetName:null,urlMethod:"update",intent:null,params:null,pivotHandler:null,resolveIndex:0,handlerInfos:null,resolvedModels:null,isActive:!0,state:null,queryParamsOnly:!1,isTransition:!0,isExiting:function(e){for(var t=this.handlerInfos,n=0,i=t.length;i>n;++n){var r=t[n];if(r.name===e||r.handler===e)return!1}return!0},promise:null,data:null,then:function(e,t,n){return this.promise.then(e,t,n)},"catch":function(e,t){return this.promise["catch"](e,t)},"finally":function(e,t){return this.promise["finally"](e,t)},abort:function(){return this.isAborted?this:(c(this.router,this.sequence,this.targetName+": transition was aborted"),this.intent.preTransitionState=this.router.state,this.isAborted=!0,this.isActive=!1,this.router.activeTransition=null,this)},retry:function(){return this.abort(),this.router.transitionByIntent(this.intent,!1)},method:function(e){return this.urlMethod=e,this},trigger:function(e){var t=u.call(arguments);"boolean"==typeof e?t.shift():e=!1,l(this.router,this.state.handlerInfos.slice(0,this.resolveIndex+1),e,t)},followRedirects:function(){var e=this.router;return this.promise["catch"](function(t){return e.activeTransition?e.activeTransition.followRedirects():a.reject(t)})},toString:function(){return"Transition (sequence "+this.sequence+")"},log:function(e){c(this.router,this.sequence,e)}},r.prototype.send=r.prototype.trigger,i.Transition=r,i.logAbort=s,i.TransitionAborted=o}),e("router/utils",["exports"],function(e){"use strict";function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function n(e){var t,n,i=e&&e.length;return i&&i>0&&e[i-1]&&e[i-1].hasOwnProperty("queryParams")?(n=e[i-1].queryParams,t=_.call(e,0,i-1),[t,n]):[e,null]}function i(e){for(var t in e)if("number"==typeof e[t])e[t]=""+e[t];else if(g(e[t]))for(var n=0,i=e[t].length;i>n;n++)e[t][n]=""+e[t][n]}function r(e,t,n){e.log&&(3===arguments.length?e.log("Transition #"+t+": "+n):(n=t,e.log(n)))}function s(e,t){var n=arguments;return function(i){var r=_.call(n,2);return r.push(i),t.apply(e,r)}}function o(e){return"string"==typeof e||e instanceof String||"number"==typeof e||e instanceof Number}function a(e,t){for(var n=0,i=e.length;i>n&&!1!==t(e[n]);n++);}function l(e,t,n,i){if(e.triggerEvent)return void e.triggerEvent(t,n,i);var r=i.shift();if(!t){if(n)return;throw new Error("Could not trigger event '"+r+"'. There are no active handlers")}for(var s=!1,o=t.length-1;o>=0;o--){var a=t[o],l=a.handler;if(l.events&&l.events[r]){if(l.events[r].apply(l,i)!==!0)return;s=!0}}if(!s&&!n)throw new Error("Nothing handled the event '"+r+"'.")}function u(e,n){var r,s={all:{},changed:{},removed:{}};t(s.all,n);var o=!1;i(e),i(n);for(r in e)e.hasOwnProperty(r)&&(n.hasOwnProperty(r)||(o=!0,s.removed[r]=e[r]));for(r in n)if(n.hasOwnProperty(r))if(g(e[r])&&g(n[r]))if(e[r].length!==n[r].length)s.changed[r]=n[r],o=!0;else for(var a=0,l=e[r].length;l>a;a++)e[r][a]!==n[r][a]&&(s.changed[r]=n[r],o=!0);else e[r]!==n[r]&&(s.changed[r]=n[r],o=!0);return o&&s}function c(e){return"Router: "+e}function h(e,n){function i(t){e.call(this,t||{})}return i.prototype=v(e.prototype),t(i.prototype,n),i}function d(e,t){if(e){var n="_"+t;return e[n]&&n||e[t]&&t}}function p(e,t){var n=_.call(arguments,2);return m(e,t,n)}function m(e,t,n){var i=d(e,t);return i?e[i].apply(e,n):void 0}var f,_=Array.prototype.slice;f=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var g=f;e.isArray=g;var v=Object.create||function(e){function t(){}return t.prototype=e,new t};e.oCreate=v,e.extractQueryParams=n,e.log=r,e.bind=s,e.forEach=a,e.trigger=l,e.getChangelist=u,e.promiseLabel=c,e.subclass=h,e.merge=t,e.slice=_,e.isParam=o,e.coerceQueryParamsToString=i,e.callHook=p,e.resolveHook=d,e.applyHook=m}),e("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all-settled","./rsvp/race","./rsvp/hash","./rsvp/hash-settled","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/filter","./rsvp/asap","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_){"use strict";function g(e,t){A.async(e,t)}function v(){A.on.apply(A,arguments)}function y(){A.off.apply(A,arguments)}var b=e["default"],w=t["default"],C=n["default"],x=i["default"],S=r["default"],I=s["default"],E=o["default"],k=a["default"],T=l["default"],P=u["default"],A=c.config,M=c.configure,O=h["default"],D=d["default"],L=p["default"],R=m["default"],B=f["default"];A.async=B;var N=D;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var F=window.__PROMISE_INSTRUMENTATION__;M("instrument",!0);for(var z in F)F.hasOwnProperty(z)&&v(z,F[z])}_.cast=N,_.Promise=b,_.EventTarget=w,_.all=x,_.allSettled=S,_.race=I,_.hash=E,_.hashSettled=k,_.rethrow=T,_.defer=P,_.denodeify=C,_.configure=M,_.on=v,_.off=y,_.resolve=D,_.reject=L,_.async=g,_.map=O,_.filter=R}),e("rsvp.umd",["./rsvp"],function(t){"use strict";var n=t.Promise,i=t.allSettled,r=t.hash,s=t.hashSettled,o=t.denodeify,a=t.on,l=t.off,u=t.map,c=t.filter,h=t.resolve,d=t.reject,p=t.rethrow,m=t.all,f=t.defer,_=t.EventTarget,g=t.configure,v=t.race,y=t.async,b={race:v,Promise:n,allSettled:i,hash:r,hashSettled:s,denodeify:o,on:a,off:l,map:u,filter:c,resolve:h,reject:d,all:m,rethrow:p,defer:f,EventTarget:_,configure:g,async:y};"function"==typeof e&&e.amd?e(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:"undefined"!=typeof this&&(this.RSVP=b)}),e("rsvp/-internal",["./utils","./instrument","./config","exports"],function(e,t,n,i){"use strict";function r(){return new TypeError("A promises callback cannot return that same promise.")}function s(){}function o(e){try{return e.then}catch(t){return T.error=t,T}}function a(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function l(e,t,n){S.async(function(e){var i=!1,r=a(n,t,function(n){i||(i=!0,t!==n?h(e,n):p(e,n))},function(t){i||(i=!0,m(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,m(e,r))},e)}function u(e,t){t._state===E?p(e,t._result):e._state===k?m(e,t._result):f(t,void 0,function(n){t!==n?h(e,n):p(e,n)},function(t){m(e,t)})}function c(e,t){if(t.constructor===e.constructor)u(e,t);else{var n=o(t);n===T?m(e,T.error):void 0===n?p(e,t):C(n)?l(e,t,n):p(e,t)}}function h(e,t){e===t?p(e,t):w(t)?c(e,t):p(e,t)}function d(e){e._onerror&&e._onerror(e._result),_(e)}function p(e,t){e._state===I&&(e._result=t,e._state=E,0===e._subscribers.length?S.instrument&&x("fulfilled",e):S.async(_,e))}function m(e,t){e._state===I&&(e._state=k,e._result=t,S.async(d,e))}function f(e,t,n,i){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+E]=n,r[s+k]=i,0===s&&e._state&&S.async(_,e)}function _(e){var t=e._subscribers,n=e._state;if(S.instrument&&x(n===E?"fulfilled":"rejected",e),0!==t.length){for(var i,r,s=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?y(n,i,r,s):r(s);e._subscribers.length=0}}function g(){this.error=null}function v(e,t){try{return e(t)}catch(n){return P.error=n,P}}function y(e,t,n,i){var s,o,a,l,u=C(n);if(u){if(s=v(n,i),s===P?(l=!0,o=s.error,s=null):a=!0,t===s)return void m(t,r())}else s=i,a=!0;t._state!==I||(u&&a?h(t,s):l?m(t,o):e===E?p(t,s):e===k&&m(t,s))}function b(e,t){try{t(function(t){h(e,t)},function(t){m(e,t)})}catch(n){m(e,n)}}var w=e.objectOrFunction,C=e.isFunction,x=t["default"],S=n.config,I=void 0,E=1,k=2,T=new g,P=new g;i.noop=s,i.resolve=h,i.reject=m,i.fulfill=p,i.subscribe=f,i.publish=_,i.publishRejection=d,i.initializePromise=b,i.invokeCallback=y,i.FULFILLED=E,i.REJECTED=k,i.PENDING=I}),e("rsvp/all-settled",["./enumerator","./promise","./utils","exports"],function(e,t,n,i){"use strict";function r(e,t,n){this._superConstructor(e,t,!1,n)}var s=e["default"],o=e.makeSettledResult,a=t["default"],l=n.o_create;r.prototype=l(s.prototype),r.prototype._superConstructor=s,r.prototype._makeResult=o,r.prototype._validationError=function(){return new Error("allSettled must be called with an array")},i["default"]=function(e,t){return new r(a,e,t).promise}}),e("rsvp/all",["./promise","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){return n.all(e,t)}}),e("rsvp/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(a)}}function i(){return function(){vertxNext(a)}}function r(){var e=0,t=new p(a),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=a,function(){e.port2.postMessage(0)}}function o(){return function(){setTimeout(a,1)}}function a(){for(var e=0;u>e;e+=2){var t=f[e],n=f[e+1];t(n),f[e]=void 0,f[e+1]=void 0}u=0}function l(){try{{var e=n("vertx");e.runOnLoop||e.runOnContext}return i()}catch(t){return o()}}var u=0;e["default"]=function(e,t){f[u]=e,f[u+1]=t,u+=2,2===u&&c()};var c,h="undefined"!=typeof window?window:void 0,d=h||{},p=d.MutationObserver||d.WebKitMutationObserver,m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,f=new Array(1e3);c="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():p?r():m?s():void 0===h&&"function"==typeof n?l():o()}),e("rsvp/config",["./events","exports"],function(e,t){"use strict";function n(e,t){return"onerror"===e?void r.on("error",t):2!==arguments.length?r[e]:void(r[e]=t)}var i=e["default"],r={instrument:!1};i.mixin(r),t.config=r,t.configure=n}),e("rsvp/defer",["./promise","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e){var t={};return t.promise=new n(function(e,n){t.resolve=e,t.reject=n},e),t}}),e("rsvp/enumerator",["./utils","./-internal","exports"],function(e,t,n){"use strict";function i(e,t,n){return e===h?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function r(e,t,n,i){this._instanceConstructor=e,this.promise=new e(a,i),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&u(this.promise,this._result))):l(this.promise,this._validationError())}var s=e.isArray,o=e.isMaybeThenable,a=t.noop,l=t.reject,u=t.fulfill,c=t.subscribe,h=t.FULFILLED,d=t.REJECTED,p=t.PENDING;n.makeSettledResult=i,r.prototype._validateInput=function(e){return s(e)},r.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},r.prototype._init=function(){this._result=new Array(this.length)},n["default"]=r,r.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,i=0;t._state===p&&e>i;i++)this._eachEntry(n[i],i)},r.prototype._eachEntry=function(e,t){var n=this._instanceConstructor;o(e)?e.constructor===n&&e._state!==p?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(h,t,e))},r.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===p&&(this._remaining--,this._abortOnReject&&e===d?l(i,n):this._result[t]=this._makeResult(e,t,n)),0===this._remaining&&u(i,this._result)},r.prototype._makeResult=function(e,t,n){return n},r.prototype._willSettleAt=function(e,t){var n=this;c(e,void 0,function(e){n._settledAt(h,t,e)},function(e){n._settledAt(d,t,e)})}}),e("rsvp/events",["exports"],function(e){"use strict";function t(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function n(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}e["default"]={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e
},on:function(e,i){var r,s=n(this);r=s[e],r||(r=s[e]=[]),-1===t(r,i)&&r.push(i)},off:function(e,i){var r,s,o=n(this);return i?(r=o[e],s=t(r,i),void(-1!==s&&r.splice(s,1))):void(o[e]=[])},trigger:function(e,t){var i,r,s=n(this);if(i=s[e])for(var o=0;o<i.length;o++)(r=i[o])(t)}}}),e("rsvp/filter",["./promise","./utils","exports"],function(e,t,n){"use strict";var i=e["default"],r=t.isFunction;n["default"]=function(e,t,n){return i.all(e,n).then(function(e){if(!r(t))throw new TypeError("You must pass a function as filter's second argument.");for(var s=e.length,o=new Array(s),a=0;s>a;a++)o[a]=t(e[a]);return i.all(o,n).then(function(t){for(var n=new Array(s),i=0,r=0;s>r;r++)t[r]&&(n[i]=e[r],i++);return n.length=i,n})})}}),e("rsvp/hash-settled",["./promise","./enumerator","./promise-hash","./utils","exports"],function(e,t,n,i,r){"use strict";function s(e,t,n){this._superConstructor(e,t,!1,n)}var o=e["default"],a=t.makeSettledResult,l=n["default"],u=t["default"],c=i.o_create;s.prototype=c(l.prototype),s.prototype._superConstructor=u,s.prototype._makeResult=a,s.prototype._validationError=function(){return new Error("hashSettled must be called with an object")},r["default"]=function(e,t){return new s(o,e,t).promise}}),e("rsvp/hash",["./promise","./promise-hash","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n["default"]=function(e,t){return new r(i,e,t).promise}}),e("rsvp/instrument",["./config","./utils","exports"],function(e,t,n){"use strict";function i(){setTimeout(function(){for(var e,t=0;t<o.length;t++){e=o[t];var n=e.payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),r.trigger(e.name,e.payload)}o.length=0},50)}var r=e.config,s=t.now,o=[];n["default"]=function(e,t,n){1===o.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:n&&n._id,label:t._label,timeStamp:s(),error:r["instrument-with-stack"]?new Error(t._label):null}})&&i()}}),e("rsvp/map",["./promise","./utils","exports"],function(e,t,n){"use strict";var i=e["default"],r=t.isFunction;n["default"]=function(e,t,n){return i.all(e,n).then(function(e){if(!r(t))throw new TypeError("You must pass a function as map's second argument.");for(var s=e.length,o=new Array(s),a=0;s>a;a++)o[a]=t(e[a]);return i.all(o,n)})}}),e("rsvp/node",["./promise","./-internal","./utils","exports"],function(e,t,n,i){"use strict";function r(){this.value=void 0}function s(e){try{return e.then}catch(t){return v.value=t,v}}function o(e,t,n){try{e.apply(t,n)}catch(i){return v.value=i,v}}function a(e,t){for(var n,i,r={},s=e.length,o=new Array(s),a=0;s>a;a++)o[a]=e[a];for(i=0;i<t.length;i++)n=t[i],r[n]=o[i+1];return r}function l(e){for(var t=e.length,n=new Array(t-1),i=1;t>i;i++)n[i-1]=e[i];return n}function u(e,t){return{then:function(n,i){return e.call(t,n,i)}}}function c(e,t,n,i){var r=o(n,i,t);return r===v&&_(e,r.value),e}function h(e,t,n,i){return p.all(t).then(function(t){var r=o(n,i,t);return r===v&&_(e,r.value),e})}function d(e){return e&&"object"==typeof e?e.constructor===p?!0:s(e):!1}var p=e["default"],m=t.noop,f=t.resolve,_=t.reject,g=n.isArray,v=new r,y=new r;i["default"]=function(e,t){var n=function(){for(var n,i=this,r=arguments.length,s=new Array(r+1),o=!1,v=0;r>v;++v){if(n=arguments[v],!o){if(o=d(n),o===y){var b=new p(m);return _(b,y.value),b}o&&o!==!0&&(n=u(o,n))}s[v]=n}var w=new p(m);return s[r]=function(e,n){e?_(w,e):void 0===t?f(w,n):t===!0?f(w,l(arguments)):g(t)?f(w,a(arguments,t)):f(w,n)},o?h(w,s,e,i):c(w,s,e,i)};return n.__proto__=e,n}}),e("rsvp/promise-hash",["./enumerator","./-internal","./utils","exports"],function(e,t,n,i){"use strict";function r(e,t,n){this._superConstructor(e,t,!0,n)}var s=e["default"],o=t.PENDING,a=n.o_create;i["default"]=r,r.prototype=a(s.prototype),r.prototype._superConstructor=s,r.prototype._init=function(){this._result={}},r.prototype._validateInput=function(e){return e&&"object"==typeof e},r.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},r.prototype._enumerate=function(){var e=this.promise,t=this._input,n=[];for(var i in t)e._state===o&&t.hasOwnProperty(i)&&n.push({position:i,entry:t[i]});var r=n.length;this._remaining=r;for(var s,a=0;e._state===o&&r>a;a++)s=n[a],this._eachEntry(s.entry,s.position)}}),e("rsvp/promise",["./config","./instrument","./utils","./-internal","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function c(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function h(e,t){this._id=k++,this._label=t,this._state=void 0,this._result=void 0,this._subscribers=[],d.instrument&&p("created",this),_!==e&&(m(e)||u(),this instanceof h||c(),v(this,e))}var d=e.config,p=t["default"],m=n.isFunction,f=n.now,_=i.noop,g=i.subscribe,v=i.initializePromise,y=i.invokeCallback,b=i.FULFILLED,w=i.REJECTED,C=r["default"],x=s["default"],S=o["default"],I=a["default"],E="rsvp_"+f()+"-",k=0;l["default"]=h,h.cast=S,h.all=C,h.race=x,h.resolve=S,h.reject=I,h.prototype={constructor:h,_guidKey:E,_onerror:function(e){d.trigger("error",e)},then:function(e,t,n){var i=this,r=i._state;if(r===b&&!e||r===w&&!t)return d.instrument&&p("chained",this,this),this;i._onerror=null;var s=new this.constructor(_,n),o=i._result;if(d.instrument&&p("chained",i,s),r){var a=arguments[r-1];d.async(function(){y(r,s,a,o)})}else g(i,s,e,t);return s},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}}}),e("rsvp/promise/all",["../enumerator","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){return new n(this,e,!0,t).promise}}),e("rsvp/promise/race",["../utils","../-internal","exports"],function(e,t,n){"use strict";var i=e.isArray,r=t.noop,s=t.resolve,o=t.reject,a=t.subscribe,l=t.PENDING;n["default"]=function(e,t){function n(e){s(h,e)}function u(e){o(h,e)}var c=this,h=new c(r,t);if(!i(e))return o(h,new TypeError("You must pass an array to race.")),h;for(var d=e.length,p=0;h._state===l&&d>p;p++)a(c.resolve(e[p]),void 0,n,u);return h}}),e("rsvp/promise/reject",["../-internal","exports"],function(e,t){"use strict";var n=e.noop,i=e.reject;t["default"]=function(e,t){var r=this,s=new r(n,t);return i(s,e),s}}),e("rsvp/promise/resolve",["../-internal","exports"],function(e,t){"use strict";var n=e.noop,i=e.resolve;t["default"]=function(e,t){var r=this;if(e&&"object"==typeof e&&e.constructor===r)return e;var s=new r(n,t);return i(s,e),s}}),e("rsvp/race",["./promise","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){return n.race(e,t)}}),e("rsvp/reject",["./promise","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){return n.reject(e,t)}}),e("rsvp/resolve",["./promise","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e,t){return n.resolve(e,t)}}),e("rsvp/rethrow",["exports"],function(e){"use strict";e["default"]=function(e){throw setTimeout(function(){throw e}),e}}),e("rsvp/utils",["exports"],function(e){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function r(){}e.objectOrFunction=t,e.isFunction=n,e.isMaybeThenable=i;var s;s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var o=s;e.isArray=o;var a=Date.now||function(){return(new Date).getTime()};e.now=a;var l=Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return r.prototype=e,new r};e.o_create=l}),t("ember")}(),function(){define("ember",[],function(){"use strict";return{"default":Ember}}),define("ember-data",[],function(){"use strict";return{"default":DS}})}(),define("jquery",[],function(){"use strict";return{"default":jQuery}}),function(){define("ember/resolver",[],function(){"use strict";function e(e){return{create:function(t){return"function"==typeof e.extend?e.extend(t):e}}}function t(){var e=Object.create(null);return e._dict=null,delete e._dict,e}function n(e){if(e.parsedName===!0)return e;var t,n=e.split("@");2===n.length&&("view"===n[0].split(":")[0]&&(n[0]=n[0].split(":")[1],n[1]="view:"+n[1]),t=n[0]);var i=n[n.length-1].split(":"),r=i[0],a=i[1],l=a,u=o(this,"namespace"),c=u;return{parsedName:!0,fullName:e,prefix:t||this.prefix({type:r}),type:r,fullNameWithoutType:a,name:l,root:c,resolveMethodName:"resolve"+s(r)}}function i(e,t){var n=Ember.String.underscore(t);if(t!==n&&e[t]&&e[n])throw new TypeError("Ambiguous module names: `"+t+"` and `"+n+"`");if(e[t])return t;if(e[n])return n;var i=t.replace(/\/-([^\/]*)$/,"/_$1");return e[i]?(Ember.deprecate('Modules should not contain underscores. Attempted to lookup "'+t+'" which was not found. Please rename "'+i+'" to "'+t+'" instead.',!1),i):t}function r(t){Ember.assert("`modulePrefix` must be defined",this.namespace.modulePrefix);var n=this.findModuleName(t);if(n){var i=require(n,null,null,!0);if(i&&i["default"]&&(i=i["default"]),void 0===i)throw new Error(" Expected to find: '"+t.fullName+"' within '"+n+"' but got 'undefined'. Did you forget to `export default` within '"+n+"'?");return this.shouldWrapInClassFactory(i,t)&&(i=e(i)),i}return this._super(t)}if("undefined"==typeof requirejs.entries&&(requirejs.entries=requirejs._eak_seen),!Object.create||Object.create(null).hasOwnProperty)throw new Error("This browser does not support Object.create(null), please polyfil with es5-sham: http://git.io/yBU2rg");var s=(Ember.String.underscore,Ember.String.classify),o=Ember.get,a=Ember.DefaultResolver.extend({resolveOther:r,resolveTemplate:r,pluralizedTypes:null,makeToString:function(e,t){return""+this.namespace.modulePrefix+"@"+t+":"},parseName:n,shouldWrapInClassFactory:function(){return!1},init:function(){this._super(),this.moduleBasedResolver=!0,this._normalizeCache=t(),this.pluralizedTypes=this.pluralizedTypes||t(),this.pluralizedTypes.config||(this.pluralizedTypes.config="config")},normalize:function(e){return this._normalizeCache[e]||(this._normalizeCache[e]=this._normalize(e))},_normalize:function(e){var t=e.split(":");return t.length>1?t[0]+":"+Ember.String.dasherize(t[1].replace(/\./g,"/")):e},pluralize:function(e){return this.pluralizedTypes[e]||(this.pluralizedTypes[e]=e+"s")},podBasedLookupWithPrefix:function(e,t){var n=t.fullNameWithoutType;return"template"===t.type&&(n=n.replace(/^components\//,"")),e+"/"+n+"/"+t.type},podBasedModuleName:function(e){var t=this.namespace.podModulePrefix||this.namespace.modulePrefix;return this.podBasedLookupWithPrefix(t,e)},podBasedComponentsInSubdir:function(e){var t=this.namespace.podModulePrefix||this.namespace.modulePrefix;return t+="/components","component"===e.type||e.fullNameWithoutType.match(/^components/)?this.podBasedLookupWithPrefix(t,e):void 0},mainModuleName:function(e){var t=e.prefix+"/"+e.type;return"main"===e.fullNameWithoutType?t:void 0},defaultModuleName:function(e){return e.prefix+"/"+this.pluralize(e.type)+"/"+e.fullNameWithoutType},prefix:function(e){var t=this.namespace.modulePrefix;return this.namespace[e.type+"Prefix"]&&(t=this.namespace[e.type+"Prefix"]),t},moduleNameLookupPatterns:Ember.computed(function(){return Ember.A([this.podBasedModuleName,this.podBasedComponentsInSubdir,this.mainModuleName,this.defaultModuleName])}),findModuleName:function(e,t){var n,r=this;return this.get("moduleNameLookupPatterns").find(function(s){var o=requirejs.entries,a=s.call(r,e);return a&&(a=i(o,a)),a&&o[a]&&(t||r._logLookup(!0,e,a),n=a),t||r._logLookup(n,e,a),n}),n},lookupDescription:function(e){var t=this.parseName(e),n=this.findModuleName(t,!0);return n},_logLookup:function(e,t,n){if(Ember.ENV.LOG_MODULE_RESOLVER||t.root.LOG_RESOLVER){var i,r;i=e?"[]":"[ ]",r=t.fullName.length>60?".":new Array(60-t.fullName.length).join("."),n||(n=this.lookupDescription(t)),Ember.Logger.info(i,t.fullName,r,n)}}});return a.moduleBasedResolver=!0,a["default"]=a,a}),define("resolver",["ember/resolver"],function(e){return Ember.deprecate('Importing/requiring Ember Resolver as "resolver" is deprecated, please use "ember/resolver" instead'),e})}(),function(){define("ember/container-debug-adapter",[],function(){"use strict";if("undefined"==typeof Ember.ContainerDebugAdapter)return null;var e=Ember.ContainerDebugAdapter.extend({canCatalogEntriesByType:function(){return!0},catalogEntriesByType:function(e){var t=requirejs.entries,n=Ember.A();for(var i in t)t.hasOwnProperty(i)&&-1!==i.indexOf(e)&&n.push(i.split(e+"s/").pop());return n}});return e["default"]=e,e})}(),function(){!function(){"use strict";Ember.Application.initializer({name:"container-debug-adapter",initialize:function(e){{var t=require("ember/container-debug-adapter");require("ember/resolver")}e.register("container-debug-adapter:main",t)}})}()}(),function(){define("ember/load-initializers",[],function(){"use strict";return{"default":function(e,t){var n=new RegExp("^"+t+"/initializers");Ember.keys(requirejs._eak_seen).filter(function(e){return n.test(e)}).forEach(function(t){var n=require(t,null,null,!0);if(!n)throw new Error(t+" must export an initializer.");e.initializer(n["default"])})}}})}(),define("ic-ajax",["ember","exports"],function(e,t){"use strict";function n(){return i.apply(null,arguments).then(function(e){return e.response},null,"ic-ajax: unwrap raw ajax response")}function i(){return o(a.apply(null,arguments))}function r(e,t){t.response&&(t.response=JSON.parse(JSON.stringify(t.response))),h[e]=t}function s(e){return h&&h[e]}function o(e){return new c.RSVP.Promise(function(t,n){var i=s(e.url);return i?"success"===i.textStatus||null==i.textStatus?c.run.later(null,t,i):c.run.later(null,n,i):(e.success=l(t),e.error=u(n),void c.$.ajax(e))},"ic-ajax: "+(e.type||"GET")+" to "+e.url)}function a(){var e={};if(1===arguments.length?"string"==typeof arguments[0]?e.url=arguments[0]:e=arguments[0]:2===arguments.length&&(e=arguments[1],e.url=arguments[0]),e.success||e.error)throw new c.Error("ajax should use promises, received 'success' or 'error' callback");return e}function l(e){return function(t,n,i){c.run(null,e,{response:t,textStatus:n,jqXHR:i})}}function u(e){return function(t,n,i){c.run(null,e,{jqXHR:t,textStatus:n,errorThrown:i})}}var c=e["default"]||e;t.request=n,t["default"]=n,t.raw=i;var h={};t.__fixtures__=h,t.defineFixture=r,t.lookupFixture=s}),function(e){var t,n,i,r;!function(){function e(e,t,n){for(var r,o,a=e.length,l=new Array(a),u=0,c=a;c>u;u++)r=e[u],"exports"===r?o=l[u]=n:l[u]=i(s(r,t));return{deps:l,exports:o}}function s(e,t){if("."!==e.charAt(0))return e;var n,i=e.split("/"),r=t.split("/");n=1===r.length?r:r.slice(0,-1);for(var s=0,o=i.length;o>s;s++){var a=i[s];if(".."===a)n.pop();else{if("."===a)continue;n.push(a)}}return n.join("/")}var o;o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var a={},l={},u={},c=!1;t=function(e,t,n){o(t)||(n=t,t=[]),a[e]={deps:t,callback:n}},r=i=n=function(t){if(u[t]!==c&&l.hasOwnProperty(t))return l[t];if(!a[t])throw new Error("Could not find module "+t);var n,i,r=a[t],s=!1;l[t]={};try{n=e(r.deps,t,l[t]),i=r.callback.apply(this,n.deps),s=!0}finally{s||(u[t]=c)}return n.exports?l[t]:l[t]=i},r.entries=r._eak_seen=a,r.clear=function(){r.entries=r._eak_seen=a={},l=u={}}}(),t("activemodel-adapter",["activemodel-adapter/system","exports"],function(e,t){"use strict";var n=e.ActiveModelAdapter,i=e.ActiveModelSerializer;t.ActiveModelAdapter=n,t.ActiveModelSerializer=i}),t("activemodel-adapter/setup-container",["ember-data/system/container_proxy","activemodel-adapter/system/active_model_serializer","activemodel-adapter/system/active_model_adapter","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=t["default"],o=n["default"];i["default"]=function(e){var t=new r(e);t.registerDeprecations([{deprecated:"serializer:_ams",valid:"serializer:-active-model"},{deprecated:"adapter:_ams",valid:"adapter:-active-model"}]),e.register("serializer:-active-model",s),e.register("adapter:-active-model",o)}}),t("activemodel-adapter/system",["activemodel-adapter/system/active_model_adapter","activemodel-adapter/system/active_model_serializer","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n.ActiveModelAdapter=i,n.ActiveModelSerializer=r}),t("activemodel-adapter/system/active_model_adapter",["ember-data/adapters","ember-data/system/adapter","ember-inflector","exports"],function(e,t,n,i){"use strict";var r=e.RESTAdapter,s=t.InvalidError,o=n.pluralize,a=Ember.String.decamelize,l=Ember.String.underscore,u=r.extend({defaultSerializer:"-active-model",pathForType:function(e){var t=a(e),n=l(t);return o(n)},ajaxError:function(e){var t=this._super(e);return e&&422===e.status?new s(Ember.$.parseJSON(e.responseText)):t}});i["default"]=u}),t("activemodel-adapter/system/active_model_serializer",["ember-inflector","ember-data/serializers/rest_serializer","exports"],function(e,t,n){"use strict";var i=e.singularize,r=t["default"],s=Ember.get,o=Ember.EnumerableUtils.forEach,a=Ember.String.camelize,l=Ember.String.capitalize,u=Ember.String.decamelize,c=Ember.String.underscore,h=r.extend({keyForAttribute:function(e){return u(e)},keyForRelationship:function(e,t){var n=u(e);return"belongsTo"===t?n+"_id":"hasMany"===t?i(n)+"_ids":n},serializeHasMany:Ember.K,serializeIntoHash:function(e,t,n,i){var r=c(u(t.typeKey));e[r]=this.serialize(n,i)},serializePolymorphicType:function(e,t,n){var i=n.key,r=s(e,i),o=c(i+"_type");t[o]=Ember.isNone(r)?null:l(a(r.constructor.typeKey))},normalize:function(e,t,n){return this.normalizeLinks(t),this._super(e,t,n)},normalizeLinks:function(e){if(e.links){var t=e.links;for(var n in t){var i=a(n);i!==n&&(t[i]=t[n],delete t[n])}}},normalizeRelationships:function(e,t){this.keyForRelationship&&e.eachRelationship(function(e,n){var i,r;if(n.options.polymorphic){if(i=this.keyForAttribute(e),r=t[i],r&&r.type)r.type=this.typeForRoot(r.type);else if(r&&"hasMany"===n.kind){var s=this;o(r,function(e){e.type=s.typeForRoot(e.type)})}}else{if(i=this.keyForRelationship(e,n.kind),!t.hasOwnProperty(i))return;r=t[i]}t[e]=r,e!==i&&delete t[i]},this)}});n["default"]=h}),t("ember-data",["ember-data/system/create","ember-data/core","ember-data/ext/date","ember-data/system/promise_proxies","ember-data/system/store","ember-data/system/model","ember-data/system/adapter","ember-data/system/debug","ember-data/system/record_arrays","ember-data/system/record_array_manager","ember-data/adapters","ember-data/serializers/json_serializer","ember-data/serializers/rest_serializer","ember-inflector","ember-data/serializers/embedded_records_mixin","activemodel-adapter","ember-data/transforms","ember-data/system/relationships","ember-data/ember-initializer","ember-data/setup-container","ember-data/system/container_proxy","ember-data/system/relationships/relationship","exports"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C){"use strict";Ember.RSVP.Promise.cast=Ember.RSVP.Promise.cast||Ember.RSVP.resolve;var x=t["default"],S=i.PromiseArray,I=i.PromiseObject,E=r.Store,k=s.Model,T=s.Errors,P=s.RootState,A=s.attr,M=o.InvalidError,O=o.Adapter,D=a["default"],L=l.RecordArray,R=l.FilteredRecordArray,B=l.AdapterPopulatedRecordArray,N=l.ManyArray,F=u["default"],z=c.RESTAdapter,H=c.FixtureAdapter,W=h["default"],V=d["default"],j=m["default"],U=f.ActiveModelAdapter,q=f.ActiveModelSerializer,K=_.Transform,J=_.DateTransform,G=_.NumberTransform,$=_.StringTransform,Y=_.BooleanTransform,Z=g.hasMany,X=g.belongsTo,Q=y["default"],et=b["default"],tt=w.Relationship;x.Store=E,x.PromiseArray=S,x.PromiseObject=I,x.Model=k,x.RootState=P,x.attr=A,x.Errors=T,x.Adapter=O,x.InvalidError=M,x.DebugAdapter=D,x.RecordArray=L,x.FilteredRecordArray=R,x.AdapterPopulatedRecordArray=B,x.ManyArray=N,x.RecordArrayManager=F,x.RESTAdapter=z,x.FixtureAdapter=H,x.RESTSerializer=V,x.JSONSerializer=W,x.Transform=K,x.DateTransform=J,x.StringTransform=$,x.NumberTransform=G,x.BooleanTransform=Y,x.ActiveModelAdapter=U,x.ActiveModelSerializer=q,x.EmbeddedRecordsMixin=j,x.belongsTo=X,x.hasMany=Z,x.Relationship=tt,x.ContainerProxy=et,x._setupContainer=Q,Ember.lookup.DS=x,C["default"]=x}),t("ember-data/adapters",["ember-data/adapters/fixture_adapter","ember-data/adapters/rest_adapter","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n.RESTAdapter=r,n.FixtureAdapter=i}),t("ember-data/adapters/fixture_adapter",["ember-data/system/adapter","exports"],function(e,t){"use strict";var n=Ember.get,i=Ember.String.fmt,r=Ember.EnumerableUtils.indexOf,s=0,o=e["default"];t["default"]=o.extend({serializer:null,simulateRemoteResponse:!0,latency:50,fixturesForType:function(e){if(e.FIXTURES){var t=Ember.A(e.FIXTURES);return t.map(function(e){var t=typeof e.id;if("number"!==t&&"string"!==t)throw new Error(i("the id property must be defined as a number or string for fixture %@",[e]));return e.id=e.id+"",e})}return null},queryFixtures:function(){},updateFixtures:function(e,t){e.FIXTURES||(e.FIXTURES=[]);var n=e.FIXTURES;this.deleteLoadedFixture(e,t),n.push(t)},mockJSON:function(e,t,n){return e.serializerFor(t).serialize(n,{includeId:!0})},generateIdForRecord:function(){return"fixture-"+s++},find:function(e,t,n){var i,r=this.fixturesForType(t);return r&&(i=Ember.A(r).findBy("id",n)),i?this.simulateRemoteCall(function(){return i},this):void 0},findMany:function(e,t,n){var i=this.fixturesForType(t);return i&&(i=i.filter(function(e){return-1!==r(n,e.id)})),i?this.simulateRemoteCall(function(){return i},this):void 0},findAll:function(e,t){var n=this.fixturesForType(t);return this.simulateRemoteCall(function(){return n},this)},findQuery:function(e,t,n){var i=this.fixturesForType(t);return i=this.queryFixtures(i,n,t),i?this.simulateRemoteCall(function(){return i},this):void 0},createRecord:function(e,t,n){var i=this.mockJSON(e,t,n);return this.updateFixtures(t,i),this.simulateRemoteCall(function(){return i},this)},updateRecord:function(e,t,n){var i=this.mockJSON(e,t,n);return this.updateFixtures(t,i),this.simulateRemoteCall(function(){return i},this)},deleteRecord:function(e,t,n){return this.deleteLoadedFixture(t,n),this.simulateRemoteCall(function(){return null})},deleteLoadedFixture:function(e,t){var n=this.findExistingFixture(e,t);if(n){var i=r(e.FIXTURES,n);return e.FIXTURES.splice(i,1),!0}},findExistingFixture:function(e,t){var i=this.fixturesForType(e),r=n(t,"id");return this.findFixtureById(i,r)},findFixtureById:function(e,t){return Ember.A(e).find(function(e){return""+n(e,"id")==""+t?!0:!1})},simulateRemoteCall:function(e,t){var i=this;return new Ember.RSVP.Promise(function(r){var s=Ember.copy(e.call(t),!0);n(i,"simulateRemoteResponse")?Ember.run.later(function(){r(s)},n(i,"latency")):Ember.run.schedule("actions",null,function(){r(s)})},"DS: FixtureAdapter#simulateRemoteCall")}})}),t("ember-data/adapters/rest_adapter",["ember-data/system/adapter","ember-data/system/map","exports"],function(e,t,n){"use strict";function i(e,t){return"function"!=typeof String.prototype.endsWith?-1!==e.indexOf(t,e.length-t.length):e.endsWith(t)}var r=e.Adapter,s=e.InvalidError,o=t.MapWithDefault,a=Ember.get,l=Ember.ArrayPolyfills.forEach;n["default"]=r.extend({defaultSerializer:"-rest",coalesceFindRequests:!1,find:function(e,t,n,i){return this.ajax(this.buildURL(t.typeKey,n,i),"GET")},findAll:function(e,t,n){var i;return n&&(i={since:n}),this.ajax(this.buildURL(t.typeKey),"GET",{data:i})},findQuery:function(e,t,n){return this.ajax(this.buildURL(t.typeKey),"GET",{data:n})},findMany:function(e,t,n,i){return this.ajax(this.buildURL(t.typeKey,n,i),"GET",{data:{ids:n}})},findHasMany:function(e,t,n){var i=a(this,"host"),r=a(t,"id"),s=t.constructor.typeKey;return i&&"/"===n.charAt(0)&&"/"!==n.charAt(1)&&(n=i+n),this.ajax(this.urlPrefix(n,this.buildURL(s,r)),"GET")},findBelongsTo:function(e,t,n){var i=a(t,"id"),r=t.constructor.typeKey;return this.ajax(this.urlPrefix(n,this.buildURL(r,i)),"GET")},createRecord:function(e,t,n){var i={},r=e.serializerFor(t.typeKey);return r.serializeIntoHash(i,t,n,{includeId:!0}),this.ajax(this.buildURL(t.typeKey,null,n),"POST",{data:i})},updateRecord:function(e,t,n){var i={},r=e.serializerFor(t.typeKey);r.serializeIntoHash(i,t,n);var s=a(n,"id");return this.ajax(this.buildURL(t.typeKey,s,n),"PUT",{data:i})},deleteRecord:function(e,t,n){var i=a(n,"id");return this.ajax(this.buildURL(t.typeKey,i,n),"DELETE")},buildURL:function(e,t){var n=[],i=a(this,"host"),r=this.urlPrefix();return e&&n.push(this.pathForType(e)),t&&!Ember.isArray(t)&&n.push(encodeURIComponent(t)),r&&n.unshift(r),n=n.join("/"),!i&&n&&(n="/"+n),n},urlPrefix:function(e,t){var n=a(this,"host"),i=a(this,"namespace"),r=[];return e?"/"===e.charAt(0)?n&&(e=e.slice(1),r.push(n)):/^http(s)?:\/\//.test(e)||r.push(t):(n&&r.push(n),i&&r.push(i)),e&&r.push(e),r.join("/")},_stripIDFromURL:function(e,t){var n=t.constructor,r=this.buildURL(n.typeKey,t.get("id"),t),s=r.split("/"),o=s[s.length-1],a=t.get("id");return o===a?s[s.length-1]="":i(o,"?id="+a)&&(s[s.length-1]=o.substring(0,o.length-a.length-1)),s.join("/")},maxUrlLength:2048,groupRecordsForFindMany:function(e,t){function n(t,n,i){var s=r._stripIDFromURL(e,t[0]),o=0,a=[[]];return l.call(t,function(e){var t=encodeURIComponent(e.get("id")).length+i;s.length+o+t>=n&&(o=0,a.push([])),o+=t;var r=a.length-1;a[r].push(e)}),a}var i=o.create({defaultValue:function(){return[]}}),r=this,s=this.maxUrlLength;l.call(t,function(t){var n=r._stripIDFromURL(e,t);i.get(n).push(t)});var a=[];return i.forEach(function(e){var t="&ids%5B%5D=".length,i=n(e,s,t);l.call(i,function(e){a.push(e)})}),a},pathForType:function(e){var t=Ember.String.camelize(e);return Ember.String.pluralize(t)},ajaxError:function(e){return e&&"object"==typeof e&&(e.then=null),e},ajaxSuccess:function(e,t){return t},ajax:function(e,t,n){var i=this;return new Ember.RSVP.Promise(function(r,o){var a=i.ajaxOptions(e,t,n);a.success=function(e,t,n){e=i.ajaxSuccess(n,e),e instanceof s?Ember.run(null,o,e):Ember.run(null,r,e)},a.error=function(e){Ember.run(null,o,i.ajaxError(e,e.responseText))},Ember.$.ajax(a)},"DS: RESTAdapter#ajax "+t+" to "+e)},ajaxOptions:function(e,t,n){var i=n||{};i.url=e,i.type=t,i.dataType="json",i.context=this,i.data&&"GET"!==t&&(i.contentType="application/json; charset=utf-8",i.data=JSON.stringify(i.data));var r=a(this,"headers");return void 0!==r&&(i.beforeSend=function(e){l.call(Ember.keys(r),function(t){e.setRequestHeader(t,r[t])})}),i}})}),t("ember-data/core",["exports"],function(e){"use strict";var t;"undefined"==typeof t&&(t=Ember.Namespace.create({VERSION:"1.0.0-beta.12"}),Ember.libraries&&Ember.libraries.registerCoreLibrary("Ember Data",t.VERSION)),e["default"]=t}),t("ember-data/ember-initializer",["ember-data/setup-container"],function(e){"use strict";var t=e["default"],n=Ember.K;Ember.onLoad("Ember.Application",function(e){e.initializer({name:"ember-data",initialize:t}),e.initializer({name:"store",after:"ember-data",initialize:n}),e.initializer({name:"activeModelAdapter",before:"store",initialize:n}),e.initializer({name:"transforms",before:"store",initialize:n}),e.initializer({name:"data-adapter",before:"store",initialize:n}),e.initializer({name:"injectStore",before:"store",initialize:n})})}),t("ember-data/ext/date",[],function(){"use strict";Ember.Date=Ember.Date||{};var e=Date.parse,t=[1,4,5,6,7,10,11];Ember.Date.parse=function(n){var i,r,s=0;if(r=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(n)){for(var o,a=0;o=t[a];++a)r[o]=+r[o]||0;r[2]=(+r[2]||1)-1,r[3]=+r[3]||1,"Z"!==r[8]&&void 0!==r[9]&&(s=60*r[10]+r[11],"+"===r[9]&&(s=0-s)),i=Date.UTC(r[1],r[2],r[3],r[4],r[5]+s,r[6],r[7])}else i=e?e(n):0/0;return i},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Date)&&(Date.parse=Ember.Date.parse)}),t("ember-data/initializers/data_adapter",["ember-data/system/debug/debug_adapter","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=function(e){e.register("data-adapter:main",n)}}),t("ember-data/initializers/store",["ember-data/serializers","ember-data/adapters","ember-data/system/container_proxy","ember-data/system/store","exports"],function(e,t,n,i,r){"use strict";var s=e.JSONSerializer,o=e.RESTSerializer,a=t.RESTAdapter,l=n["default"],u=i["default"];r["default"]=function(e,t){e.register("store:main",e.lookupFactory("store:application")||t&&t.Store||u);var n=new l(e);n.registerDeprecations([{deprecated:"serializer:_default",valid:"serializer:-default"},{deprecated:"serializer:_rest",valid:"serializer:-rest"},{deprecated:"adapter:_rest",valid:"adapter:-rest"}]),e.register("serializer:-default",s),e.register("serializer:-rest",o),e.register("adapter:-rest",a),e.lookup("store:main")}}),t("ember-data/initializers/store_injections",["exports"],function(e){"use strict";e["default"]=function(e){e.injection("controller","store","store:main"),e.injection("route","store","store:main"),e.injection("serializer","store","store:main"),e.injection("data-adapter","store","store:main")}}),t("ember-data/initializers/transforms",["ember-data/transforms","exports"],function(e,t){"use strict";var n=e.BooleanTransform,i=e.DateTransform,r=e.StringTransform,s=e.NumberTransform;t["default"]=function(e){e.register("transform:boolean",n),e.register("transform:date",i),e.register("transform:number",s),e.register("transform:string",r)}}),t("ember-data/serializers",["ember-data/serializers/json_serializer","ember-data/serializers/rest_serializer","exports"],function(e,t,n){"use strict";var i=e["default"],r=t["default"];n.JSONSerializer=i,n.RESTSerializer=r}),t("ember-data/serializers/embedded_records_mixin",["exports"],function(e){"use strict";function t(e,t,s,o){return s.eachRelationship(function(s,a){if(e.hasDeserializeRecordsOption(s)){var l=t.modelFor(a.type.typeKey);"hasMany"===a.kind&&(a.options.polymorphic?i(t,s,o):n(t,s,l,o)),"belongsTo"===a.kind&&r(t,s,l,o)}}),o}function n(e,t,n,i){if(!i[t])return i;var r=[],s=e.serializerFor(n.typeKey);return o(i[t],function(t){var i=s.normalize(n,t,null);e.push(n,i),r.push(i.id)}),i[t]=r,i}function i(e,t,n){if(!n[t])return n;var i=[];return o(n[t],function(t){var n=t.type,r=e.serializerFor(n),o=e.modelFor(n),a=s(r,"primaryKey"),l=r.normalize(o,t,null);e.push(o,l),i.push({id:l[a],type:n})}),n[t]=i,n}function r(e,t,n,i){if(!i[t])return i;var r=e.serializerFor(n.typeKey),s=r.normalize(n,i[t],null);return e.push(n,s),i[t]=s.id,i}var s=Ember.get,o=Ember.EnumerableUtils.forEach,a=Ember.String.camelize,l=Ember.Mixin.create({normalize:function(e,n,i){var r=this._super(e,n,i);return t(this,this.store,e,r)},keyForRelationship:function(e,t){return this.hasDeserializeRecordsOption(e)?this.keyForAttribute(e):this._super(e,t)||e},serializeBelongsTo:function(e,t,n){var i=n.key;if(this.noSerializeOptionSpecified(i))return void this._super(e,t,n);var r,o=this.hasSerializeIdsOption(i),a=this.hasSerializeRecordsOption(i),l=e.get(i);o?(r=this.keyForRelationship(i,n.kind),t[r]=l?s(l,"id"):null):a&&(r=this.keyForAttribute(i),l?(t[r]=l.serialize({includeId:!0}),this.removeEmbeddedForeignKey(e,l,n,t[r])):t[r]=null)},serializeHasMany:function(e,t,n){var i=n.key;if(this.noSerializeOptionSpecified(i))return void this._super(e,t,n);var r,o=this.hasSerializeIdsOption(i),a=this.hasSerializeRecordsOption(i);o?(r=this.keyForRelationship(i,n.kind),t[r]=s(e,i).mapBy("id")):a&&(r=this.keyForAttribute(i),t[r]=s(e,i).map(function(t){var i=t.serialize({includeId:!0});return this.removeEmbeddedForeignKey(e,t,n,i),i},this))},removeEmbeddedForeignKey:function(e,t,n,i){if("hasMany"!==n.kind&&"belongsTo"===n.kind){var r=e.constructor.inverseFor(n.key);
if(r){var s=r.name,o=this.store.serializerFor(t.constructor),a=o.keyForRelationship(s,r.kind);a&&delete i[a]}}},hasEmbeddedAlwaysOption:function(e){var t=this.attrsOption(e);return t&&"always"===t.embedded},hasSerializeRecordsOption:function(e){var t=this.hasEmbeddedAlwaysOption(e),n=this.attrsOption(e);return t||n&&"records"===n.serialize},hasSerializeIdsOption:function(e){var t=this.attrsOption(e);return t&&("ids"===t.serialize||"id"===t.serialize)},noSerializeOptionSpecified:function(e){var t=this.attrsOption(e);return!(t&&(t.serialize||t.embedded))},hasDeserializeRecordsOption:function(e){var t=this.hasEmbeddedAlwaysOption(e),n=this.attrsOption(e);return t||n&&"records"===n.deserialize},attrsOption:function(e){var t=this.get("attrs");return t&&(t[a(e)]||t[e])}});e["default"]=l}),t("ember-data/serializers/json_serializer",["exports"],function(e){"use strict";var t=Ember.get,n=Ember.isNone,i=Ember.ArrayPolyfills.map,r=Ember.merge;e["default"]=Ember.Object.extend({primaryKey:"id",applyTransforms:function(e,t){return e.eachTransformedAttribute(function(e,n){if(t.hasOwnProperty(e)){var i=this.transformFor(n);t[e]=i.deserialize(t[e])}},this),t},normalize:function(e,t){return t?(this.normalizeId(t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t),this.normalizeUsingDeclaredMapping(e,t),this.applyTransforms(e,t),t):t},normalizePayload:function(e){return e},normalizeAttributes:function(e,t){var n;this.keyForAttribute&&e.eachAttribute(function(e){n=this.keyForAttribute(e),e!==n&&t.hasOwnProperty(n)&&(t[e]=t[n],delete t[n])},this)},normalizeRelationships:function(e,t){var n;this.keyForRelationship&&e.eachRelationship(function(e,i){n=this.keyForRelationship(e,i.kind),e!==n&&t.hasOwnProperty(n)&&(t[e]=t[n],delete t[n])},this)},normalizeUsingDeclaredMapping:function(e,n){var i,r,s=t(this,"attrs");if(s)for(r in s)i=this._getMappedKey(r),n.hasOwnProperty(i)&&i!==r&&(n[r]=n[i],delete n[i])},normalizeId:function(e){var n=t(this,"primaryKey");"id"!==n&&(e.id=e[n],delete e[n])},normalizeErrors:function(e,t){this.normalizeId(t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t)},_getMappedKey:function(e){var n,i=t(this,"attrs");return i&&i[e]&&(n=i[e],n.key&&(n=n.key),"string"==typeof n&&(e=n)),e},_canSerialize:function(e){var n=t(this,"attrs");return!n||!n[e]||n[e].serialize!==!1},serialize:function(e,n){var i={};if(n&&n.includeId){var r=t(e,"id");r&&(i[t(this,"primaryKey")]=r)}return e.eachAttribute(function(t,n){this.serializeAttribute(e,i,t,n)},this),e.eachRelationship(function(t,n){"belongsTo"===n.kind?this.serializeBelongsTo(e,i,n):"hasMany"===n.kind&&this.serializeHasMany(e,i,n)},this),i},serializeIntoHash:function(e,t,n,i){r(e,this.serialize(n,i))},serializeAttribute:function(e,n,i,r){var s=r.type;if(this._canSerialize(i)){var o=t(e,i);if(s){var a=this.transformFor(s);o=a.serialize(o)}var l=this._getMappedKey(i);l===i&&this.keyForAttribute&&(l=this.keyForAttribute(i)),n[l]=o}},serializeBelongsTo:function(e,i,r){var s=r.key;if(this._canSerialize(s)){var o=t(e,s),a=this._getMappedKey(s);a===s&&this.keyForRelationship&&(a=this.keyForRelationship(s,"belongsTo")),i[a]=n(o)||n(t(o,"id"))?null:t(o,"id"),r.options.polymorphic&&this.serializePolymorphicType(e,i,r)}},serializeHasMany:function(e,n,i){var r=i.key;if(this._canSerialize(r)){var s;s=this._getMappedKey(r),s===r&&this.keyForRelationship&&(s=this.keyForRelationship(r,"hasMany"));var o=e.constructor.determineRelationshipType(i);("manyToNone"===o||"manyToMany"===o)&&(n[s]=t(e,r).mapBy("id"))}},serializePolymorphicType:Ember.K,extract:function(e,t,n,i,r){this.extractMeta(e,t,n);var s="extract"+r.charAt(0).toUpperCase()+r.substr(1);return this[s](e,t,n,i,r)},extractFindAll:function(e,t,n,i,r){return this.extractArray(e,t,n,i,r)},extractFindQuery:function(e,t,n,i,r){return this.extractArray(e,t,n,i,r)},extractFindMany:function(e,t,n,i,r){return this.extractArray(e,t,n,i,r)},extractFindHasMany:function(e,t,n,i,r){return this.extractArray(e,t,n,i,r)},extractCreateRecord:function(e,t,n,i,r){return this.extractSave(e,t,n,i,r)},extractUpdateRecord:function(e,t,n,i,r){return this.extractSave(e,t,n,i,r)},extractDeleteRecord:function(e,t,n,i,r){return this.extractSave(e,t,n,i,r)},extractFind:function(e,t,n,i,r){return this.extractSingle(e,t,n,i,r)},extractFindBelongsTo:function(e,t,n,i,r){return this.extractSingle(e,t,n,i,r)},extractSave:function(e,t,n,i,r){return this.extractSingle(e,t,n,i,r)},extractSingle:function(e,t,n){return n=this.normalizePayload(n),this.normalize(t,n)},extractArray:function(e,t,n){var r=this.normalizePayload(n),s=this;return i.call(r,function(e){return s.normalize(t,e)})},extractMeta:function(e,t,n){n&&n.meta&&(e.metaForType(t,n.meta),delete n.meta)},extractErrors:function(e,t,n){return n&&"object"==typeof n&&n.errors&&(n=n.errors,this.normalizeErrors(t,n)),n},keyForAttribute:function(e){return e},keyForRelationship:function(e){return e},transformFor:function(e){var t=this.container.lookup("transform:"+e);return t}})}),t("ember-data/serializers/rest_serializer",["ember-data/serializers/json_serializer","ember-inflector/system/string","exports"],function(e,t,n){"use strict";function i(e){return null==e?null:e+""}var r=e["default"],s=Ember.get,o=Ember.ArrayPolyfills.forEach,a=Ember.ArrayPolyfills.map,l=Ember.String.camelize,u=t.singularize,c=r.extend({normalize:function(e,t,n){return this.normalizeId(t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t),this.normalizeUsingDeclaredMapping(e,t),this.normalizeHash&&this.normalizeHash[n]&&this.normalizeHash[n](t),this.applyTransforms(e,t),t},extractSingle:function(e,t,n,r){var s,a=this.normalizePayload(n),l=t.typeKey;for(var u in a){var c=this.typeForRoot(u);if(e.modelFactoryFor(c)){var h=e.modelFor(c),d=h.typeKey===l,p=a[u];null!==p&&(d&&"array"!==Ember.typeOf(p)?s=this.normalize(t,p,u):o.call(p,function(t){var n=this.typeForRoot(u),o=e.modelFor(n),a=e.serializerFor(o);t=a.normalize(o,t,u);var l=d&&!r&&!s,c=d&&i(t.id)===r;l||c?s=t:e.push(n,t)},this))}}return s},extractArray:function(e,t,n){var i,r=this.normalizePayload(n),s=t.typeKey;for(var o in r){var l=o,u=!1;"_"===o.charAt(0)&&(u=!0,l=o.substr(1));var c=this.typeForRoot(l);if(e.modelFactoryFor(c)){var h=e.modelFor(c),d=e.serializerFor(h),p=!u&&h.typeKey===s,m=a.call(r[o],function(e){return d.normalize(h,e,o)},this);p?i=m:e.pushMany(c,m)}}return i},pushPayload:function(e,t){var n=this.normalizePayload(t);for(var i in n){var r=this.typeForRoot(i);if(e.modelFactoryFor(r,i)){var s=e.modelFor(r),o=e.serializerFor(s),l=a.call(Ember.makeArray(n[i]),function(e){return o.normalize(s,e,i)},this);e.pushMany(r,l)}}},typeForRoot:function(e){return l(u(e))},serialize:function(){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,n,i){e[t.typeKey]=this.serialize(n,i)},serializePolymorphicType:function(e,t,n){var i=n.key,r=s(e,i);i=this.keyForAttribute?this.keyForAttribute(i):i,t[i+"Type"]=Ember.isNone(r)?null:Ember.String.camelize(r.constructor.typeKey)}});n["default"]=c}),t("ember-data/setup-container",["ember-data/initializers/store","ember-data/initializers/transforms","ember-data/initializers/store_injections","ember-data/initializers/data_adapter","activemodel-adapter/setup-container","exports"],function(e,t,n,i,r,s){"use strict";var o=e["default"],a=t["default"],l=n["default"],u=i["default"],c=r["default"];s["default"]=function(e,t){u(e,t),a(e,t),l(e,t),o(e,t),c(e,t)}}),t("ember-data/system/adapter",["exports"],function(e){"use strict";function t(e){var t=Error.prototype.constructor.call(this,"The backend rejected the commit because it was invalid: "+Ember.inspect(e));this.errors=e;for(var n=0,r=i.length;r>n;n++)this[i[n]]=t[i[n]]}var n=Ember.get,i=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=Ember.create(Error.prototype);var r=Ember.Object.extend({find:Ember.required(Function),findAll:null,findQuery:null,generateIdForRecord:null,serialize:function(e,t){return n(e,"store").serializerFor(e.constructor.typeKey).serialize(e,t)},createRecord:Ember.required(Function),updateRecord:Ember.required(Function),deleteRecord:Ember.required(Function),coalesceFindRequests:!0,groupRecordsForFindMany:function(e,t){return[t]}});e.InvalidError=t,e.Adapter=r,e["default"]=r}),t("ember-data/system/container_proxy",["exports"],function(e){"use strict";function t(e){this.container=e}t.prototype.aliasedFactory=function(e,t){var n=this;return{create:function(){return t&&t(),n.container.lookup(e)}}},t.prototype.registerAlias=function(e,t,n){var i=this.aliasedFactory(t,n);return this.container.register(e,i)},t.prototype.registerDeprecation=function(e,t){var n=function(){};return this.registerAlias(e,t,n)},t.prototype.registerDeprecations=function(e){var t,n,i,r;for(t=e.length;t>0;t--)n=e[t-1],i=n.deprecated,r=n.valid,this.registerDeprecation(i,r)},e["default"]=t}),t("ember-data/system/create",[],function(){"use strict";var e=Ember.create(null);if(void 0!==e.toString&&"__proto__"===Ember.keys(Ember.create({}))[0])throw new Error("Ember Data requires a correct Object.create shim. You should upgrade to Ember >= 1.8 which provides one for you. If you are using ES5-shim, you should try removing that after upgrading Ember.")}),t("ember-data/system/debug",["ember-data/system/debug/debug_info","ember-data/system/debug/debug_adapter","exports"],function(e,t,n){"use strict";var i=t["default"];n["default"]=i}),t("ember-data/system/debug/debug_adapter",["ember-data/system/model","exports"],function(e,t){"use strict";var n=e.Model,i=Ember.get,r=Ember.String.capitalize,s=Ember.String.underscore;t["default"]=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(e){return e!==n&&n.detect(e)},columnsForType:function(e){var t=[{name:"id",desc:"Id"}],n=0,o=this;return i(e,"attributes").forEach(function(e,i){if(n++>o.attributeLimit)return!1;var a=r(s(i).replace("_"," "));t.push({name:i,desc:a})}),t},getRecords:function(e){return this.get("store").all(e)},getRecordColumnValues:function(e){var t=this,n=0,r={id:i(e,"id")};return e.eachAttribute(function(s){if(n++>t.attributeLimit)return!1;var o=i(e,s);r[s]=o}),r},getRecordKeywords:function(e){var t=[],n=Ember.A(["id"]);return e.eachAttribute(function(e){n.push(e)}),n.forEach(function(n){t.push(i(e,n))}),t},getRecordFilterValues:function(e){return{isNew:e.get("isNew"),isModified:e.get("isDirty")&&!e.get("isNew"),isClean:!e.get("isDirty")}},getRecordColor:function(e){var t="black";return e.get("isNew")?t="green":e.get("isDirty")&&(t="blue"),t},observeRecord:function(e,t){var n=Ember.A(),i=this,r=Ember.A(["id","isNew","isDirty"]);e.eachAttribute(function(e){r.push(e)}),r.forEach(function(r){var s=function(){t(i.wrapRecord(e))};Ember.addObserver(e,r,s),n.push(function(){Ember.removeObserver(e,r,s)})});var s=function(){n.forEach(function(e){e()})};return s}})}),t("ember-data/system/debug/debug_info",["ember-data/system/model","exports"],function(e,t){"use strict";var n=e.Model;n.reopen({_debugInfo:function(){var e=["id"],t={belongsTo:[],hasMany:[]},n=[];this.eachAttribute(function(t){e.push(t)},this),this.eachRelationship(function(e,i){t[i.kind].push(e),n.push(e)});var i=[{name:"Attributes",properties:e,expand:!0},{name:"Belongs To",properties:t.belongsTo,expand:!0},{name:"Has Many",properties:t.hasMany,expand:!0},{name:"Flags",properties:["isLoaded","isDirty","isSaving","isDeleted","isError","isNew","isValid"]}];return{propertyInfo:{includeOtherProperties:!0,groups:i,expensiveProperties:n}}}}),t["default"]=n}),t("ember-data/system/map",["exports"],function(e){"use strict";function t(){Ember.OrderedSet.apply(this,arguments)}function n(){Ember.Map.apply(this,arguments)}function i(){Ember.MapWithDefault.apply(this,arguments)}function r(e){return function(t,n){e.call(this,n,t)}}var s,o,a=Ember.Map.create();a.set("key","value");var l=!1;a.forEach(function(e,t){l="key"===e&&"value"===t}),n.prototype=Ember.create(Ember.Map.prototype),i.prototype=Ember.create(Ember.MapWithDefault.prototype),t.prototype=Ember.create(Ember.OrderedSet.prototype),t.create=function(){return new t},l&&(s=function(e,t){this.__super$forEach(r(e),t)},o=function(e){this.remove(e)},n.prototype.__super$forEach=Ember.Map.prototype.forEach,n.prototype.forEach=s,n.prototype["delete"]=o,i.prototype.forEach=s,i.prototype.__super$forEach=Ember.MapWithDefault.prototype.forEach,i.prototype["delete"]=o,t.prototype["delete"]=o),i.constructor=i,n.constructor=n,i.create=function(e){return e?new i(e):new n},n.create=function(){return new this.constructor},e["default"]=n,e.Map=n,e.MapWithDefault=i,e.OrderedSet=t}),t("ember-data/system/model",["ember-data/system/model/model","ember-data/system/model/attributes","ember-data/system/model/states","ember-data/system/model/errors","exports"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t["default"],a=n["default"],l=i["default"];r.Model=s,r.RootState=a,r.attr=o,r.Errors=l}),t("ember-data/system/model/attributes",["ember-data/system/model/model","ember-data/system/map","exports"],function(e,t,n){"use strict";function i(e,t){return"function"==typeof t.defaultValue?t.defaultValue.apply(null,arguments):t.defaultValue}function r(e,t){return e._attributes.hasOwnProperty(t)||e._inFlightAttributes.hasOwnProperty(t)||e._data.hasOwnProperty(t)}function s(e,t){return e._attributes.hasOwnProperty(t)?e._attributes[t]:e._inFlightAttributes.hasOwnProperty(t)?e._inFlightAttributes[t]:e._data[t]}var o=e["default"],a=t.Map,l=Ember.get;o.reopenClass({attributes:Ember.computed(function(){var e=a.create();return this.eachComputedProperty(function(t,n){n.isAttribute&&(n.name=t,e.set(t,n))}),e}).readOnly(),transformedAttributes:Ember.computed(function(){var e=a.create();return this.eachAttribute(function(t,n){n.type&&e.set(t,n.type)}),e}).readOnly(),eachAttribute:function(e,t){l(this,"attributes").forEach(function(n,i){e.call(t,i,n)},t)},eachTransformedAttribute:function(e,t){l(this,"transformedAttributes").forEach(function(n,i){e.call(t,i,n)})}}),o.reopen({eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}}),n["default"]=function(e,t){t=t||{};var n={type:e,isAttribute:!0,options:t};return Ember.computed(function(e,n){if(arguments.length>1){var o=s(this,e);return n!==o&&(this._attributes[e]=n,this.send("didSetProperty",{name:e,oldValue:o,originalValue:this._data[e],value:n})),n}return r(this,e)?s(this,e):i(this,t,e)}).meta(n)}}),t("ember-data/system/model/errors",["ember-data/system/map","exports"],function(e,t){"use strict";var n=Ember.get,i=Ember.isEmpty,r=Ember.EnumerableUtils.map,s=e.MapWithDefault;t["default"]=Ember.Object.extend(Ember.Enumerable,Ember.Evented,{registerHandlers:function(e,t,n){this.on("becameInvalid",e,t),this.on("becameValid",e,n)},errorsByAttributeName:Ember.reduceComputed("content",{initialValue:function(){return s.create({defaultValue:function(){return Ember.A()}})},addedItem:function(e,t){return e.get(t.attribute).pushObject(t),e},removedItem:function(e,t){return e.get(t.attribute).removeObject(t),e}}),errorsFor:function(e){return n(this,"errorsByAttributeName").get(e)},messages:Ember.computed.mapBy("content","message"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){var t=this.errorsFor(e);return i(t)?null:t},nextObject:function(e){return n(this,"content").objectAt(e)},length:Ember.computed.oneWay("content.length").readOnly(),isEmpty:Ember.computed.not("length").readOnly(),add:function(e,t){var i=n(this,"isEmpty");t=this._findOrCreateMessages(e,t),n(this,"content").addObjects(t),this.notifyPropertyChange(e),this.enumerableContentDidChange(),i&&!n(this,"isEmpty")&&this.trigger("becameInvalid")},_findOrCreateMessages:function(e,t){var n=this.errorsFor(e);return r(Ember.makeArray(t),function(t){return n.findBy("message",t)||{attribute:e,message:t}})},remove:function(e){if(!n(this,"isEmpty")){var t=n(this,"content").rejectBy("attribute",e);n(this,"content").setObjects(t),this.notifyPropertyChange(e),this.enumerableContentDidChange(),n(this,"isEmpty")&&this.trigger("becameValid")}},clear:function(){n(this,"isEmpty")||(n(this,"content").clear(),this.enumerableContentDidChange(),this.trigger("becameValid"))},has:function(e){return!i(this.errorsFor(e))}})}),t("ember-data/system/model/model",["ember-data/system/model/states","ember-data/system/model/errors","ember-data/system/promise_proxies","ember-data/system/relationships/relationship","exports"],function(e,t,i,r,s){"use strict";function o(e){return w[e]||(w[e]=e.split("."))}function a(e){return b[e]||(b[e]=o(e)[0])}var l,u=e["default"],c=t["default"],h=i.PromiseObject,d=r.createRelationshipFor,p=Ember.get,m=Ember.set,f=Ember.merge,_=Ember.RSVP.Promise,g=Ember.ArrayPolyfills.forEach,v=Ember.ArrayPolyfills.map,y=Ember.computed("currentState",function(e){return p(p(this,"currentState"),e)}).readOnly(),b=Ember.create(null),w=Ember.create(null),C=Ember.Object.extend(Ember.Evented,{_recordArrays:void 0,_relationships:void 0,_loadingRecordArrays:void 0,isEmpty:y,isLoading:y,isLoaded:y,isDirty:y,isSaving:y,isDeleted:y,isNew:y,isValid:y,dirtyType:y,isError:!1,isReloading:!1,clientId:null,id:null,currentState:u.empty,errors:Ember.computed(function(){var e=c.create();return e.registerHandlers(this,function(){this.send("becameInvalid")},function(){this.send("becameValid")}),e}).readOnly(),serialize:function(e){var t=p(this,"store");return t.serialize(this,e)},toJSON:function(e){l||(l=n("ember-data/serializers/json_serializer")["default"]);var t=l.create({container:this.container});return t.serialize(this,e)},didLoad:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return this._data=this._data||{},this._data}).readOnly(),_data:null,init:function(){this._super(),this._setup()},_setup:function(){this._changesToSync={},this._deferredTriggers=[],this._data={},this._attributes={},this._inFlightAttributes={},this._relationships={},this._implicitRelationships=Ember.create(null);var e=this;this.constructor.eachRelationship(function(t,n){e._relationships[t]=d(e,n,e.store)})},send:function(e,t){var n=p(this,"currentState");return n[e]||this._unhandledEvent(n,e,t),n[e](this,t)},transitionTo:function(e){var t=a(e),n=p(this,"currentState"),i=n;do i.exit&&i.exit(this),i=i.parentState;while(!i.hasOwnProperty(t));var r,s,l=o(e),u=[],c=[];for(r=0,s=l.length;s>r;r++)i=i[l[r]],i.enter&&c.push(i),i.setup&&u.push(i);for(r=0,s=c.length;s>r;r++)c[r].enter(this);for(m(this,"currentState",i),r=0,s=u.length;s>r;r++)u[r].setup(this);this.updateRecordArraysLater()},_unhandledEvent:function(e,t,n){var i="Attempted to handle event `"+t+"` ";throw i+="on "+String(this)+" while in state ",i+=e.stateName+". ",void 0!==n&&(i+="Called with "+Ember.inspect(n)+"."),new Ember.Error(i)},withTransaction:function(e){var t=p(this,"transaction");t&&e(t)},loadingData:function(e){this.send("loadingData",e)},loadedData:function(){this.send("loadedData")},notFound:function(){this.send("notFound")},pushedData:function(){this.send("pushedData")},deleteRecord:function(){this.send("deleteRecord")},destroyRecord:function(){return this.deleteRecord(),this.save()},unloadRecord:function(){this.isDestroyed||this.send("unloadRecord")},clearRelationships:function(){this.eachRelationship(function(e){var t=this._relationships[e];t&&(t.clear(),t.destroy())},this)},disconnectRelationships:function(){this.eachRelationship(function(e){this._relationships[e].disconnect()},this);var e=this;g.call(Ember.keys(this._implicitRelationships),function(t){e._implicitRelationships[t].disconnect()})},reconnectRelationships:function(){this.eachRelationship(function(e){this._relationships[e].reconnect()},this);var e=this;g.call(Ember.keys(this._implicitRelationships),function(t){e._implicitRelationships[t].reconnect()})},updateRecordArrays:function(){this._updatingRecordArraysLater=!1,p(this,"store").dataWasUpdated(this.constructor,this)},_preloadData:function(e){var t=this;g.call(Ember.keys(e),function(n){var i=p(e,n),r=t.constructor.metaForProperty(n);r.isRelationship?t._preloadRelationship(n,i):p(t,"_data")[n]=i})},_preloadRelationship:function(e,t){var n=this.constructor.metaForProperty(e),i=n.type;"hasMany"===n.kind?this._preloadHasMany(e,t,i):this._preloadBelongsTo(e,t,i)},_preloadHasMany:function(e,t,n){var i=this,r=v.call(t,function(e){return i._convertStringOrNumberIntoRecord(e,n)});this._relationships[e].updateRecordsFromAdapter(r)},_preloadBelongsTo:function(e,t,n){var i=this._convertStringOrNumberIntoRecord(t,n);this._relationships[e].setRecord(i)},_convertStringOrNumberIntoRecord:function(e,t){return"string"===Ember.typeOf(e)||"number"===Ember.typeOf(e)?this.store.recordForId(t,e):e},_notifyProperties:function(e){Ember.beginPropertyChanges();for(var t,n=0,i=e.length;i>n;n++)t=e[n],this.notifyPropertyChange(t);Ember.endPropertyChanges()},changedAttributes:function(){var e,t=p(this,"_data"),n=p(this,"_attributes"),i={};for(e in n)i[e]=[t[e],n[e]];return i},adapterWillCommit:function(){this.send("willCommit")},adapterDidCommit:function(e){m(this,"isError",!1),e?this._data=e:Ember.mixin(this._data,this._inFlightAttributes),this._inFlightAttributes={},this.send("didCommit"),this.updateRecordArraysLater(),e&&this._notifyProperties(Ember.keys(e))},adapterDidDirty:function(){this.send("becomeDirty"),this.updateRecordArraysLater()},updateRecordArraysLater:function(){this._updatingRecordArraysLater||(this._updatingRecordArraysLater=!0,Ember.run.schedule("actions",this,this.updateRecordArrays))},setupData:function(e,t){t?Ember.merge(this._data,e):this._data=e,this.pushedData(),this._notifyProperties(Ember.keys(e))},materializeId:function(e){m(this,"id",e)},materializeAttributes:function(e){f(this._data,e)},materializeAttribute:function(e,t){this._data[e]=t},rollback:function(){this._attributes={},p(this,"isError")&&(this._inFlightAttributes={},m(this,"isError",!1)),p(this,"isDeleted")&&this.reconnectRelationships(),p(this,"isNew")&&this.clearRelationships(),p(this,"isValid")||(this._inFlightAttributes={}),this.send("rolledBack"),this._notifyProperties(Ember.keys(this._data))},toStringExtension:function(){return p(this,"id")},save:function(){var e="DS: Model#save "+this,t=Ember.RSVP.defer(e);return this.get("store").scheduleSave(this,t),this._inFlightAttributes=this._attributes,this._attributes={},h.create({promise:t.promise})},reload:function(){m(this,"isReloading",!0);var e=this,t="DS: Model#reload of "+this,n=new _(function(t){e.send("reloadRecord",t)},t).then(function(){return e.set("isReloading",!1),e.set("isError",!1),e},function(t){throw e.set("isError",!0),t},"DS: Model#reload complete, update flags")["finally"](function(){e.updateRecordArrays()});return h.create({promise:n})},adapterDidUpdateAttribute:function(e,t){void 0!==t?(this._data[e]=t,this.notifyPropertyChange(e)):this._data[e]=this._inFlightAttributes[e],this.updateRecordArraysLater()},adapterDidInvalidate:function(e){function t(t){e[t]&&n.add(t,e[t])}var n=p(this,"errors");this.eachAttribute(t),this.eachRelationship(t)},adapterDidError:function(){this.send("becameError"),m(this,"isError",!0)},trigger:function(){for(var e=arguments.length,t=new Array(e-1),n=arguments[0],i=1;e>i;i++)t[i-1]=arguments[i];Ember.tryInvoke(this,n,t),this._super.apply(this,arguments)},triggerLater:function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];1===this._deferredTriggers.push(t)&&Ember.run.schedule("actions",this,"_triggerDeferredTriggers")},_triggerDeferredTriggers:function(){for(var e=0,t=this._deferredTriggers.length;t>e;e++)this.trigger.apply(this,this._deferredTriggers[e]);this._deferredTriggers.length=0},willDestroy:function(){this._super(),this.clearRelationships()},willMergeMixin:function(){}});C.reopenClass({_create:C.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.")}}),s["default"]=C}),t("ember-data/system/model/states",["exports"],function(e){"use strict";function t(e,t){t.value===t.originalValue?(delete e._attributes[t.name],e.send("propertyWasReset",t.name)):t.value!==t.oldValue&&e.send("becomeDirty"),e.updateRecordArraysLater()}function n(e){var t,i={};for(var r in e)t=e[r],i[r]=t&&"object"==typeof t?n(t):t;return i}function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){var t=n(u);return i(t,e)}function s(){}function o(e,t,n){e=i(t?Ember.create(t):{},e),e.parentState=t,e.stateName=n;for(var r in e)e.hasOwnProperty(r)&&"parentState"!==r&&"stateName"!==r&&"object"==typeof e[r]&&(e[r]=o(e[r],e,n+"."+r));return e}var a=Ember.get,l=Ember.set,u={initialState:"uncommitted",isDirty:!0,uncommitted:{didSetProperty:t,loadingData:Ember.K,propertyWasReset:function(e){var t=Ember.keys(e._attributes),n=t>0;n||e.send("rolledBack")},pushedData:Ember.K,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,t){t(a(e,"store").reloadRecord(e))},rolledBack:function(e){e.transitionTo("loaded.saved")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(e){e.rollback()}},inFlight:{isSaving:!0,didSetProperty:t,becomeDirty:Ember.K,pushedData:Ember.K,unloadRecord:function(){},willCommit:Ember.K,didCommit:function(e){var t=a(this,"dirtyType");e.transitionTo("saved"),e.send("invokeLifecycleCallbacks",t)},becameInvalid:function(e){e.transitionTo("invalid"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.disconnectRelationships()},didSetProperty:function(e,n){a(e,"errors").remove(n.name),t(e,n)},becomeDirty:Ember.K,willCommit:function(e){a(e,"errors").clear(),e.transitionTo("inFlight")},rolledBack:function(e){a(e,"errors").clear()},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)},exit:function(e){e._inFlightAttributes={}}}},c=r({dirtyType:"created",isNew:!0});c.uncommitted.rolledBack=function(e){e.transitionTo("deleted.saved")};var h=r({dirtyType:"updated"});c.uncommitted.deleteRecord=function(e){e.disconnectRelationships(),e.transitionTo("deleted.saved")},c.uncommitted.rollback=function(e){u.uncommitted.rollback.apply(this,arguments),e.transitionTo("deleted.saved")},c.uncommitted.propertyWasReset=Ember.K,h.inFlight.unloadRecord=s,h.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.uncommitted"),e.disconnectRelationships()};var d={isEmpty:!1,isLoading:!1,isLoaded:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:Ember.K,unloadRecord:function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},propertyWasReset:Ember.K,empty:{isEmpty:!0,loadingData:function(e,t){e._loadingPromise=t,e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncommitted"),e.notifyPropertyChange("data")},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad")}},loading:{isLoading:!0,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),l(e,"isError",!1)},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:!0,loadingData:Ember.K,saved:{setup:function(e){var t=e._attributes,n=!1;for(var i in t)if(t.hasOwnProperty(i)){n=!0;break}n&&e.adapterDidDirty()},didSetProperty:t,pushedData:Ember.K,becomeDirty:function(e){e.transitionTo("updated.uncommitted")},willCommit:function(e){e.transitionTo("updated.inFlight")},reloadRecord:function(e,t){t(a(e,"store").reloadRecord(e))},deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.disconnectRelationships()},unloadRecord:function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},didCommit:function(e){e.send("invokeLifecycleCallbacks",a(e,"lastDirtyType"))},notFound:Ember.K},created:c,updated:h},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("inFlight")},rollback:function(e){e.rollback()},becomeDirty:Ember.K,deleteRecord:Ember.K,rolledBack:function(e){e.transitionTo("loaded.saved")}},inFlight:{isSaving:!0,unloadRecord:s,willCommit:Ember.K,didCommit:function(e){e.transitionTo("saved"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},saved:{isDirty:!1,setup:function(e){var t=a(e,"store");t.dematerializeRecord(e)},invokeLifecycleCallbacks:function(e){e.triggerLater("didDelete",e),e.triggerLater("didCommit",e)},willCommit:Ember.K,didCommit:Ember.K}},invokeLifecycleCallbacks:function(e,t){"created"===t?e.triggerLater("didCreate",e):e.triggerLater("didUpdate",e),e.triggerLater("didCommit",e)}};d=o(d,null,"root"),e["default"]=d}),t("ember-data/system/promise_proxies",["exports"],function(e){"use strict";function t(e){return function(){var t=i(this,"content");return t[e].apply(t,arguments)}}var n=Ember.RSVP.Promise,i=Ember.get,r=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin),s=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin),o=function(e,t){return s.create({promise:n.resolve(e,t)})},a=function(e,t){return r.create({promise:n.resolve(e,t)})},l=r.extend({reload:function(){return i(this,"content").reload()},createRecord:t("createRecord"),on:t("on"),one:t("one"),trigger:t("trigger"),off:t("off"),has:t("has")}),u=function(e,t){return l.create({promise:n.resolve(e,t)})};e.PromiseArray=r,e.PromiseObject=s,e.PromiseManyArray=l,e.promiseArray=a,e.promiseObject=o,e.promiseManyArray=u}),t("ember-data/system/record_array_manager",["ember-data/system/record_arrays","ember-data/system/map","exports"],function(e,t,n){"use strict";function i(e){for(var t=[],n=Ember.keys(e),i=0;i<n.length;i++)t.push(e[n[i]]);return t}function r(e){e.destroy()}function s(e){for(var t=e.length,n=Ember.A(),i=0;t>i;i++)n=n.concat(e[i]);return n}var o=e.RecordArray,a=e.FilteredRecordArray,l=e.AdapterPopulatedRecordArray,u=e.ManyArray,c=t.MapWithDefault,h=t.OrderedSet,d=Ember.get,p=Ember.EnumerableUtils.forEach,m=Ember.EnumerableUtils.indexOf;n["default"]=Ember.Object.extend({init:function(){this.filteredRecordArrays=c.create({defaultValue:function(){return[]}}),this.changedRecords=[],this._adapterPopulatedRecordArrays=[]},recordDidChange:function(e){1===this.changedRecords.push(e)&&Ember.run.schedule("actions",this,this.updateRecordArrays)},recordArraysForRecord:function(e){return e._recordArrays=e._recordArrays||h.create(),e._recordArrays},updateRecordArrays:function(){p(this.changedRecords,function(e){d(e,"isDeleted")?this._recordWasDeleted(e):this._recordWasChanged(e)},this),this.changedRecords.length=0},_recordWasDeleted:function(e){var t=e._recordArrays;t&&(t.forEach(function(t){t.removeRecord(e)}),e._recordArrays=null)},_recordWasChanged:function(e){var t,n=e.constructor,i=this.filteredRecordArrays.get(n);p(i,function(i){t=d(i,"filterFunction"),this.updateRecordArray(i,t,n,e)},this);var r=e._loadingRecordArrays;if(r){for(var s=0,o=r.length;o>s;s++)r[s].loadedRecord();e._loadingRecordArrays=[]}},updateRecordArray:function(e,t,n,i){var r;r=t?t(i):!0;var s=this.recordArraysForRecord(i);r?s.has(e)||(e.pushRecord(i),s.add(e)):r||(s["delete"](e),e.removeRecord(i))},updateFilter:function(e,t,n){for(var i,r=this.store.typeMapFor(t),s=r.records,o=0,a=s.length;a>o;o++)i=s[o],d(i,"isDeleted")||d(i,"isEmpty")||this.updateRecordArray(e,n,t,i)},createManyArray:function(e,t){var n=u.create({type:e,content:t,store:this.store});return p(t,function(e){var t=this.recordArraysForRecord(e);t.add(n)},this),n},createRecordArray:function(e){var t=o.create({type:e,content:Ember.A(),store:this.store,isLoaded:!0});return this.registerFilteredRecordArray(t,e),t},createFilteredRecordArray:function(e,t,n){var i=a.create({query:n,type:e,content:Ember.A(),store:this.store,manager:this,filterFunction:t});
return this.registerFilteredRecordArray(i,e,t),i},createAdapterPopulatedRecordArray:function(e,t){var n=l.create({type:e,query:t,content:Ember.A(),store:this.store,manager:this});return this._adapterPopulatedRecordArrays.push(n),n},registerFilteredRecordArray:function(e,t,n){var i=this.filteredRecordArrays.get(t);i.push(e),this.updateFilter(e,t,n)},unregisterFilteredRecordArray:function(e){var t=this.filteredRecordArrays.get(e.type),n=m(t,e);t.splice(n,1)},registerWaitingRecordArray:function(e,t){var n=e._loadingRecordArrays||[];n.push(t),e._loadingRecordArrays=n},willDestroy:function(){this._super(),p(s(i(this.filteredRecordArrays.values)),r),p(this._adapterPopulatedRecordArrays,r)}})}),t("ember-data/system/record_arrays",["ember-data/system/record_arrays/record_array","ember-data/system/record_arrays/filtered_record_array","ember-data/system/record_arrays/adapter_populated_record_array","ember-data/system/record_arrays/many_array","exports"],function(e,t,n,i,r){"use strict";var s=e["default"],o=t["default"],a=n["default"],l=i["default"];r.RecordArray=s,r.FilteredRecordArray=o,r.AdapterPopulatedRecordArray=a,r.ManyArray=l}),t("ember-data/system/record_arrays/adapter_populated_record_array",["ember-data/system/record_arrays/record_array","exports"],function(e,t){"use strict";function n(e){var t=Ember.create(null);for(var n in e)t[n]=e[n];return t}var i=e["default"],r=Ember.get;t["default"]=i.extend({query:null,replace:function(){var e=r(this,"type").toString();throw new Error("The result of a server query (on "+e+") is immutable.")},load:function(e){var t=r(this,"store"),i=r(this,"type"),s=t.pushMany(i,e),o=t.metadataFor(i);this.setProperties({content:Ember.A(s),isLoaded:!0,meta:n(o)}),s.forEach(function(e){this.manager.recordArraysForRecord(e).add(this)},this),Ember.run.once(this,"trigger","didLoad")}})}),t("ember-data/system/record_arrays/filtered_record_array",["ember-data/system/record_arrays/record_array","exports"],function(e,t){"use strict";var n=e["default"],i=Ember.get;t["default"]=n.extend({filterFunction:null,isLoaded:!0,replace:function(){var e=i(this,"type").toString();throw new Error("The result of a client-side filter (on "+e+") is immutable.")},_updateFilter:function(){var e=i(this,"manager");e.updateFilter(this,i(this,"type"),i(this,"filterFunction"))},updateFilter:Ember.observer(function(){Ember.run.once(this,this._updateFilter)},"filterFunction"),_unregisterFromManager:function(){this.manager.unregisterFilteredRecordArray(this)},willDestroy:function(){this._unregisterFromManager(),this._super()}})}),t("ember-data/system/record_arrays/many_array",["ember-data/system/record_arrays/record_array","exports"],function(e,t){"use strict";var n=e["default"],i=Ember.get,r=Ember.set;t["default"]=n.extend({init:function(){this._super.apply(this,arguments)},isPolymorphic:!1,isLoaded:!1,relationship:null,promise:null,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,0===this.loadingRecordsCount&&(r(this,"isLoaded",!0),this.trigger("didLoad"))},replaceContent:function(e,t,n){var r;t>0&&(r=i(this,"content").slice(e,e+t),this.get("relationship").removeRecords(r)),n&&this.get("relationship").addRecords(n,e)},reload:function(){return this.relationship.reload()},createRecord:function(e){var t,n=i(this,"store"),r=i(this,"type");return t=n.createRecord(r,e),this.pushObject(t),t}})}),t("ember-data/system/record_arrays/record_array",["ember-data/system/promise_proxies","exports"],function(e,t){"use strict";var n=e.PromiseArray,i=Ember.get;t["default"]=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(e){var t=i(this,"content");return t.objectAt(e)},update:function(){if(!i(this,"isUpdating")){var e=i(this,"store"),t=i(this,"type");return e.fetchAll(t,this)}},addRecord:function(e,t){var n=i(this,"content");void 0===t?n.addObject(e):n.contains(e)||n.insertAt(t,e)},pushRecord:function(e){i(this,"content").pushObject(e)},removeRecord:function(e){i(this,"content").removeObject(e)},save:function(){var e="DS: RecordArray#save "+i(this,"type"),t=Ember.RSVP.all(this.invoke("save"),e).then(function(e){return Ember.A(e)},null,"DS: RecordArray#save apply Ember.NativeArray");return n.create({promise:t})},_dissociateFromOwnRecords:function(){var e=this;this.forEach(function(t){var n=t._recordArrays;n&&n["delete"](e)})},willDestroy:function(){this._dissociateFromOwnRecords(),this._super()}})}),t("ember-data/system/relationship-meta",["ember-inflector/system","exports"],function(e,t){"use strict";function n(e,t){var n,i;return n=t.type||t.key,"string"==typeof n?("hasMany"===t.kind&&(n=r(n)),i=e.modelFor(n)):i=t.type,i}function i(e,t){return{key:t.key,kind:t.kind,type:n(e,t),options:t.options,parentType:t.parentType,isRelationship:!0}}var r=e.singularize;t.typeForRelationshipMeta=n,t.relationshipFromMeta=i}),t("ember-data/system/relationships",["./relationships/belongs_to","./relationships/has_many","ember-data/system/relationships/ext","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=t["default"];i.belongsTo=r,i.hasMany=s}),t("ember-data/system/relationships/belongs_to",["ember-data/system/model","exports"],function(e,t){"use strict";function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n={type:e,isRelationship:!0,options:t,kind:"belongsTo",key:null};return Ember.computed(function(e,t){return arguments.length>1&&(void 0===t&&(t=null),t&&t.then?this._relationships[e].setRecordPromise(t):this._relationships[e].setRecord(t)),this._relationships[e].getRecord()}).meta(n)}var i=e.Model;i.reopen({notifyBelongsToAdded:function(e){this.notifyPropertyChange(e)},notifyBelongsToRemoved:function(e){this.notifyPropertyChange(e)}}),t["default"]=n}),t("ember-data/system/relationships/ext",["ember-data/system/relationship-meta","ember-data/system/model","ember-data/system/map"],function(e,t,n){"use strict";var i=e.typeForRelationshipMeta,r=e.relationshipFromMeta,s=t.Model,o=n.Map,a=n.MapWithDefault,l=Ember.get,u=Ember.ArrayPolyfills.filter;s.reopen({didDefineProperty:function(e,t,n){if(n instanceof Ember.ComputedProperty){var i=n.meta();i.parentType=e.constructor}}}),s.reopenClass({typeForRelationship:function(e){var t=l(this,"relationshipsByName").get(e);return t&&t.type},inverseMap:Ember.computed(function(){return Ember.create(null)}),inverseFor:function(e){var t=l(this,"inverseMap");if(t[e])return t[e];var n=this._findInverseFor(e);return t[e]=n,n},_findInverseFor:function(e){function t(n,i,r){var s=r||[],o=l(i,"relationships");if(o){var a=o.get(n);return a=u.call(a,function(t){var n=i.metaForProperty(t.name).options;return n.inverse?e===n.inverse:!0}),a&&s.push.apply(s,a),n.superclass&&t(n.superclass,i,s),s}}var n=this.typeForRelationship(e);if(!n)return null;var i=this.metaForProperty(e).options;if(null===i.inverse)return null;var r,s,o;if(i.inverse)r=i.inverse,o=Ember.get(n,"relationshipsByName").get(r),s=o.kind;else{var a=t(this,n);if(0===a.length)return null;var c=u.call(a,function(t){var i=n.metaForProperty(t.name).options;return e===i.inverse});1===c.length&&(a=c),r=a[0].name,s=a[0].kind}return{type:n,name:r,kind:s}},relationships:Ember.computed(function(){var e=new a({defaultValue:function(){return[]}});return this.eachComputedProperty(function(t,n){if(n.isRelationship){n.key=t;var r=e.get(i(this.store,n));r.push({name:t,kind:n.kind})}}),e}).cacheable(!1).readOnly(),relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(t,n){n.isRelationship&&e[n.kind].push(t)}),e}),relatedTypes:Ember.computed(function(){var e,t=Ember.A();return this.eachComputedProperty(function(n,r){r.isRelationship&&(r.key=n,e=i(this.store,r),t.contains(e)||t.push(e))}),t}).cacheable(!1).readOnly(),relationshipsByName:Ember.computed(function(){var e=o.create();return this.eachComputedProperty(function(t,n){if(n.isRelationship){n.key=t;var s=r(this.store,n);s.type=i(this.store,n),e.set(t,s)}}),e}).cacheable(!1).readOnly(),fields:Ember.computed(function(){var e=o.create();return this.eachComputedProperty(function(t,n){n.isRelationship?e.set(t,n.kind):n.isAttribute&&e.set(t,"attribute")}),e}).readOnly(),eachRelationship:function(e,t){l(this,"relationshipsByName").forEach(function(n,i){e.call(t,i,n)})},eachRelatedType:function(e,t){l(this,"relatedTypes").forEach(function(n){e.call(t,n)})},determineRelationshipType:function(e){var t,n,i=e.key,r=e.kind,s=this.inverseFor(i);return s?(t=s.name,n=s.kind,"belongsTo"===n?"belongsTo"===r?"oneToOne":"manyToOne":"belongsTo"===r?"oneToMany":"manyToMany"):"belongsTo"===r?"oneToNone":"manyToNone"}}),s.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)},relationshipFor:function(e){return l(this.constructor,"relationshipsByName").get(e)},inverseFor:function(e){return this.constructor.inverseFor(e)}})}),t("ember-data/system/relationships/has_many",["ember-data/system/model","exports"],function(e,t){"use strict";function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n={type:e,isRelationship:!0,options:t,kind:"hasMany",key:null};return Ember.computed(function(e){var t=this._relationships[e];return t.getRecords()}).meta(n).readOnly()}var i=e.Model;i.reopen({notifyHasManyAdded:function(e,t,n){var i=this._relationships[e],r=i.manyArray;r.addRecord(t,n),this.notifyPropertyChange(e)},notifyHasManyRemoved:function(e,t){var n=this._relationships[e],i=n.manyArray;i.removeRecord(t)}}),t["default"]=n}),t("ember-data/system/relationships/relationship",["ember-data/system/promise_proxies","ember-data/system/map","exports"],function(e,t,n){"use strict";function i(e){var t=new o;if(e)for(var n=0,i=e.length;i>n;n++)t.add(e[n]);return t}var r=e.PromiseManyArray,s=e.PromiseObject,o=t.OrderedSet,a=function(e,t,n,i){this.members=new o,this.store=e,this.key=i.key,this.inverseKey=n,this.record=t,this.isAsync=i.options.async,this.relationshipMeta=i,this.inverseKeyForImplicit=this.store.modelFor(this.record.constructor).typeKey+this.key,this.linkPromise=null};a.prototype={constructor:a,destroy:Ember.K,clear:function(){this.members.forEach(function(e){this.removeRecord(e)},this)},disconnect:function(){this.members.forEach(function(e){this.removeRecordFromInverse(e)},this)},reconnect:function(){this.members.forEach(function(e){this.addRecordToInverse(e)},this)},removeRecords:function(e){for(var t,n=Ember.get(e,"length"),i=0;n>i;i++)t=e[i],this.removeRecord(t)},addRecords:function(e,t){for(var n,i=Ember.get(e,"length"),r=0;i>r;r++)n=e[r],this.addRecord(n,t),void 0!==t&&t++},addRecord:function(e,t){this.members.has(e)||(this.members.add(e),this.notifyRecordRelationshipAdded(e,t),this.inverseKey?e._relationships[this.inverseKey].addRecord(this.record):(e._implicitRelationships[this.inverseKeyForImplicit]||(e._implicitRelationships[this.inverseKeyForImplicit]=new a(this.store,e,this.key,{options:{}})),e._implicitRelationships[this.inverseKeyForImplicit].addRecord(this.record)),this.record.updateRecordArrays())},removeRecord:function(e){this.members.has(e)&&(this.removeRecordFromOwn(e),this.inverseKey?this.removeRecordFromInverse(e):e._implicitRelationships[this.inverseKeyForImplicit]&&e._implicitRelationships[this.inverseKeyForImplicit].removeRecord(this.record))},addRecordToInverse:function(e){this.inverseKey&&e._relationships[this.inverseKey].addRecord(this.record)},removeRecordFromInverse:function(e){var t=e._relationships[this.inverseKey];t&&t.removeRecordFromOwn(this.record)},removeRecordFromOwn:function(e){this.members["delete"](e),this.notifyRecordRelationshipRemoved(e),this.record.updateRecordArrays()},updateLink:function(e){e!==this.link&&(this.link=e,this.linkPromise=null,this.record.notifyPropertyChange(this.key))},findLink:function(){if(this.linkPromise)return this.linkPromise;var e=this.fetchLink();return this.linkPromise=e,e.then(function(e){return e})},updateRecordsFromAdapter:function(e){this.computeChanges(e)},notifyRecordRelationshipAdded:Ember.K,notifyRecordRelationshipRemoved:Ember.K};var l=function(e,t,n,i){this._super$constructor(e,t,n,i),this.belongsToType=i.type,this.manyArray=e.recordArrayManager.createManyArray(this.belongsToType,Ember.A()),this.manyArray.relationship=this,this.isPolymorphic=i.options.polymorphic,this.manyArray.isPolymorphic=this.isPolymorphic};l.prototype=Ember.create(a.prototype),l.prototype.constructor=l,l.prototype._super$constructor=a,l.prototype.destroy=function(){this.manyArray.destroy()},l.prototype.notifyRecordRelationshipAdded=function(e,t){this.record.notifyHasManyAdded(this.key,e,t)},l.prototype.notifyRecordRelationshipRemoved=function(e){this.record.notifyHasManyRemoved(this.key,e)},l.prototype.reload=function(){var e=this;return this.link?this.fetchLink():this.store.scheduleFetchMany(this.manyArray.toArray()).then(function(){return e.manyArray.set("isLoaded",!0),e.manyArray})},l.prototype.computeChanges=function(e){var t,n,r,s=this.members,o=[];e=i(e),s.forEach(function(t){e.has(t)||o.push(t)}),this.removeRecords(o);var a=this.manyArray;for(e=e.toArray(),t=e.length,r=0;t>r;r++)n=e[r],a.objectAt(r)!==n&&(this.removeRecord(n),this.addRecord(n,r))},l.prototype.fetchLink=function(){var e=this;return this.store.findHasMany(this.record,this.link,this.relationshipMeta).then(function(t){return e.updateRecordsFromAdapter(t),e.manyArray})},l.prototype.findRecords=function(){var e=this.manyArray;return this.store.findMany(e.toArray()).then(function(){return e.set("isLoaded",!0),e})},l.prototype.getRecords=function(){if(this.isAsync){var e,t=this;return e=this.link?this.findLink().then(function(){return t.findRecords()}):this.findRecords(),r.create({content:this.manyArray,promise:e})}return this.manyArray.get("isDestroyed")||this.manyArray.set("isLoaded",!0),this.manyArray};var u=function(e,t,n,i){this._super$constructor(e,t,n,i),this.record=t,this.key=i.key,this.inverseRecord=null};u.prototype=Ember.create(a.prototype),u.prototype.constructor=u,u.prototype._super$constructor=a,u.prototype.setRecord=function(e){e?this.addRecord(e):this.inverseRecord&&this.removeRecord(this.inverseRecord)},u.prototype._super$addRecord=a.prototype.addRecord,u.prototype.addRecord=function(e){if(!this.members.has(e)){{this.relationshipMeta.type}this.inverseRecord&&this.removeRecord(this.inverseRecord),this.inverseRecord=e,this._super$addRecord(e)}},u.prototype.setRecordPromise=function(e){var t=e.get&&e.get("content");this.setRecord(t)},u.prototype.notifyRecordRelationshipAdded=function(){this.record.notifyBelongsToAdded(this.key,this)},u.prototype.notifyRecordRelationshipRemoved=function(){this.record.notifyBelongsToRemoved(this.key,this)},u.prototype._super$removeRecordFromOwn=a.prototype.removeRecordFromOwn,u.prototype.removeRecordFromOwn=function(e){this.members.has(e)&&(this.inverseRecord=null,this._super$removeRecordFromOwn(e))},u.prototype.findRecord=function(){return this.inverseRecord?this.store._findByRecord(this.inverseRecord):Ember.RSVP.Promise.resolve(null)},u.prototype.fetchLink=function(){var e=this;return this.store.findBelongsTo(this.record,this.link,this.relationshipMeta).then(function(t){return t&&e.addRecord(t),t})},u.prototype.getRecord=function(){if(this.isAsync){var e;if(this.link){var t=this;e=this.findLink().then(function(){return t.findRecord()})}else e=this.findRecord();return s.create({promise:e,content:this.inverseRecord})}return this.inverseRecord};var c=function(e,t,n){var i,r=e.constructor.inverseFor(t.key);return r&&(i=r.name),"hasMany"===t.kind?new l(n,e,i,t):new u(n,e,i,t)};n.Relationship=a,n.ManyRelationship=l,n.BelongsToRelationship=u,n.createRelationshipFor=c}),t("ember-data/system/store",["ember-data/system/adapter","ember-inflector/system/string","ember-data/system/map","ember-data/system/promise_proxies","exports"],function(e,t,i,r,s){"use strict";function o(e){return null==e?null:e+""}function a(e,t,n){return t.eachRelationship(function(t,i){var r=i.kind,s=n[t];"belongsTo"===r?l(e,n,t,i,s):"hasMany"===r&&c(e,n,t,i,s)}),n}function l(e,t,i,r,s){if(k||(k=n("ember-data/system/model").Model),!(B(s)||s instanceof k)){var o;"number"==typeof s||"string"==typeof s?(o=u(r,i,t),t[i]=e.recordForId(o,s)):"object"==typeof s&&(t[i]=e.recordForId(s.type,s.id))}}function u(e,t,n){return e.options.polymorphic?n[t+"Type"]:e.type}function c(e,t,n,i,r){if(!B(r))for(var s=0,o=r.length;o>s;s++)l(e,r,s,i,r[s])}function h(e,t,n){return e.lookup("serializer:"+t)||e.lookup("serializer:application")||e.lookup("serializer:"+n)||e.lookup("serializer:-default")}function d(e){return e.lookup("serializer:application")||e.lookup("serializer:-default")}function p(e,t){var n=e.serializer,i=e.defaultSerializer,r=e.container;return r&&void 0===n&&(n=h(r,t.typeKey,i)),(null===n||void 0===n)&&(n={extract:function(e,t,n){return n}}),n}function m(e){return!(D(e,"isDestroyed")||D(e,"isDestroying"))}function f(e,t){var n=e["finally"](function(){t()||(n._subscribers.length=0)});return n}function _(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(void 0,t)}}function g(e,t,n,i,r){var s=e.find(t,n,i,r),o=p(e,n),a="DS: Handle Adapter#find of "+n+" with id: "+i;return s=H.cast(s,a),s=f(s,_(m,t)),s.then(function(e){var r=o.extract(t,n,e,i,"find");return t.push(n,r)},function(e){var r=t.getById(n,i);throw r&&r.notFound(),e},"DS: Extract payload of '"+n+"'")}function v(e,t,n,i,r){var s=e.findMany(t,n,i,r),o=p(e,n),a="DS: Handle Adapter#findMany of "+n;if(void 0===s)throw new Error("adapter.findMany returned undefined, this was very likely a mistake");return s=H.cast(s,a),s=f(s,_(m,t)),s.then(function(e){var i=o.extract(t,n,e,null,"findMany");return t.pushMany(n,i)},null,"DS: Extract payload of "+n)}function y(e,t,n,i,r){var s=e.findHasMany(t,n,i,r),o=p(e,r.type),a="DS: Handle Adapter#findHasMany of "+n+" : "+r.type;return s=H.cast(s,a),s=f(s,_(m,t)),s=f(s,_(m,n)),s.then(function(e){var n=o.extract(t,r.type,e,null,"findHasMany"),i=t.pushMany(r.type,n);return i},null,"DS: Extract payload of "+n+" : hasMany "+r.type)}function b(e,t,n,i,r){var s=e.findBelongsTo(t,n,i,r),o=p(e,r.type),a="DS: Handle Adapter#findBelongsTo of "+n+" : "+r.type;return s=H.cast(s,a),s=f(s,_(m,t)),s=f(s,_(m,n)),s.then(function(e){var n=o.extract(t,r.type,e,null,"findBelongsTo");if(!n)return null;var i=t.push(r.type,n);return i},null,"DS: Extract payload of "+n+" : "+r.type)}function w(e,t,n,i){var r=e.findAll(t,n,i),s=p(e,n),o="DS: Handle Adapter#findAll of "+n;return r=H.cast(r,o),r=f(r,_(m,t)),r.then(function(e){var i=s.extract(t,n,e,null,"findAll");return t.pushMany(n,i),t.didUpdateAll(n),t.all(n)},null,"DS: Extract payload of findAll "+n)}function C(e,t,n,i,r){var s=e.findQuery(t,n,i,r),o=p(e,n),a="DS: Handle Adapter#findQuery of "+n;return s=H.cast(s,a),s=f(s,_(m,t)),s.then(function(e){var i=o.extract(t,n,e,null,"findQuery");return r.load(i),r},null,"DS: Extract payload of findQuery "+n)}function x(e,t,n,i){var r=i.constructor,s=e[n](t,r,i),o=p(e,r),a="DS: Extract and notify about "+n+" completion of "+i;return s=H.cast(s,a),s=f(s,_(m,t)),s=f(s,_(m,i)),s.then(function(e){var s;return s=e?o.extract(t,r,e,D(i,"id"),n):e,t.didSaveRecord(i,s),i},function(e){if(e instanceof T){var n=o.extractErrors(t,r,e.errors,D(i,"id"));t.recordWasInvalid(i,n),e=new T(n)}else t.recordWasError(i,e);throw e},a)}function S(e,t,n){var i=t.constructor;i.eachRelationship(function(e,i){var r=i.kind,s=n[e],o=t._relationships[e];if(n.links&&n.links[e]&&o.updateLink(n.links[e]),"belongsTo"===r){if(void 0===s)return;o.setRecord(s)}else"hasMany"===r&&s&&o.updateRecordsFromAdapter(s)})}var I,E,k,T=e.InvalidError,P=(e.Adapter,t.singularize),A=i.Map,M=r.promiseArray,O=r.promiseObject,D=Ember.get,L=Ember.set,R=Ember.run.once,B=Ember.isNone,N=Ember.EnumerableUtils.forEach,F=Ember.EnumerableUtils.indexOf,z=Ember.EnumerableUtils.map,H=Ember.RSVP.Promise,W=Ember.copy,V=Ember.String.camelize;I=Ember.Object.extend({init:function(){E||(E=n("ember-data/system/record_array_manager")["default"]),this.typeMaps={},this.recordArrayManager=E.create({store:this}),this._pendingSave=[],this._pendingFetch=A.create()},adapter:"-rest",serialize:function(e,t){return this.serializerFor(e.constructor.typeKey).serialize(e,t)},defaultAdapter:Ember.computed("adapter",function(){var e=D(this,"adapter");return"string"==typeof e&&(e=this.container.lookup("adapter:"+e)||this.container.lookup("adapter:application")||this.container.lookup("adapter:-rest")),DS.Adapter.detect(e)&&(e=e.create({container:this.container})),e}),createRecord:function(e,t){var n=this.modelFor(e),i=W(t)||{};B(i.id)&&(i.id=this._generateId(n)),i.id=o(i.id);var r=this.buildRecord(n,i.id);return r.loadedData(),r.setProperties(i),r},_generateId:function(e){var t=this.adapterFor(e);return t&&t.generateIdForRecord?t.generateIdForRecord(this):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t,n){return 1===arguments.length?this.findAll(e):"object"===Ember.typeOf(t)?this.findQuery(e,t):this.findById(e,o(t),n)},fetch:function(e,t,n){return this.hasRecordForId(e,t)?this.getById(e,t).reload():this.find(e,t,n)},findById:function(e,t,n){var i=this.modelFor(e),r=this.recordForId(i,t);return this._findByRecord(r,n)},_findByRecord:function(e,t){var n;return t&&e._preloadData(t),D(e,"isEmpty")?n=this.scheduleFetch(e):D(e,"isLoading")&&(n=e._loadingPromise),O(n||e,"DS: Store#findByRecord "+e.typeKey+" with id: "+D(e,"id"))},findByIds:function(e,t){var n=this;return M(Ember.RSVP.all(z(t,function(t){return n.findById(e,t)})).then(Ember.A,null,"DS: Store#findByIds of "+e+" complete"))},fetchRecord:function(e){var t=e.constructor,n=D(e,"id"),i=this.adapterFor(t),r=g(i,this,t,n,e);return r},scheduleFetchMany:function(e){return H.all(z(e,this.scheduleFetch,this))},scheduleFetch:function(e){var t=e.constructor;if(B(e))return null;if(e._loadingPromise)return e._loadingPromise;var n=Ember.RSVP.defer("Fetching "+t+"with id: "+e.get("id")),i={record:e,resolver:n},r=n.promise;return e.loadingData(r),this._pendingFetch.get(t)?this._pendingFetch.get(t).push(i):this._pendingFetch.set(t,[i]),Ember.run.scheduleOnce("afterRender",this,this.flushAllPendingFetches),r},flushAllPendingFetches:function(){this.isDestroyed||this.isDestroying||(this._pendingFetch.forEach(this._flushPendingFetchForType,this),this._pendingFetch=A.create())},_flushPendingFetchForType:function(e,t){function n(e){e.resolver.resolve(a.fetchRecord(e.record))}function i(t){N(t,function(t){var n=Ember.A(e).findBy("record",t);if(n){var i=n.resolver;i.resolve(t)}})}function r(e){return function(t){var n=e.without(t);o(n)}}function s(e){return function(t){o(e,t)}}function o(t,n){N(t,function(t){var i=Ember.A(e).findBy("record",t);if(i){var r=i.resolver;r.reject(n)}})}var a=this,l=a.adapterFor(t),u=!!l.findMany&&l.coalesceFindRequests,c=Ember.A(e).mapBy("record");if(1===e.length)n(e[0]);else if(u){var h=l.groupRecordsForFindMany(this,c);N(h,function(o){var u=Ember.A(o),c=u.mapBy("id");if(c.length>1)v(l,a,t,c,u).then(i).then(r(u)).then(null,s(u));else if(1===c.length){var h=Ember.A(e).findBy("record",o[0]);n(h)}})}else N(e,n)},getById:function(e,t){return this.hasRecordForId(e,t)?this.recordForId(e,t):null},reloadRecord:function(e){{var t=e.constructor;this.adapterFor(t),D(e,"id")}return this.scheduleFetch(e)},hasRecordForId:function(e,t){var n=this.modelFor(e),i=o(t);return!!this.typeMapFor(n).idToRecord[i]},recordForId:function(e,t){var n=this.modelFor(e),i=o(t),r=this.typeMapFor(n).idToRecord,s=r[i];return s&&r[i]||(s=this.buildRecord(n,i)),s},findMany:function(e){var t=this;return H.all(z(e,function(e){return t._findByRecord(e)}))},findHasMany:function(e,t,n){var i=this.adapterFor(e.constructor);return y(i,this,e,t,n)},findBelongsTo:function(e,t,n){var i=this.adapterFor(e.constructor);return b(i,this,e,t,n)},findQuery:function(e,t){var n=this.modelFor(e),i=this.recordArrayManager.createAdapterPopulatedRecordArray(n,t),r=this.adapterFor(n);return M(C(r,this,n,t,i))},findAll:function(e){var t=this.modelFor(e);return this.fetchAll(t,this.all(t))},fetchAll:function(e,t){var n=this.adapterFor(e),i=this.typeMapFor(e).metadata.since;return L(t,"isUpdating",!0),M(w(n,this,e,i))},didUpdateAll:function(e){var t=this.typeMapFor(e).findAllCache;L(t,"isUpdating",!1)},all:function(e){var t=this.modelFor(e),n=this.typeMapFor(t),i=n.findAllCache;if(i)return i;var r=this.recordArrayManager.createRecordArray(t);return n.findAllCache=r,r},unloadAll:function(e){for(var t,n=this.modelFor(e),i=this.typeMapFor(n),r=i.records.slice(),s=0;s<r.length;s++)t=r[s],t.unloadRecord(),t.destroy();i.findAllCache=null},filter:function(e,t,n){var i,r,s=arguments.length,o=3===s;return o?i=this.findQuery(e,t):2===arguments.length&&(n=t),e=this.modelFor(e),r=o?this.recordArrayManager.createFilteredRecordArray(e,n,t):this.recordArrayManager.createFilteredRecordArray(e,n),i=i||H.cast(r),M(i.then(function(){return r},null,"DS: Store#filter of "+e))},recordIsLoaded:function(e,t){return this.hasRecordForId(e,t)?!D(this.recordForId(e,t),"isEmpty"):!1},metadataFor:function(e){return e=this.modelFor(e),this.typeMapFor(e).metadata},dataWasUpdated:function(e,t){this.recordArrayManager.recordDidChange(t)},scheduleSave:function(e,t){e.adapterWillCommit(),this._pendingSave.push([e,t]),R(this,"flushPendingSave")},flushPendingSave:function(){var e=this._pendingSave.slice();this._pendingSave=[],N(e,function(e){var t,n=e[0],i=e[1],r=this.adapterFor(n.constructor);return"root.deleted.saved"===D(n,"currentState.stateName")?i.resolve(n):(t=D(n,"isNew")?"createRecord":D(n,"isDeleted")?"deleteRecord":"updateRecord",void i.resolve(x(r,this,t,n)))},this)},didSaveRecord:function(e,t){t&&(t=a(this,e.constructor,t,e),S(this,e,t),this.updateId(e,t)),e.adapterDidCommit(t)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},updateId:function(e,t){var n=(D(e,"id"),o(t.id));this.typeMapFor(e.constructor).idToRecord[n]=e,L(e,"id",n)},typeMapFor:function(e){var t,n=D(this,"typeMaps"),i=Ember.guidFor(e);return(t=n[i])?t:(t={idToRecord:Ember.create(null),records:[],metadata:Ember.create(null),type:e},n[i]=t,t)},_load:function(e,t,n){var i=o(t.id),r=this.recordForId(e,i);return r.setupData(t,n),this.recordArrayManager.recordDidChange(r),r},modelFor:function(e){var t;if("string"==typeof e){if(t=this.modelFactoryFor(e),!t)throw new Ember.Error("No model was found for '"+e+"'");t.typeKey=t.typeKey||this._normalizeTypeKey(e)}else t=e,t.typeKey&&(t.typeKey=this._normalizeTypeKey(t.typeKey));return t.store=this,t},modelFactoryFor:function(e){return this.container.lookupFactory("model:"+e)},push:function(e,t,n){{var i=this.modelFor(e);Ember.EnumerableUtils.filter}t=a(this,i,t),this._load(i,t,n);var r=this.recordForId(i,t.id);return S(this,r,t),r},pushPayload:function(e,t){var n,i;t?(i=t,n=this.serializerFor(e)):(i=e,n=d(this.container)),n.pushPayload(this,i)},normalize:function(e,t){var n=this.serializerFor(e),i=this.modelFor(e);return n.normalize(i,t)},update:function(e,t){return this.push(e,t,!0)},pushMany:function(e,t){for(var n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=this.push(e,t[r]);return i},metaForType:function(e,t){var n=this.modelFor(e);Ember.merge(this.typeMapFor(n).metadata,t)},buildRecord:function(e,t,n){var i=this.typeMapFor(e),r=i.idToRecord,s=e._create({id:t,store:this,container:this.container});return n&&s.setupData(n),t&&(r[t]=s),i.records.push(s),s},dematerializeRecord:function(e){var t=e.constructor,n=this.typeMapFor(t),i=D(e,"id");e.updateRecordArrays(),i&&delete n.idToRecord[i];var r=F(n.records,e);n.records.splice(r,1)},adapterFor:function(e){var t,n=this.container;return n&&(t=n.lookup("adapter:"+e.typeKey)||n.lookup("adapter:application")),t||D(this,"defaultAdapter")},serializerFor:function(e){e=this.modelFor(e);var t=this.adapterFor(e);return h(this.container,e.typeKey,t&&t.defaultSerializer)},willDestroy:function(){function e(e){return t[e].type}var t=this.typeMaps,n=Ember.keys(t),i=z(n,e);this.recordArrayManager.destroy(),N(i,this.unloadAll,this)},_normalizeTypeKey:function(e){return V(P(e))}}),s.Store=I,s["default"]=I}),t("ember-data/transforms",["ember-data/transforms/base","ember-data/transforms/number","ember-data/transforms/date","ember-data/transforms/string","ember-data/transforms/boolean","exports"],function(e,t,n,i,r,s){"use strict";var o=e["default"],a=t["default"],l=n["default"],u=i["default"],c=r["default"];s.Transform=o,s.NumberTransform=a,s.DateTransform=l,s.StringTransform=u,s.BooleanTransform=c}),t("ember-data/transforms/base",["exports"],function(e){"use strict";e["default"]=Ember.Object.extend({serialize:Ember.required(),deserialize:Ember.required()})}),t("ember-data/transforms/boolean",["ember-data/transforms/base","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=n.extend({deserialize:function(e){var t=typeof e;return"boolean"===t?e:"string"===t?null!==e.match(/^true$|^t$|^1$/i):"number"===t?1===e:!1},serialize:function(e){return Boolean(e)}})}),t("ember-data/transforms/date",["ember-data/transforms/base","exports"],function(e,t){"use strict";var n=e["default"],i=Date.prototype.toISOString||function(){function e(e){return 10>e?"0"+e:e}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};Ember.SHIM_ES5&&(Date.prototype.toISOString||(Date.prototype.toISOString=i)),t["default"]=n.extend({deserialize:function(e){var t=typeof e;return"string"===t?new Date(Ember.Date.parse(e)):"number"===t?new Date(e):null===e||void 0===e?e:null},serialize:function(e){return e instanceof Date?i.call(e):null}})}),t("ember-data/transforms/number",["ember-data/transforms/base","exports"],function(e,t){"use strict";var n=e["default"],i=Ember.isEmpty;t["default"]=n.extend({deserialize:function(e){return i(e)?null:Number(e)},serialize:function(e){return i(e)?null:Number(e)}})}),t("ember-data/transforms/string",["ember-data/transforms/base","exports"],function(e,t){"use strict";var n=e["default"],i=Ember.isNone;t["default"]=n.extend({deserialize:function(e){return i(e)?null:String(e)},serialize:function(e){return i(e)?null:String(e)}})}),t("ember-inflector",["./system","./helpers","./ext/string","exports"],function(e,t,n,i){"use strict";var r=e.Inflector,s=e.defaultRules,o=e.pluralize,a=e.singularize;r.defaultRules=s,Ember.Inflector=r,Ember.String.pluralize=o,Ember.String.singularize=a,i["default"]=r,i.pluralize=o,i.singularize=a}),t("ember-inflector/ext/string",["../system/string"],function(e){"use strict";var t=e.pluralize,n=e.singularize;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.pluralize=function(){return t(this)},String.prototype.singularize=function(){return n(this)})}),t("ember-inflector/helpers",["./system/string"],function(e){"use strict";var t=e.singularize,n=e.pluralize;Ember.Handlebars.helper("singularize",t),Ember.Handlebars.helper("pluralize",n)}),t("ember-inflector/system",["./system/inflector","./system/string","./system/inflections","exports"],function(e,t,n,i){"use strict";var r=e["default"],s=t.pluralize,o=t.singularize,a=n["default"];r.inflector=new r(a),i.Inflector=r,i.singularize=o,i.pluralize=s,i.defaultRules=a}),t("ember-inflector/system/inflections",["exports"],function(e){"use strict";e["default"]={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish","sheep","jeans","police"]}
}),t("ember-inflector/system/inflector",["exports"],function(e){"use strict";function t(e,t){for(var n=0,i=t.length;i>n;n++)e.uncountable[t[n].toLowerCase()]=!0}function n(e,t){for(var n,i=0,r=t.length;r>i;i++)n=t[i],e.irregular[n[0].toLowerCase()]=n[1],e.irregular[n[1].toLowerCase()]=n[1],e.irregularInverse[n[1].toLowerCase()]=n[0],e.irregularInverse[n[0].toLowerCase()]=n[0]}function i(e){e=e||{},e.uncountable=e.uncountable||r(),e.irregularPairs=e.irregularPairs||r();var i=this.rules={plurals:e.plurals||[],singular:e.singular||[],irregular:r(),irregularInverse:r(),uncountable:r()};t(i,e.uncountable),n(i,e.irregularPairs),this.enableCache()}function r(){var e=Object.create(null);return e._dict=null,delete e._dict,e}var s=/^\s*$/,o=/(\w+[_-])([a-z\d]+$)/,a=/(\w+)([A-Z][a-z\d]*$)/,l=/[A-Z][a-z\d]*$/;if(!Object.create&&!Object.create(null).hasOwnProperty)throw new Error("This browser does not support Object.create(null), please polyfil with es5-sham: http://git.io/yBU2rg");i.prototype={enableCache:function(){this.purgeCache(),this.singularize=function(e){return this._cacheUsed=!0,this._sCache[e]||(this._sCache[e]=this._singularize(e))},this.pluralize=function(e){return this._cacheUsed=!0,this._pCache[e]||(this._pCache[e]=this._pluralize(e))}},purgeCache:function(){this._cacheUsed=!1,this._sCache=r(),this._pCache=r()},disableCache:function(){this._sCache=null,this._pCache=null,this.singularize=function(e){return this._singularize(e)},this.pluralize=function(e){return this._pluralize(e)}},plural:function(e,t){this._cacheUsed&&this.purgeCache(),this.rules.plurals.push([e,t.toLowerCase()])},singular:function(e,t){this._cacheUsed&&this.purgeCache(),this.rules.singular.push([e,t.toLowerCase()])},uncountable:function(e){this._cacheUsed&&this.purgeCache(),t(this.rules,[e.toLowerCase()])},irregular:function(e,t){this._cacheUsed&&this.purgeCache(),n(this.rules,[[e,t]])},pluralize:function(e){return this._pluralize(e)},_pluralize:function(e){return this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return this._singularize(e)},_singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,t,n){var i,r,u,c,h,d,p,m,f,_,g,v;if(m=s.test(e),f=l.test(e),d="",m)return e;if(c=e.toLowerCase(),h=o.exec(e)||a.exec(e),h&&(d=h[1],p=h[2].toLowerCase()),_=this.rules.uncountable[c]||this.rules.uncountable[p])return e;if(g=n&&(n[c]||n[p]))return n[c]?g:(g=f?g.capitalize():g,d+g);for(var y=t.length,b=0;y>b&&(i=t[y-1],v=i[0],!v.test(e));y--);return i=i||[],v=i[0],r=i[1],u=e.replace(v,r)}},e["default"]=i}),t("ember-inflector/system/string",["./inflector","exports"],function(e,t){"use strict";function n(e){return r.inflector.pluralize(e)}function i(e){return r.inflector.singularize(e)}var r=e["default"];t.pluralize=n,t.singularize=i}),e.DS=n("ember-data")["default"]}(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var r=e(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),s="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,s)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",s=i.data();t+="Text",null==s.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;r||i.data("bs.carousel",r=new n(this,s)),"number"==typeof t?r.to(t):o?r[o]():s.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,s=(n+r)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),s=i||this.getItemForDirection(t,r),o=this.interval,a="next"==t?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var u=s[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(s)]);h&&h.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,r.addClass(a),s.addClass(a),r.one("bsTransitionEnd",function(){s.removeClass([t,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),s=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),r.data()),a=r.attr("data-slide-to");a&&(o.interval=!1),t.call(s,o),a&&s.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),s=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&s.toggle&&"show"==t&&(s.toggle=!1),r||n.data("bs.collapse",r=new i(this,s)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.2",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var s=t(r),o=s.data("bs.collapse"),a=o?"toggle":e.extend({},r.data(),{trigger:this});n.call(s,a)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(r).remove(),e(s).each(function(){var i=e(this),r=n(i),s={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.2",o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(s.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),o=r.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&r.find(s).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var u=l.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),s=r.data("bs.modal"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);s||r.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](i):o.show&&s.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),s=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),s="object"==typeof t&&t;(r||"destroy"!=t)&&(r||i.data("bs.tooltip",r=new n(this,s)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),s=r.length;s--;){var o=r[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(u){var p=a,m=this.options.container?e(this.options.container):this.$element.parent(),f=this.getPosition(m);a="bottom"==a&&c.bottom+d>f.bottom?"top":"top"==a&&c.top-d<f.top?"bottom":"right"==a&&c.right+h>f.width?"left":"left"==a&&c.left-h<f.left?"right":a,s.removeClass(p).addClass(a)}var _=this.getCalculatedOffset(a,c,h,d);this.applyPlacement(_,a);var g=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),t.top=t.top+o,t.left=t.left+a,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=s&&(t.top=t.top+s-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-r+l:2*c.top-s+u,p=h?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(d,i[0][p],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&s.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,s=this.tip(),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var s=i?{top:0,left:0}:t.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,o,a,s)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-s-o.scroll,l=t.top+s-o.scroll+i;a<o.top?r.top=o.top-a:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var u=t.left-s,c=t.left+s+n;u<o.left?r.left=o.left-u:c>o.width&&(r.left=o.left+o.width-c)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),s="object"==typeof t&&t;(r||"destroy"!=t)&&(r||i.data("bs.popover",r=new n(this,s)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){var r=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),s="object"==typeof n&&n;
r||i.data("bs.scrollspy",r=new t(this,s)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.2",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),s=/^#./.test(r)&&e(r);return s&&s.length&&s.is(":visible")&&[[s[t]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)o!=s[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=e(i);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),a=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),s="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,s)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.2",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=s.top?!1:"bottom":e-i>=r+o?!1:"bottom";var a=null==this.affixed,l=a?r:s.top,u=a?o:t;return null!=n&&n>=r?"top":null!=i&&l+u>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,s=i.bottom,o=e("body").height();"object"!=typeof i&&(s=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var a=this.getState(o,t,r,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-t-s})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),"undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}void 0===e.support.transition&&(e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t()}))}(window.jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),e(window).on("resize",e.proxy(this.recalc,this))),this.options.autohide&&e(document).on("click",e.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};t.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},t.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},t.prototype.calcPlacement=function(){function t(e,t){if("auto"===r.css(t))return e;if("auto"===r.css(e))return t;var n=parseInt(r.css(e),10),i=parseInt(r.css(t),10);return n>i?t:e}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var n=e(window).width()/this.$element.width(),i=e(window).height()/this.$element.height(),r=this.$element;this.placement=n>=i?t("left","right"):t("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},t.prototype.opposite=function(e){switch(e){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},t.prototype.getCanvasElements=function(){var t=this.options.canvas?e(this.options.canvas):this.$element,n=t.find("*").filter(function(){return"fixed"===e(this).css("position")}).not(this.options.exclude);return t.add(n)},t.prototype.slide=function(t,n,i){if(!e.support.transition){var r={};return r[this.placement]="+="+n,t.animate(r,350,i)}var s=this.placement,o=this.opposite(s);t.each(function(){"auto"!==e(this).css(s)&&e(this).css(s,(parseInt(e(this).css(s),10)||0)+n),"auto"!==e(this).css(o)&&e(this).css(o,(parseInt(e(this).css(o),10)||0)-n)}),this.$element.one(e.support.transition.end,i).emulateTransitionEnd(350)},t.prototype.disableScrolling=function(){var t=e("body").width(),n="padding-"+this.opposite(this.placement);if(void 0===e("body").data("offcanvas-style")&&e("body").data("offcanvas-style",e("body").attr("style")||""),e("body").css("overflow","hidden"),e("body").width()>t){var i=parseInt(e("body").css(n),10)+e("body").width()-t;setTimeout(function(){e("body").css(n,i)},1)}},t.prototype.show=function(){if(!this.state){var t=e.Event("show.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var n=this.getCanvasElements(),i=this.placement,r=this.opposite(i),s=this.offset();-1!==n.index(this.$element)&&(e(this.$element).data("offcanvas-style",e(this.$element).attr("style")||""),this.$element.css(i,-1*s),this.$element.css(i)),n.addClass("canvas-sliding").each(function(){void 0===e(this).data("offcanvas-style")&&e(this).data("offcanvas-style",e(this).attr("style")||""),"static"===e(this).css("position")&&e(this).css("position","relative"),"auto"!==e(this).css(i)&&"0px"!==e(this).css(i)||"auto"!==e(this).css(r)&&"0px"!==e(this).css(r)||e(this).css(i,0)}),this.options.disableScrolling&&this.disableScrolling();var o=function(){"slide-in"==this.state&&(this.state="slid",n.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(e.proxy(function(){this.$element.addClass("in"),this.slide(n,s,e.proxy(o,this))},this),1)}}},t.prototype.hide=function(){if("slid"===this.state){var t=e.Event("hide.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-out";var n=e(".canvas-slid"),i=(this.placement,-1*this.offset()),r=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),n.removeClass("canvas-sliding"),n.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};n.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(e.proxy(function(){this.slide(n,i,e.proxy(r,this))},this),1)}}},t.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},t.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(e("body"))},t.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var t=this.getCanvasElements();this.$element.removeClass("in"),t.removeClass("canvas-slid"),t.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")})}},t.prototype.autohide=function(t){0===e(t.target).closest(this.$element).length&&this.hide()};var n=e.fn.offcanvas;e.fn.offcanvas=function(n){return this.each(function(){var i=e(this),r=i.data("bs.offcanvas"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);r||i.data("bs.offcanvas",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.offcanvas.Constructor=t,e.fn.offcanvas.noConflict=function(){return e.fn.offcanvas=n,this},e(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(r),o=s.data("bs.offcanvas"),a=o?"toggle":i.data();t.stopPropagation(),o?o.toggle():s.offcanvas(a)})}(window.jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",e.proxy(this.click,this))};t.DEFAULTS={target:"a"},t.prototype.click=function(t){var n=e(t.currentTarget).closest("tr").find(this.options.target)[0];if(e(t.target)[0]!==n)if(t.preventDefault(),n.click)n.click();else if(document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}};var n=e.fn.rowlink;e.fn.rowlink=function(n){return this.each(function(){var i=e(this),r=i.data("bs.rowlink");r||i.data("bs.rowlink",r=new t(this,n))})},e.fn.rowlink.Constructor=t,e.fn.rowlink.noConflict=function(){return e.fn.rowlink=n,this},e(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(t){if(0===e(t.target).closest(".rowlink-skip").length){var n=e(this);n.data("bs.rowlink")||(n.rowlink(n.data()),e(t.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(e){"use strict";var t=void 0!==window.orientation,n=navigator.userAgent.toLowerCase().indexOf("android")>-1,i="Microsoft Internet Explorer"==window.navigator.appName,r=function(t,i){n||(this.$element=e(t),this.options=e.extend({},r.DEFAULTS,i),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};r.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]",w:"[A-Za-z0-9]","*":"."}},r.prototype.init=function(){var t=this.options.definitions,n=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,e.each(this.mask.split(""),e.proxy(function(e,i){"?"==i?(n--,this.partialPosition=e):t[i]?(this.tests.push(new RegExp(t[i])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=e.map(this.mask.split(""),e.proxy(function(e){return"?"!=e?t[e]?this.options.placeholder:e:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",e.proxy(function(){return e.map(this.buffer,function(e,t){return this.tests[t]&&e!=this.options.placeholder?e:null}).join("")},this))},r.prototype.listen=function(){if(!this.$element.attr("readonly")){var t=(i?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",e.proxy(this.unmask,this)).on("focus.bs.inputmask",e.proxy(this.focusEvent,this)).on("blur.bs.inputmask",e.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",e.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",e.proxy(this.keypressEvent,this)).on(t,e.proxy(this.pasteEvent,this))}},r.prototype.caret=function(e,t){if(0!==this.$element.length){if("number"==typeof e)return t="number"==typeof t?t:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,t=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length}return{begin:e,end:t}}},r.prototype.seekNext=function(e){for(var t=this.mask.length;++e<=t&&!this.tests[e];);return e},r.prototype.seekPrev=function(e){for(;--e>=0&&!this.tests[e];);return e},r.prototype.shiftL=function(e,t){var n=this.mask.length;if(!(0>e)){for(var i=e,r=this.seekNext(t);n>i;i++)if(this.tests[i]){if(!(n>r&&this.tests[i].test(this.buffer[r])))break;this.buffer[i]=this.buffer[r],this.buffer[r]=this.options.placeholder,r=this.seekNext(r)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}},r.prototype.shiftR=function(e){for(var t=this.mask.length,n=e,i=this.options.placeholder;t>n;n++)if(this.tests[n]){var r=this.seekNext(n),s=this.buffer[n];if(this.buffer[n]=i,!(t>r&&this.tests[r].test(s)))break;i=s}},r.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},r.prototype.focusEvent=function(){this.focusText=this.$element.val();var e=this.mask.length,t=this.checkVal();this.writeBuffer();var n=this,i=function(){t==e?n.caret(0,t):n.caret(t)};i(),setTimeout(i,50)},r.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},r.prototype.keydownEvent=function(e){var n=e.which;if(8==n||46==n||t&&127==n){var i=this.caret(),r=i.begin,s=i.end;return s-r===0&&(r=46!=n?this.seekPrev(r):s=this.seekNext(r-1),s=46==n?this.seekNext(s):s),this.clearBuffer(r,s),this.shiftL(r,s-1),!1}return 27==n?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},r.prototype.keypressEvent=function(e){var t=this.mask.length,n=e.which,i=this.caret();if(e.ctrlKey||e.altKey||e.metaKey||32>n)return!0;if(n){i.end-i.begin!==0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1));var r=this.seekNext(i.begin-1);if(t>r){var s=String.fromCharCode(n);if(this.tests[r].test(s)){this.shiftR(r),this.buffer[r]=s,this.writeBuffer();var o=this.seekNext(r);this.caret(o)}}return!1}},r.prototype.pasteEvent=function(){var e=this;setTimeout(function(){e.caret(e.checkVal(!0))},0)},r.prototype.clearBuffer=function(e,t){for(var n=this.mask.length,i=e;t>i&&n>i;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},r.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},r.prototype.checkVal=function(e){for(var t=this.mask.length,n=this.$element.val(),i=-1,r=0,s=0;t>r;r++)if(this.tests[r]){for(this.buffer[r]=this.options.placeholder;s++<n.length;){var o=n.charAt(s-1);if(this.tests[r].test(o)){this.buffer[r]=o,i=r;break}}if(s>n.length)break}else this.buffer[r]==n.charAt(s)&&r!=this.partialPosition&&(s++,i=r);return!e&&i+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,t)):(e||i+1>=this.partialPosition)&&(this.writeBuffer(),e||this.$element.val(this.$element.val().substring(0,i+1))),this.partialPosition?r:this.firstNonMaskPos};var s=e.fn.inputmask;e.fn.inputmask=function(t){return this.each(function(){var n=e(this),i=n.data("bs.inputmask");i||n.data("bs.inputmask",i=new r(this,t))})},e.fn.inputmask.Constructor=r,e.fn.inputmask.noConflict=function(){return e.fn.inputmask=s,this},e(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var t=e(this);t.data("bs.inputmask")||t.inputmask(t.data())})}(window.jQuery),+function(e){"use strict";var t="Microsoft Internet Explorer"==window.navigator.appName,n=function(t,n){if(this.$element=e(t),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=e('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==i&&"none"!==i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",e.proxy(this.change,this)),e(this.$input[0].form).on("reset.bs.fileinput",e.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",e.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",e.proxy(this.clear,this))},n.prototype.change=function(t){var n=void 0===t.target.files?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;if(t.stopPropagation(),0===n.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var i=n[0];if(this.$preview.length>0&&("undefined"!=typeof i.type?i.type.match(/^image\/(gif|png|jpeg)$/):i.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var r=new FileReader,s=this.$preview,o=this.$element;r.onload=function(t){var r=e("<img>");r[0].src=t.target.result,n[0].result=t.target.result,o.find(".fileinput-filename").text(i.name),"none"!=s.css("max-height")&&r.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(r),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",n)},r.readAsDataURL(i)}else this.$element.find(".fileinput-filename").text(i.name),this.$preview.text(i.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},n.prototype.clear=function(e){if(e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),t){var n=this.$input.clone(!0);this.$input.after(n),this.$input.remove(),this.$input=n}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==e&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},n.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()};var i=e.fn.fileinput;e.fn.fileinput=function(t){return this.each(function(){var i=e(this),r=i.data("bs.fileinput");r||i.data("bs.fileinput",r=new n(this,t)),"string"==typeof t&&r[t]()})},e.fn.fileinput.Constructor=n,e.fn.fileinput.noConflict=function(){return e.fn.fileinput=i,this},e(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var n=e(this);if(!n.data("bs.fileinput")){n.fileinput(n.data());var i=e(t.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');i.length>0&&(t.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return kt.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){wt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var n=!0;return m(function(){return n&&(r(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){yn[e]||(r(t),yn[e]=!0)}function a(e,t){return function(n){return g(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(r,"months");return 0>t-s?(n=e.clone().add(r-1,"months"),i=(t-s)/(s-n)):(n=e.clone().add(r+1,"months"),i=(t-s)/(n-s)),-(r+i)}function c(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function h(){}function d(e,t){t!==!1&&D(e),f(this,e),this._d=new Date(+e._d),wn===!1&&(wn=!0,wt.updateOffset(this),wn=!1)}function p(e){var t=E(e),n=t.year||0,i=t.quarter||0,r=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=wt.localeData(),this._bubble()}function m(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Bt.length>0)for(n in Bt)i=Bt[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function _(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=F(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,i){var r,s;return null===i||isNaN(+i)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=wt.duration(n,i),w(this,r,e),this}}function w(e,t,n,i){var r=t._milliseconds,s=t._days,o=t._months;i=null==i?!0:i,r&&e._d.setTime(+e._d+r*n),s&&ft(e,"Date",mt(e,"Date")+s*n),o&&pt(e,mt(e,"Month")+o*n),i&&wt.updateOffset(e,s||o)}function C(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function S(e,t,n){var i,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&T(e[i])!==T(t[i]))&&o++;return o+s}function I(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dn[e]||pn[t]||t}return e}function E(e){var t,i,r={};for(i in e)n(e,i)&&(t=I(i),t&&(r[t]=e[i]));return r}function k(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}wt[t]=function(r,s){var o,a,l=wt._locale[t],u=[];if("number"==typeof r&&(s=r,r=e),a=function(e){var t=wt().utc().set(i,e);return l.call(wt._locale,t,r||"")},null!=s)return a(s);for(o=0;n>o;o++)u.push(a(o));return u}}function T(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function P(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function A(e,t,n){return ut(wt([e,11,31+t-n]),t,n).week}function M(e){return O(e)?366:365}function O(e){return e%4===0&&e%100!==0||e%400===0}function D(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Pt]<0||e._a[Pt]>11?Pt:e._a[At]<1||e._a[At]>P(e._a[Tt],e._a[Pt])?At:e._a[Mt]<0||e._a[Mt]>24||24===e._a[Mt]&&(0!==e._a[Ot]||0!==e._a[Dt]||0!==e._a[Lt])?Mt:e._a[Ot]<0||e._a[Ot]>59?Ot:e._a[Dt]<0||e._a[Dt]>59?Dt:e._a[Lt]<0||e._a[Lt]>999?Lt:-1,e._pf._overflowDayOfYear&&(Tt>t||t>At)&&(t=At),e._pf.overflow=t)}function L(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function R(e){return e?e.toLowerCase().replace("_","-"):e}function B(e){for(var t,n,i,r,s=0;s<e.length;){for(r=R(e[s]).split("-"),t=r.length,n=R(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=N(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&S(r,n,!0)>=t-1)break;t--}s++}return null}function N(e){var t=null;if(!Rt[e]&&Nt)try{t=wt.locale(),require("./locale/"+e),wt.locale(t)}catch(n){}return Rt[e]}function F(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(wt.isMoment(e)||x(e)?+e:+wt(e))-+n,n._d.setTime(+n._d+i),wt.updateOffset(n,!1),n):wt(e).local()}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,n,i=e.match(Wt);for(t=0,n=i.length;n>t;t++)i[t]=vn[i[t]]?vn[i[t]]:z(i[t]);return function(r){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(r,e):i[t];return s}}function W(e,t){return e.isValid()?(t=V(t,e.localeData()),mn[t]||(mn[t]=H(t)),mn[t](e)):e.localeData().invalidDate()}function V(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Vt.lastIndex=0;i>=0&&Vt.test(e);)e=e.replace(Vt,n),Vt.lastIndex=0,i-=1;return e}function j(e,t){var n,i=t._strict;switch(e){case"Q":return Qt;case"DDDD":return tn;case"YYYY":case"GGGG":case"gggg":return i?nn:qt;case"Y":case"G":case"g":return sn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?rn:Kt;case"S":if(i)return Qt;case"SS":if(i)return en;case"SSS":if(i)return tn;case"DDD":return Ut;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Gt;case"a":case"A":return t._locale._meridiemParse;case"x":return Zt;case"X":return Xt;case"Z":case"ZZ":return $t;case"T":return Yt;case"SSSS":return Jt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?en:jt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return jt;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(X(Z(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match($t)||[],n=t[t.length-1]||[],i=(n+"").match(cn)||["-",0,0],r=+(60*i[1])+T(i[2]);return"+"===i[0]?r:-r}function q(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[Pt]=3*(T(t)-1));break;case"M":case"MM":null!=t&&(r[Pt]=T(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[Pt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[At]=T(t));break;case"Do":null!=t&&(r[At]=T(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=T(t));break;case"YY":r[Tt]=wt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Tt]=T(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[Mt]=T(t);break;case"m":case"mm":r[Ot]=T(t);break;case"s":case"ss":r[Dt]=T(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Lt]=T(1e3*("0."+t));break;case"x":n._d=new Date(T(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=U(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=T(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=wt.parseTwoDigitYear(t)}}function K(e){var n,i,r,s,o,a,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,a=4,i=t(n.GG,e._a[Tt],ut(wt(),1,4).year),r=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,i=t(n.gg,e._a[Tt],ut(wt(),o,a).year),r=t(n.w,1),null!=n.d?(s=n.d,o>s&&++r):s=null!=n.e?n.e+o:o),l=ct(i,r,s,a,o),e._a[Tt]=l.year,e._dayOfYear=l.dayOfYear}function J(e){var n,i,r,s,o=[];if(!e._d){for(r=$(e),e._w&&null==e._a[At]&&null==e._a[Pt]&&K(e),e._dayOfYear&&(s=t(e._a[Tt],r[Tt]),e._dayOfYear>M(s)&&(e._pf._overflowDayOfYear=!0),i=st(s,0,e._dayOfYear),e._a[Pt]=i.getUTCMonth(),e._a[At]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=r[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Mt]&&0===e._a[Ot]&&0===e._a[Dt]&&0===e._a[Lt]&&(e._nextDay=!0,e._a[Mt]=0),e._d=(e._useUTC?st:rt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Mt]=24)}}function G(e){var t;e._d||(t=E(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],J(e))
}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Y(t){if(t._f===wt.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var n,i,r,s,o,a=""+t._i,l=a.length,u=0;for(r=V(t._f,t._locale).match(Wt)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(j(s,t))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),u+=i.length),vn[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),q(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-u,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Mt]<=12&&(t._pf.bigHour=e),t._a[Mt]=c(t._locale,t._a[Mt],t._meridiem),J(t),D(t)}function Z(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e){var t,n,r,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[s],Y(t),L(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==r||r>o)&&(r=o,n=t));m(e,n||t)}function et(e){var t,n,i=e._i,r=on.exec(i);if(r){for(e._pf.iso=!0,t=0,n=ln.length;n>t;t++)if(ln[t][1].exec(i)){e._f=ln[t][0]+(r[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(i)){e._f+=un[t][0];break}i.match($t)&&(e._f+="Z"),Y(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,wt.createFromInputFallback(e))}function nt(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function it(t){var n,i=t._i;i===e?t._d=new Date:x(i)?t._d=new Date(+i):null!==(n=Ft.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?tt(t):C(i)?(t._a=nt(i.slice(0),function(e){return parseInt(e,10)}),J(t)):"object"==typeof i?G(t):"number"==typeof i?t._d=new Date(i):wt.createFromInputFallback(t)}function rt(e,t,n,i,r,s,o){var a=new Date(e,t,n,i,r,s,o);return 1970>e&&a.setFullYear(e),a}function st(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ot(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function at(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function lt(e,t,n){var i=wt.duration(e).abs(),r=Et(i.as("s")),s=Et(i.as("m")),o=Et(i.as("h")),a=Et(i.as("d")),l=Et(i.as("M")),u=Et(i.as("y")),c=r<fn.s&&["s",r]||1===s&&["m"]||s<fn.m&&["mm",s]||1===o&&["h"]||o<fn.h&&["hh",o]||1===a&&["d"]||a<fn.d&&["dd",a]||1===l&&["M"]||l<fn.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,at.apply({},c)}function ut(e,t,n){var i,r=n-t,s=n-e.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=wt(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(e,t,n,i,r){var s,o,a=st(e,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:r,s=r-a+(a>i?7:0)-(r>a?7:0),o=7*(t-1)+(n-r)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:M(e-1)+o}}function ht(t){var n,i=t._i,r=t._f;return t._locale=t._locale||wt.localeData(t._l),null===i||r===e&&""===i?wt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),wt.isMoment(i)?new d(i,!0):(r?C(r)?Q(t):Y(t):it(t),n=new d(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function dt(e,t){var n,i;if(1===t.length&&C(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function pt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),P(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function mt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ft(e,t,n){return"Month"===t?pt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function _t(e,t){return function(n){return null!=n?(ft(this,e,n),wt.updateOffset(this,t),this):mt(this,e)}}function gt(e){return 400*e/146097}function vt(e){return 146097*e/400}function yt(e){wt.duration.fn[e]=function(){return this._data[e]}}function bt(e){"undefined"==typeof ender&&(Ct=It.moment,It.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wt):wt)}for(var wt,Ct,xt,St="2.9.0",It="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Et=Math.round,kt=Object.prototype.hasOwnProperty,Tt=0,Pt=1,At=2,Mt=3,Ot=4,Dt=5,Lt=6,Rt={},Bt=[],Nt="undefined"!=typeof module&&module&&module.exports,Ft=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ht=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Vt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,jt=/\d\d?/,Ut=/\d{1,3}/,qt=/\d{1,4}/,Kt=/[+\-]?\d{1,6}/,Jt=/\d+/,Gt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Yt=/T/i,Zt=/[\+\-]?\d+/,Xt=/[\+\-]?\d+(\.\d{1,3})?/,Qt=/\d/,en=/\d\d/,tn=/\d{3}/,nn=/\d{4}/,rn=/[+-]?\d{6}/,sn=/[+-]?\d+/,on=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,an="YYYY-MM-DDTHH:mm:ssZ",ln=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],cn=/([\+\-]|\d\d)/gi,hn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},mn={},fn={s:45,m:45,h:22,d:26,M:11},_n="DDD w W M D d".split(" "),gn="M D H h m s w W".split(" "),vn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+g(Math.abs(e),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return g(T(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(T(e/60),2)+":"+g(T(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+g(T(e/60),2)+g(T(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yn={},bn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],wn=!1;_n.length;)xt=_n.pop(),vn[xt+"o"]=l(vn[xt],xt);for(;gn.length;)xt=gn.pop(),vn[xt+xt]=a(vn[xt],2);vn.DDDD=a(vn.DDD,3),m(h.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=wt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=wt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wt=function(t,n,r,s){var o;return"boolean"==typeof r&&(s=r,r=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=r,o._strict=s,o._isUTC=!1,o._pf=i(),ht(o)},wt.suppressDeprecationWarnings=!1,wt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),wt.min=function(){var e=[].slice.call(arguments,0);return dt("isBefore",e)},wt.max=function(){var e=[].slice.call(arguments,0);return dt("isAfter",e)},wt.utc=function(t,n,r,s){var o;return"boolean"==typeof r&&(s=r,r=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=t,o._f=n,o._strict=s,o._pf=i(),ht(o).utc()},wt.unix=function(e){return wt(1e3*e)},wt.duration=function(e,t){var i,r,s,o,a=e,l=null;return wt.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(l=zt.exec(e))?(i="-"===l[1]?-1:1,a={y:0,d:T(l[At])*i,h:T(l[Mt])*i,m:T(l[Ot])*i,s:T(l[Dt])*i,ms:T(l[Lt])*i}):(l=Ht.exec(e))?(i="-"===l[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=y(wt(a.from),wt(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new p(a),wt.isDuration(e)&&n(e,"_locale")&&(r._locale=e._locale),r},wt.version=St,wt.defaultFormat=an,wt.ISO_8601=function(){},wt.momentProperties=Bt,wt.updateOffset=function(){},wt.relativeTimeThreshold=function(t,n){return fn[t]===e?!1:n===e?fn[t]:(fn[t]=n,!0)},wt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return wt.locale(e,t)}),wt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?wt.defineLocale(e,t):wt.localeData(e),n&&(wt.duration._locale=wt._locale=n)),wt._locale._abbr},wt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Rt[e]||(Rt[e]=new h),Rt[e].set(t),wt.locale(e),Rt[e]):(delete Rt[e],null)},wt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return wt.localeData(e)}),wt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wt._locale;if(!C(e)){if(t=N(e))return t;e=[e]}return B(e)},wt.isMoment=function(e){return e instanceof d||null!=e&&n(e,"_isAMomentObject")},wt.isDuration=function(e){return e instanceof p};for(xt=bn.length-1;xt>=0;--xt)k(bn[xt]);wt.normalizeUnits=function(e){return I(e)},wt.invalid=function(e){var t=wt.utc(0/0);return null!=e?m(t._pf,e):t._pf.userInvalidated=!0,t},wt.parseZone=function(){return wt.apply(null,arguments).parseZone()},wt.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)},wt.isDate=x,m(wt.fn=d.prototype,{clone:function(){return wt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=wt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return L(this)},isDSTShifted:function(){return this._a?this.isValid()&&S(this._a,(this._isUTC?wt.utc(this._a):wt(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=W(this,e||wt.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var i,r,s=F(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=I(t),"year"===t||"month"===t||"quarter"===t?(r=u(this,s),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-s,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?r:_(r)},from:function(e,t){return wt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(wt(),e)},calendar:function(e){var t=e||wt(),n=F(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,wt(t)))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ot(e,this.localeData()),this.add(e-t,"d")):t},month:_t("Month",!0),startOf:function(e){switch(e=I(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=I(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=I("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this>+e):(n=wt.isMoment(e)?+e:+wt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=I("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+e>+this):(n=wt.isMoment(e)?+e:+wt(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=I(t||"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this===+e):(n=+wt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),e>this?this:e}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?w(this,wt.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(U(this._i)),this},hasAlignedHourOffset:function(e){return e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return P(this.year(),this.month())},dayOfYear:function(e){var t=Et((wt(this).startOf("day")-wt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return A(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return A(this.year(),e.dow,e.doy)},get:function(e){return e=I(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=I(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=wt.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),wt.fn.millisecond=wt.fn.milliseconds=_t("Milliseconds",!1),wt.fn.second=wt.fn.seconds=_t("Seconds",!1),wt.fn.minute=wt.fn.minutes=_t("Minutes",!1),wt.fn.hour=wt.fn.hours=_t("Hours",!0),wt.fn.date=_t("Date",!0),wt.fn.dates=s("dates accessor is deprecated. Use date instead.",_t("Date",!0)),wt.fn.year=_t("FullYear",!0),wt.fn.years=s("years accessor is deprecated. Use year instead.",_t("FullYear",!0)),wt.fn.days=wt.fn.day,wt.fn.months=wt.fn.month,wt.fn.weeks=wt.fn.week,wt.fn.isoWeeks=wt.fn.isoWeek,wt.fn.quarters=wt.fn.quarter,wt.fn.toJSON=wt.fn.toISOString,wt.fn.isUTC=wt.fn.isUtc,m(wt.duration.fn=p.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,s=this._months,o=this._data,a=0;o.milliseconds=i%1e3,e=_(i/1e3),o.seconds=e%60,t=_(e/60),o.minutes=t%60,n=_(t/60),o.hours=n%24,r+=_(n/24),a=_(gt(r)),r-=_(vt(a)),s+=_(r/30),r%=30,a+=_(s/12),s%=12,o.days=r,o.months=s,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return _(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(e){var t=lt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=wt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=wt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=I(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=I(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*gt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:wt.fn.lang,locale:wt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),wt.duration.fn.toString=wt.duration.fn.toISOString;for(xt in hn)n(hn,xt)&&yt(xt.toLowerCase());wt.duration.fn.asMilliseconds=function(){return this.as("ms")},wt.duration.fn.asSeconds=function(){return this.as("s")},wt.duration.fn.asMinutes=function(){return this.as("m")},wt.duration.fn.asHours=function(){return this.as("h")},wt.duration.fn.asDays=function(){return this.as("d")},wt.duration.fn.asWeeks=function(){return this.as("weeks")},wt.duration.fn.asMonths=function(){return this.as("M")},wt.duration.fn.asYears=function(){return this.as("y")},wt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===T(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Nt?module.exports=wt:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(It.moment=Ct),wt}),bt(!0)):bt()}.call(this),!function(global){!function(e){"function"==typeof define&&define.amd?define([],e):(global.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.0.winjs.2014.10.2 base.js,StartTM"),e(global.WinJS),global.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.0.winjs.2014.10.2 base.js,StopTM"))}(function(WinJS){var require,define;!function(){"use strict";function e(e,t){var n=e.split("/");return n.pop(),t.map(function(e){if("."===e[0]){var t=e.split("/"),i=n.slice(0);return t.forEach(function(e){".."===e?i.pop():"."!==e&&i.push(e)}),i.join("/")}return e})}function t(e,t){return e.map(function(e){if("exports"===e)return t;var r=i[e];if(!r)throw new Error("Undefined dependency: "+e);return r.resolved||(r.resolved=n(r.dependencies,r.factory,r.exports),r.exports&&(r.resolved=r.exports)),r.resolved})}function n(e,n,i){var r=t(e,i);return n&&n.apply?n.apply(null,r):n}var i={};define=function(t,n,r){Array.isArray(n)||(r=n,n=[]);var s={dependencies:e(t,n),factory:r};-1!==n.indexOf("exports")&&(s.exports={}),i[t]=s},require=function(e,t){Array.isArray(e)||(e=[e]),n(e,t)}}(),define("amd",function(){}),define("WinJS/Core/_WinJS",{}),function(e){"use strict";define("WinJS/Core/_Global",e)}(this),define("WinJS/Core/_BaseCoreUtils",["./_Global"],function(e){"use strict";function t(e){return e.supportedForProcessing=!0,e}var n=!!e.Windows;return{hasWinRT:n,markSupportedForProcessing:t,_setImmediate:e.setImmediate?e.setImmediate.bind(e):function(t){e.setTimeout(t,0)}}}),define("WinJS/Core/_WriteProfilerMark",["./_Global"],function(e){"use strict";return e.msWriteProfilerMark||function(){}}),define("WinJS/Core/_Base",["./_WinJS","./_Global","./_BaseCoreUtils","./_WriteProfilerMark"],function(e,t,n,i){"use strict";function r(e,t,n){var i,r,s,o=Object.keys(t),a=Array.isArray(e);for(r=0,s=o.length;s>r;r++){var l=o[r],u=95!==l.charCodeAt(0),c=t[l];!c||"object"!=typeof c||void 0===c.value&&"function"!=typeof c.get&&"function"!=typeof c.set?u?a?e.forEach(function(e){e[l]=c}):e[l]=c:(i=i||{},i[l]={value:c,enumerable:u,configurable:!0,writable:!0}):(void 0===c.enumerable&&(c.enumerable=u),n&&c.setName&&"function"==typeof c.setName&&c.setName(n+"."+l),i=i||{},i[l]=c)}i&&(a?e.forEach(function(e){Object.defineProperties(e,i)}):Object.defineProperties(e,i))}return function(){function n(n,i){var r=n||{};if(i){var s=i.split(".");r===t&&"WinJS"===s[0]&&(r=e,s.splice(0,1));for(var o=0,a=s.length;a>o;o++){var l=s[o];r[l]||Object.defineProperty(r,l,{value:{},writable:!1,enumerable:!0,configurable:!0}),r=r[l]}}return r}function s(e,t,i){var s=n(e,t);return i&&r(s,i,t||"<ANONYMOUS>"),s}function o(e,n){return s(t,e,n)}function a(e){var t,n,r=c.uninitialized;return{setName:function(e){t=e},get:function(){switch(r){case c.initialized:return n;case c.uninitialized:r=c.working;try{i("WinJS.Namespace._lazy:"+t+",StartTM"),n=e()}finally{i("WinJS.Namespace._lazy:"+t+",StopTM"),r=c.uninitialized}return e=null,r=c.initialized,n;case c.working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(e){switch(r){case c.working:throw"Illegal: reentrancy on initialization";default:r=c.initialized,n=e}},enumerable:!0,configurable:!0}}function l(e,i,s){var o=[e],a=null;return i&&(a=n(t,i),o.push(a)),r(o,s,i||"<ANONYMOUS>"),a}var u=e;u.Namespace||(u.Namespace=Object.create(Object.prototype));var c={uninitialized:1,working:2,initialized:3};Object.defineProperties(u.Namespace,{defineWithParent:{value:s,writable:!0,enumerable:!0,configurable:!0},define:{value:o,writable:!0,enumerable:!0,configurable:!0},_lazy:{value:a,writable:!0,enumerable:!0,configurable:!0},_moduleDefine:{value:l,writable:!0,enumerable:!0,configurable:!0}})}(),function(){function t(e,t,i){return e=e||function(){},n.markSupportedForProcessing(e),t&&r(e.prototype,t),i&&r(e,i),e}function i(e,i,s,o){if(e){i=i||function(){};var a=e.prototype;return i.prototype=Object.create(a),n.markSupportedForProcessing(i),Object.defineProperty(i.prototype,"constructor",{value:i,writable:!0,configurable:!0,enumerable:!0}),s&&r(i.prototype,s),o&&r(i,o),i}return t(i,s,o)}function s(e){e=e||function(){};var t,n;for(t=1,n=arguments.length;n>t;t++)r(e.prototype,arguments[t]);return e}e.Namespace.define("WinJS.Class",{define:t,derive:i,mix:s})}(),{Namespace:e.Namespace,Class:e.Class}}),define("WinJS/Core/_ErrorFromName",["./_Base"],function(e){"use strict";var t=e.Class.derive(Error,function(e,t){this.name=e,this.message=t||e},{},{supportedForProcessing:!1});return e.Namespace.define("WinJS",{ErrorFromName:t}),t}),define("WinJS/Core/_WinRT",["exports","./_Global","./_Base"],function(e,t,n){"use strict";e.msGetWeakWinRTProperty=t.msGetWeakWinRTProperty,e.msSetWeakWinRTProperty=t.msSetWeakWinRTProperty;var i=["Windows.ApplicationModel.DesignMode.designModeEnabled","Windows.ApplicationModel.Resources.Core.ResourceContext","Windows.ApplicationModel.Resources.Core.ResourceManager","Windows.ApplicationModel.Search.Core.SearchSuggestionManager","Windows.ApplicationModel.Search.SearchQueryLinguisticDetails","Windows.Data.Text.SemanticTextQuery","Windows.Foundation.Collections.CollectionChange","Windows.Foundation.Uri","Windows.Globalization.ApplicationLanguages","Windows.Globalization.Calendar","Windows.Globalization.DateTimeFormatting","Windows.Globalization.Language","Windows.Phone.UI.Input.HardwareButtons","Windows.Storage.ApplicationData","Windows.Storage.CreationCollisionOption","Windows.Storage.BulkAccess.FileInformationFactory","Windows.Storage.FileIO","Windows.Storage.FileProperties.ThumbnailType","Windows.Storage.FileProperties.ThumbnailMode","Windows.Storage.FileProperties.ThumbnailOptions","Windows.Storage.KnownFolders","Windows.Storage.Search.FolderDepth","Windows.Storage.Search.IndexerOption","Windows.Storage.Streams.RandomAccessStreamReference","Windows.UI.ApplicationSettings.SettingsEdgeLocation","Windows.UI.ApplicationSettings.SettingsCommand","Windows.UI.ApplicationSettings.SettingsPane","Windows.UI.Core.AnimationMetrics","Windows.UI.Input.EdgeGesture","Windows.UI.Input.EdgeGestureKind","Windows.UI.Input.PointerPoint","Windows.UI.ViewManagement.HandPreference","Windows.UI.ViewManagement.InputPane","Windows.UI.ViewManagement.UISettings","Windows.UI.WebUI.Core.WebUICommandBar","Windows.UI.WebUI.Core.WebUICommandBarBitmapIcon","Windows.UI.WebUI.Core.WebUICommandBarClosedDisplayMode","Windows.UI.WebUI.Core.WebUICommandBarIconButton","Windows.UI.WebUI.Core.WebUICommandBarSymbolIcon","Windows.UI.WebUI.WebUIApplication"];i.forEach(function(i){var r=i.split("."),s={};s[r[r.length-1]]={get:function(){return r.reduce(function(e,t){return e?e[t]:null},t)}},n.Namespace.defineWithParent(e,r.slice(0,-1).join("."),s)})}),define("WinJS/Core/_Events",["exports","./_Base"],function(e,t){"use strict";function n(e){var t="_on"+e+"state";
return{get:function(){var e=this[t];return e&&e.userHandler},set:function(n){var i=this[t];n?(i||(i={wrapper:function(e){return i.userHandler(e)},userHandler:n},Object.defineProperty(this,t,{value:i,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(e,i.wrapper,!1)),i.userHandler=n):i&&(this.removeEventListener(e,i.wrapper,!1),this[t]=null)},enumerable:!0}}function i(){for(var e={},t=0,i=arguments.length;i>t;t++){var r=arguments[t];e["on"+r]=n(r)}return e}var r=t.Class.define(function(e,t,n){this.detail=t,this.target=n,this.timeStamp=Date.now(),this.type=e},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),s={_listeners:null,addEventListener:function(e,t,n){n=n||!1,this._listeners=this._listeners||{};for(var i=this._listeners[e]=this._listeners[e]||[],r=0,s=i.length;s>r;r++){var o=i[r];if(o.useCapture===n&&o.listener===t)return}i.push({listener:t,useCapture:n})},dispatchEvent:function(e,t){var n=this._listeners&&this._listeners[e];if(n){var i=new r(e,t,this);n=n.slice(0,n.length);for(var s=0,o=n.length;o>s&&!i._stopImmediatePropagationCalled;s++)n[s].listener(i);return i.defaultPrevented||!1}return!1},removeEventListener:function(e,t,n){n=n||!1;var i=this._listeners&&this._listeners[e];if(i)for(var r=0,s=i.length;s>r;r++){var o=i[r];if(o.listener===t&&o.useCapture===n){i.splice(r,1),0===i.length&&delete this._listeners[e];break}}}};t.Namespace._moduleDefine(e,"WinJS.Utilities",{_createEventProperty:n,createEventProperties:i,eventMixin:s})}),define("require-json",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("require-json!en-US/ui.resjson",{appBarAriaLabel:"App Bar",appBarCommandAriaLabel:"App Bar Item",averageRating:"Average Rating",backbuttonarialabel:"Back",clearYourRating:"Clear your rating",closeOverlay:"Close",datePicker:"Date Picker",flipViewPanningContainerAriaLabel:"Scrolling Container",flyoutAriaLabel:"Flyout",hubViewportAriaLabel:"Scrolling Container",listViewViewportAriaLabel:"Scrolling Container",menuCommandAriaLabel:"Menu Item",menuAriaLabel:"Menu",navBarContainerViewportAriaLabel:"Scrolling Container",off:"Off",on:"On",pivotAriaLabel:"Pivot",pivotViewportAriaLabel:"Scrolling Container",searchBoxAriaLabel:"Searchbox",searchBoxAriaLabelInputNoPlaceHolder:"Searchbox, enter to submit query, esc to clear text",searchBoxAriaLabelInputPlaceHolder:"Searchbox, {0}, enter to submit query, esc to clear text",searchBoxAriaLabelButton:"Click to submit query",searchBoxAriaLabelQuery:"Suggestion: {0}","_searchBoxAriaLabelQuery.comment":"Suggestion: query text (example: Suggestion: contoso)",searchBoxAriaLabelSeparator:"Separator: {0}","_searchBoxAriaLabelSeparator.comment":"Separator: separator text (example: Separator: People or Separator: Apps)",searchBoxAriaLabelResult:"Result: {0}, {1}","_searchBoxAriaLabelResult.comment":"Result: text, detailed text (example: Result: contoso, www.contoso.com)",selectAMPM:"Select A.M P.M",selectDay:"Select Day",selectHour:"Select Hour",selectMinute:"Select Minute",selectMonth:"Select Month",selectYear:"Select Year",settingsFlyoutAriaLabel:"Settings Flyout",tentativeRating:"Tentative Rating",timePicker:"Time Picker",unrated:"Unrated",userRating:"User Rating","appBarIcons\\previous":"","_appBarIcons\\previous.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\next":"","_appBarIcons\\next.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\play":"","_appBarIcons\\play.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\pause":"","_appBarIcons\\pause.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\edit":"","_appBarIcons\\edit.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\save":"","_appBarIcons\\save.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\clear":"","_appBarIcons\\clear.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\delete":"","_appBarIcons\\delete.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\remove":"","_appBarIcons\\remove.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\add":"","_appBarIcons\\add.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\cancel":"","_appBarIcons\\cancel.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\accept":"","_appBarIcons\\accept.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\more":"","_appBarIcons\\more.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\redo":"","_appBarIcons\\redo.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\undo":"","_appBarIcons\\undo.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\home":"","_appBarIcons\\home.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\up":"","_appBarIcons\\up.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\forward":"","_appBarIcons\\forward.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\right":"","_appBarIcons\\right.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\back":"","_appBarIcons\\back.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\left":"","_appBarIcons\\left.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\favorite":"","_appBarIcons\\favorite.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\camera":"","_appBarIcons\\camera.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\settings":"","_appBarIcons\\settings.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\video":"","_appBarIcons\\video.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\sync":"","_appBarIcons\\sync.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\download":"","_appBarIcons\\download.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mail":"","_appBarIcons\\mail.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\find":"","_appBarIcons\\find.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\help":"","_appBarIcons\\help.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\upload":"","_appBarIcons\\upload.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\emoji":"","_appBarIcons\\emoji.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\twopage":"","_appBarIcons\\twopage.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\leavechat":"","_appBarIcons\\leavechat.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mailforward":"","_appBarIcons\\mailforward.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\clock":"","_appBarIcons\\clock.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\send":"","_appBarIcons\\send.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\crop":"","_appBarIcons\\crop.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\rotatecamera":"","_appBarIcons\\rotatecamera.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\people":"","_appBarIcons\\people.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\closepane":"","_appBarIcons\\closepane.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\openpane":"","_appBarIcons\\openpane.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\world":"","_appBarIcons\\world.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\flag":"","_appBarIcons\\flag.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\previewlink":"","_appBarIcons\\previewlink.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\globe":"","_appBarIcons\\globe.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\trim":"","_appBarIcons\\trim.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\attachcamera":"","_appBarIcons\\attachcamera.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\zoomin":"","_appBarIcons\\zoomin.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\bookmarks":"","_appBarIcons\\bookmarks.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\document":"","_appBarIcons\\document.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\protecteddocument":"","_appBarIcons\\protecteddocument.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\page":"","_appBarIcons\\page.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\bullets":"","_appBarIcons\\bullets.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\comment":"","_appBarIcons\\comment.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mail2":"","_appBarIcons\\mail2.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\contactinfo":"","_appBarIcons\\contactinfo.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\hangup":"","_appBarIcons\\hangup.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\viewall":"","_appBarIcons\\viewall.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mappin":"","_appBarIcons\\mappin.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\phone":"","_appBarIcons\\phone.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\videochat":"","_appBarIcons\\videochat.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\switch":"","_appBarIcons\\switch.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\contact":"","_appBarIcons\\contact.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\rename":"","_appBarIcons\\rename.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\pin":"","_appBarIcons\\pin.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\musicinfo":"","_appBarIcons\\musicinfo.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\go":"","_appBarIcons\\go.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\keyboard":"","_appBarIcons\\keyboard.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\dockleft":"","_appBarIcons\\dockleft.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\dockright":"","_appBarIcons\\dockright.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\dockbottom":"","_appBarIcons\\dockbottom.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\remote":"","_appBarIcons\\remote.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\refresh":"","_appBarIcons\\refresh.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\rotate":"","_appBarIcons\\rotate.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\shuffle":"","_appBarIcons\\shuffle.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\list":"","_appBarIcons\\list.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\shop":"","_appBarIcons\\shop.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\selectall":"","_appBarIcons\\selectall.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\orientation":"","_appBarIcons\\orientation.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\import":"","_appBarIcons\\import.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\importall":"","_appBarIcons\\importall.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\browsephotos":"","_appBarIcons\\browsephotos.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\webcam":"","_appBarIcons\\webcam.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\pictures":"","_appBarIcons\\pictures.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\savelocal":"","_appBarIcons\\savelocal.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\caption":"","_appBarIcons\\caption.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\stop":"","_appBarIcons\\stop.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\showresults":"","_appBarIcons\\showresults.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\volume":"","_appBarIcons\\volume.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\repair":"","_appBarIcons\\repair.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\message":"","_appBarIcons\\message.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\page2":"","_appBarIcons\\page2.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\calendarday":"","_appBarIcons\\calendarday.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\calendarweek":"","_appBarIcons\\calendarweek.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\calendar":"","_appBarIcons\\calendar.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\characters":"","_appBarIcons\\characters.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mailreplyall":"","_appBarIcons\\mailreplyall.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\read":"","_appBarIcons\\read.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\link":"","_appBarIcons\\link.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\accounts":"","_appBarIcons\\accounts.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\showbcc":"","_appBarIcons\\showbcc.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\hidebcc":"","_appBarIcons\\hidebcc.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\cut":"","_appBarIcons\\cut.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\attach":"","_appBarIcons\\attach.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\paste":"","_appBarIcons\\paste.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\filter":"","_appBarIcons\\filter.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\copy":"","_appBarIcons\\copy.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\emoji2":"","_appBarIcons\\emoji2.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\important":"","_appBarIcons\\important.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mailreply":"","_appBarIcons\\mailreply.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\slideshow":"","_appBarIcons\\slideshow.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\sort":"","_appBarIcons\\sort.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\manage":"","_appBarIcons\\manage.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\allapps":"","_appBarIcons\\allapps.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\disconnectdrive":"","_appBarIcons\\disconnectdrive.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mapdrive":"","_appBarIcons\\mapdrive.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\newwindow":"","_appBarIcons\\newwindow.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\openwith":"","_appBarIcons\\openwith.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\contactpresence":"","_appBarIcons\\contactpresence.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\priority":"","_appBarIcons\\priority.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\uploadskydrive":"","_appBarIcons\\uploadskydrive.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\gototoday":"","_appBarIcons\\gototoday.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\font":"","_appBarIcons\\font.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fontcolor":"","_appBarIcons\\fontcolor.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\contact2":"","_appBarIcons\\contact2.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\folder":"","_appBarIcons\\folder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\audio":"","_appBarIcons\\audio.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\placeholder":"","_appBarIcons\\placeholder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\view":"","_appBarIcons\\view.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\setlockscreen":"","_appBarIcons\\setlockscreen.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\settile":"","_appBarIcons\\settile.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\cc":"","_appBarIcons\\cc.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\stopslideshow":"","_appBarIcons\\stopslideshow.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\permissions":"","_appBarIcons\\permissions.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\highlight":"","_appBarIcons\\highlight.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\disableupdates":"","_appBarIcons\\disableupdates.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\unfavorite":"","_appBarIcons\\unfavorite.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\unpin":"","_appBarIcons\\unpin.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\openlocal":"","_appBarIcons\\openlocal.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\mute":"","_appBarIcons\\mute.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\italic":"","_appBarIcons\\italic.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\underline":"","_appBarIcons\\underline.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\bold":"","_appBarIcons\\bold.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\movetofolder":"","_appBarIcons\\movetofolder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\likedislike":"","_appBarIcons\\likedislike.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\dislike":"","_appBarIcons\\dislike.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\like":"","_appBarIcons\\like.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\alignright":"","_appBarIcons\\alignright.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\aligncenter":"","_appBarIcons\\aligncenter.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\alignleft":"","_appBarIcons\\alignleft.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\zoom":"","_appBarIcons\\zoom.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\zoomout":"","_appBarIcons\\zoomout.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\openfile":"","_appBarIcons\\openfile.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\otheruser":"","_appBarIcons\\otheruser.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\admin":"","_appBarIcons\\admin.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\street":"","_appBarIcons\\street.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\map":"","_appBarIcons\\map.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\clearselection":"","_appBarIcons\\clearselection.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fontdecrease":"","_appBarIcons\\fontdecrease.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fontincrease":"","_appBarIcons\\fontincrease.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fontsize":"","_appBarIcons\\fontsize.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\cellphone":"","_appBarIcons\\cellphone.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\reshare":"","_appBarIcons\\reshare.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\tag":"","_appBarIcons\\tag.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\repeatone":"","_appBarIcons\\repeatone.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\repeatall":"","_appBarIcons\\repeatall.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\outlinestar":"","_appBarIcons\\outlinestar.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\solidstar":"","_appBarIcons\\solidstar.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\calculator":"","_appBarIcons\\calculator.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\directions":"","_appBarIcons\\directions.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\target":"","_appBarIcons\\target.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\library":"","_appBarIcons\\library.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\phonebook":"","_appBarIcons\\phonebook.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\memo":"","_appBarIcons\\memo.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\microphone":"","_appBarIcons\\microphone.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\postupdate":"","_appBarIcons\\postupdate.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\backtowindow":"","_appBarIcons\\backtowindow.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fullscreen":"","_appBarIcons\\fullscreen.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\newfolder":"","_appBarIcons\\newfolder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\calendarreply":"","_appBarIcons\\calendarreply.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\unsyncfolder":"","_appBarIcons\\unsyncfolder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\reporthacked":"","_appBarIcons\\reporthacked.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\syncfolder":"","_appBarIcons\\syncfolder.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\blockcontact":"","_appBarIcons\\blockcontact.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\switchapps":"","_appBarIcons\\switchapps.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\addfriend":"","_appBarIcons\\addfriend.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\touchpointer":"","_appBarIcons\\touchpointer.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\gotostart":"","_appBarIcons\\gotostart.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\zerobars":"","_appBarIcons\\zerobars.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\onebar":"","_appBarIcons\\onebar.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\twobars":"","_appBarIcons\\twobars.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\threebars":"","_appBarIcons\\threebars.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\fourbars":"","_appBarIcons\\fourbars.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\scan":"","_appBarIcons\\scan.comment":"{Locked:qps-ploc,qps-plocm}","appBarIcons\\preview":"","_appBarIcons\\preview.comment":"{Locked:qps-ploc,qps-plocm}"}),define("WinJS/Core/_Resources",["exports","./_Global","./_WinRT","./_Base","./_Events","require-json!en-US/ui.resjson"],function(e,t,n,i,r,s){"use strict";function o(e){var t=b("ms-resource://"+u+"/"+e);return t.empty&&(t=a(e)),t}function a(e){var t=e.split("/");t.shift();var n=s[t.join("\\")];return"string"==typeof n&&(n={value:n}),n||{value:e,empty:!0}}function l(e){var t=arguments;return t.length>1&&(e=e.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(e,n,i,r,s,o){if(s||o)throw l(v.malformedFormatStringInput,s||o);return n&&"{"||i&&"}"||t[(0|r)+1]})),e}var u="WinJS.3.0",c="Developer.";0===u.indexOf(c)&&(u=u.substring(c.length));var h,d,p=!1,m="contextchanged",f=i.Class.mix(i.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),_=new f,g=r._createEventProperty,v={get malformedFormatStringInput(){return"Malformed, did you mean to escape your '{0}'?"}};i.Namespace.define("WinJS.Resources",{_getWinJSString:o}),i.Namespace._moduleDefine(e,"WinJS.Resources",{addEventListener:function(t,i,r){if(n.Windows.ApplicationModel.Resources.Core.ResourceManager&&!p&&t===m)try{var s=e._getResourceContext();s?s.qualifierValues.addEventListener("mapchanged",function(t){e.dispatchEvent(m,{qualifier:t.key,changed:t.target[t.key]})},!1):n.Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(t){e.dispatchEvent(m,{qualifier:t.key,changed:t.target[t.key]})},!1),p=!0}catch(o){}_.addEventListener(t,i,r)},removeEventListener:_.removeEventListener.bind(_),dispatchEvent:_.dispatchEvent.bind(_),_formatString:l,_getStringWinRT:function(t){if(!h){var i=n.Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{h=i.getSubtree("Resources")}catch(r){}h||(h=i)}var s,o,a;try{var l=e._getResourceContext();a=l?h.getValue(t,l):h.getValue(t),a&&(s=a.valueAsString,void 0===s&&(s=a.toString()))}catch(r){}if(!s)return e._getStringJS(t);try{o=a.getQualifierValue("Language")}catch(r){return{value:s}}return{value:s,lang:o}},_getStringJS:function(e){var n=t.strings&&t.strings[e];return"string"==typeof n&&(n={value:n}),n||{value:e,empty:!0}},_getResourceContext:function(){if(t.document&&"undefined"==typeof d){var e=n.Windows.ApplicationModel.Resources.Core.ResourceContext;d=e.getForCurrentView?e.getForCurrentView():null}return d},oncontextchanged:g(m)});var y=n.Windows.ApplicationModel.Resources.Core.ResourceManager?e._getStringWinRT:e._getStringJS,b=function(e){return y(e)};i.Namespace._moduleDefine(e,null,{_formatString:l,_getWinJSString:o}),i.Namespace._moduleDefine(e,"WinJS.Resources",{getString:{get:function(){return b},set:function(e){b=e}}})}),define("WinJS/Core/_Trace",["./_Global"],function(e){"use strict";function t(e){return e}return{_traceAsyncOperationStarting:e.Debug&&e.Debug.msTraceAsyncOperationStarting&&e.Debug.msTraceAsyncOperationStarting.bind(e.Debug)||t,_traceAsyncOperationCompleted:e.Debug&&e.Debug.msTraceAsyncOperationCompleted&&e.Debug.msTraceAsyncOperationCompleted.bind(e.Debug)||t,_traceAsyncCallbackStarting:e.Debug&&e.Debug.msTraceAsyncCallbackStarting&&e.Debug.msTraceAsyncCallbackStarting.bind(e.Debug)||t,_traceAsyncCallbackCompleted:e.Debug&&e.Debug.msTraceAsyncCallbackCompleted&&e.Debug.msTraceAsyncCallbackCompleted.bind(e.Debug)||t}}),define("WinJS/Promise/_StateMachine",["../Core/_Global","../Core/_BaseCoreUtils","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Trace"],function(e,t,n,i,r,s){"use strict";function o(){}function a(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:F,e._value=t,e._setState(n)}function l(e,t,n,i,r,s){return{exception:e,error:t,promise:n,handler:s,id:i,parent:r}}function u(e,t,n,i){var r=n._isException,s=n._errorId;return l(r?t:null,r?null:t,e,s,n,i)}function c(e,t,n){var i=n._isException,r=n._errorId;return b(e,r,i),l(i?t:null,i?null:t,e,r,n)}function h(e,t){var n=++V;return b(e,n),l(null,t,e,n)}function d(e,t){var n=++V;return b(e,n,!0),l(t,null,e,n)}function p(e,t,n,i){var r=s._traceAsyncOperationStarting("WinJS.Promise.done");y(e,{c:t,e:n,p:i,asyncOpID:r})}function m(e,t,n,i){e._value=t,g(e,t,n,i),e._setState(H)}function f(t,n){var i=t._value,r=t._listeners;if(r){t._listeners=null;var o,a;for(o=0,a=Array.isArray(r)?r.length:1;a>o;o++){var l=1===a?r:r[o],u=l.c,c=l.promise;if(s._traceAsyncOperationCompleted(l.asyncOpID,e.Debug&&e.Debug.MS_ASYNC_OP_STATUS_SUCCESS),c){s._traceAsyncCallbackStarting(l.asyncOpID);try{c._setCompleteValue(u?u(i):i)}catch(h){c._setExceptionValue(h)}finally{s._traceAsyncCallbackCompleted()}c._state!==L&&c._listeners&&n.push(c)}else G.prototype.done.call(t,u)}}}function _(t,n){var i=t._value,r=t._listeners;if(r){t._listeners=null;var o,a;for(o=0,a=Array.isArray(r)?r.length:1;a>o;o++){var l=1===a?r:r[o],c=l.e,h=l.promise,d=e.Debug&&(i&&i.name===P?e.Debug.MS_ASYNC_OP_STATUS_CANCELED:e.Debug.MS_ASYNC_OP_STATUS_ERROR);if(s._traceAsyncOperationCompleted(l.asyncOpID,d),h){var p=!1;try{c?(s._traceAsyncCallbackStarting(l.asyncOpID),p=!0,c.handlesOnError||g(h,i,u,t,c),h._setCompleteValue(c(i))):h._setChainedErrorValue(i,t)}catch(m){h._setExceptionValue(m)}finally{p&&s._traceAsyncCallbackCompleted()}h._state!==L&&h._listeners&&n.push(h)}else K.prototype.done.call(t,null,c)}}}function g(e,t,n,i,r){if(k._listeners[T]){if(t instanceof Error&&t.message===P)return;k.dispatchEvent(T,n(e,t,i,r))}}function v(e,t){var n=e._listeners;if(n){var i,r;for(i=0,r=Array.isArray(n)?n.length:1;r>i;i++){var s=1===r?n:n[i],o=s.p;if(o)try{o(t)}catch(a){}s.c||s.e||!s.promise||s.promise._progress(t)}}}function y(e,t){var n=e._listeners;n?(n=Array.isArray(n)?n:[n],n.push(t)):n=t,e._listeners=n}function b(e,t,n){e._isException=n||!1,e._errorId=t}function w(e,t,n,i){e._value=t,g(e,t,n,i),e._setState(W)}function C(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:z,e._value=t,e._setState(n)}function x(e,t,n,i){var r=new q(e),o=s._traceAsyncOperationStarting("WinJS.Promise.then");return y(e,{promise:r,c:t,e:n,p:i,asyncOpID:o}),r}function S(n){var i;return new $(function(r){n?i=e.setTimeout(r,n):t._setImmediate(r)},function(){i&&e.clearTimeout(i)})}function I(e,t){var n=function(){t.cancel()},i=function(){e.cancel()};return e.then(n),t.then(i,i),t}e.Debug&&(e.Debug.setNonUserCodeExceptions=!0);var E=n.Class.mix(n.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),k=new E;k._listeners={};var T="error",P="Canceled",A=!1,M={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};M.all=M.promise|M.thenPromise|M.errorPromise|M.exceptionPromise|M.completePromise;var O,D,L,R,B,N,F,z,H,W,V=1;O={name:"created",enter:function(e){e._setState(D)},cancel:o,done:o,then:o,_completed:o,_error:o,_notify:o,_progress:o,_setCompleteValue:o,_setErrorValue:o},D={name:"working",enter:o,cancel:function(e){e._setState(B)},done:p,then:x,_completed:a,_error:m,_notify:o,_progress:v,_setCompleteValue:C,_setErrorValue:w},L={name:"waiting",enter:function(e){var t=e._value;if(t instanceof q&&t._state!==W&&t._state!==z)y(t,{promise:e});else{var n=function(i){t._errorId?e._chainedError(i,t):(g(e,i,u,t,n),e._error(i))};n.handlesOnError=!0,t.then(e._completed.bind(e),n,e._progress.bind(e))}},cancel:function(e){e._setState(R)},done:p,then:x,_completed:a,_error:m,_notify:o,_progress:v,_setCompleteValue:C,_setErrorValue:w},R={name:"waiting_canceled",enter:function(e){e._setState(N);var t=e._value;t.cancel&&t.cancel()},cancel:o,done:p,then:x,_completed:a,_error:m,_notify:o,_progress:v,_setCompleteValue:C,_setErrorValue:w},B={name:"canceled",enter:function(e){e._setState(N),e._cancelAction()},cancel:o,done:p,then:x,_completed:a,_error:m,_notify:o,_progress:v,_setCompleteValue:C,_setErrorValue:w},N={name:"canceling",enter:function(e){var t=new Error(P);t.name=t.message,e._value=t,e._setState(H)},cancel:o,done:o,then:o,_completed:o,_error:o,_notify:o,_progress:o,_setCompleteValue:o,_setErrorValue:o},F={name:"complete_notify",enter:function(e){if(e.done=G.prototype.done,e.then=G.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.shift(),t._state._notify(t,n);e._setState(z)},cancel:o,done:null,then:null,_completed:o,_error:o,_notify:f,_progress:o,_setCompleteValue:o,_setErrorValue:o},z={name:"success",enter:function(e){e.done=G.prototype.done,e.then=G.prototype.then,e._cleanupAction()},cancel:o,done:null,then:null,_completed:o,_error:o,_notify:f,_progress:o,_setCompleteValue:o,_setErrorValue:o},H={name:"error_notify",enter:function(e){if(e.done=K.prototype.done,e.then=K.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.shift(),t._state._notify(t,n);e._setState(W)},cancel:o,done:null,then:null,_completed:o,_error:o,_notify:_,_progress:o,_setCompleteValue:o,_setErrorValue:o},W={name:"error",enter:function(e){e.done=K.prototype.done,e.then=K.prototype.then,e._cleanupAction()},cancel:o,done:null,then:null,_completed:o,_error:o,_notify:_,_progress:o,_setCompleteValue:o,_setErrorValue:o};var j,U=n.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(e,t,n){this._state.done(this,e,t,n)},then:function(e,t,n){return this._state.then(this,e,t,n)},_chainedError:function(e,t){var n=this._state._error(this,e,c,t);return this._run(),n},_completed:function(e){var t=this._state._completed(this,e);return this._run(),t},_error:function(e){var t=this._state._error(this,e,h);return this._run(),t},_progress:function(e){this._state._progress(this,e)},_setState:function(e){this._nextState=e},_setCompleteValue:function(e){this._state._setCompleteValue(this,e),this._run()},_setChainedErrorValue:function(e,t){var n=this._state._setErrorValue(this,e,c,t);return this._run(),n},_setExceptionValue:function(e){var t=this._state._setErrorValue(this,e,d);return this._run(),t},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),q=n.Class.derive(U,function(e){A&&(A===!0||A&M.thenPromise)&&(this._stack=$._getStack()),this._creator=e,this._setState(O),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),K=n.Class.define(function(e){A&&(A===!0||A&M.errorPromise)&&(this._stack=$._getStack()),this._value=e,g(this,e,h)},{cancel:function(){},done:function(e,t){var n=this._value;if(t)try{t.handlesOnError||g(null,n,u,this,t);var i=t(n);return void(i&&"object"==typeof i&&"function"==typeof i.done&&i.done())}catch(r){n=r}n instanceof Error&&n.message===P||$._doneHandler(n)},then:function(e,t){if(!t)return this;var n,i=this._value;try{t.handlesOnError||g(null,i,u,this,t),n=new G(t(i))}catch(r){n=r===i?this:new J(r)}return n}},{supportedForProcessing:!1}),J=n.Class.derive(K,function(e){A&&(A===!0||A&M.exceptionPromise)&&(this._stack=$._getStack()),this._value=e,g(this,e,d)
},{},{supportedForProcessing:!1}),G=n.Class.define(function(e){if(A&&(A===!0||A&M.completePromise)&&(this._stack=$._getStack()),e&&"object"==typeof e&&"function"==typeof e.then){var t=new q(null);return t._setCompleteValue(e),t}this._value=e},{cancel:function(){},done:function(e){if(e)try{var t=e(this._value);t&&"object"==typeof t&&"function"==typeof t.done&&t.done()}catch(n){$._doneHandler(n)}},then:function(e){try{var t=e?e(this._value):this._value;return t===this._value?this:new G(t)}catch(n){return new J(n)}}},{supportedForProcessing:!1}),$=n.Class.derive(U,function(e,t){A&&(A===!0||A&M.promise)&&(this._stack=$._getStack()),this._oncancel=t,this._setState(O),this._run();try{var n=this._completed.bind(this),i=this._error.bind(this),r=this._progress.bind(this);e(n,i,r)}catch(s){this._setExceptionValue(s)}},{_oncancel:null,_cancelAction:function(){if(this._oncancel)try{this._oncancel()}catch(e){}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(e,t,n){k.addEventListener(e,t,n)},any:function(e){return new $(function(t,n){var i=Object.keys(e);0===i.length&&t();var r=0;i.forEach(function(s){$.as(e[s]).then(function(){t({key:s,value:e[s]})},function(o){return o instanceof Error&&o.name===P?void(++r===i.length&&t($.cancel)):void n({key:s,value:e[s]})})})},function(){var t=Object.keys(e);t.forEach(function(t){var n=$.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},as:function(e){return e&&"object"==typeof e&&"function"==typeof e.then?e:new G(e)},cancel:{get:function(){return j=j||new K(new i(P))}},dispatchEvent:function(e,t){return k.dispatchEvent(e,t)},is:function(e){return e&&"object"==typeof e&&"function"==typeof e.then},join:function(e){return new $(function(t,n,i){var r=Object.keys(e),s=Array.isArray(e)?[]:{},o=Array.isArray(e)?[]:{},a=0,l=r.length,u=function(e){if(0===--l){var a=Object.keys(s).length;if(0===a)t(o);else{var u=0;r.forEach(function(e){var t=s[e];t instanceof Error&&t.name===P&&u++}),u===a?t($.cancel):n(s)}}else i({Key:e,Done:!0})};return r.forEach(function(t){var n=e[t];void 0===n?a++:$.then(n,function(e){o[t]=e,u(t)},function(e){s[t]=e,u(t)})}),l-=a,0===l?void t(o):void 0},function(){Object.keys(e).forEach(function(t){var n=$.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},removeEventListener:function(e,t,n){k.removeEventListener(e,t,n)},supportedForProcessing:!1,then:function(e,t,n,i){return $.as(e).then(t,n,i)},thenEach:function(e,t,n,i){var r=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(s){r[s]=$.as(e[s]).then(t,n,i)}),$.join(r)},timeout:function(e,t){var n=S(e);return t?I(n,t):n},wrap:function(e){return new G(e)},wrapError:function(e){return new K(e)},_veryExpensiveTagWithStack:{get:function(){return A},set:function(e){A=e}},_veryExpensiveTagWithStack_tag:M,_getStack:function(){if(e.Debug&&e.Debug.debuggerEnabled)try{throw new Error}catch(t){return t.stack}},_cancelBlocker:function(e){if(!$.is(e))return $.wrap(e);var t,n,i=new $(function(e,i){t=e,n=i},function(){t=null,n=null});return e.then(function(e){t&&t(e)},function(e){n&&n(e)}),i}});return Object.defineProperties($,r.createEventProperties(T)),$._doneHandler=function(e){t._setImmediate(function(){throw e})},{PromiseStateMachine:U,Promise:$,state_created:O}}),define("WinJS/Promise",["./Core/_Base","./Promise/_StateMachine"],function(e,t){"use strict";return e.Namespace.define("WinJS",{Promise:t.Promise}),t.Promise}),define("WinJS/Core/_Log",["exports","./_Global","./_Base"],function(e,t,n){"use strict";function i(e,t,n){var i=e;return"function"==typeof i&&(i=i()),(n&&a.test(n)?"":n?n+": ":"")+(t?t.replace(o,":")+": ":"")+i}function r(n,i,r){var s=e.formatLog(n,i,r);t.console&&t.console[r&&a.test(r)?r:"log"](s)}function s(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var o=/\s+/g,a=/^(error|warn|info|log)$/,l=null;n.Namespace._moduleDefine(e,"WinJS.Utilities",{startLog:function(t){t=t||{},"string"==typeof t&&(t={tags:t});var n=t.type&&new RegExp("^("+s(t.type).replace(o," ").split(" ").join("|")+")$"),i=t.excludeTags&&new RegExp("(^|\\s)("+s(t.excludeTags).replace(o," ").split(" ").join("|")+")(\\s|$)","i"),a=t.tags&&new RegExp("(^|\\s)("+s(t.tags).replace(o," ").split(" ").join("|")+")(\\s|$)","i"),l=t.action||r;if(!(n||i||a||e.log))return void(e.log=l);var u=function(e,t,r){n&&!n.test(r)||i&&i.test(t)||a&&!a.test(t)||l(e,t,r),u.next&&u.next(e,t,r)};u.next=e.log,e.log=u},stopLog:function(){e.log=null},formatLog:i}),n.Namespace._moduleDefine(e,"WinJS",{log:{get:function(){return l},set:function(e){l=e}}})}),define("WinJS/Scheduler",["exports","./Core/_Global","./Core/_Base","./Core/_ErrorFromName","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WriteProfilerMark","./Promise"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e){var t={},n="_prev"+e,i="_next"+e;return t["_remove"+e]=function(){var e=this[n],t=this[i];t&&(t[n]=e),e&&(e[i]=t),this[n]=null,this[i]=null},t["_insert"+e+"Before"]=function(e){var t=this[n];return t&&(t[i]=e),e[i]=this,e[n]=t,this[n]=e,e},t["_insert"+e+"After"]=function(e){var t=this[i];return this[i]=e,e[i]=t,e[n]=this,t&&(t[n]=e),e},t}function c(e,t,n){return void 0!==n?"("+e+";"+t+";"+n+")":void 0!==t?"("+e+";"+t+")":void 0!==e?"("+e+")":""}function h(e,t,n,i){a("WinJS.Scheduler:"+e+c(n,i)+","+t)}function d(e,t,n,i,r){var s=e.name||void 0!==i||void 0!==r;a("WinJS.Scheduler:"+t+":"+e.id+(s?c(e.name,i,r):"")+","+n)}function p(){return!1}function m(e){throw"Illegal call by job("+e.id+") in state: "+this.name}function f(e){return function(t,n,i){t._setState(e,n,i)}}function _(e,t){e._setPriority(t)}function g(e,t){function n(e,t){r.log&&r.log(t+": MARKER: "+e.name,"winjs scheduler","log")}function i(e,t){r.log&&r.log(t+": JOB("+e.id+"): state: "+(e._state?e._state.name:"")+(e.name?", name: "+e.name:""),"winjs scheduler","log")}r.log&&r.log("highWaterMark: "+kt,"winjs scheduler","log");var s=0,o=t?wt[wt.length-1]:wt[0],a=o;do a instanceof dt&&n(a,s),a instanceof U&&i(a,s),s++,a=t?a["_prev"+e]:a["_next"+e];while(a)}function v(){function e(e,n){t+="    "+(n?"*":" ")+"id: "+e.id+", priority: "+L(e.priority).name+(e.name?", name: "+e.name:"")+"\n"}var t="";t+="Jobs:\n";var n=L(kt),i=0;for(xt&&(e(xt,!0),i++);n.priority>=bt.min;)n instanceof U&&(e(n,!1),i++),n=n._nextJob;0===i&&(t+="     None\n"),t+="Drain requests:\n";for(var r=0,s=It.length;s>r;r++)t+="    "+(0===r?"*":" ")+"priority: "+L(It[r].priority).name+", name: "+It[r].name+"\n";return 0===It.length&&(t+="     None\n"),t}function y(){var e=wt[0];do{if(e instanceof U)return!1;e=e._nextJob}while(e);return!0}function b(){return 0===It.length?null:It[0].priority}function w(e){h("drain","StartTM",e.name,L(e.priority).name)}function C(e,t){t&&h("drain-canceled","info",e.name,L(e.priority).name),h("drain","StopTM",e.name,L(e.priority).name)}function x(e,t,n){It.push({priority:e,complete:t,name:n}),1===It.length&&(w(It[0]),e>kt&&(kt=e,ft=!0))}function S(e,t){var n,i=It.length;for(n=0;i>n;n++)if(It[n].complete===e){0===n&&(C(It[0],t),It[1]&&w(It[1])),It.splice(n,1);break}}function I(){var e=It.shift();e&&(C(e),It[0]&&w(It[0]),e.complete())}function E(){var e=!1;if(It.length)for(var t=b();+t===t&&t>kt;)mt=t,I(),e=!0,t=b();return e}function k(e){return e>=bt.aboveNormal+1?At.HIGH:e>=bt.belowNormal?At.NORMAL:At.IDLE}function T(e,t){return Mt[e]>=Mt[t]}function P(e,t){return Mt[e]>Mt[t]}function A(e){switch(e){case At.HIGH:return!1;case At.NORMAL:return At.isTaskScheduledAtPriorityOrHigher(At.HIGH);case At.IDLE:return At.isTaskScheduledAtPriorityOrHigher(At.NORMAL)}}function M(e,t){var n=L(t);n.priority>kt&&(kt=n.priority,ft=!0),n._insertJobAfter(e)}function O(e,t){var n=L(t);n.priority>kt&&(kt=n.priority,ft=!0),n._nextMarker._insertJobBefore(e)}function D(e){return e=0|e,e=Math.max(e,vt),e=Math.min(e,yt)}function L(e){return e=D(e),wt[-1*(e-yt)]}function R(e){pt=!0,h("timeslice","StartTM");var t,n,i,r=!0,s=!1,o=!1;ft=!1;try{for(var a=Ot(),l=a+Et,u=function(){return s=!1,ft?!0:A(k(kt))?!0:It.length?!1:Ot()>l?(s=!0,!0):!1};kt>=bt.min&&!u()&&!o;){t=!1,n=L(kt)._nextJob;do{if(mt=n.priority,n instanceof U)i!==n.priority&&(+i===i&&h("priority","StopTM",L(i).name),h("priority","StartTM",L(n.priority).name),i=n.priority),t=!0,r=!1,xt=n,d(xt,"job-running","StartTM",L(mt).name),n._execute(u),d(xt,"job-running","StopTM",L(mt).name),xt=null,r=!0;else{var c=k(kt);kt=n.priority,t=E();var p=k(kt);!P(c,p)||St&&!At.isTaskScheduledAtPriorityOrHigher(p)||(o=!0)}n=n._nextJob}while(n&&!t&&!o&&!A(k(kt)));ft=!1}}finally{xt=null,r||(d(n,"job-error","info"),d(n,"job-running","StopTM",L(mt).name),n.cancel()),+i===i&&h("priority","StopTM",L(i).name);for(var m=!1;kt>=bt.min&&!m;){t=!1,n=L(kt)._nextJob;do n instanceof U?m=!0:(kt=n.priority,t=E()),n=n._nextJob;while(n&&!t&&!m)}var f;f=r?s?"timeslice exhausted":kt<bt.min?"jobs exhausted":o?"reached WWA priority boundary":"WWA host work":"job error",e&&(Ct=null),pt=!1,kt>=bt.min&&B(),h("yielding","info",f),h("timeslice","StopTM")}}function B(e){+e!==e&&(e=kt);var t=k(e);if(!pt&&(!Ct||St&&!T(Ct,t))){var n=++Dt,i=function(){n>Lt&&(Lt=Dt,R(!0))};At.execAsyncAtPriority(i,t),Ct=t}}function N(e,t){var n=gt++;void 0===t&&(t="Drain Request "+n),e=+e===e?e:bt.min,e=D(e);var i,r=new l(function(n){i=n,x(e,i,t)},function(){S(i,!0)});return pt||B(),r}function F(e){return At.execAtPriority(e,At.HIGH)}function z(){return new J}function H(e,t,n,i){t=t||bt.normal,n=n||null;var r=++_t,s=o._traceAsyncOperationStarting("WinJS.Utilities.Scheduler.schedule: "+r+c(i));return i=i||"",new U(r,e,t,n,i,s)}function W(){if(pt)return mt;switch(At.getCurrentPriority()){case At.HIGH:return bt.high;case At.NORMAL:return bt.normal;case At.IDLE:return bt.idle}}function V(e){return function(t,n){var i;return new l(function(r){i=H(function(){r(t)},e,null,n)},function(){i.cancel()})}}n.Namespace.define("WinJS.Utilities",{_linkedListMixin:u});var j={get jobInfoIsNoLongerValid(){return"The job info object can only be used while the job is running"}},U=n.Class.define(function(e,t,n,i,r,s){this._id=e,this._work=t,this._context=i,this._name=r,this._asyncOpID=s,this._setPriority(n),this._setState($),d(this,"job-scheduled","info")},{completed:{get:function(){return!!this._state.completed}},id:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(e){this._name=e}},owner:{get:function(){return this._owner},set:function(e){this._owner&&this._owner._remove(this),this._owner=e,this._owner&&this._owner._add(this)}},priority:{get:function(){return this._priority},set:function(e){e=D(e),this._state.setPriority(this,e)}},cancel:function(){this._state.cancel(this)},pause:function(){this._state.pause(this)},resume:function(){this._state.resume(this)},_execute:function(e){this._state.execute(this,e)},_executeDone:function(e){return this._state.executeDone(this,e)},_blockedDone:function(e){return this._state.blockedDone(this,e)},_setPriority:function(e){+this._priority===this._priority&&this._priority!==e&&d(this,"job-priority-changed","info",L(this._priority).name,L(e).name),this._priority=e},_setState:function(e,t,n){this._state&&r.log&&r.log("Transitioning job ("+this.id+") from: "+this._state.name+" to: "+e.name,"winjs scheduler","log"),this._state=e,this._state.enter(this,t,n)}});n.Class.mix(U,u("Job"));var q={complete:1,"continue":2,block:3},K=n.Class.define(function(e,t){this._job=t,this._result=null,this._yieldPolicy=q.complete,this._shouldYield=e},{job:{get:function(){return this._throwIfDisabled(),this._job}},shouldYield:{get:function(){return this._throwIfDisabled(),this._shouldYield()}},setPromise:function(e){this._throwIfDisabled(),this._result=e,this._yieldPolicy=q.block},setWork:function(e){this._throwIfDisabled(),this._result=e,this._yieldPolicy=q.continue},_disablePublicApi:function(){this._publicApiDisabled=!0},_throwIfDisabled:function(){if(this._publicApiDisabled)throw new i("WinJS.Utilities.Scheduler.JobInfoIsNoLongerValid",j.jobInfoIsNoLongerValid)}}),J=n.Class.define(function(){this._jobs={}},{cancelAll:function(){var e=this._jobs,t=Object.keys(e);this._jobs={};for(var n=0,i=t.length;i>n;n++)e[t[n]].cancel()},_add:function(e){this._jobs[e.id]=e},_remove:function(e){delete this._jobs[e.id]}}),G=n.Class.define(function(e){this.name=e,this.enter=m,this.execute=m,this.executeDone=m,this.blockedDone=m,this.cancel=m,this.pause=m,this.resume=m,this.setPriority=m}),$=new G("created"),Y=new G("scheduled"),Z=new G("paused"),X=new G("canceled"),Q=new G("running"),et=new G("running_paused"),tt=new G("running_resumed"),nt=new G("running_canceled"),it=new G("running_canceled_blocked"),rt=new G("cooperative_yield"),st=new G("cooperative_yield_paused"),ot=new G("blocked"),at=new G("blocked_waiting"),lt=new G("blocked_paused"),ut=new G("blocked_paused_waiting"),ct=new G("blocked_canceled"),ht=new G("complete");$.enter=function(e){O(e,e.priority),e._setState(Y)},Y.enter=function(){B()},Y.execute=f(Q),Y.cancel=f(X),Y.pause=f(Z),Y.resume=p,Y.setPriority=function(e,t){e.priority!==t&&(e._setPriority(t),e.pause(),e.resume())},Z.enter=function(e){d(e,"job-paused","info"),e._removeJob()},Z.cancel=f(X),Z.pause=p,Z.resume=function(e){d(e,"job-resumed","info"),O(e,e.priority),e._setState(Y)},Z.setPriority=_,X.enter=function(e){d(e,"job-canceled","info"),o._traceAsyncOperationCompleted(e._asyncOpID,t.Debug&&t.Debug.MS_ASYNC_OP_STATUS_CANCELED),e._removeJob(),e._work=null,e._context=null,e.owner=null},X.cancel=p,X.pause=p,X.resume=p,X.setPriority=p,Q.enter=function(e,t){e._removeJob();var n=e.priority,i=e._work,r=e._context;e._work=null,e._context=null;var s=new K(t,e);o._traceAsyncCallbackStarting(e._asyncOpID);try{At.execAtPriority(function(){i.call(r,s)},k(n))}finally{o._traceAsyncCallbackCompleted(),s._disablePublicApi()}e._context=r;var a=e._executeDone(s._yieldPolicy);e._setState(a,s._result,n)},Q.executeDone=function(e,t){switch(t){case q.complete:return ht;case q.continue:return rt;case q.block:return ot}},Q.cancel=function(e){ft=!0,e._setState(nt)},Q.pause=function(e){ft=!0,e._setState(et)},Q.resume=p,Q.setPriority=_,et.enter=p,et.executeDone=function(e,t){switch(t){case q.complete:return ht;case q.continue:return st;case q.block:return lt}},et.cancel=f(nt),et.pause=p,et.resume=f(tt),et.setPriority=_,tt.enter=p,tt.executeDone=function(e,t){switch(t){case q.complete:return ht;case q.continue:return rt;case q.block:return ot}},tt.cancel=f(nt),tt.pause=f(et),tt.resume=p,tt.setPriority=_,nt.enter=p,nt.executeDone=function(e,t){switch(t){case q.complete:case q.continue:return X;case q.block:return it}},nt.cancel=p,nt.pause=p,nt.resume=p,nt.setPriority=p,it.enter=function(e,t){t.cancel(),e._setState(X)},rt.enter=function(e,t,n){d(e,"job-yielded","info"),n===e.priority?M(e,e.priority):O(e,e.priority),e._work=t,e._setState(Y)},st.enter=function(e,t){d(e,"job-yielded","info"),e._work=t,e._setState(Z)},ot.enter=function(e,t,n){d(e,"job-blocked","StartTM"),e._work=t,e._setState(at),t.done(function(t){d(e,"job-blocked","StopTM");var i=e._blockedDone(t);e._setState(i,t,n)},function(t){return t&&"Canceled"===t.name||d(e,"job-error","info"),d(e,"job-blocked","StopTM"),e._setState(X),l.wrapError(t)})},at.enter=p,at.blockedDone=function(e,t){return"function"==typeof t?rt:ht},at.cancel=f(ct),at.pause=f(ut),at.resume=p,at.setPriority=_,lt.enter=function(e,t,n){d(e,"job-blocked","StartTM"),e._work=t,e._setState(ut),t.done(function(t){d(e,"job-blocked","StopTM");var i=e._blockedDone(t);e._setState(i,t,n)},function(t){return t&&"Canceled"===t.name||d(e,"job-error","info"),d(e,"job-blocked","StopTM"),e._setState(X),l.wrapError(t)})},ut.enter=p,ut.blockedDone=function(e,t){return"function"==typeof t?st:ht},ut.cancel=f(ct),ut.pause=p,ut.resume=f(at),ut.setPriority=_,ct.enter=function(e){e._work.cancel(),e._work=null},ct.blockedDone=function(){return X},ct.cancel=p,ct.pause=p,ct.resume=p,ct.setPriority=p,ht.completed=!0,ht.enter=function(e){o._traceAsyncOperationCompleted(e._asyncOpID,t.Debug&&t.Debug.MS_ASYNC_OP_STATUS_SUCCESS),e._work=null,e._context=null,e.owner=null,d(e,"job-completed","info")},ht.cancel=p,ht.pause=p,ht.resume=p,ht.setPriority=p;var dt=n.Class.define(function(e,t){this.priority=e,this.name=t},{});n.Class.mix(dt,u("Job"),u("Marker"));var pt,mt,ft,_t=0,gt=0,vt=-15,yt=15,bt={max:15,high:13,aboveNormal:9,normal:0,belowNormal:-9,idle:-13,min:-15},wt=[new dt(15,"max"),new dt(14,"14"),new dt(13,"high"),new dt(12,"12"),new dt(11,"11"),new dt(10,"10"),new dt(9,"aboveNormal"),new dt(8,"8"),new dt(7,"7"),new dt(6,"6"),new dt(5,"5"),new dt(4,"4"),new dt(3,"3"),new dt(2,"2"),new dt(1,"1"),new dt(0,"normal"),new dt(-1,"-1"),new dt(-2,"-2"),new dt(-3,"-3"),new dt(-4,"-4"),new dt(-5,"-5"),new dt(-6,"-6"),new dt(-7,"-7"),new dt(-8,"-8"),new dt(-9,"belowNormal"),new dt(-10,"-10"),new dt(-11,"-11"),new dt(-12,"-12"),new dt(-13,"idle"),new dt(-14,"-14"),new dt(-15,"min"),new dt(-16,"<TAIL>")],Ct=null,xt=null,St=!(!t.MSApp||!t.MSApp.execAtPriority),It=[],Et=30,kt=bt.min;wt.reduce(function(e,t){return e&&(e._insertJobAfter(t),e._insertMarkerAfter(t)),t});var Tt=t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,16)},Pt={execAsyncAtPriority:function(e,n){n===At.HIGH&&t.setTimeout(e,0),Tt(e)},execAtPriority:function(e){return e()},getCurrentPriority:function(){return Pt.NORMAL},isTaskScheduledAtPriorityOrHigher:function(){return!1},HIGH:"high",NORMAL:"normal",IDLE:"idle"},At=St?t.MSApp:Pt,Mt={};Mt[At.IDLE]=1,Mt[At.NORMAL]=2,Mt[At.HIGH]=3;var Ot=t.performance&&t.performance.now&&t.performance.now.bind(t.performance)||Date.now.bind(Date),Dt=0,Lt=0;n.Namespace._moduleDefine(e,"WinJS.Utilities.Scheduler",{Priority:bt,schedule:H,createOwnerToken:z,execHigh:F,requestDrain:N,currentPriority:{get:W},schedulePromiseHigh:V(bt.high),schedulePromiseAboveNormal:V(bt.aboveNormal),schedulePromiseNormal:V(bt.normal),schedulePromiseBelowNormal:V(bt.belowNormal),schedulePromiseIdle:V(bt.idle),retrieveState:v,_JobNode:U,_JobInfo:K,_OwnerToken:J,_dumpList:g,_isEmpty:{get:y},_usingWwaScheduler:{get:function(){return St},set:function(e){St=e,At=St?t.MSApp:Pt}},_MSApp:{get:function(){return At},set:function(e){At=e}},_TIME_SLICE:Et})}),define("WinJS/Core/_BaseUtils",["exports","./_Global","./_Base","./_BaseCoreUtils","./_ErrorFromName","./_Resources","./_Trace","../Promise","../Scheduler"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e){return e}function c(e,t,n){return e.split(".").reduce(function(e,t){return e?n(e[t]):null},t)}function h(e,n){return e?c(e,n||t,u):null}function d(e){return e.length>0&&0!==e.indexOf("-moz")&&"-"===e.charAt(0)&&(e=e.slice(1)),e.replace(/\-[a-z]/g,function(e){return e[1].toUpperCase()})}function p(e,t){return""===e?t:e+t.charAt(0).toUpperCase()+t.slice(1)}function m(e,t){return(""!==e?"-"+e.toLowerCase()+"-":"")+t}function f(){if(!t.document)return{};for(var e={},n=t.document.documentElement.style,i=["","webkit","ms","Moz"],r=["animation","transition","transform","animation-name","animation-duration","animation-delay","animation-timing-function","animation-iteration-count","animation-direction","animation-fill-mode","grid-column","grid-columns","grid-column-span","grid-row","grid-rows","grid-row-span","transform-origin","transition-property","transition-duration","transition-delay","transition-timing-function","scroll-snap-points-x","scroll-snap-points-y","scroll-chaining","scroll-limit","scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","touch-action","overflow-style","user-select"],s={},o=0,a=r.length;a>o;o++)for(var l=r[o],u=d(l),c=0,h=i.length;h>c;c++){var f=i[c],_=p(f,u);if(_ in n){var g=m(f,l);e[l]={cssName:g,scriptName:_},s[l]=f;break}}return e.animationPrefix=m(s.animation,""),e.keyframes=m(s.animation,"keyframes"),e}function _(){for(var e={},n=["","WebKit"],i=[{eventObject:"TransitionEvent",events:["transitionStart","transitionEnd"]},{eventObject:"AnimationEvent",events:["animationStart","animationEnd"]}],r=0,s=i.length;s>r;r++){for(var o=i[r],a="",l=0,u=n.length;u>l;l++){var c=n[l];if(c+o.eventObject in t){a=c.toLowerCase();break}}for(var l=0,h=o.events.length;h>l;l++){var d=o.events[l];e[d]=p(a,d),""===a&&(e[d]=e[d].toLowerCase())}}return e.manipulationStateChanged="MSManipulationEvent"in t?"ManipulationEvent":null,e}var g,v={get notSupportedForProcessing(){return"Value is not supported within a declarative processing context, if you want it to be supported mark it using WinJS.Utilities.markSupportedForProcessing. The value was: '{0}'"}},y=0,b={},w=!1,C=!1,x=t.navigator.platform,S="iPhone"===x||"iPad"===x||"iPod"===x;n.Namespace._moduleDefine(e,"WinJS.Utilities",{_setHasWinRT:{value:function(e){i.hasWinRT=e},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return i.hasWinRT},configurable:!1,enumerable:!0},_setIsiOS:{value:function(e){S=e},configurable:!1,writable:!1,enumerable:!1},_isiOS:{get:function(){return S},configurable:!1,enumerable:!0},_getMemberFiltered:c,getMember:h,_browserStyleEquivalents:f(),_browserEventEquivalents:_(),_getCamelCasedName:d,ready:function I(e,n){return new a(function(i,r){function s(){if(e)try{e(),i()}catch(t){r(t)}else i()}var o=I._testReadyState;o||(o=t.document?t.document.readyState:"complete"),"complete"===o||t.document&&null!==t.document.body?n?l.schedule(function(){s()},l.Priority.normal,null,"WinJS.Utilities.ready"):s():t.addEventListener("DOMContentLoaded",s,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:i.markSupportedForProcessing,configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(e){var n=!0;switch(n=n&&e!==t,n=n&&e!==t.location,n=n&&!(e instanceof t.HTMLIFrameElement),n=n&&!("function"==typeof e&&!e.supportedForProcessing),t.frames.length){case 0:break;case 1:n=n&&e!==t.frames[0];break;default:for(var i=0,o=t.frames.length;n&&o>i;i++)n=n&&e!==t.frames[i]}if(n)return e;throw new r("WinJS.Utilities.requireSupportedForProcessing",s._formatString(v.notSupportedForProcessing,e))},configurable:!1,writable:!1,enumerable:!0},_setImmediate:i._setImmediate,_requestAnimationFrame:t.requestAnimationFrame?t.requestAnimationFrame.bind(t):function(e){var n=++y;return b[n]=e,g=g||t.setTimeout(function(){var e=b,t=Date.now();b={},g=null,Object.keys(e).forEach(function(n){e[n](t)})},16),n},_cancelAnimationFrame:t.cancelAnimationFrame?t.cancelAnimationFrame.bind(t):function(e){delete b[e]},_yieldForEvents:t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,0)},_yieldForDomModification:t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,0)},_shallowCopy:function(e){return this._mergeAll([e])},_merge:function(e,t){return this._mergeAll([e,t])},_mergeAll:function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t},_getProfilerMarkIdentifier:function(e){var t="";return e.id&&(t+=" id='"+e.id+"'"),e.className&&(t+=" class='"+e.className+"'"),t},_now:function(){return t.performance&&t.performance.now&&t.performance.now()||Date.now()},_traceAsyncOperationStarting:o._traceAsyncOperationStarting,_traceAsyncOperationCompleted:o._traceAsyncOperationCompleted,_traceAsyncCallbackStarting:o._traceAsyncCallbackStarting,_traceAsyncCallbackCompleted:o._traceAsyncCallbackCompleted,isPhone:{get:function(){return w},configurable:!1,enumerable:!0},_setIsPhone:{set:function(e){w=e}}}),n.Namespace._moduleDefine(e,"WinJS",{validation:{get:function(){return C},set:function(e){C=e}}}),n.Namespace.define("WinJS",{strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})}),define("WinJS/Core",["./Core/_Base","./Core/_BaseCoreUtils","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Global","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WinRT","./Core/_WriteProfilerMark"],function(){}),define("WinJS/_Signal",["./Core/_Base","./Promise/_StateMachine"],function(e,t){"use strict";var n=e.Class.derive(t.PromiseStateMachine,function(e){this._oncancel=e,this._setState(t.state_created),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),i=e.Class.define(function(e){this._promise=new n(e)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(e){this._promise._completed(e)},error:function(e){this._promise._error(e)},progress:function(e){this._promise._progress(e)}},{supportedForProcessing:!1});return e.Namespace.define("WinJS",{_Signal:i}),i}),define("WinJS/Utilities/_Control",["exports","../Core/_Global","../Core/_Base"],function(e,t,n){"use strict";function i(e,t){r(e,t)}function r(e,t,n){if("object"==typeof t)for(var i=Object.keys(t),r=0,s=i.length;s>r;r++){var o=i[r],a=t[o];if(o.length>2){var l=o[0],u=o[1];if(!("o"!==l&&"O"!==l||"n"!==u&&"N"!==u)&&"function"==typeof a&&e.addEventListener){e.addEventListener(o.substr(2),a);continue}}n||(e[o]=a)}}t.document&&n.Namespace._moduleDefine(e,"WinJS.UI",{DOMEventMixin:n.Namespace._lazy(function(){return{_domElement:null,addEventListener:function(e,t,n){(this.element||this._domElement).addEventListener(e,t,n||!1)},dispatchEvent:function(e,n){var i=t.document.createEvent("Event");return i.initEvent(e,!1,!1),i.detail=n,"object"==typeof n&&Object.keys(n).forEach(function(e){i[e]=n[e]}),(this.element||this._domElement).dispatchEvent(i)},removeEventListener:function(e,t,n){(this.element||this._domElement).removeEventListener(e,t,n||!1)}}}),setOptions:i,_setOptions:r})}),define("WinJS/Utilities/_ElementUtilities",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler"],function(e,t,n,i,r,s){"use strict";function o(e){for(var t=e.length,n=t-1;n>=0;n--)e[n]||(e.splice(n,1),t--);return t}function a(e){var t=e.className||"";return"string"==typeof t?t:t.baseVal||""}function l(e,t){var n=e.className||"";return"string"==typeof n?e.className=t:e.className.baseVal=t,e}function u(e,t){if(e.classList){if(t.indexOf(" ")<0)e.classList.add(t);else{var n=t.split(" ");o(n);for(var i=0,r=n.length;r>i;i++)e.classList.add(n[i])}return e}var s,u=a(e),c=u.split(" "),h=o(c);if(t.indexOf(" ")>=0){var n=t.split(" ");o(n);for(var i=0;h>i;i++){var d=n.indexOf(c[i]);d>=0&&n.splice(d,1)}n.length>0&&(s=n.join(" "))}else{for(var p=!1,i=0;h>i;i++)if(c[i]===t){p=!0;break}p||(s=t)}return s&&(h>0&&c[0].length>0?l(e,u+" "+s):l(e,s)),e}function c(e,t){if(e.classList){if(0===e.classList.length)return e;var n=t.split(" ");o(n);for(var i=0,r=n.length;r>i;i++)e.classList.remove(n[i]);return e}var n,s,u=a(e);if(t.indexOf(" ")>=0)n=t.split(" "),s=o(n);else{if(u.indexOf(t)<0)return e;n=[t],s=1}for(var c,h=u.split(" "),d=o(h),i=d-1;i>=0;i--)n.indexOf(h[i])>=0&&(h.splice(i,1),c=!0);return c&&l(e,h.join(" ")),e}function h(e,t){if(e.classList)return e.classList.toggle(t),e;for(var n=a(e),i=n.trim().split(" "),r=i.length,s=!1,o=0;r>o;o++)i[o]===t&&(s=!0);return s?l(e,i.reduce(function(e,n){return n===t?e:e&&e.length>0?e+" "+n:n},"")):r>0&&i[0].length>0?l(e,n+" "+t):l(e,n+t),e}function d(e,t,n){e.getAttribute(t)!==""+n&&e.setAttribute(t,n)}function p(e,t,n,i){var r=Math.max(t,Math.min(n,+e));return 0===r?0:r||Math.max(t,Math.min(n,i))}function m(e,t){if(!N.test(t)&&F.test(t)){var n=e.style.left;return e.style.left=t,t=e.style.pixelLeft,e.style.left=n,t}return Math.round(parseFloat(t))||0}function f(e,n){return m(e,t.getComputedStyle(e,null)[n])}function _(e,t,n,i,r){var s=t.toLowerCase();e._eventsMap||(e._eventsMap={}),e._eventsMap[s]||(e._eventsMap[s]=[]),e._eventsMap[s].push({listener:n,useCapture:i,data:r})}function g(e,t,n,i){var r=t.toLowerCase(),s=e._eventsMap&&e._eventsMap[r];if(s)for(var o=s.length-1;o>=0;o--){var a=s[o];if(a.listener===n&&!!i==!!a.useCapture)return s.splice(o,1),a}return null}function v(e,t){var n=t.toLowerCase();return e._eventsMap&&e._eventsMap[n]&&e._eventsMap[n].slice(0)||[]}function y(e,t,n){for(;e;){for(var i=v(e,t),r=0,s=i.length;s>r;r++)i[r].listener.call(e,n);e=e.parentNode}}function b(e){return(e.relatedTarget&&"IFRAME"===e.relatedTarget.tagName||e.target&&"IFRAME"===e.target.tagName)&&(e.relatedTarget=null),e}function w(e,t,n,i){if(i)throw"This custom WinJS event only supports bubbling";_(e,t,n,i)}function C(e,t){var n=t.changedTouches,i=null;if(!n)return i;for(var r=0,s=n.length;s>r;r++){var o=n[r],a=new j(t,{pointerType:W.MSPOINTER_TYPE_TOUCH,pointerId:o.identifier,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY,radiusX:o.radiusX,radiusY:o.radiusY,rotationAngle:o.rotationAngle,force:o.force,_currentTouch:o}),l=e(a);i=i||l}return i}function x(e,t){return t.pointerType=W.MSPOINTER_TYPE_MOUSE,t.pointerId=-1,e(t)}function S(e,t){return e(t)}function I(e,n,i,r){var s,o,a,l,u=n.toLowerCase(),c=U[u];t.MSPointerEvent?(a=function(e){return e._normalizedType=u,l=!0,S(i,e)},e.addEventListener(c.mspointer,a,r)):(c.mouse&&(s=function(e){return e._normalizedType=u,l?void(l=!1):x(i,e)},e.addEventListener(c.mouse,s,r)),c.touch&&(o=function(e){return e._normalizedType=u,l=!0,C(i,e)},e.addEventListener(c.touch,o,r))),_(e,n,i,r,{mouseWrapper:s,touchWrapper:o,mspointerWrapper:a})}function E(e,t,n,i){var r=t.toLowerCase(),s=g(e,t,n,i);if(s){var o=U[r];s.data.mouseWrapper&&e.removeEventListener(o.mouse,s.data.mouseWrapper,i),s.data.touchWrapper&&e.removeEventListener(o.touch,s.data.touchWrapper,i),s.data.mspointerWrapper&&e.removeEventListener(o.mspointer,s.data.mspointerWrapper,i)}}function k(){var e=t.document.createElement("div");e.style.direction="rtl",e.innerHTML="<div style='width: 100px; height: 100px; overflow: scroll; visibility:hidden'><div style='width: 10000px; height: 100px;'></div></div>",t.document.body.appendChild(e);var n=e.firstChild;n.scrollLeft>0&&(Q=!0),n.scrollLeft+=100,0===n.scrollLeft&&(et=!0),t.document.body.removeChild(e),X=!0}function T(e){var n=t.getComputedStyle(e),i=e.scrollLeft;return"rtl"===n.direction&&(X||k(),Q&&(i=e.scrollWidth-e.clientWidth-i),i=Math.abs(i)),{scrollLeft:i,scrollTop:e.scrollTop}}function P(e,n,i){if(void 0!==n){var r=t.getComputedStyle(e);"rtl"===r.direction&&(X||k(),et?n=-n:Q&&(n=e.scrollWidth-e.clientWidth-n)),e.scrollLeft=n}void 0!==i&&(e.scrollTop=i)}function A(e){return T(e)}function M(e,t){t=t||{},P(e,t.scrollLeft,t.scrollTop)}function O(e){return e.uniqueID||e._uniqueID||(e._uniqueID="element__"+ ++it),e.uniqueID||e._uniqueID}function D(e){e.id||(e.id=O(e))}function L(e){var n=t.document.documentElement,i=A(n);return{left:e.clientX+("rtl"===t.document.body.dir?-i.scrollLeft:i.scrollLeft),top:e.clientY+n.scrollTop}}function R(e,t){for(var n=[],i=0,r=t.length;r>i;i++){var s=e.querySelector("."+t[i]);s&&n.push(s)}return n}if(t.document){var B=167,N=/^-?\d+\.?\d*(px)?$/i,F=/^-?\d+/i,z=t.MSGestureEvent||{MSGESTURE_FLAG_BEGIN:1,MSGESTURE_FLAG_CANCEL:4,MSGESTURE_FLAG_END:2,MSGESTURE_FLAG_INERTIA:8,MSGESTURE_FLAG_NONE:0},H=t.MSManipulationEvent||{MS_MANIPULATION_STATE_ACTIVE:1,MS_MANIPULATION_STATE_CANCELLED:6,MS_MANIPULATION_STATE_COMMITTED:7,MS_MANIPULATION_STATE_DRAGGING:5,MS_MANIPULATION_STATE_INERTIA:2,MS_MANIPULATION_STATE_PRESELECT:3,MS_MANIPULATION_STATE_SELECTING:4,MS_MANIPULATION_STATE_STOPPED:0},W=t.MSPointerEvent||{MSPOINTER_TYPE_TOUCH:"touch",MSPOINTER_TYPE_PEN:"pen",MSPOINTER_TYPE_MOUSE:"mouse"},V=null;t.addEventListener("blur",function(){var e=V;e&&y(e,"focusout",b({type:"focusout",target:e,relatedTarget:null})),V=null}),t.document.documentElement.addEventListener("focus",function(e){var t=V;V=e.target,t&&y(t,"focusout",b({type:"focusout",target:t,relatedTarget:V})),V&&y(V,"focusin",b({type:"focusin",target:V,relatedTarget:t}))},!0);var j=function(e,t){t=t||{},this.__eventObject=e;var n=this;Object.keys(t).forEach(function(e){Object.defineProperty(n,e,{value:t[e]})})};["altKey","AT_TARGET","bubbles","BUBBLING_PHASE","button","buttons","cancelable","cancelBubble","CAPTURING_PHASE","clientX","clientY","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","fromElement","getModifierState","height","hwTimestamp","initEvent","initMouseEvent","initPointerEvent","initUIEvent","isPrimary","isTrusted","layerX","layerY","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","pressure","preventDefault","relatedTarget","rotation","screenX","screenY","shiftKey","srcElement","stopImmediatePropagation","stopPropagation","target","tiltX","tiltY","timeStamp","toElement","type","view","which","width","x","y","_normalizedType","_fakedBySemanticZoom"].forEach(function(e){Object.defineProperty(j.prototype,e,{get:function(){var t=this.__eventObject[e];
return"function"==typeof t?t.bind(this.__eventObject):t},configurable:!0})});var U={pointerdown:{touch:"touchstart",mspointer:"MSPointerDown",mouse:"mousedown"},pointerup:{touch:"touchend",mspointer:"MSPointerUp",mouse:"mouseup"},pointermove:{touch:"touchmove",mspointer:"MSPointerMove",mouse:"mousemove"},pointerenter:{touch:"touchenter",mspointer:"MSPointerEnter",mouse:"mouseenter"},pointerover:{touch:null,mspointer:"MSPointerOver",mouse:"mouseover"},pointerout:{touch:"touchleave",mspointer:"MSPointerOut",mouse:"mouseout"},pointercancel:{touch:"touchcancel",mspointer:"MSPointerCancel",mouse:null}},q={focusout:{register:w,unregister:g},focusin:{register:w,unregister:g}};if(!t.PointerEvent){var K={register:I,unregister:E};q.pointerdown=K,q.pointerup=K,q.pointermove=K,q.pointerenter=K,q.pointerover=K,q.pointerout=K,q.pointercancel=K}var J=n.Class.define(function(e){this._callback=e,this._toDispose=[],this._attributeFilter=[],this._scheduled=!1,this._pendingChanges=[],this._observerCount=0,this._handleCallback=this._handleCallback.bind(this),this._targetElements=[]},{observe:function(e,t){-1===this._targetElements.indexOf(e)&&this._targetElements.push(e),this._observerCount++,t.attributes&&this._addRemovableListener(e,"DOMAttrModified",this._handleCallback),t.attributeFilter&&(this._attributeFilter=t.attributeFilter)},disconnect:function(){this._observerCount=0,this._targetElements=[],this._toDispose.forEach(function(e){e()})},_addRemovableListener:function(e,t,n){e.addEventListener(t,n),this._toDispose.push(function(){e.removeEventListener(t,n)})},_handleCallback:function(e){if(e.stopPropagation(),(!this._attributeFilter.length||-1!==this._attributeFilter.indexOf(e.attrName))&&-1!==this._targetElements.indexOf(e.target)){var t=e.attrName;"tabindex"===t&&(t="tabIndex"),this._pendingChanges.push({type:"attributes",target:e.target,attributeName:t}),1===this._observerCount?this._dispatchEvent():this._scheduled===!1&&(this._scheduled=!0,i._setImmediate(this._dispatchEvent.bind(this)))}},_dispatchEvent:function(){try{this._callback(this._pendingChanges)}finally{this._pendingChanges=[],this._scheduled=!1}}},{_isShim:!0}),G=t.MutationObserver||J,$=null,Y=n.Class.define(function(){t.addEventListener("resize",this._handleResize.bind(this))},{subscribe:function(e,t){e.addEventListener(this._resizeEvent,t),u(e,this._resizeClass)},unsubscribe:function(e,t){c(e,this._resizeClass),e.removeEventListener(this._resizeEvent,t)},_handleResize:function(){for(var e=t.document.querySelectorAll("."+this._resizeClass),n=e.length,i=0;n>i;i++){var r=t.document.createEvent("Event");r.initEvent(this._resizeEvent,!1,!0),e[i].dispatchEvent(r)}},_resizeClass:{get:function(){return"win-element-resize"}},_resizeEvent:{get:function(){return"WinJSElementResize"}}}),Z=new(n.Class.define(function(){this.capture={},this.bubble={}},{addEventListener:function(n,i,r,s){i=i.toLowerCase();var o=this._getHandlers(s),a=o[i];a||(a=this._getListener(i,s),a.refCount=0,o[i]=a,e._addEventListener(t,i,a,s)),a.refCount++,n.addEventListener(this._getEventName(i,s),r),u(n,this._getClassName(i,s))},removeEventListener:function(n,i,r,s){i=i.toLowerCase();var o=this._getHandlers(s),a=o[i];a&&(a.refCount--,0===a.refCount&&(e._removeEventListener(t,i,a,s),delete o[i])),c(n,this._getClassName(i,s)),n.removeEventListener(this._getEventName(i,s),r)},_getHandlers:function(e){return e?this.capture:this.bubble},_getClassName:function(e,t){var n=t?"capture":"bubble";return"win-global-event-"+e+n},_getEventName:function(e,t){var n=t?"capture":"bubble";return"WinJSGlobalEvent-"+e+n},_getListener:function(e,n){var i=function(i){for(var r=t.document.querySelectorAll("."+this._getClassName(e,n)),s=r.length,o=0;s>o;o++){var a=t.document.createEvent("Event");a.initEvent(this._getEventName(e,n),!1,!0),a.detail={originalEvent:i},r[o].dispatchEvent(a)}};return i.bind(this)}})),X=!1,Q=!1,et=!1,tt=t.navigator.msManipulationViewsEnabled||t.navigator.userAgent.indexOf("MSAppHost")>=0,nt=!(!t.MSPointerEvent&&!t.TouchEvent),it=0,rt=".win-selectionborder, .win-selectionbackground, .win-selectioncheckmark, .win-selectioncheckmarkbackground",st="_msDataKey";n.Namespace._moduleDefine(e,"WinJS.Utilities",{_dataKey:st,_supportsSnapPoints:{get:function(){return tt}},_supportsTouchDetection:{get:function(){return nt}},_uniqueID:O,_ensureId:D,_clamp:p,_getCursorPos:L,_getElementsByClasses:R,_createGestureRecognizer:function(){if(t.MSGesture)return new t.MSGesture;var e=function(){};return{addEventListener:e,removeEventListener:e,addPointer:e,stop:e}},_supportsTouchActionCrossSlide:{get:function(){if(void 0===this._supportsTouchActionCrossSlideValue){this._supportsTouchActionCrossSlideValue=!1;var e=i._browserStyleEquivalents["touch-action"];if(e){var n=t.document.createElement("div");n.style.touchAction="cross-slide-x",t.document.body.appendChild(n),this._supportsTouchActionCrossSlideValue="cross-slide-x"===t.getComputedStyle(n).touchAction,t.document.body.removeChild(n)}}return this._supportsTouchActionCrossSlideValue}},_MSGestureEvent:z,_MSManipulationEvent:H,_elementsFromPoint:function(e,n){if(t.document.msElementsFromPoint)return t.document.msElementsFromPoint(e,n);var i=t.document.elementFromPoint(e,n);return i?[i]:null},_matchesSelector:function(e,t){var n=e.matches||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector;return n.call(e,t)},_selectionPartsSelector:rt,_isSelectionRendered:function(e){return e.querySelectorAll(rt).length>0},_addEventListener:function(e,t,n,r){var s=t&&t.toLowerCase(),o=q[s],a=i._browserEventEquivalents[t];o?o.register(e,t,n,r):a?e.addEventListener(a,n,r):e.addEventListener(t,n,r)},_removeEventListener:function(e,t,n,r){var s=t&&t.toLowerCase(),o=q[s],a=i._browserEventEquivalents[t];o?o.unregister(e,t,n,r):a?e.removeEventListener(a,n,r):e.removeEventListener(t,n,r)},_initEventImpl:function(e,t,n){n=n.toLowerCase();var i=U[n];if(i)switch(e.toLowerCase()){case"pointer":arguments[2]=i.mspointer;break;default:arguments[2]=i[e.toLowerCase()]}t["init"+e+"Event"].apply(t,Array.prototype.slice.call(arguments,2))},_initMouseEvent:function(e){this._initEventImpl.apply(this,["Mouse",e].concat(Array.prototype.slice.call(arguments,1)))},_initPointerEvent:function(e){this._initEventImpl.apply(this,["Pointer",e].concat(Array.prototype.slice.call(arguments,1)))},_PointerEventProxy:j,_bubbleEvent:y,_setPointerCapture:function(e,t){e.setPointerCapture&&e.setPointerCapture(t)},_releasePointerCapture:function(e,t){e.releasePointerCapture&&e.releasePointerCapture(t)},_MSPointerEvent:W,_zoomToDuration:B,_zoomTo:function(e,n){e.msZoomTo?e.msZoomTo(n):s.schedule(function(){var r=T(e),s="number"==typeof e._zoomToDestX?e._zoomToDestX:r.scrollLeft,o="number"==typeof e._zoomToDestY?e._zoomToDestY:r.scrollTop,a=t.getComputedStyle(e),l=e.scrollWidth-parseInt(a.width,10)-parseInt(a.paddingLeft,10)-parseInt(a.paddingRight,10),u=e.scrollHeight-parseInt(a.height,10)-parseInt(a.paddingTop,10)-parseInt(a.paddingBottom,10);"number"!=typeof n.contentX&&(n.contentX=s),"number"!=typeof n.contentY&&(n.contentY=o);var c=p(n.contentX,0,l),h=p(n.contentY,0,u);if(c!==s||h!==o){e._zoomToId=e._zoomToId||0,e._zoomToId++,e._zoomToDestX=c,e._zoomToDestY=h;var d=e._zoomToId,m=i._now(),f=(e._zoomToDestX-r.scrollLeft)/B,_=(e._zoomToDestY-r.scrollTop)/B,g=function(){var t=i._now()-m;e._zoomToId===d&&(t>B?(P(e,e._zoomToDestX,e._zoomToDestY),e._zoomToDestX=null,e._zoomToDestY=null):(P(e,r.scrollLeft+t*f,r.scrollTop+t*_),i._requestAnimationFrame(g)))};i._requestAnimationFrame(g)}},s.Priority.high,null,"WinJS.Utilities._zoomTo")},_setActive:function(e,n){var i=!0;try{if(t.HTMLElement&&t.HTMLElement.prototype.setActive)e.setActive();else{var r,s;n&&(r=n.scrollLeft,s=n.scrollTop),e.focus(),n&&(n.scrollLeft=r,n.scrollTop=s)}}catch(o){i=!1}return i},_MutationObserver:G,_resizeNotifier:{get:function(){return $||($=new Y),$}},_globalListener:Z,_addInsertedNotifier:function(n){var r=t.document.createElement("div");return r.style[i._browserStyleEquivalents["animation-name"].scriptName]="WinJS-node-inserted",r.style[i._browserStyleEquivalents["animation-duration"].scriptName]="0.01s",r.style.position="absolute",n.appendChild(r),e._addEventListener(r,"animationStart",function(e){if("WinJS-node-inserted"===e.animationName){var e=t.document.createEvent("Event");e.initEvent("WinJSNodeInserted",!1,!0),n.dispatchEvent(e)}},!1),r},_setFlexStyle:function(e,t){var n=e.style;"undefined"!=typeof t.grow&&(n.msFlexPositive=t.grow,n.webkitFlexGrow=t.grow,n.flexGrow=t.grow),"undefined"!=typeof t.shrink&&(n.msFlexNegative=t.shrink,n.webkitFlexShrink=t.shrink,n.flexShrink=t.shrink),"undefined"!=typeof t.basis&&(n.msFlexPreferredSize=t.basis,n.webkitFlexBasis=t.basis,n.flexBasis=t.basis)},Key:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,deleteKey:46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindows:91,rightWindows:92,menu:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,numLock:144,scrollLock:145,browserBack:166,browserForward:167,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222,IME:229},data:function(e){return e[st]||(e[st]={}),e[st]},hasClass:function(e,t){if(e.classList)return e.classList.contains(t);for(var n=a(e),i=n.trim().split(" "),r=i.length,s=0;r>s;s++)if(i[s]===t)return!0;return!1},addClass:u,removeClass:c,toggleClass:h,_setAttribute:d,getRelativeLeft:function(e,t){if(!e)return 0;for(var n=e.offsetLeft,i=e.parentNode;i&&(n-=i.offsetLeft,i!==t);)i=i.parentNode;return n},getRelativeTop:function(e,t){if(!e)return 0;for(var n=e.offsetTop,i=e.parentNode;i&&(n-=i.offsetTop,i!==t);)i=i.parentNode;return n},getScrollPosition:A,setScrollPosition:M,empty:function(e){if(e.childNodes&&e.childNodes.length>0)for(var t=e.childNodes.length-1;t>=0;t--)e.removeChild(e.childNodes.item(t));return e},_isDOMElement:function(e){return e&&"object"==typeof e&&"string"==typeof e.tagName},getContentWidth:function(e){var t=f(e,"borderLeftWidth")+f(e,"borderRightWidth"),n=f(e,"paddingLeft")+f(e,"paddingRight");return e.offsetWidth-t-n},getTotalWidth:function(e){var t=f(e,"marginLeft")+f(e,"marginRight");return e.offsetWidth+t},getContentHeight:function(e){var t=f(e,"borderTopWidth")+f(e,"borderBottomWidth"),n=f(e,"paddingTop")+f(e,"paddingBottom");return e.offsetHeight-t-n},getTotalHeight:function(e){var t=f(e,"marginTop")+f(e,"marginBottom");return e.offsetHeight+t},getPosition:function(e){for(var n=e,i=e.offsetParent,r=e.offsetTop,s=e.offsetLeft;(e=e.parentNode)&&e!==t.document.body&&e!==t.document.documentElement;){r-=e.scrollTop;var o=t.document.defaultView.getComputedStyle(e,null).direction;s-="rtl"!==o?e.scrollLeft:-T(e).scrollLeft,e===i&&(r+=e.offsetTop,s+=e.offsetLeft,i=e.offsetParent)}return{left:s,top:r,width:n.offsetWidth,height:n.offsetHeight}},getTabIndex:function(e){var t=/BUTTON|COMMAND|MENUITEM|OBJECT|SELECT|TEXTAREA/;if(e.disabled)return-1;var n=e.getAttribute("tabindex");if(null===n||void 0===n){var i=e.tagName;return t.test(i)||e.href&&("A"===i||"AREA"===i||"LINK"===i)||"INPUT"===i&&"hidden"!==e.type||"TH"===i&&e.sorted?0:-1}return parseInt(n,10)},convertToPixels:m,eventWithinElement:function(e,t){var n=t.relatedTarget;return n&&n!==e?e.contains(n):!1},_deprecated:function(e){t.console&&t.console.warn(e)},_syncRenderer:function(e,n){if(n=n||"div","function"==typeof e)return function(t,n){return n?(n.appendChild(e(t)),n):e(t)};var i;return"function"==typeof e.render?i=e:e.winControl&&"function"==typeof e.winControl.render&&(i=e.winControl),function(e,r){var s=r||t.document.createElement(n);if(i.render(e,s),r)return r;var o=s.firstElementChild;if(o&&s.dispose){var a=o.dispose;o.dispose=function(){o.dispose=a,s.appendChild(o),s.dispose()}}return o}},_getLowestTabIndexInList:function(e){for(var t,n=0,i=0;i<e.length;i++)t=parseInt(e[i].getAttribute("tabIndex"),10),t>0&&(n>t||!n)&&(n=t);return n},_getHighestTabIndexInList:function(e){for(var t,n=0,i=0;i<e.length;i++){if(t=parseInt(e[i].getAttribute("tabIndex"),10),0===t)return t;t>n&&(n=t)}return n},_trySetActive:function(e,t){return this._tryFocus(e,!0,t)},_tryFocus:function(n,i,r){var s=t.document.activeElement;if(n===s)return!0;var o=e.getTabIndex(n)>=0;return o?(i?e._setActive(n,r):n.focus(),s!==t.document.activeElement?!0:!1):!1},_setActiveFirstFocusableElement:function(e,t){return this._focusFirstFocusableElement(e,!0,t)},_focusFirstFocusableElement:function(e,t,n){for(var i,r=e.getElementsByTagName("*"),s=this._getLowestTabIndexInList(r),o=0;s;){for(i=0;i<r.length;i++)if(r[i].tabIndex===s){if(this._tryFocus(r[i],t,n))return!0}else s<r[i].tabIndex&&(r[i].tabIndex<o||0===o)&&(o=r[i].tabIndex);s=o,o=0}for(i=0;i<r.length;i++)if(this._tryFocus(r[i],t,n))return!0;return!1},_setActiveLastFocusableElement:function(e,t){return this._focusLastFocusableElement(e,!0,t)},_focusLastFocusableElement:function(e,t,n){var i,r=e.getElementsByTagName("*"),s=this._getHighestTabIndexInList(r),o=0;if(0===s){for(i=r.length-1;i>=0;i--)if(r[i].tabIndex===s){if(this._tryFocus(r[i],t,n))return!0}else o<r[i].tabIndex&&(o=r[i].tabIndex);s=o,o=0}for(;s;){for(i=r.length-1;i>=0;i--)if(r[i].tabIndex===s){if(this._tryFocus(r[i],t,n))return!0}else o<r[i].tabIndex&&r[i].tabIndex<s&&(o=r[i].tabIndex);s=o,o=0}for(i=r.length-2;i>0;i--)if(this._tryFocus(r[i],t,n))return!0;return!1}})}}),define("WinJS/Utilities/_Dispose",["exports","../Core/_Base","../Core/_WriteProfilerMark","./_ElementUtilities"],function(e,t,n,i){"use strict";function r(e,t){var n=!1;i.addClass(e,"win-disposable");var r=e.winControl||e;r.dispose=function(){n||(n=!0,s(e),t&&t())}}function s(e){if(e){n("WinJS.Utilities.disposeSubTree,StartTM");for(var t=e.querySelectorAll(".win-disposable"),i=0,r=t.length;r>i;){var s=t[i];s.winControl&&s.winControl.dispose&&s.winControl.dispose(),s.dispose&&s.dispose(),i+=s.querySelectorAll(".win-disposable").length+1}n("WinJS.Utilities.disposeSubTree,StopTM")}}function o(e){if(e){var t=!1;e.winControl&&e.winControl.dispose&&(e.winControl.dispose(),t=!0),e.dispose&&(e.dispose(),t=!0),t||s(e)}}t.Namespace._moduleDefine(e,"WinJS.Utilities",{markDisposable:r,disposeSubTree:s,_disposeElement:o})}),define("WinJS/ControlProcessor/_OptionsLexer",["exports","../Core/_Base"],function optionsLexerInit(exports,_Base){"use strict";_Base.Namespace._moduleDefine(exports,"WinJS.UI",{_optionsLexer:_Base.Namespace._lazy(function(){function reservedWord(e){return{type:tokenType.reservedWord,value:e,length:e.length,keyword:!0}}function reservedWordLookup(e){switch(e.charCodeAt(0)){case 98:switch(e){case"break":return reservedWord(e)}break;case 99:switch(e){case"case":case"catch":case"class":case"const":case"continue":return reservedWord(e)}break;case 100:switch(e){case"debugger":case"default":case"delete":case"do":return reservedWord(e)}break;case 101:switch(e){case"else":case"enum":case"export":case"extends":return reservedWord(e)}break;case 102:switch(e){case"false":return tokens.falseLiteral;case"finally":case"for":case"function":return reservedWord(e)}break;case 105:switch(e){case"if":case"import":case"in":case"instanceof":return reservedWord(e)}break;case 110:switch(e){case"null":return tokens.nullLiteral;case"new":return reservedWord(e)}break;case 114:switch(e){case"return":return reservedWord(e)}break;case 115:switch(e){case"super":case"switch":return reservedWord(e)}break;case 116:switch(e){case"true":return tokens.trueLiteral;case"this":return tokens.thisKeyword;case"throw":case"try":case"typeof":return reservedWord(e)}break;case 118:switch(e){case"var":case"void":return reservedWord(e)}break;case 119:switch(e){case"while":case"with":return reservedWord(e)}}}var tokenType={leftBrace:1,rightBrace:2,leftBracket:3,rightBracket:4,separator:5,colon:6,semicolon:7,comma:8,dot:9,nullLiteral:10,trueLiteral:11,falseLiteral:12,numberLiteral:13,stringLiteral:14,identifier:15,reservedWord:16,thisKeyword:17,leftParentheses:18,rightParentheses:19,eof:20,error:21},tokens={leftBrace:{type:tokenType.leftBrace,length:1},rightBrace:{type:tokenType.rightBrace,length:1},leftBracket:{type:tokenType.leftBracket,length:1},rightBracket:{type:tokenType.rightBracket,length:1},colon:{type:tokenType.colon,length:1},semicolon:{type:tokenType.semicolon,length:1},comma:{type:tokenType.comma,length:1},dot:{type:tokenType.dot,length:1},nullLiteral:{type:tokenType.nullLiteral,length:4,value:null,keyword:!0},trueLiteral:{type:tokenType.trueLiteral,length:4,value:!0,keyword:!0},falseLiteral:{type:tokenType.falseLiteral,length:5,value:!1,keyword:!0},thisKeyword:{type:tokenType.thisKeyword,length:4,value:"this",keyword:!0},leftParentheses:{type:tokenType.leftParentheses,length:1},rightParentheses:{type:tokenType.rightParentheses,length:1},eof:{type:tokenType.eof,length:0}},lexer=function(){function isIdentifierStartCharacter(e,t,n,i){switch(e){case e>=97&&122>=e&&e:case e>=65&&90>=e&&e:case 36:case 95:return!0;case isWhitespace(e)&&e:case isLineTerminator(e)&&e:return!1;case e>127&&e:return!0;case 92:return i>n+4&&117===t.charCodeAt(n)&&isHexDigit(t.charCodeAt(n+1))&&isHexDigit(t.charCodeAt(n+2))&&isHexDigit(t.charCodeAt(n+3))&&isHexDigit(t.charCodeAt(n+4))?!0:!1;default:return!1}}function readIdentifierPart(e,t,n){for(var i=!1;n>t;){var r=e.charCodeAt(t);switch(r){case r>=97&&122>=r&&r:case r>=65&&90>=r&&r:case 36:case 95:break;case isWhitespace(r)&&r:case isLineTerminator(r)&&r:return i?-t:t;case r>127&&r:break;case r>=48&&57>=r&&r:break;case 92:if(n>t+5&&117===e.charCodeAt(t+1)&&isHexDigit(e.charCodeAt(t+2))&&isHexDigit(e.charCodeAt(t+3))&&isHexDigit(e.charCodeAt(t+4))&&isHexDigit(e.charCodeAt(t+5))){t+=5,i=!0;break}return i?-t:t;default:return i?-t:t}t++}return i?-t:t}function readIdentifierToken(e,t,n){var i=t;t=readIdentifierPart(e,t,n);var r=!1;0>t&&(t=-t,r=!0);var s=e.substr(i,t-i);r&&(s=""+JSON.parse('"'+s+'"'));var o=reservedWordLookup(s);return o?o:{type:tokenType.identifier,length:t-i,value:s}}function isHexDigit(e){switch(e){case e>=48&&57>=e&&e:case e>=97&&102>=e&&e:case e>=65&&70>=e&&e:return!0;default:return!1}}function readHexIntegerLiteral(e,t,n){for(;n>t&&isHexDigit(e.charCodeAt(t));)t++;return t}function isDecimalDigit(e){switch(e){case e>=48&&57>=e&&e:return!0;default:return!1}}function readDecimalDigits(e,t,n){for(;n>t&&isDecimalDigit(e.charCodeAt(t));)t++;return t}function readDecimalLiteral(e,t,n){if(t=readDecimalDigits(e,t,n),n>t&&46===e.charCodeAt(t)&&n>t+1&&isDecimalDigit(e.charCodeAt(t+1))&&(t=readDecimalDigits(e,t+2,n)),n>t){var i=e.charCodeAt(t);if(101===i||69===i){var r=t+1;n>r&&(i=e.charCodeAt(r),(43===i||45===i)&&r++,t=readDecimalDigits(e,r,n))}}return t}function readDecimalLiteralToken(e,t,n,i){var n=readDecimalLiteral(e,n,i),r=n-t;return{type:tokenType.numberLiteral,length:r,value:+e.substr(t,r)}}function isLineTerminator(e){switch(e){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function readStringLiteralToken(text,offset,limit){var startOffset=offset,quoteCharCode=text.charCodeAt(offset),hasEscape=!1;for(offset++;limit>offset&&!isLineTerminator(text.charCodeAt(offset));){if(limit>offset+1&&92===text.charCodeAt(offset))switch(hasEscape=!0,text.charCodeAt(offset+1)){case quoteCharCode:case 92:case 10:case 8232:case 8233:offset+=2;continue;case 13:offset+=limit>offset+2&&10===text.charCodeAt(offset+2)?3:2;continue}if(offset++,text.charCodeAt(offset-1)===quoteCharCode)break}var length=offset-startOffset;hasEscape=hasEscape||1===length||text.charCodeAt(offset-1)!==quoteCharCode;var stringValue;return stringValue=hasEscape?eval(text.substr(startOffset,length)):text.substr(startOffset+1,length-2),{type:tokenType.stringLiteral,length:length,value:stringValue}}function isWhitespace(e){switch(e){case 9:case 11:case 12:case 32:case 160:case 65279:return!0;case 5760>e&&e:return!1;case 5760:case 6158:case e>=8192&&8202>=e&&e:case 8239:case 8287:case 12288:return!0;default:return!1}}function readWhitespace(e,t,n){for(;n>t;){var i=e.charCodeAt(t);switch(i){case 9:case 11:case 12:case 32:case 160:case 65279:break;case 5760>i&&i:return t;case 5760:case 6158:case i>=8192&&8202>=i&&i:case 8239:case 8287:case 12288:break;default:return t}t++}return t}function lex(e,t,n,i){for(;i>n;){var r,s=n,o=t.charCodeAt(n++);switch(o){case isWhitespace(o)&&o:case isLineTerminator(o)&&o:n=readWhitespace(t,n,i),r={type:tokenType.separator,length:n-s};continue;case 34:case 39:r=readStringLiteralToken(t,n-1,i);break;case 40:r=tokens.leftParentheses;break;case 41:r=tokens.rightParentheses;break;case 43:case 45:if(i>n){var a=t.charCodeAt(n);if(46===a){var l=n+1;if(i>l&&isDecimalDigit(t.charCodeAt(l))){r=readDecimalLiteralToken(t,s,l,i);break}}else if(isDecimalDigit(a)){r=readDecimalLiteralToken(t,s,n,i);break}}r={type:tokenType.error,length:n-s,value:t.substring(s,n)};break;case 44:r=tokens.comma;break;case 46:r=tokens.dot,i>n&&isDecimalDigit(t.charCodeAt(n))&&(r=readDecimalLiteralToken(t,s,n,i));break;case 48:var u=i>n?t.charCodeAt(n):0;if(120===u||88===u){var c=readHexIntegerLiteral(t,n+1,i);r={type:tokenType.numberLiteral,length:c-s,value:+t.substr(s,c-s)}}else r=readDecimalLiteralToken(t,s,n,i);break;case o>=49&&57>=o&&o:r=readDecimalLiteralToken(t,s,n,i);break;case 58:r=tokens.colon;break;case 59:r=tokens.semicolon;break;case 91:r=tokens.leftBracket;break;case 93:r=tokens.rightBracket;break;case 123:r=tokens.leftBrace;break;case 125:r=tokens.rightBrace;break;default:if(isIdentifierStartCharacter(o,t,n,i)){r=readIdentifierToken(t,n-1,i);break}r={type:tokenType.error,length:n-s,value:t.substring(s,n)}}n+=r.length-1,e.push(r)}}return function(e){var t=[];return lex(t,e,0,e.length),t.push(tokens.eof),t}}();return lexer.tokenType=tokenType,lexer})})}),define("WinJS/ControlProcessor/_OptionsParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","./_OptionsLexer"],function(e,t,n,i,r,s){"use strict";function o(){throw"Illegal"}function a(e){for(var t=Object.keys(u.tokenType),n=0,i=t.length;i>n;n++)if(e===u.tokenType[t[n]])return t[n];return"<unknown>"}var l={get invalidOptionsRecord(){return"Invalid options record: '{0}', expected to be in the format of an object literal. {1}"},get unexpectedTokenExpectedToken(){return"Unexpected token: {0}, expected token: {1}, at offset {2}"},get unexpectedTokenExpectedTokens(){return"Unexpected token: {0}, expected one of: {1}, at offset {2}"},get unexpectedTokenGeneric(){return"Unexpected token: {0}, at offset {1}"}},u=t.Namespace.defineWithParent(null,null,{lexer:t.Namespace._lazy(function(){return s._optionsLexer}),tokenType:t.Namespace._lazy(function(){return s._optionsLexer.tokenType})}),c=n.requireSupportedForProcessing,h=t.Namespace.defineWithParent(null,null,{BaseInterpreter:t.Namespace._lazy(function(){return t.Class.define(null,{_error:function(e){throw new i("WinJS.UI.ParseError",e)},_currentOffset:function(){for(var e=this._pos,t=0,n=0;e>n;n++)t+=this._tokens[n].length;return t},_evaluateAccessExpression:function(e){switch(this._current.type){case u.tokenType.dot:switch(this._read(),this._current.type){case u.tokenType.identifier:case this._current.keyword&&this._current.type:var t=this._current.value;return this._read(),e[t];default:this._unexpectedToken(u.tokenType.identifier,u.tokenType.reservedWord)}return;case u.tokenType.leftBracket:this._read();var n=this._evaluateValue();return this._read(u.tokenType.rightBracket),e[n]}},_evaluateAccessExpressions:function(e){for(;;)switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:e=this._evaluateAccessExpression(e);break;default:return e}},_evaluateIdentifier:function(e,t){var n=this._readIdentifier();return t=e?t[n]:this._context[n]},_evaluateIdentifierExpression:function(){var e=this._evaluateIdentifier(!1);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:return this._evaluateAccessExpressions(e);default:return e}},_initialize:function(e,t,n,i){this._originalSource=t,this._tokens=e,this._context=n,this._functionContext=i,this._pos=0,this._current=this._tokens[0]},_read:function(e){e&&this._current.type!==e&&this._unexpectedToken(e),this._current!==u.tokenType.eof&&(this._current=this._tokens[++this._pos])},_peek:function(e){return e&&this._current.type!==e?void 0:this._current!==u.tokenType.eof?this._tokens[this._pos+1]:void 0},_readAccessExpression:function(e){switch(this._current.type){case u.tokenType.dot:switch(this._read(),this._current.type){case u.tokenType.identifier:case this._current.keyword&&this._current.type:e.push(this._current.value),this._read();break;default:this._unexpectedToken(u.tokenType.identifier,u.tokenType.reservedWord)}return;case u.tokenType.leftBracket:return this._read(),e.push(this._evaluateValue()),void this._read(u.tokenType.rightBracket)}},_readAccessExpressions:function(e){for(;;)switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:this._readAccessExpression(e);break;default:return}},_readIdentifier:function(){var e=this._current.value;return this._read(u.tokenType.identifier),e},_readIdentifierExpression:function(){var e=[];switch(this._peek(u.tokenType.thisKeyword)&&0===e.length?this._read():e.push(this._readIdentifier()),this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:this._readAccessExpressions(e)}return e},_unexpectedToken:function(e){var t=this._current.type===u.tokenType.error?"'"+this._current.value+"'":a(this._current.type);if(e)if(1===arguments.length)e=a(e),this._error(r._formatString(l.unexpectedTokenExpectedToken,t,e,this._currentOffset()));else{for(var n=[],i=0,s=arguments.length;s>i;i++)n.push(a(arguments[i]));e=n.join(", "),this._error(r._formatString(l.unexpectedTokenExpectedTokens,t,e,this._currentOffset()))}else this._error(r._formatString(l.unexpectedTokenGeneric,t,this._currentOffset()))}},{supportedForProcessing:!1})}),OptionsInterpreter:t.Namespace._lazy(function(){return t.Class.derive(h.BaseInterpreter,function(e,t,n,i){this._initialize(e,t,n,i)},{_error:function(e){throw new i("WinJS.UI.ParseError",r._formatString(l.invalidOptionsRecord,this._originalSource,e))},_evaluateArrayLiteral:function(){var e=[];return this._read(u.tokenType.leftBracket),this._readArrayElements(e),this._read(u.tokenType.rightBracket),e},_evaluateObjectLiteral:function(){var e={};return this._read(u.tokenType.leftBrace),this._readObjectProperties(e),this._tryReadComma(),this._read(u.tokenType.rightBrace),e},_evaluateOptionsLiteral:function(){var e=this._evaluateValue();return this._current.type!==u.tokenType.eof&&this._unexpectedToken(u.tokenType.eof),e},_peekValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:case u.tokenType.leftBrace:case u.tokenType.leftBracket:case u.tokenType.identifier:return!0;default:return!1}},_evaluateValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;case u.tokenType.leftBrace:return this._evaluateObjectLiteral();case u.tokenType.leftBracket:return this._evaluateArrayLiteral();case u.tokenType.identifier:return c(this._peek(u.tokenType.identifier).type===u.tokenType.leftParentheses?this._evaluateObjectQueryExpression():this._evaluateIdentifierExpression());default:this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier)}},_tryReadElement:function(e){return this._peekValue()?(e.push(this._evaluateValue()),!0):!1},_tryReadComma:function(){return this._peek(u.tokenType.comma)?(this._read(),!0):!1},_tryReadElision:function(e){for(var t=!1;this._tryReadComma();)e.push(void 0),t=!0;return t},_readArrayElements:function(e){for(;!this._peek(u.tokenType.rightBracket);){var t=this._tryReadElision(e),n=this._tryReadElement(e),i=this._peek(u.tokenType.comma);if(!n||!i){if(n||t)break;this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier);break}this._read()}},_readObjectProperties:function(e){for(;!this._peek(u.tokenType.rightBrace);){var t=this._tryReadObjectProperty(e),n=this._peek(u.tokenType.comma);if(!t||!n){if(t)break;this._unexpectedToken(u.tokenType.numberLiteral,u.tokenType.stringLiteral,u.tokenType.identifier);break}this._read()}},_tryReadObjectProperty:function(e){switch(this._current.type){case u.tokenType.numberLiteral:case u.tokenType.stringLiteral:case u.tokenType.identifier:case this._current.keyword&&this._current.type:var t=this._current.value;return this._read(),this._read(u.tokenType.colon),e[t]=this._evaluateValue(),!0;default:return!1}},_failReadObjectProperty:function(){this._unexpectedToken(u.tokenType.numberLiteral,u.tokenType.stringLiteral,u.tokenType.identifier,u.tokenType.reservedWord)},_evaluateObjectQueryExpression:function(){var e=this._current.value;this._read(u.tokenType.identifier),this._read(u.tokenType.leftParentheses);var t=this._current.value;this._read(u.tokenType.stringLiteral),this._read(u.tokenType.rightParentheses);var n=c(this._functionContext[e])(t);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:return this._evaluateAccessExpressions(n);default:return n}},run:function(){return this._evaluateOptionsLiteral()}},{supportedForProcessing:!1})}),OptionsParser:t.Namespace._lazy(function(){return t.Class.derive(h.OptionsInterpreter,function(e,t){this._initialize(e,t)},{_evaluateAccessExpression:o,_evaluateAccessExpressions:o,_evaluateIdentifier:o,_evaluateIdentifierExpression:o,_evaluateObjectQueryExpression:o,_evaluateValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;case u.tokenType.leftBrace:return this._evaluateObjectLiteral();case u.tokenType.leftBracket:return this._evaluateArrayLiteral();case u.tokenType.identifier:return this._peek(u.tokenType.identifier).type===u.tokenType.leftParentheses?this._readObjectQueryExpression():this._readIdentifierExpression();default:this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier)}},_readIdentifierExpression:function(){var e=h.BaseInterpreter.prototype._readIdentifierExpression.call(this);return new f(e)},_readObjectQueryExpression:function(){var e=this._current.value;this._read(u.tokenType.identifier),this._read(u.tokenType.leftParentheses);var t=this._current.value;this._read(u.tokenType.stringLiteral),this._read(u.tokenType.rightParentheses);var n=new m(e,t);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:var i=[n];return this._readAccessExpressions(i),new f(i);default:return n}}},{supportedForProcessing:!1})})}),d=function(e,t,n){var i=u.lexer(e),r=new h.OptionsInterpreter(i,e,t||{},n||{});return r.run()};Object.defineProperty(d,"_BaseInterpreter",{get:function(){return h.BaseInterpreter}});var p=function(e){var t=u.lexer(e),n=new h.OptionsParser(t,e);return n.run()},m=t.Class.define(function(e,t){this.target=e,this.arg0Value=t
});m.supportedForProcessing=!1;var f=t.Class.define(function(e){this.parts=e});f.supportedForProcessing=!1,t.Namespace._moduleDefine(e,"WinJS.UI",{optionsParser:d,_optionsParser:p,_CallExpression:m,_IdentifierExpression:f})}),define("WinJS/ControlProcessor",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_Resources","./Core/_WriteProfilerMark","./ControlProcessor/_OptionsParser","./Promise","./Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o,a,l,u){"use strict";function c(e){var n=function(n){for(var i,r=e;r;){if(r.msParentSelectorScope){var s=r.parentNode;if(s&&(i=u._matchesSelector(s,n)?s:s.querySelector(n)))break}r=r.parentNode}return i||t.document.querySelector(n)};return v(n)}function h(e,n){return new l(function(i,o){try{var l,u=e.getAttribute("data-win-options");u&&(l=a.optionsParser(u,t,{select:c(e)}));var h,d=1;n.length>2&&d++;var p=function(){d--,0===d&&(e.winControl=e.winControl||h,i(h))};h=new n(e,l,p),p()}catch(m){r.log&&r.log(s._formatString(g.errorActivatingControl,m&&m.message),"winjs controls","error"),o(m)}})}function d(e,n){return new l(function(i,r){o("WinJS.UI:processAll,StartTM"),e=e||t.document.body;var s=0,a="[data-win-control]",l=e.querySelectorAll(a),u=[];!n&&p(e)&&u.push(e);for(var c=0,d=l.length;d>c;c++)u.push(l[c]);if(0===u.length)return o("WinJS.UI:processAll,StopTM"),void i(e);for(var m=function(){s-=1,0>s&&(o("WinJS.UI:processAll,StopTM"),i(e))},_=new Array(u.length),c=0,d=u.length;d>c;c++){var g,v=u[c],b=v.winControl;b?g=b.constructor:_[c]=g=p(v),g&&g.isDeclarativeControlContainer&&(c+=v.querySelectorAll(a).length)}o("WinJS.UI:processAllActivateControls,StartTM");for(var c=0,d=u.length;d>c;c++){var w=_[c],v=u[c];if(w&&!v.winControl&&(s++,h(v,w).then(m,function(e){o("WinJS.UI:processAll,StopTM"),r(e)}),w.isDeclarativeControlContainer&&"function"==typeof w.isDeclarativeControlContainer)){var C=y(w.isDeclarativeControlContainer);C(v.winControl,f)}}o("WinJS.UI:processAllActivateControls,StopTM"),m()})}function p(e){if(e.getAttribute){var n=e.getAttribute("data-win-control");if(n)return i._getMemberFiltered(n.trim(),t,y)}}function m(e,t){return c(t)(e)}function f(e,t){return b?d(e,t):i.ready().then(function(){return b=!0,d(e,t)})}function _(e){if(e&&e.winControl)return l.as(e.winControl);var t=p(e);return t?h(e,t):l.as()}if(t.document){var g={get errorActivatingControl(){return"Error activating control: {0}"}},v=i.markSupportedForProcessing,y=i.requireSupportedForProcessing,b=!1;n.Namespace._moduleDefine(e,"WinJS.UI",{scopedSelect:m,processAll:f,process:_})}}),define("WinJS/Utilities/_ElementListUtilities",["exports","../Core/_Global","../Core/_Base","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o){"use strict";t.document&&n.Namespace._moduleDefine(e,"WinJS.Utilities",{QueryCollection:n.Class.derive(Array,function(e){e&&this.include(e)},{forEach:function(e,t){return Array.prototype.forEach.apply(this,[e,t]),this},get:function(e){return this[e]},setAttribute:function(e,t){return this.forEach(function(n){n.setAttribute(e,t)}),this},getAttribute:function(e){return this.length>0?this[0].getAttribute(e):void 0},addClass:function(e){return this.forEach(function(t){o.addClass(t,e)}),this},hasClass:function(e){return this.length>0?o.hasClass(this[0],e):!1},removeClass:function(e){return this.forEach(function(t){o.removeClass(t,e)}),this},toggleClass:function(e){return this.forEach(function(t){o.toggleClass(t,e)}),this},listen:function(e,t,n){return this.forEach(function(i){i.addEventListener(e,t,n)}),this},removeEventListener:function(e,t,n){return this.forEach(function(i){i.removeEventListener(e,t,n)}),this},setStyle:function(e,t){return this.forEach(function(n){n.style[e]=t}),this},clearStyle:function(e){return this.forEach(function(t){t.style[e]=""}),this},query:function(t){var n=new e.QueryCollection;return this.forEach(function(e){n.include(e.querySelectorAll(t))}),n},include:function(e){if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.push(e[t]);else e.DOCUMENT_FRAGMENT_NODE&&e.nodeType===e.DOCUMENT_FRAGMENT_NODE?this.include(e.childNodes):this.push(e)},control:function(e,t){return e&&"function"==typeof e?this.forEach(function(n){n.winControl=new e(n,t)}):(t=e,this.forEach(function(e){i.process(e).done(function(e){e&&s.setOptions(e,t)})})),this},template:function(t,n,i){t instanceof e.QueryCollection&&(t=t[0]);var s=t.winControl;null!==n&&void 0!==n&&n.forEach||(n=[n]),i=i||function(){};var o=this,a=[];return n.forEach(function(e){o.forEach(function(t){a.push(s.render(e,t))})}),i(r.join(a)),this}},{supportedForProcessing:!1}),query:function(n,i){return new e.QueryCollection((i||t.document).querySelectorAll(n))},id:function(n){var i=t.document.getElementById(n);return new e.QueryCollection(i?[i]:[])},children:function(t){return new e.QueryCollection(t.children)}})}),define("WinJS/Utilities/_Hoverable",["exports","../Core/_Global"],function(e,t){"use strict";if(t.document&&(t.document.documentElement.classList.add("win-hoverable"),e.isHoverable=!0,!t.MSPointerEvent)){var n=function(){t.document.removeEventListener("touchstart",n),t.document.documentElement.classList.remove("win-hoverable"),e.isHoverable=!1};t.document.addEventListener("touchstart",n)}}),define("WinJS/Utilities/_ParallelWorkQueue",["exports","../Core/_Base","../Promise","../Scheduler"],function(e,t,n,i){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_ParallelWorkQueue:t.Namespace._lazy(function(){return t.Class.define(function(e){function t(){u--,c||i.schedule(r,i.Priority.normal,null,"WinJS._ParallelWorkQueue.runNext")}function r(){for(c++;e>u;u++){var n,i;do n=l.shift(),i=n&&a[n];while(n&&!i);if(!i)break;delete a[n];try{i().then(t,t)}catch(r){t()}}c--}function s(e,t,i){var s,u="w"+o++;return new n(function(n,o,c){var h=function(){return s=e().then(n,o,c)};h.data=t,a[u]=h,i?l.unshift(u):l.push(u),r()},function(){delete a[u],s&&s.cancel()})}var o=0,a={},l=[];e=e||3;var u=0,c=0;this.sort=function(e){l.sort(function(t,n){return t=a[t],n=a[n],void 0===t&&void 0===n?0:void 0===t?1:void 0===n?-1:e(t.data,n.data)})},this.queue=s},{},{supportedForProcessing:!1})})})}),define("WinJS/Utilities/_VersionManager",["exports","../Core/_Base","../_Signal"],function(e,t,n){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_VersionManager:t.Namespace._lazy(function(){return t.Class.define(function(){this._unlocked=new n,this._unlocked.complete()},{_cancelCount:0,_notificationCount:0,_updateCount:0,_version:0,locked:{get:function(){return 0!==this._notificationCount||0!==this._updateCount}},noOutstandingNotifications:{get:function(){return 0===this._notificationCount}},version:{get:function(){return this._version}},unlocked:{get:function(){return this._unlocked.promise}},_dispose:function(){this._unlocked&&(this._unlocked.cancel(),this._unlocked=null)},beginUpdating:function(){this._checkLocked(),this._updateCount++},endUpdating:function(){this._updateCount--,this._checkUnlocked()},beginNotifications:function(){this._checkLocked(),this._notificationCount++},endNotifications:function(){this._notificationCount--,this._checkUnlocked()},_checkLocked:function(){this.locked||(this._dispose(),this._unlocked=new n)},_checkUnlocked:function(){this.locked||this._unlocked.complete()},receivedNotification:function(){if(this._version++,this._cancel){var e=this._cancel;this._cancel=null,e.forEach(function(e){e&&e.cancel()})}},cancelOnNotification:function(e){return this._cancel||(this._cancel=[],this._cancelCount=0),this._cancel[this._cancelCount++]=e,this._cancelCount-1},clearCancelOnNotification:function(e){this._cancel&&delete this._cancel[e]}},{supportedForProcessing:!1})})})}),define("WinJS/Utilities/_ItemsManager",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../_Signal","../Scheduler","../Utilities/_ElementUtilities","./_ParallelWorkQueue","./_VersionManager"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";function p(e){return y(function(t,n){return t.then(function(t){return t?e(t,n):null})})}function m(e,t){var n=!1,i=!1;return e.isOnScreen().then(function(e){n=e}),t.isOnScreen().then(function(e){i=e}),(n?0:1)-(i?0:1)}function f(e){if(!/^blob:/i.test(e)&&(k[e]=!0,T.push(e),T.length>A)){var t=T;k={},T=[];for(var n=0,i=t.length-1;i>=0&&P>n;i--){var r=t[i];k[r]||(k[r]=!0,n++)}}}function _(e,n,i){var r=E++;return C=C||new h._ParallelWorkQueue(6),C.queue(function(){return new a(function(i,s){u.schedule(function(r){n||(n=t.document.createElement("img"));var o=k[e];o?(f(e),n.src=e,i(n)):r.setPromise(new a(function(r){var o=t.document.createElement("img"),a=function(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1),n.src=e;var t=new Date;t-S>I&&(S=t,C.sort(m))},l=function(){r(c)},u=function(){r(h)},c=function(){f(e),a(),i(n)},h=function(){a(),s(n)};o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),o.src=e}))},u.Priority.normal,null,"WinJS.UI._ImageLoader._image"+r)})},i)}function g(e){return k[e]}function v(){return t.document.createElement("div")}var y=i.markSupportedForProcessing,b=c._uniqueID,w=p(function(e){if(c._isDOMElement(e.data))return e.data;var n=e.data;void 0===n?n="undefined":null===n?n="null":"object"==typeof n&&(n=JSON.stringify(n));var i=t.document.createElement("span");return i.textContent=n.toString(),i});n.Namespace._moduleDefine(e,"WinJS.UI",{_normalizeRendererReturn:function(e){if(e){if("object"==typeof e&&e.element){var t=a.as(e.element);return t.then(function(t){return{element:t,renderComplete:a.as(e.renderComplete)}})}var t=a.as(e);return t.then(function(e){return{element:e,renderComplete:a.as()}})}return{element:null,renderComplete:a.as()}},simpleItemRenderer:p,_trivialHtmlRenderer:w});var C,x={get listDataSourceIsInvalid(){return"Invalid argument: dataSource must be an object."},get itemRendererIsInvalid(){return"Invalid argument: itemRenderer must be a function."},get itemIsInvalid(){return"Invalid argument: item must be a DOM element that was returned by the Items Manager, and has not been replaced or released."}},S=new Date,I=64,E=0,k={},T=[],P=250,A=1e3;n.Namespace._moduleDefine(e,"WinJS.UI",{_seenUrl:f,_getSeenUrls:function(){return k},_getSeenUrlsMRU:function(){return T},_seenUrlsMaxSize:P,_seenUrlsMRUMaxSize:A}),n.Namespace._moduleDefine(e,"WinJS.UI",{_createItemsManager:n.Namespace._lazy(function(){var t=n.Class.define(function(e){this._itemsManager=e},{beginNotifications:function(){this._itemsManager._versionManager.beginNotifications(),this._itemsManager._beginNotifications()},inserted:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._inserted(e,t,n)},changed:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._changed(e,t)},moved:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._moved(e,t,n)},removed:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._removed(e,t)},countChanged:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._countChanged(e,t)},indexChanged:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._indexChanged(e,t,n)},affectedRange:function(e){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._affectedRange(e)},endNotifications:function(){this._itemsManager._versionManager.endNotifications(),this._itemsManager._endNotifications()},reload:function(){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._reload()}},{supportedForProcessing:!1}),i=n.Class.define(function(e,n,i,s){if(!e)throw new r("WinJS.UI.ItemsManager.ListDataSourceIsInvalid",x.listDataSourceIsInvalid);if(!n)throw new r("WinJS.UI.ItemsManager.ItemRendererIsInvalid",x.itemRendererIsInvalid);this.$pipeline_callbacksMap={},this._listDataSource=e,this.dataSource=this._listDataSource,this._elementNotificationHandler=i,this._listBinding=this._listDataSource.createListBinding(new t(this)),s&&(s.ownerElement&&(this._ownerElement=s.ownerElement),this._profilerId=s.profilerId,this._versionManager=s.versionManager||new d._VersionManager),this._indexInView=s&&s.indexInView,this._itemRenderer=n,this._viewCallsReady=s&&s.viewCallsReady,this._elementMap={},this._handleMap={},this._jobOwner=u.createOwnerToken(),this._notificationsSent=!1,this._listBinding.last&&(this.lastItem=function(){return this._elementForItem(this._listBinding.last())})},{_itemFromItemPromise:function(e){return this._waitForElement(this._elementForItem(e))},_itemFromItemPromiseThrottled:function(e){return this._waitForElement(this._elementForItem(e,!0))},_itemAtIndex:function(e){var t=this._itemPromiseAtIndex(e);this._itemFromItemPromise(t).then(null,function(e){return t.cancel(),a.wrapError(e)})},_itemPromiseAtIndex:function(e){return this._listBinding.fromIndex(e)},_waitForElement:function(e){var t=this;return new a(function(n){if(e)if(t.isPlaceholder(e)){var i=b(e),r=t.$pipeline_callbacksMap[i];r?r.push(n):t.$pipeline_callbacksMap[i]=[n]}else n(e);else n(e)})},_updateElement:function(e,t){var n=b(t),i=this.$pipeline_callbacksMap[n];i&&(delete this.$pipeline_callbacksMap[n],i.forEach(function(t){t(e)}))},_firstItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.first()))},_lastItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.last()))},_previousItem:function(e){return this._listBinding.jumpToItem(this._itemFromElement(e)),this._waitForElement(this._elementForItem(this._listBinding.previous()))},_nextItem:function(e){return this._listBinding.jumpToItem(this._itemFromElement(e)),this._waitForElement(this._elementForItem(this._listBinding.next()))},_itemFromPromise:function(e){return this._waitForElement(this._elementForItem(e))},isPlaceholder:function(e){return!!this._recordFromElement(e).elementIsPlaceholder},itemObject:function(e){return this._itemFromElement(e)},release:function(){this._listBinding.release(),this._elementNotificationHandler=null,this._listBinding=null,this._jobOwner.cancelAll(),this._released=!0},releaseItemPromise:function(e){var t=e.handle,n=this._handleMap[t];n?this._releaseRecord(n):e.cancel()},releaseItem:function(e){var t=this._elementMap[b(e)];this._releaseRecord(t)},_releaseRecord:function(e){e&&(e.renderPromise&&e.renderPromise.cancel(),e.itemPromise&&e.itemPromise.cancel(),e.imagePromises&&e.imagePromises.forEach(function(e){e.cancel()}),e.itemReadyPromise&&e.itemReadyPromise.cancel(),e.renderComplete&&e.renderComplete.cancel(),this._removeEntryFromElementMap(e.element),this._removeEntryFromHandleMap(e.itemPromise.handle,e),e.item&&this._listBinding.releaseItem(e.item))},refresh:function(){return this._listDataSource.invalidateAll()},_handlerToNotifyCaresAboutItemAvailable:function(){return!(!this._elementNotificationHandler||!this._elementNotificationHandler.itemAvailable)},_handlerToNotify:function(){return this._notificationsSent||(this._notificationsSent=!0,this._elementNotificationHandler&&this._elementNotificationHandler.beginNotifications&&this._elementNotificationHandler.beginNotifications()),this._elementNotificationHandler},_defineIndexProperty:function(e,t,n){n.indexObserved=!1,Object.defineProperty(e,"index",{get:function(){return n.indexObserved=!0,t.index}})},_renderPlaceholder:function(e){var t={},n=v(t);return e.elementIsPlaceholder=!0,n},_renderItem:function(t,n,i){function r(){t.then(function(e){s._writeProfilerMark(d+",StartTM"),c.complete(e),s._writeProfilerMark(d+",StopTM")})}var s=this,o=s._indexInView||function(){return!0},c=new l,h=new l,d="_renderItem("+n.item.index+"):itemPromise",p=!0,m=!1;t.then(function(e){m=!0,p&&c.complete(e)}),p=!1;var f=c.promise.then(function(e){if(e){var t=Object.create(e);return s._defineIndexProperty(t,e,n),t.ready=h.promise,t.isOnScreen=function(){return a.wrap(o(e.index))},t.loadImage=function(e,i){var r=_(e,i,t);return n.imagePromises?n.imagePromises.push(r):n.imagePromises=[r],r},t.isImageCached=g,t}return a.cancel});m||(i?(n.stage0=t,n.startStage1=function(){n.startStage1=null,r()}):r()),f.handle=t.handle,n.itemPromise=f,n.itemReadyPromise=h.promise,n.readyComplete=!1;var v="_renderItem("+n.item.index+(m?"):syncItemPromise":"):placeholder"),y="_renderItem("+n.item.index+"):itemReady";this._writeProfilerMark(v+",StartTM");var b=a.as(s._itemRenderer(f,n.element)).then(e._normalizeRendererReturn).then(function(e){return s._released?a.cancel:(f.then(function(e){if(n.pendingReady=function(){n.pendingReady&&(n.pendingReady=null,n.readyComplete=!0,s._writeProfilerMark(y+",StartTM"),h.complete(e),s._writeProfilerMark(y+",StopTM"))},!s._viewCallsReady){var t=u.schedule(n.pendingReady,u.Priority.normal,n,"WinJS.UI._ItemsManager._pendingReady");t.owner=s._jobOwner}}),e)});return this._writeProfilerMark(v+",StopTM"),b},_replaceElement:function(e,t){this._removeEntryFromElementMap(e.element),e.element=t,this._addEntryToElementMap(t,e)},_changeElement:function(e,t,n){e.renderPromise=null;var i=e.element,r=e.item;e.newItem&&(e.item=e.newItem,e.newItem=null),this._replaceElement(e,t),e.item&&e.elementIsPlaceholder&&!n?(e.elementDelayed=null,e.elementIsPlaceholder=!1,this._updateElement(e.element,i),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(e.element,i)):this._handlerToNotify().changed(t,i,r)},_elementForItem:function(e,t){var n,i=e.handle,r=this._recordFromHandle(i,!0);if(!i)return null;if(r)n=r.element;else{r={item:e,itemPromise:e},this._addEntryToHandleMap(i,r);var s=this,o=!1,a=!1,l=s._renderItem(e,r,t).then(function(t){var i=t.element;r.renderComplete=t.renderComplete,e.then(function(e){r.item=e,e||(o=!0,n=null)}),a=!0,r.renderPromise=null,i&&(n?s._presentElements(r,i):n=i)});o||(a||(r.renderPromise=l),n||(n=this._renderPlaceholder(r)),r.element=n,this._addEntryToElementMap(n,r),e.retain())}return n},_addEntryToElementMap:function(e,t){this._elementMap[b(e)]=t},_removeEntryFromElementMap:function(e){delete this._elementMap[b(e)]},_recordFromElement:function(e){var t=this._elementMap[b(e)];if(!t)throw this._writeProfilerMark("_recordFromElement:ItemIsInvalidError,info"),new r("WinJS.UI.ItemsManager.ItemIsInvalid",x.itemIsInvalid);return t},_addEntryToHandleMap:function(e,t){this._handleMap[e]=t},_removeEntryFromHandleMap:function(e){delete this._handleMap[e]},_handleInHandleMap:function(e){return!!this._handleMap[e]},_recordFromHandle:function(e,t){var n=this._handleMap[e];if(!n&&!t)throw new r("WinJS.UI.ItemsManager.ItemIsInvalid",x.itemIsInvalid);return n},_foreachRecord:function(e){var t=this._handleMap;for(var n in t){var i=t[n];e(i)}},_itemFromElement:function(e){return this._recordFromElement(e).item},_elementFromHandle:function(e){if(e){var t=this._recordFromHandle(e,!0);if(t&&t.element)return t.element}return null},_inserted:function(e,t,n){this._handlerToNotify().inserted(e,t,n)},_changed:function(e,t){if(this._handleInHandleMap(t.handle)){var n=this._recordFromHandle(t.handle);n.renderPromise&&n.renderPromise.cancel(),n.itemPromise&&n.itemPromise.cancel(),n.imagePromises&&n.imagePromises.forEach(function(e){e.cancel()}),n.itemReadyPromise&&n.itemReadyPromise.cancel(),n.renderComplete&&n.renderComplete.cancel(),n.newItem=e;var i=this,r=a.as(e);r.handle=n.itemPromise.handle,n.renderPromise=this._renderItem(r,n).then(function(e){n.renderComplete=e.renderComplete,i._changeElement(n,e.element,!1),i._presentElements(n)})}},_moved:function(e,t,n){var i=this._elementFromHandle(e.handle),r=this._elementFromHandle(t),s=this._elementFromHandle(n);this._handlerToNotify().moved(i,r,s,e),this._presentAllElements()},_removed:function(e,t){if(this._handleInHandleMap(e)){var n=this._elementFromHandle(e);this._handlerToNotify().removed(n,t,e),this.releaseItem(n),this._presentAllElements()}else this._handlerToNotify().removed(null,t,e)},_countChanged:function(e,t){this._elementNotificationHandler&&this._elementNotificationHandler.countChanged&&this._handlerToNotify().countChanged(e,t)},_indexChanged:function(e,t,n){var i;if(this._handleInHandleMap(e)){var r=this._recordFromHandle(e);if(r.indexObserved)if(r.elementIsPlaceholder)this._changeElement(r,this._renderPlaceholder(r),!0);else if(r.item.index!==t){r.renderPromise&&r.renderPromise.cancel(),r.renderComplete&&r.renderComplete.cancel();var s=r.newItem||r.item;s.index=t;var o=a.as(s);o.handle=r.itemPromise.handle;var l=this;r.renderPromise=this._renderItem(o,r).then(function(e){r.renderComplete=e.renderComplete,l._changeElement(r,e.element,!1),l._presentElements(r)})}i=r.element}this._elementNotificationHandler&&this._elementNotificationHandler.indexChanged&&this._handlerToNotify().indexChanged(i,t,n)},_affectedRange:function(e){this._elementNotificationHandler&&this._elementNotificationHandler.updateAffectedRange&&this._handlerToNotify().updateAffectedRange(e)},_beginNotifications:function(){this._externalBegin=!0,this._handlerToNotify()},_endNotifications:function(){this._notificationsSent&&(this._notificationsSent=!1,this._externalBegin=!1,this._elementNotificationHandler&&this._elementNotificationHandler.endNotifications&&this._elementNotificationHandler.endNotifications())},_reload:function(){this._elementNotificationHandler&&this._elementNotificationHandler.reload&&this._elementNotificationHandler.reload()},_postEndNotifications:function(){if(this._notificationsSent&&!this._externalBegin&&!this._endNotificationsPosted){this._endNotificationsPosted=!0;var e=this;u.schedule(function(){e._endNotificationsPosted=!1,e._endNotifications()},u.Priority.high,null,"WinJS.UI._ItemsManager._postEndNotifications")}},_presentElement:function(e){var t=e.element;this._replaceElement(e,e.elementDelayed),e.elementDelayed=null,e.elementIsPlaceholder=!1,this._updateElement(e.element,t),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(e.element,t)},_presentElements:function(e,t){t&&(e.elementDelayed=t),this._listBinding.jumpToItem(e.item),e.elementDelayed&&this._presentElement(e),this._postEndNotifications()},_presentAllElements:function(){var e=this;this._foreachRecord(function(t){t.elementDelayed&&e._presentElement(t)})},_writeProfilerMark:function(e){var t="WinJS.UI._ItemsManager:"+(this._profilerId?this._profilerId+":":":")+e;o(t)}},{supportedForProcessing:!1});return function(e,t,n,r){return new i(e,t,n,r)}})})}),define("WinJS/Utilities/_TabContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","./_ElementUtilities"],function(e,t,n,i,r){"use strict";function s(e,n,i,r){var s=t.document.createEvent("UIEvent");return s.initUIEvent(n,!1,!!r,t,i?1:0),!e.dispatchEvent(s)}function o(e){var n=t.getComputedStyle(e);if("none"===n.display||"hidden"===n.visibility)return t.NodeFilter.FILTER_REJECT;if(e._tabContainer)return t.NodeFilter.FILTER_ACCEPT;if(e.parentNode&&e.parentNode._tabContainer){var i=e.parentNode._tabContainer.childFocus;return i&&e.contains(i)?u(e)>=0?t.NodeFilter.FILTER_ACCEPT:t.NodeFilter.FILTER_SKIP:t.NodeFilter.FILTER_REJECT}var r=u(e);return r>=0?t.NodeFilter.FILTER_ACCEPT:t.NodeFilter.FILTER_SKIP}function a(e){function t(){if(e.currentNode._tabContainer)r=r.concat(a(e));else if(u(e.currentNode)>=0&&r.push(e.currentNode),e.firstChild()){do t();while(e.nextSibling());e.parentNode()}}var n=e.currentNode,i=n._tabContainer.childFocus,r=[];return i?(e.currentNode=i,t(),e.currentNode=n,r):[]}function l(e,n){function i(){var e=t.document.createElement("DIV");return e.tabIndex=n?n:0,e.setAttribute("aria-hidden",!0),e}var r=e.parentNode,o=i();r.insertBefore(o,e);var a=i();r.insertBefore(a,e.nextSibling),o.addEventListener("focus",function(){s(e,"onTabEnter",!0)},!0),a.addEventListener("focus",function(){s(e,"onTabEnter",!1)},!0),this._catcherBegin=o,this._catcherEnd=a;var l=1;this.addRef=function(){l++},this.release=function(){return 0===--l&&(o.parentElement&&r.removeChild(o),a.parentElement&&r.removeChild(a)),l},this.updateTabIndex=function(e){o.tabIndex=e,a.tabIndex=e}}if(t.document){var u=r.getTabIndex,c={attach:function(e,t){return e["win-trackTabHelperObject"]?e["win-trackTabHelperObject"].addRef():e["win-trackTabHelperObject"]=new l(e,t),e["win-trackTabHelperObject"]},detach:function(e){e["win-trackTabHelperObject"].release()||delete e["win-trackTabHelperObject"]}};n.Namespace._moduleDefine(e,"WinJS.UI",{TrackTabBehavior:c,TabContainer:n.Class.define(function(e){this._element=e,this._tabIndex=0,e._tabContainer=this,null===e.getAttribute("tabindex")&&(e.tabIndex=-1);var t=this;e.addEventListener("onTabEnter",function(n){var i=s(t._element,"onTabEntered",n.detail,!0);i||(t.childFocus?t.childFocus.focus():e.focus())}),e.addEventListener("keydown",function(e){var n=e.target;if(e.keyCode===r.Key.tab){var o=!e.shiftKey,a=t._hasMoreElementsInTabOrder(n,o);if(!a){var l=s(t._element,"onTabExiting",o,!0);if(l)return e.stopPropagation(),void e.preventDefault();for(var u=t._element.querySelectorAll("a[href],area[href],button,command,input,link,menuitem,object,select,textarea,th[sorted],[tabindex]"),c=u.length,h=[],d=0;c>d;d++){var p=u[d];h.push(p.tabIndex),p.tabIndex=-1}t._elementTabHelper[o?"_catcherEnd":"_catcherBegin"].tabIndex=-1;var m=function(){n.removeEventListener("blur",m,!1);for(var e=0;c>e;e++)-1!==h[e]&&(u[e].tabIndex=h[e]);t._elementTabHelper._catcherBegin.tabIndex=t._tabIndex,t._elementTabHelper._catcherEnd.tabIndex=t._tabIndex};n.addEventListener("blur",m,!1),i._yieldForEvents(function(){s(t._element,"onTabExit",o)})}}}),this._elementTabHelper=c.attach(e,this._tabIndex),this._elementTabHelper._catcherBegin.tabIndex=0,this._elementTabHelper._catcherEnd.tabIndex=0},{dispose:function(){c.detach(this._element,this._tabIndex)},childFocus:{set:function(e){e!==this._focusElement&&(this._focusElement=e&&e.parentNode?e:null)},get:function(){return this._focusElement}},tabIndex:{set:function(e){this._tabIndex=e,this._elementTabHelper.updateTabIndex(e)},get:function(){return this._tabIndex}},_element:null,_skipper:function(e){e.stopPropagation(),e.preventDefault()},_hasMoreElementsInTabOrder:function(e,n){if(!this.childFocus)return!1;for(var i=t.document.createTreeWalker(this._element,t.NodeFilter.SHOW_ELEMENT,o,!1),r=a(i),s=0;s<r.length;s++)if(r[s]===e)return n?s<r.length-1:s>0;return!1},_focusElement:null},{supportedForProcessing:!1})})}}),define("WinJS/Utilities/_KeyboardBehavior",["exports","../Core/_Global","../Core/_Base","./_Control","./_ElementUtilities","./_TabContainer"],function(e,t,n,i,r,s){"use strict";if(t.document){var o=!1;r._addEventListener(t,"pointerdown",function(){o&&(o=!1)},!0),t.addEventListener("keydown",function(){o||(o=!0)},!0),n.Namespace._moduleDefine(e,"WinJS.UI",{_keyboardSeenLast:{get:function(){return o},set:function(e){o=e}},_WinKeyboard:function(t){r._addEventListener(t,"pointerdown",function(e){r.removeClass(e.target,"win-keyboard")},!0),t.addEventListener("keydown",function(e){r.addClass(e.target,"win-keyboard")},!0),r._addEventListener(t,"focusin",function(t){e._keyboardSeenLast&&r.addClass(t.target,"win-keyboard")},!1),r._addEventListener(t,"focusout",function(e){r.removeClass(e.target,"win-keyboard")},!1)},_KeyboardBehavior:n.Namespace._lazy(function(){var e=r.Key,o=n.Class.define(function(e,n){e=e||t.document.createElement("DIV"),n=n||{},e._keyboardBehavior=this,this._element=e,this._fixedDirection=o.FixedDirection.width,this._fixedSize=1,this._currentIndex=0,i.setOptions(this,n),this._tabContainer=new s.TabContainer(this.scroller||this._element),this._tabContainer.tabIndex=0,this._element.children.length>0&&(this._tabContainer.childFocus=this._getFocusInto(this._element.children[0])),this._element.addEventListener("keydown",this._keyDownHandler.bind(this)),r._addEventListener(this._element,"pointerdown",this._MSPointerDownHandler.bind(this))},{element:{get:function(){return this._element}},fixedDirection:{get:function(){return this._fixedDirection},set:function(e){this._fixedDirection=e}},fixedSize:{get:function(){return this._fixedSize},set:function(e){+e===e&&(e=Math.max(1,e),this._fixedSize=e)}},currentIndex:{get:function(){return this._element.children.length>0?this._currentIndex:-1},set:function(e){if(+e===e){var t=this._element.children.length;e=Math.max(0,Math.min(t-1,e)),this._currentIndex=e,this._tabContainer.childFocus=this._getFocusInto(this._element.children[e])}}},getAdjacent:{get:function(){return this._getAdjacent},set:function(e){this._getAdjacent=e}},scroller:{get:function(){return this._scroller},set:function(e){this._scroller=e}},_keyDownHandler:function(n){if(!n.altKey){if(r._matchesSelector(n.target,".win-interactive, .win-interactive *"))return;var i=!1,s=this.currentIndex,a=this._element.children.length-1,l="rtl"===t.getComputedStyle(this._element).direction,u=l?e.rightArrow:e.leftArrow,c=l?e.leftArrow:e.rightArrow,h=this.getAdjacent&&this.getAdjacent(s,n.keyCode);if(+h===h)i=!0,s=h;else{var d=s%this.fixedSize;n.keyCode===u?(i=!0,this.fixedDirection===o.FixedDirection.width?0!==d&&s--:s>=this.fixedSize&&(s-=this.fixedSize)):n.keyCode===c?(i=!0,this.fixedDirection===o.FixedDirection.width?d!==this.fixedSize-1&&s++:s+this.fixedSize-d<=a&&(s+=this.fixedSize)):n.keyCode===e.upArrow?(i=!0,this.fixedDirection===o.FixedDirection.height?0!==d&&s--:s>=this.fixedSize&&(s-=this.fixedSize)):n.keyCode===e.downArrow?(i=!0,this.fixedDirection===o.FixedDirection.height?d!==this.fixedSize-1&&s++:s+this.fixedSize-d<=a&&(s+=this.fixedSize)):n.keyCode===e.home?(i=!0,s=0):n.keyCode===e.end?(i=!0,s=this._element.children.length-1):n.keyCode===e.pageUp?i=!0:n.keyCode===e.pageDown&&(i=!0)}s=Math.max(0,Math.min(this._element.children.length-1,s)),s!==this.currentIndex&&(this._focus(s,n.keyCode),(n.keyCode===u||n.keyCode===c||n.keyCode===e.upArrow||n.keyCode===e.downArrow)&&n.stopPropagation()),i&&n.preventDefault()}},_getFocusInto:function(e,t){return e&&e.winControl&&e.winControl._getFocusInto?e.winControl._getFocusInto(t):e},_focus:function(e,t){e=+e===e?e:this.currentIndex;var n=this._element.children[e];n&&(n=this._getFocusInto(n,t),this.currentIndex=e,r._setActive(n,this.scroller))},_MSPointerDownHandler:function(e){var t=e.target;if(t!==this.element){for(;t.parentNode!==this.element;)t=t.parentNode;for(var n=-1;t;)n++,t=t.previousElementSibling;this.currentIndex=n}}},{FixedDirection:{height:"height",width:"width"}});return o})})}}),define("WinJS/Utilities/_SafeHtml",["exports","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources"],function(e,t,n,i){"use strict";var r,s,o,a,l,u,c={get nonStaticHTML(){return"Unable to add dynamic content. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property or the document.write method to add a script element will generate this exception. If the content is safe and from a trusted source, use a method to explicitly manipulate elements and attributes, such as createElement, or use setInnerHTMLUnsafe (or other unsafe method)."}};r=s=function(e,t){e.innerHTML=t},o=a=function(e,t){e.outerHTML=t},l=u=function(e,t,n){e.insertAdjacentHTML(t,n)};var h=t.MSApp;if(h)s=function(e,t){h.execUnsafeLocalFunction(function(){e.innerHTML=t})},a=function(e,t){h.execUnsafeLocalFunction(function(){e.outerHTML=t})},u=function(e,t,n){h.execUnsafeLocalFunction(function(){e.insertAdjacentHTML(t,n)})};else if(t.msIsStaticHTML){var d=function(e){if(!t.msIsStaticHTML(e))throw new i("WinJS.Utitilies.NonStaticHTML",c.nonStaticHTML)};r=function(e,t){d(t),e.innerHTML=t},o=function(e,t){d(t),e.outerHTML=t},l=function(e,t,n){d(n),e.insertAdjacentHTML(t,n)}}n.Namespace._moduleDefine(e,"WinJS.Utilities",{setInnerHTML:r,setInnerHTMLUnsafe:s,setOuterHTML:o,setOuterHTMLUnsafe:a,insertAdjacentHTML:l,insertAdjacentHTMLUnsafe:u})}),define("WinJS/Utilities/_Select",["exports","../Core/_Base","./_SafeHtml"],function(e,t,n){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_Select:t.Namespace._lazy(function(){function e(e){return e.replace(a,function(e){return l[e]||""
})}function i(e){return e.replace(u,"")}function r(e){return this[e]}function s(){return this.length}function o(e){return e.getValue||(e.getValue=r),e.getLength||(e.getLength=s),e}var a=/[&<>'"]/g,l={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},u=/[\u200e\u200f]/g;return t.Class.define(function(e,t){this._dataSource=o(t.dataSource),this._index=t.index||0,this._domElement=e,this._domElement.tabIndex=0,t.disabled&&this.setDisabled(t.disabled);var n=this;this._domElement.addEventListener("change",function(){n._index=n._domElement.selectedIndex},!1),this._createSelectElement()},{_index:0,_dataSource:null,dataSource:{get:function(){return this._dataSource},set:function(e){this._dataSource=o(e),this._domElement&&this._createSelectElement()}},setDisabled:function(e){e?this._domElement.setAttribute("disabled","disabled"):this._domElement.removeAttribute("disabled")},_createSelectElement:function(){for(var t=this._dataSource.getLength(),r="",s=0;t>s;s++){var o=""+this._dataSource.getValue(s),a=e(o),l=i(a);r+="<option value='"+l+"'>"+a+"</option>"}n.setInnerHTMLUnsafe(this._domElement,r),this._domElement.selectedIndex=this._index},index:{get:function(){return Math.max(0,Math.min(this._index,this._dataSource.getLength()-1))},set:function(e){if(this._index!==e){this._index=e;var t=this._domElement;t&&t.selectedIndex!==e&&(t.selectedIndex=e)}}},value:{get:function(){return this._dataSource.getValue(this.index)}}})})})}),define("WinJS/Utilities/_UI",["exports","../Core/_BaseCoreUtils","../Core/_Base"],function(e,t,n){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{eventHandler:function(e){return t.markSupportedForProcessing(e)},Orientation:{horizontal:"horizontal",vertical:"vertical"},CountResult:{unknown:"unknown"},CountError:{noResponse:"noResponse"},DataSourceStatus:{ready:"ready",waiting:"waiting",failure:"failure"},FetchError:{noResponse:"noResponse",doesNotExist:"doesNotExist"},EditError:{noResponse:"noResponse",canceled:"canceled",notPermitted:"notPermitted",noLongerMeaningful:"noLongerMeaningful"},ObjectType:{item:"item",groupHeader:"groupHeader"},SelectionMode:{none:"none",single:"single",multi:"multi"},TapBehavior:{directSelect:"directSelect",toggleSelect:"toggleSelect",invokeOnly:"invokeOnly",none:"none"},SwipeBehavior:{select:"select",none:"none"},GroupHeaderTapBehavior:{invoke:"invoke",none:"none"}})}),define("WinJS/Utilities/_Xhr",["../Core/_Global","../Core/_Base","../Promise","../Scheduler"],function(e,t,n,i){"use strict";function r(e,t,n){i.schedule(function(){e(t)},n,null,"WinJS.xhr")}function s(){}function o(t){var o;return new n(function(n,a,l){var u=i.currentPriority;o=new e.XMLHttpRequest,o.onreadystatechange=function(){return o._canceled?void(o.onreadystatechange=s):void(4===o.readyState?(o.status>=200&&o.status<300||0===o.status?r(n,o,u):r(a,o,u),o.onreadystatechange=s):r(l,o,u))},o.open(t.type||"GET",t.url,!0,t.user,t.password),o.responseType=t.responseType||"",Object.keys(t.headers||{}).forEach(function(e){o.setRequestHeader(e,t.headers[e])}),t.customRequestInitializer&&t.customRequestInitializer(o),void 0===t.data?o.send():o.send(t.data)},function(){o.onreadystatechange=s,o._canceled=!0,o.abort()})}return t.Namespace.define("WinJS",{xhr:o}),o}),define("WinJS/Utilities",["./Utilities/_Control","./Utilities/_Dispose","./Utilities/_ElementListUtilities","./Utilities/_ElementUtilities","./Utilities/_Hoverable","./Utilities/_ItemsManager","./Utilities/_KeyboardBehavior","./Utilities/_ParallelWorkQueue","./Utilities/_SafeHtml","./Utilities/_Select","./Utilities/_TabContainer","./Utilities/_UI","./Utilities/_VersionManager","./Utilities/_Xhr"],function(){}),define("WinJS/Fragments",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./Core/_WriteProfilerMark","./Promise","./Utilities/_ElementUtilities","./Utilities/_SafeHtml","./Utilities/_Xhr"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e,n,i,r){var s=e.src,o=!s;if(o&&(s=n+"script["+i+"]"),s=s.toLowerCase(),!(s in M)){var a=null;M[s]=!0;var u=t.document.createElement("script");if(e.language&&u.setAttribute("language","javascript"),u.setAttribute("type",e.type),u.setAttribute("async","false"),e.id&&u.setAttribute("id",e.id),o){var c=e.text;a=r.then(function(){u.text=c}).then(null,function(){})}else a=new l(function(t){u.onload=u.onerror=function(){t()},u.setAttribute("src",e.src)});return A.appendChild(u),{promise:a,inline:o}}}function p(e,t,n){var i=(t+"script["+n+"]").toLowerCase();i in O||(O[i]=!0,A.appendChild(e.cloneNode(!0)))}function m(e){var t=e.href.toLowerCase();if(!(t in D)){D[t]=!0;var n=e.cloneNode(!1);n.href=e.href,A.appendChild(n)}}function f(e,n){if("string"==typeof e)return g(e,n);var i={docfrag:u.data(e).docFragment};if(!i.docfrag){for(var r=t.document.createDocumentFragment();e.childNodes.length>0;)r.appendChild(e.childNodes[0]);i.docfrag=u.data(e).docFragment=r,e.setAttribute("data-win-hasfragment","")}return n&&S(e),l.as(i)}function _(e,t){return E(e,t).then(function(){return e.document?v(t,e):e}).then(function(){return e.document&&delete e.document,e})}function g(e,t){var n=e.toLowerCase(),i=R[n];if(i)return t&&delete R[n],i.promise?i.promise:l.as(i);i={},t||(R[n]=i);var r=i.promise=_(i,e);return i.promise.then(function(){delete i.promise}),r}function v(e,n){var i=n.document,r=i.body,s=[];P(i.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),m),P(i.getElementsByTagName("style"),function(t,n){p(t,e,n)});var o=l.as();P(i.getElementsByTagName("script"),function(t,n){var i=d(t,e,n,o);i&&(i.inline||(o=i.promise),s.push(i.promise))}),P(r.getElementsByTagName("img"),function(e){e.src=e.src}),P(r.getElementsByTagName("a"),function(e){if(""!==e.href){var t=e.getAttribute("href");t&&"#"!==t[0]&&(e.href=e.href)}});for(var a=r.getElementsByTagName("script");a.length>0;){var u=a[0];u.parentNode.removeChild(u)}return l.join(s).then(function(){for(var e=t.document.createDocumentFragment(),r=t.document.importNode(i.body,!0);r.childNodes.length>0;)e.appendChild(r.childNodes[0]);return n.docfrag=e,n})}function y(){L||(L=!0,P(A.querySelectorAll("script"),function(e){M[e.src.toLowerCase()]=!0}),P(A.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),function(e){D[e.href.toLowerCase()]=!0}))}function b(e,t){return w(e,t,!0)}function w(e,n,i){var s=(e instanceof t.HTMLElement?r._getProfilerMarkIdentifier(e):" href='"+e+"'")+"["+ ++B+"]";return N("WinJS.UI.Fragments:render"+s+",StartTM"),y(),f(e,!i).then(function(e){var t=e.docfrag;i&&(t=t.cloneNode(!0));for(var r=t.firstChild;r;)1===r.nodeType&&(r.msParentSelectorScope=!0),r=r.nextSibling;var o;return n?(n.appendChild(t),o=n):o=t,N("WinJS.UI.Fragments:render"+s+",StopTM"),o})}function C(e,t){return w(e,t,!1)}function x(e){return y(),f(e).then(function(e){return e.docfrag})}function S(e){e?"string"==typeof e?delete R[e.toLowerCase()]:(delete u.data(e).docFragment,e.removeAttribute("data-win-hasfragment")):R={}}function I(e){if(r.hasWinRT){var i=t.document.createElement("a");i.href=e;var o=i.href,a=new n.Windows.Foundation.Uri(o),l=a.schemeName;if("ms-appx"!==l)throw new s("WinJS.UI.Fragments.InvalidUri",T.invalidFragmentUri);return o}return e}function E(e,n){n=I(n);var i=t.document.implementation.createHTMLDocument("frag"),r=i.createElement("base");i.head.appendChild(r);var s=i.createElement("a");return i.body.appendChild(s),r.href=t.document.location.href,s.setAttribute("href",n),r.href=s.href,e.document=i,F(n).then(function(e){c.setInnerHTMLUnsafe(i.documentElement,e),i.head.appendChild(r)})}function k(e){return h({url:e}).then(function(e){return e.responseText})}var T={get invalidFragmentUri(){return"Unsupported uri for fragment loading. Fragments in the local context can only load from package content or local sources. To load fragments from other sources, use a web context."}};if(t.document){var P=function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)},A=t.document.head||t.document.getElementsByTagName("head")[0],M={},O={},D={},L=!1,R={},B=1,N=a,F=k;i.Namespace._moduleDefine(e,"WinJS.UI.Fragments",{renderCopy:b,render:C,cache:x,clearCache:S,_cacheStore:{get:function(){return R}},_forceLocal:I,_getFragmentContents:{get:function(){return F},set:function(e){F=e}},_writeProfilerMark:{get:function(){return N},set:function(e){N=e}}})}}),define("WinJS/Application/_State",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise"],function(e,t,n,i,r,s){"use strict";function o(){var t,r,s,o=i.Class.define(function(e){this.folder=e,this._path=e.path,e.tryGetItemAsync&&(this._tryGetItemAsync=e.tryGetItemAsync.bind(e))},{_tryGetItemAsync:function(e){return this.folder.getFileAsync(e).then(null,function(){return!1})},exists:function(e){return this._tryGetItemAsync(e).then(function(e){return e?!0:!1})},remove:function(e){return this._tryGetItemAsync(e).then(function(e){return e?e.deleteAsync():!1}).then(null,function(){return!1})},writeText:function(e,t){var i=n.Windows.Storage,r=this;return r.folder.createFileAsync(e,i.CreationCollisionOption.openIfExists).then(function(e){return i.FileIO.writeTextAsync(e,t)})},readText:function(e,t){var i=n.Windows.Storage;return this._tryGetItemAsync(e).then(function(e){return e?i.FileIO.readTextAsync(e):t}).then(null,function(){return t})}},{supportedForProcessing:!1});i.Namespace._moduleDefine(e,"WinJS.Application",{local:{get:function(){return t||(t=new o(n.Windows.Storage.ApplicationData.current.localFolder)),t}},temp:{get:function(){return r||(r=new o(n.Windows.Storage.ApplicationData.current.temporaryFolder)),r}},roaming:{get:function(){return s||(s=new o(n.Windows.Storage.ApplicationData.current.roamingFolder)),s}}})}function a(){var t=i.Class.define(function(){this.storage={}},{exists:function(e){return s.as(void 0!==this.storage[e])},remove:function(e){return delete this.storage[e],s.as()},writeText:function(e,t){return this.storage[e]=t,s.as(t.length)},readText:function(e,t){var n=this.storage[e];return s.as("string"==typeof n?n:t)}},{supportedForProcessing:!1});i.Namespace._moduleDefine(e,"WinJS.Application",{local:new t,temp:new t,roaming:new t})}n.Windows.Storage.FileIO&&n.Windows.Storage.ApplicationData&&n.Windows.Storage.CreationCollisionOption?o():a();var l={};i.Namespace._moduleDefine(e,"WinJS.Application",{sessionState:{get:function(){return l},set:function(e){l=e}},_loadState:function(t){return 3===t.previousExecutionState?e.local.readText("_sessionState.json","{}").then(function(t){var n=JSON.parse(t);n&&Object.keys(n).length>0&&(e._sessionStateLoaded=!0),e.sessionState=n}).then(null,function(){e.sessionState={}}):s.as()},_oncheckpoint:function(n,i){if(!(t.MSApp&&t.MSApp.getViewOpener&&t.MSApp.getViewOpener())){var r=e.sessionState;if(r&&Object.keys(r).length>0||e._sessionStateLoaded){var s;try{s=JSON.stringify(r)}catch(o){s="",i.queueEvent({type:"error",detail:o})}n.setPromise(e.local.writeText("_sessionState.json",s).then(null,function(e){i.queueEvent({type:"error",detail:e})}))}}}})}),define("WinJS/Navigation",["exports","./Core/_Base","./Core/_Events","./Core/_WriteProfilerMark","./Promise"],function(e,t,n,i,r){"use strict";var s="navigated",o="navigating",a="beforenavigate",l=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),n.eventMixin),u=new l,c={backStack:[],current:{location:"",initialPlaceholder:!0},forwardStack:[]},h=n._createEventProperty,d=function(e){return i("WinJS.Navigation:navigation,StartTM"),r.as().then(function(){var t=r.as(),n=u.dispatchEvent(a,{setPromise:function(e){t=t.then(function(){return e})},location:e.location,state:e.state});return t.then(function(e){return n||e})})},p=function(e){return r.as().then(function(){var t=r.as();return u.dispatchEvent(o,{setPromise:function(e){t=t.then(function(){return e})},location:c.current.location,state:c.current.state,delta:e}),t})},m=function(e,t){i("WinJS.Navigation:navigation,StopTM");var n=r.as(),o={value:e,location:c.current.location,state:c.current.state,setPromise:function(e){n=n.then(function(){return e})}};return!e&&t&&(o.error=t),u.dispatchEvent(s,o),n},f=function(e,t,n,i){return e=Math.min(e,t.length),e>0?d(t[t.length-e]).then(function(r){if(r)return!1;for(n.push(c.current);e-1>0;)e--,n.push(t.pop());return c.current=t.pop(),p(i).then(m,function(e){throw m(void 0,e||!0),e}).then(function(){return!0})}):r.wrap(!1)};t.Namespace._moduleDefine(e,"WinJS.Navigation",{canGoForward:{get:function(){return c.forwardStack.length>0}},canGoBack:{get:function(){return c.backStack.length>0}},location:{get:function(){return c.current.location}},state:{get:function(){return c.current.state},set:function(e){c.current.state=e}},history:{get:function(){return c},set:function(e){c=e,c.backStack=c.backStack||[],c.forwardStack=c.forwardStack||[],c.current=c.current||{location:"",initialPlaceholder:!0},c.current.location=c.current.location||""}},forward:function(e){return e=e||1,f(e,c.forwardStack,c.backStack,e)},back:function(e){return e=e||1,f(e,c.backStack,c.forwardStack,-e)},navigate:function(e,t){var n={location:e,state:t};return d(n).then(function(e){return e?!1:(c.current.initialPlaceholder||c.backStack.push(c.current),c.forwardStack=[],c.current=n,p().then(m,function(e){throw m(void 0,e||!0),e}).then(function(){return!0}))})},addEventListener:function(e,t,n){u.addEventListener(e,t,n)},removeEventListener:function(e,t,n){u.removeEventListener(e,t,n)},onnavigated:h(s),onnavigating:h(o),onbeforenavigate:h(a)})}),define("WinJS/Application",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_Events","./Core/_Log","./Core/_WriteProfilerMark","./Application/_State","./Navigation","./Promise","./_Signal","./Scheduler"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e){var n;try{var i=[];n=JSON.stringify(e,function(e,n){return n===t?"[window]":n instanceof t.HTMLElement?"[HTMLElement]":"function"==typeof n?"[function]":"object"==typeof n?null===n?n:-1===i.indexOf(n)?(i.push(n),n):"[circular]":n})}catch(r){n=JSON.stringify("[object]")}return n}function p(e){t.MSApp&&t.MSApp.terminateApp(e)}function m(e){var t="def"+X++;return{deferral:Z[t]=e.getDeferral(),id:t}}function f(e,t){t&&(e=Z[t],delete Z[t]),e&&e.complete()}function _(){Z&&(Object.keys(Z).forEach(function(e){Z[e].complete()}),Z={})}function g(e){function t(t){return o("WinJS.Application:Event_"+e.type+",StopTM"),e._deferral&&f(e._deferral,e._deferralID),t}o("WinJS.Application:Event_"+e.type+",StartTM");var n=u.as();e.setPromise=function(e){n=n.then(function(){return e})},e.detail=e.detail||{},"object"==typeof e.detail&&(e.detail.setPromise=e.setPromise);try{if($._listeners){var i=!1;r=$._listeners[e.type],r&&r.forEach(function(t){i=t.listener(e)||i})}var r=et[e.type];r&&r.forEach(function(t){t(e,i)})}catch(s){C({type:H,detail:s})}return n.then(t,function(e){return e=t(e),e&&"Canceled"===e.name?void 0:u.wrapError(e)})}function v(){return q||(q=new c,q.promise.done(function(){q=null},function(){q=null})),q}function y(e){function t(e){C({type:H,detail:e})}return 0===e.length?v().promise:g(e.shift()).then(null,t)}function b(e){function t(){return b}var n=e.job._queue;0===n.length&&j.length>0&&(n=e.job._queue=x()),e.setPromise(y(n).then(t,t))}function w(){function e(){i=!0}for(var t,n=[],i=!0;i;)0===n.length&&j.length>0&&(n=x()),i=!1,t=y(n),t.done(e,e);U=h.schedule(function(e){function n(){return b}e.setPromise(t.then(n,n))},h.Priority.high,null,"WinJS.Application._pumpEventQueue"),U._queue=n}function C(e){o("WinJS.Application:Event_"+e.type+" queued,Info"),j.push(e),K&&q&&q.complete(b)}function x(){var e=j;return j=[],e}function S(e){var t=m(e.activatedOperation);a._loadState(e).then(function(){C({type:N,detail:e,_deferral:t.deferral,_deferralID:t.id})})}function I(e){var t=m(e.suspendingOperation);C({type:R,_deferral:t.deferral,_deferralID:t.id})}function E(){if(C({type:F}),!t.document||!n.Windows.UI.WebUI.WebUIApplication){var e={arguments:"",kind:"Windows.Launch",previousExecutionState:0};a._loadState(e).then(function(){C({type:N,detail:e})})}}function k(){_(),C({type:B})}function T(t){var n={};for(var i in t)n[i]=t[i];var r,s=!0,o=e._terminateApp;try{e._terminateApp=function(e,t){s=!1,r=e,o!==p&&o(e,t)},g({type:H,detail:{error:n,errorLine:t.lineno,errorCharacter:t.colno,errorUrl:t.filename,errorMessage:t.message}})}finally{e._terminateApp=o}return s}function P(e){var t=e.detail,n=t.id;if(t.parent)return void(t.handler&&L&&delete L[n]);if(t.exception instanceof Error){var i={stack:t.exception.stack,message:t.exception.message};t.exception=i}var r=!L;L=L||[],L[n]=t,r&&h.schedule(function(){var e=L;L=null,e.forEach(function(e){C({type:H,detail:e})})},h.Priority.high,null,"WinJS.Application._queuePromiseErrors")}function A(e){var t={e:e,applicationcommands:void 0};$.dispatchEvent(W,t)}function M(e){var t={type:V};Object.defineProperty(t,"_winRTBackPressedEvent",{value:e,enumerable:!1}),g(t)}function O(){if(!J){if(J=!0,t.addEventListener("beforeunload",k,!1),t.document){if(t.addEventListener("error",T,!1),n.Windows.UI.WebUI.WebUIApplication){var e=n.Windows.UI.WebUI.WebUIApplication;e.addEventListener("activated",S,!1),e.addEventListener("suspending",I,!1)}if(n.Windows.UI.ApplicationSettings.SettingsPane){var i=n.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();i.addEventListener("commandsrequested",A)}n.Windows.Phone.UI.Input.HardwareButtons&&n.Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",M)}u.addEventListener("error",P)}}function D(){if(J){if(J=!1,t.removeEventListener("beforeunload",k,!1),t.document){if(n.Windows.UI.WebUI.WebUIApplication){t.removeEventListener("error",T,!1);var e=n.Windows.UI.WebUI.WebUIApplication;e.removeEventListener("activated",S,!1),e.removeEventListener("suspending",I,!1)}if(n.Windows.UI.ApplicationSettings.SettingsPane){var i=n.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();i.removeEventListener("commandsrequested",A)}n.Windows.Phone.UI.Input.HardwareButtons&&n.Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",M)}u.removeEventListener("error",P)}}t.Debug&&(t.Debug.setNonUserCodeExceptions=!0);var L,R="checkpoint",B="unload",N="activated",F="loaded",z="ready",H="error",W="settings",V="backclick",j=[],U=null,q=null,K=!1,J=!1,G=i.Class.mix(i.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),$=new G,Y=r._createEventProperty,Z={},X=0,Q=p,et={activated:[function(){C({type:z})}],checkpoint:[function(t){a._oncheckpoint(t,e)}],error:[function(n,i){if(!i&&(s.log&&s.log(d(n),"winjs","error"),t.document&&e._terminateApp)){var r=n.detail,o=r&&(r.number||r.exception&&(r.exception.number||r.exception.code)||r.error&&r.error.number||r.errorCode||0),a={description:d(r),stack:r&&(r.stack||r.exception&&(r.exception.stack||r.exception.message)||r.error&&r.error.stack||null),errorNumber:o,number:o};e._terminateApp(a,n)}}],backclick:[function(e,t){t?e._winRTBackPressedEvent.handled=!0:l.canGoBack&&(l.back(),e._winRTBackPressedEvent.handled=!0)}]};t.document&&t.document.addEventListener("DOMContentLoaded",E,!1);var tt=i.Namespace._moduleDefine(e,"WinJS.Application",{stop:function(){tt.onactivated=null,tt.oncheckpoint=null,tt.onerror=null,tt.onloaded=null,tt.onready=null,tt.onsettings=null,tt.onunload=null,tt.onbackclick=null,$=new G,a.sessionState={},K=!1,x(),U&&U.cancel(),U=null,q=null,D(),_()},addEventListener:function(e,t,n){$.addEventListener(e,t,n)},removeEventListener:function(e,t,n){$.removeEventListener(e,t,n)},checkpoint:function(){C({type:R})},start:function(){O(),K=!0,w()},queueEvent:C,_terminateApp:{get:function(){return Q},set:function(e){Q=e}},oncheckpoint:Y(R),onunload:Y(B),onactivated:Y(N),onloaded:Y(F),onready:Y(z),onsettings:Y(W),onerror:Y(H),onbackclick:Y(V)})}),define("WinJS/Animations/_Constants",["exports","../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{PageNavigationAnimation:{turnstile:"turnstile",slide:"slide",enterPage:"enterPage",continuum:"continuum"}})}),define("WinJS/Animations/_TransitionAnimation",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler","../Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o,a){"use strict";function l(e){return Array.isArray(e)||e instanceof t.NodeList||e instanceof t.HTMLCollection?e:e?[e]:[]}function u(){return++k,"WinJSUIAnimation"+k}function c(e){return"WinJSUIAnimation"===e.substring(0,16)}function h(e){t.getComputedStyle(e,null).opacity}function d(t,n){return function(i){var r={};for(var s in i){var o=i[s];"function"==typeof o&&(o=o(t,n)),r[s]=o}return r.exactTiming||(r.delay+=e._libraryDelay),r}}function p(e,t){var n=e+"|"+t,i=T[n];i&&i(P)}function m(e,t,n){T[e+"|"+t]=n}function f(e,t){delete T[e+"|"+t]}function _(e,t,n,i,r){var s=r.styleCaches[t]||new M(t,r,n);s.cref+=i.length,i.forEach(function(e){p(t,e.property)}),(r.isTransition||i.some(function(e){return s.removed[e[r.nameField]]}))&&(h(e),s.removed={});var o=i.map(function(e){return e[r.nameField]+" "+r.props.map(function(t){return(t[1]?e[t[1]]:"")+t[2]}).join(" ")}).join(", "),a=i.map(function(e){return e[r.nameField]}).join(", ");return""!==s.names&&(o=s.names+", "+o,a=s.names+", "+a),n[r.shorthandProp]=o,s.names=a,s}function g(e,t){t?e():o.schedule(function(){e()},o.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function v(e,n,i,o,l){if(i.length>0){var u=e.style,c=a._uniqueID(e);if(S||(S=t.document.createElement("DIV").style),i=i.map(d(n,e)),i.forEach(function(e){var t=r._getCamelCasedName(e.property);e.hasOwnProperty("from")&&(u[t]=e.from),S[t]=e.to,e.to=S[t],e.propertyScriptName=t}),l){var h=_(e,c,u,i,O),p=e.disabled?t.document:e;i.forEach(function(n){var i;o.push(new s(function(s){i=function(i){o&&(p.removeEventListener(r._browserEventEquivalents.transitionEnd,o,!1),f(c,n.property),h.removeName(u,n.propertyScriptName,i?e:null,n.skipStylesReset),t.clearTimeout(l),o=null),g(s,i===A)};var o=function(t){t.target===e&&t.propertyName===n.property&&i()};m(c,n.property,i),p.addEventListener(r._browserEventEquivalents.transitionEnd,o,!1);var a=0;u[n.propertyScriptName]!==n.to&&(u[n.propertyScriptName]=n.to,a=50);var l=t.setTimeout(function(){l=t.setTimeout(i,n.delay+n.duration)},a)},function(){i(A)}))})}else i.forEach(function(e){u[e.propertyScriptName]=e.to})}}function y(e,n,i,o,l){if(l&&i.length>0){var c=e.style,h=a._uniqueID(e);i=i.map(d(n,e));var p,v=e.disabled?t.document:e;i.forEach(function(e){if(e.keyframe)e.keyframe=E.animationPrefix+e.keyframe;else{p||(p=t.document.createElement("STYLE"),t.document.documentElement.appendChild(p)),e.keyframe=u();var n="@"+E.keyframes+" "+e.keyframe+" { from {"+e.property+":"+e.from+";} to {"+e.property+":"+e.to+";}}";p.sheet.insertRule(n,0)}});var y=_(e,h,c,i,D),b=[],w=[];i.forEach(function(n){var i;w.push(new s(function(s){i=function(e){o&&(v.removeEventListener(r._browserEventEquivalents.animationEnd,o,!1),t.clearTimeout(a),o=null),g(s,e===A)};var o=function(t){t.target===e&&t.animationName===n.keyframe&&i()};m(h,n.property,i),b.push({id:h,property:n.property,style:c,keyframe:n.keyframe});var a=t.setTimeout(function(){a=t.setTimeout(i,n.delay+n.duration)},50);v.addEventListener(r._browserEventEquivalents.animationEnd,o,!1)},function(){i(A)}))}),p&&t.setTimeout(function(){var e=p.parentElement;e&&e.removeChild(p)},50);var C=function(){for(var e=0;e<b.length;e++){var t=b[e];f(t.id,t.property),y.removeName(t.style,t.keyframe)}};o.push(s.join(w).then(C,C))}}function b(){I||(I=n.Windows.UI.ViewManagement.UISettings?new n.Windows.UI.ViewManagement.UISettings:{animationsEnabled:!0})}function w(t,n,i){try{for(var r=e.isAnimationEnabled(),a=l(t),u=l(n),c=[],h=0;h<a.length;h++)if(Array.isArray(a[h]))for(var d=0;d<a[h].length;d++)i(a[h][d],h,u,c,r);else i(a[h],h,u,c,r);return c.length?s.join(c):o.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,function(){})}catch(p){return s.wrapError(p)}}function C(e){return Array.isArray(e)?e.map(function(e){return C(e)}):e?(e.delay=B(e.delay),e.duration=B(e.duration),e):void 0}function x(e){return N?C(e):e}if(t.document){var S,I,E=r._browserStyleEquivalents,k=0,T=[],P=1,A=2,M=i.Class.define(function(e,t,n){this.cref=0,this.id=e,this.desc=t,this.removed={},this.prevStyles=t.props.map(function(e){return n[e[0]]}),this.prevNames=this.names=n[t.nameProp],t.styleCaches[e]=this},{destroy:function(e,t){var n=this.desc;delete n.styleCaches[this.id],t||(""===this.prevNames&&this.prevStyles.every(function(e){return""===e})?e[n.shorthandProp]="":(n.props.forEach(function(t,n){e[t[0]]=this.prevStyles[n]},this),e[n.nameProp]=this.prevNames))},removeName:function(e,t,n,i){var r=this.names,s=r.split(", "),o=s.lastIndexOf(t);o>=0&&(s.splice(o,1),this.names=r=s.join(", "),""===r&&this.desc.isTransition&&(r="none")),--this.cref?(e[this.desc.nameProp]=r,c(t)||(this.removed[t]=!0)):(n&&"none"===r&&(e[this.desc.nameProp]=r,h(n)),this.destroy(e,i))}}),O={shorthandProp:E.transition.scriptName,nameProp:E["transition-property"].scriptName,nameField:"property",props:[[E["transition-duration"].scriptName,"duration","ms"],[E["transition-timing-function"].scriptName,"timing",""],[E["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},D={shorthandProp:E.animation.scriptName,nameProp:E["animation-name"].scriptName,nameField:"keyframe",props:[[E["animation-duration"].scriptName,"duration","ms"],[E["animation-timing-function"].scriptName,"timing",""],[E["animation-delay"].scriptName,"delay","ms"],[E["animation-iteration-count"].scriptName,"","1"],[E["animation-direction"].scriptName,"","normal"],[E["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},L=0,R=function(){return b(),L+I.animationsEnabled>0},B=function(e){return N?e/20:e},N=!1,F=0;i.Namespace._moduleDefine(e,"WinJS.UI",{disableAnimations:function(){L--},enableAnimations:function(){L++},isAnimationEnabled:{get:function(){return R},set:function(e){R=e}},_libraryDelay:{get:function(){return F},set:function(e){F=e}},executeAnimation:function(e,t){return w(e,x(t),y)},executeTransition:function(e,t){return w(e,x(t),v)},_animationTimeAdjustment:{get:function(){return B},set:function(e){B=e}}}),i.Namespace._moduleDefine(e,"WinJS.Utilities",{_fastAnimations:{get:function(){return N},set:function(e){N=e}}})}}),define("WinJS/Animations",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Animations/_Constants","./Animations/_TransitionAnimation","./Promise"],function(e,t,n,i,r,s,o,a){"use strict";function l(e,t,n){return e.keyframe?e.keyframe:!n||e.left!==t.left||e.top!==t.top||e.rtlflip&&!t.rtlflip?null:e.rtlflip?c(n):n}function u(e,t){return t&&e.rtlflip?c(t):t}function c(e){var n=e+"-rtl";return function(i,r){return"ltr"===t.getComputedStyle(r).direction?e:n}}function h(e){return Array.isArray(e)||e instanceof t.NodeList||e instanceof t.HTMLCollection?e:e?[e]:[]}function d(e){for(var n=[],i=0;i<e.length;i++){var r={top:e[i].offsetTop,left:e[i].offsetLeft},s=t.getComputedStyle(e[i],null)[I.scriptName].split(",");6===s.length&&(r.left+=parseFloat(s[4]),r.top+=parseFloat(s[5])),n.push(r)}return n}function p(e,t,n,i){return function(r){for(var s=e,o=0;r>o;o++)t*=n,s+=t;return i&&(s=Math.min(s,i)),s}}function m(e,t){for(var n=0;n<t.length;n++)t[n].top-=e[n].offsetTop,t[n].left-=e[n].offsetLeft}function f(e,t,n){m(e,t);for(var i=0;i<e.length;i++)(0!==t[i].top||0!==t[i].left)&&(e[i].style[I.scriptName]="translate("+t[i].left+"px, "+t[i].top+"px)");return o.executeTransition(e,n)}function _(e,t,n,i,r,s,a,l){function u(e,t,n){if(e){var i={left:t+"px",top:"0px"},r={left:n+"px",top:"0px"};if(+e.length===e.length)for(var s=0,o=e.length;o>s;s++)c.push(e[s]),h.push(i),d.push(r);else c.push(e),h.push(i),d.push(r)}}var c=[],h=[],d=[],p=200,m=0!==t?0>t?-p:p:0,f=0!==n?0>n?-p:p:0;return u(r,t,n),u(s,m,f),u(a,2*m,2*f),u(l,3*m,3*f),h=new k(h),d=new k(d),o.executeTransition(c,[{property:I.cssName,delay:0,duration:350,timing:e,from:y(h),to:y(d)},{property:"opacity",delay:0,duration:350,timing:i?"steps(1, start)":"steps(1, end)",from:i?0:1,to:i?1:0}])}function g(e,n,r){function s(){v(e)}e=h(e),n=h(n);for(var a=0,l=e.length;l>a;a++){var u="rtl"===t.getComputedStyle(e[a]).direction;e[a].style[i._browserStyleEquivalents["transform-origin"].scriptName]=n[Math.min(n.length-1,a)][u?"rtl":"ltr"]}return o.executeTransition(e,r).then(s,s)}function v(e){for(var t=0,n=e.length;n>t;t++)e[t].style[i._browserStyleEquivalents["transform-origin"].scriptName]="",e[t].style[I.scriptName]="",e[t].style.opacity=""}function y(e,n){return n=n||"",function(i,r){var s=e.getOffset(i),o=s.left;return s.rtlflip&&"rtl"===t.getComputedStyle(r).direction&&(o=o.toString(),o="-"===o.charAt(0)?o.substring(1):"-"+o),n+"translate("+o+", "+s.top+")"}}function b(e,t){return t=t||"",function(n){var i=e[n];return"translate("+i.left+"px, "+i.top+"px) "+t}}function w(e,t){return function(n){var i=e[n];return 0===i.left&&0===i.top?t:null}}function C(e,t,n,i){var r=h(t),s=h(n),o=d(s);return new e(r,s,o,i)}function x(e){for(var n=[],i=0,r=e.length;r>i;i++){var s=e[i].getBoundingClientRect(),o=-(40+s.left),a=40+(t.innerWidth-s.right),l=t.innerHeight/2-s.top;n.push({ltr:o+"px "+l+"px",rtl:a+"px "+l+"px"})}return n}function S(e){r("WinJS.UI.Animation:"+e)}var I=i._browserStyleEquivalents.transform,E=[{top:"0px",left:"11px",rtlflip:!0}],k=n.Class.define(function(e,t,n){n=n||E,Array.isArray(e)&&e.length>0?(this.offsetArray=e,1===e.length&&(this.keyframe=l(e[0],n[0],t))):e&&e.hasOwnProperty("top")&&e.hasOwnProperty("left")?(this.offsetArray=[e],this.keyframe=l(e,n[0],t)):(this.offsetArray=n,this.keyframe=u(n[0],t))},{getOffset:function(e){return e>=this.offsetArray.length&&(e=this.offsetArray.length-1),this.offsetArray[e]}},{supportedForProcessing:!1}),T=n.Class.define(function(e,t,n){this.revealedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){S("expandAnimation,StartTM");var e=o.executeAnimation(this.revealedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?200:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}),t=f(this.affectedArray,this.offsetArray,{property:I.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([e,t]).then(function(){S("expandAnimation,StopTM")})}},{supportedForProcessing:!1}),P=n.Class.define(function(e,t,n){this.hiddenArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){S("collapseAnimation,StartTM");var e=o.executeAnimation(this.hiddenArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0}),t=f(this.affectedArray,this.offsetArray,{property:I.cssName,delay:this.hiddenArray.length>0?167:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([e,t]).then(function(){S("collapseAnimation,StopTM")})}},{supportedForProcessing:!1}),A=n.Class.define(function(e,t,n){this.elementArray=t,this.offsetArray=n},{execute:function(){return S("repositionAnimation,StartTM"),f(this.elementArray,this.offsetArray,{property:I.cssName,delay:p(0,33,1,250),duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){S("repositionAnimation,StopTM")})}},{supportedForProcessing:!1}),M=n.Class.define(function(e,t,n){this.addedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){S("addToListAnimation,StartTM");var e=this.affectedArray.length>0?240:0,t=o.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:I.cssName,delay:e,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:e,duration:120,timing:"linear",from:0,to:1}]),n=f(this.affectedArray,this.offsetArray,{property:I.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([t,n]).then(function(){S("addToListAnimation,StopTM")})}},{supportedForProcessing:!1}),O=n.Class.define(function(e,t,n){this.deletedArray=e,this.remainingArray=t,this.offsetArray=n
},{execute:function(){S("deleteFromListAnimation,StartTM");var e=o.executeAnimation(this.deletedArray,[{keyframe:"WinJS-scale-down",property:I.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:"none",to:"scale(0.85)"},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]),t=f(this.remainingArray,this.offsetArray,{property:I.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([e,t]).then(function(){S("deleteFromListAnimation,StopTM")})}},{supportedForProcessing:!1}),D=n.Class.define(function(e,t,n,i){this.addedArray=e,this.affectedArray=t,this.offsetArray=n;var r=h(i);this.deletedArray=r,this.deletedOffsetArray=d(r)},{execute:function(){S("_updateListAnimation,StartTM"),m(this.deletedArray,this.deletedOffsetArray);var e=0,t=o.executeAnimation(this.deletedArray,[{keyframe:w(this.deletedOffsetArray,"WinJS-scale-down"),property:I.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:b(this.deletedOffsetArray),to:b(this.deletedOffsetArray,"scale(0.85)")},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]);this.deletedArray.length>0&&(e+=60);var n=f(this.affectedArray,this.offsetArray,{property:I.cssName,delay:e,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});this.affectedArray.length>0?e+=240:e&&(e+=60);var i=o.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:I.cssName,delay:e,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:e,duration:120,timing:"linear",from:0,to:1}]);return a.join([t,n,i]).then(function(){S("_updateListAnimation,StopTM")})}},{supportedForProcessing:!1}),L=n.Class.define(function(e,t,n){this.addedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){S("addToSearchListAnimation,StartTM");var e=o.executeAnimation(this.addedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?240:0,duration:117,timing:"linear",from:0,to:1}),t=f(this.affectedArray,this.offsetArray,{property:I.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([e,t]).then(function(){S("addToSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),R=n.Class.define(function(e,t,n){this.deletedArray=e,this.remainingArray=t,this.offsetArray=n},{execute:function(){S("deleteFromSearchListAnimation,StartTM");var e=o.executeAnimation(this.deletedArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:93,timing:"linear",from:1,to:0}),t=f(this.remainingArray,this.offsetArray,{property:I.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([e,t]).then(function(){S("deleteFromSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),B=n.Class.define(function(e,t,n){this.elementArray=t,this.offsetArray=n},{execute:function(){return S("peekAnimation,StartTM"),f(this.elementArray,this.offsetArray,{property:I.cssName,delay:0,duration:2e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){S("peekAnimation,StopTM")})}},{supportedForProcessing:!1});n.Namespace._moduleDefine(e,"WinJS.UI.Animation",{createExpandAnimation:function(e,t){return C(T,e,t)},createCollapseAnimation:function(e,t){return C(P,e,t)},createRepositionAnimation:function(e){return C(A,null,e)},fadeIn:function(e){return S("fadeIn,StartTM"),o.executeTransition(e,{property:"opacity",delay:0,duration:250,timing:"linear",from:0,to:1}).then(function(){S("fadeIn,StopTM")})},fadeOut:function(e){return S("fadeOut,StartTM"),o.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:0}).then(function(){S("fadeOut,StopTM")})},createAddToListAnimation:function(e,t){return C(M,e,t)},createDeleteFromListAnimation:function(e,t){return C(O,e,t)},_createUpdateListAnimation:function(e,t,n){return C(D,e,n,t)},createAddToSearchListAnimation:function(e,t){return C(L,e,t)},createDeleteFromSearchListAnimation:function(e,t){return C(R,e,t)},showEdgeUI:function(e,t,n){S("showEdgeUI,StartTM");var i=new k(t,"WinJS-showEdgeUI",[{top:"-70px",left:"0px"}]);return o[n&&"transition"===n.mechanism?"executeTransition":"executeAnimation"](e,{keyframe:i.keyframe,property:I.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:i.keyframe||y(i),to:"none"}).then(function(){S("showEdgeUI,StopTM")})},showPanel:function(e,t){S("showPanel,StartTM");var n=new k(t,"WinJS-showPanel",[{top:"0px",left:"364px",rtlflip:!0}]);return o.executeAnimation(e,{keyframe:n.keyframe,property:I.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||y(n),to:"none"}).then(function(){S("showPanel,StopTM")})},hideEdgeUI:function(e,t,n){S("hideEdgeUI,StartTM");var i=new k(t,"WinJS-hideEdgeUI",[{top:"-70px",left:"0px"}]);return o[n&&"transition"===n.mechanism?"executeTransition":"executeAnimation"](e,{keyframe:i.keyframe,property:I.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:i.keyframe||y(i)}).then(function(){S("hideEdgeUI,StopTM")})},hidePanel:function(e,t){S("hidePanel,StartTM");var n=new k(t,"WinJS-hidePanel",[{top:"0px",left:"364px",rtlflip:!0}]);return o.executeAnimation(e,{keyframe:n.keyframe,property:I.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:n.keyframe||y(n)}).then(function(){S("hidePanel,StopTM")})},showPopup:function(e,t){S("showPopup,StartTM");var n=new k(t,"WinJS-showPopup",[{top:"50px",left:"0px"}]);return o.executeAnimation(e,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:83,duration:83,timing:"linear",from:0,to:1},{keyframe:n.keyframe,property:I.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||y(n),to:"none"}]).then(function(){S("showPopup,StopTM")})},hidePopup:function(e){return S("hidePopup,StartTM"),o.executeAnimation(e,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:83,timing:"linear",from:1,to:0}).then(function(){S("hidePopup,StopTM")})},pointerDown:function(e){return S("pointerDown,StartTM"),o.executeTransition(e,{property:I.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.975, 0.975)"}).then(function(){S("pointerDown,StopTM")})},pointerUp:function(e){return S("pointerUp,StartTM"),o.executeTransition(e,{property:I.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){S("pointerUp,StopTM")})},dragSourceStart:function(e,t){S("dragSourceStart,StartTM");var n=o.executeTransition(e,[{property:I.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(1.05)"},{property:"opacity",delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:.65}]),i=o.executeTransition(t,{property:I.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"});return a.join([n,i]).then(function(){S("dragSourceStart,StopTM")})},dragSourceEnd:function(e,t,n){S("dragSourceEnd,StartTM");var i=new k(t,"WinJS-dragSourceEnd"),r=o.executeTransition(e,[{property:I.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:1}]),s=o.executeAnimation(e,{keyframe:i.keyframe,property:I.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:i.keyframe||y(i,"scale(1.05) "),to:"none"}),l=o.executeTransition(n,{property:I.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return a.join([r,s,l]).then(function(){S("dragSourceEnd,StopTM")})},enterContent:function(e,t,n){S("enterContent,StartTM");var i,r=new k(t,"WinJS-enterContent",[{top:"0px",left:"40px",rtlflip:!0}]);if(n&&"transition"===n.mechanism)i=o.executeTransition(e,[{property:I.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:y(r),to:"none"},{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}]);else{var s=o.executeAnimation(e,{keyframe:r.keyframe,property:I.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:r.keyframe||y(r),to:"none"}),l=o.executeTransition(e,{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});i=a.join([s,l])}return i.then(function(){S("enterContent,StopTM")})},exitContent:function(e,t){S("exitContent,StartTM");var n=new k(t,"WinJS-exit",[{top:"0px",left:"0px"}]),i=o.executeAnimation(e,t&&{keyframe:n.keyframe,property:I.cssName,delay:0,duration:117,timing:"linear",from:"none",to:n.keyframe||y(n)}),r=o.executeTransition(e,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return a.join([i,r]).then(function(){S("exitContent,StopTM")})},dragBetweenEnter:function(e,t){S("dragBetweenEnter,StartTM");var n=new k(t,null,[{top:"-40px",left:"0px"},{top:"40px",left:"0px"}]);return o.executeTransition(e,{property:I.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:y(n,"scale(0.95) ")}).then(function(){S("dragBetweenEnter,StopTM")})},dragBetweenLeave:function(e){return S("dragBetweenLeave,StartTM"),o.executeTransition(e,{property:I.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"}).then(function(){S("dragBetweenLeave,StopTM")})},swipeSelect:function(e,t){S("swipeSelect,StartTM");var n=o.executeTransition(e,{property:I.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),i=o.executeAnimation(t,{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return a.join([n,i]).then(function(){S("swipeSelect,StopTM")})},swipeDeselect:function(e,t){S("swipeDeselect,StartTM");var n=o.executeTransition(e,{property:I.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),i=o.executeAnimation(t,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0});return a.join([n,i]).then(function(){S("swipeDeselect,StopTM")})},swipeReveal:function(e,t){S("swipeReveal,StartTM");var n=new k(t,null,[{top:"25px",left:"0px"}]);return o.executeTransition(e,{property:I.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:y(n)}).then(function(){S("swipeReveal,StopTM")})},enterPage:function(e,t){S("enterPage,StartTM");var n=new k(t,"WinJS-enterPage",[{top:"0px",left:"100px",rtlflip:!0}]),i=o.executeAnimation(e,{keyframe:n.keyframe,property:I.cssName,delay:p(0,83,1,333),duration:1e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||y(n),to:"none"}),r=o.executeTransition(e,{property:"opacity",delay:p(0,83,1,333),duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return a.join([i,r]).then(function(){S("enterPage,StopTM")})},exitPage:function(e,t){S("exitPage,StartTM");var n=new k(t,"WinJS-exit",[{top:"0px",left:"0px"}]),i=o.executeAnimation(e,t&&{keyframe:n.keyframe,property:I.cssName,delay:0,duration:117,timing:"linear",from:"none",to:n.keyframe||y(n)}),r=o.executeTransition(e,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return a.join([i,r]).then(function(){S("exitPage,StopTM")})},crossFade:function(e,t){S("crossFade,StartTM");var n=o.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:1}),i=o.executeTransition(t,{property:"opacity",delay:0,duration:167,timing:"linear",to:0});return a.join([n,i]).then(function(){S("crossFade,StopTM")})},createPeekAnimation:function(e){return C(B,null,e)},updateBadge:function(e,t){S("updateBadge,StartTM");var n=new k(t,"WinJS-updateBadge",[{top:"24px",left:"0px"}]);return o.executeAnimation(e,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1},{keyframe:n.keyframe,property:I.cssName,delay:0,duration:1333,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||y(n),to:"none"}]).then(function(){S("updateBadge,StopTM")})},turnstileForwardIn:function(e){S("turnstileForwardIn,StartTM"),e=h(e);var t=x(e);return g(e,t,[{property:I.cssName,delay:p(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(80deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:p(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){S("turnstileForwardIn,StopTM")})},turnstileForwardOut:function(e){S("turnstileForwardOut,StartTM"),e=h(e);var t=x(e);return g(e,t,[{property:I.cssName,delay:p(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(600px) rotateY(0deg)",to:"perspective(600px) rotateY(-50deg)"},{property:"opacity",delay:p(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){S("turnstileForwardOut,StopTM")})},turnstileBackwardIn:function(e){S("turnstileBackwardIn,StartTM"),e=h(e);var t=x(e);return g(e,t,[{property:I.cssName,delay:p(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(-50deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:p(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){S("turnstileBackwardIn,StopTM")})},turnstileBackwardOut:function(e){S("turnstileBackwardOut,StartTM"),e=h(e);var t=x(e);return g(e,t,[{property:I.cssName,delay:p(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(800px) rotateY(0deg)",to:"perspective(800px) rotateY(80deg)"},{property:"opacity",delay:p(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){S("turnstileBackwardOut,StopTM")})},slideDown:function(e){return S("slideDown,StartTM"),g(e,{ltr:"",rtl:""},[{property:I.cssName,delay:0,duration:250,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"translate(0px, 0px)",to:"translate(0px, 200px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){S("slideDown,StopTM")})},slideUp:function(e){return S("slideUp,StartTM"),g(e,{ltr:"",rtl:""},[{property:I.cssName,delay:0,duration:350,timing:"cubic-bezier(0.17,0.79,0.215,1.0025)",from:"translate(0px, 200px)",to:"translate(0px, 0px)"},{property:"opacity",delay:p(0,34,1,1e3),duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){S("slideUp,StopTM")})},slideRightIn:function(e,n,i,r){return S("slideRightIn,StartTM"),_("cubic-bezier(0.17,0.79,0.215,1.0025)",-t.innerWidth,0,!0,e,n,i,r).then(function(){S("slideRightIn,StopTM")})},slideRightOut:function(e,n,i,r){return S("slideRightOut,StartTM"),_("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,t.innerWidth,!1,e,n,i,r).then(function(){S("slideRightOut,StopTM")})},slideLeftIn:function(e,n,i,r){return S("slideLeftIn,StartTM"),_("cubic-bezier(0.17,0.79,0.215,1.0025)",t.innerWidth,0,!0,e,n,i,r).then(function(){S("slideLeftIn,StopTM")})},slideLeftOut:function(e,n,i,r){return S("slideLeftOut,StartTM"),_("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,-t.innerWidth,!1,e,n,i,r).then(function(){S("slideLeftOut,StopTM")})},continuumForwardIn:function(e,t,n){return S("continuumForwardIn,StartTM"),a.join([o.executeTransition(e,[{property:I.cssName,delay:0,duration:350,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(0.5, 0.5)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),o.executeTransition(t,[{property:I.cssName,delay:0,duration:350,timing:"cubic-bezier(0.24,1.15,0.11,1.1575)",from:"translate(0px, 225px)",to:"translate(0px, 0px)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),g(n,{ltr:"0px 50%",rtl:"100% 50%"},[{property:I.cssName,delay:0,duration:350,timing:"cubic-bezier(0,0.62,0.8225,0.9625)",from:"rotateX(80deg) scale(1.5, 1.5)",to:"rotateX(0deg) scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){S("continuumForwardIn,StopTM")})},continuumForwardOut:function(e,t){return S("continuumForwardOut,StartTM"),a.join([o.executeTransition(e,[{property:I.cssName,delay:0,duration:120,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(1.1, 1.1)"},{property:"opacity",delay:0,duration:120,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]),g(t,{ltr:"0px 100%",rtl:"100% 100%"},[{property:I.cssName,delay:0,duration:152,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"rotateX(0deg) scale(1.0, 1.0) translate(0px, 0px)",to:"rotateX(80deg) scale(1.5, 1.5) translate(0px, 150px)"},{property:"opacity",delay:0,duration:152,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}])]).then(function(){S("continuumForwardOut,StopTM")})},continuumBackwardIn:function(e,t){return S("continuumBackwardIn,StartTM"),a.join([o.executeTransition(e,[{property:I.cssName,delay:0,duration:200,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(1.25, 1.25)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:200,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),g(t,{ltr:"0px 50%",rtl:"100% 50%"},[{property:I.cssName,delay:0,duration:250,timing:"cubic-bezier(0.2975, 0.7325, 0.4725, 0.99)",from:"rotateX(80deg) translate(0px, -100px)",to:"rotateX(0deg) translate(0px, 0px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){S("continuumBackwardIn,StopTM")})},continuumBackwardOut:function(e){return S("continuumBackwardOut,StartTM"),o.executeTransition(e,[{property:I.cssName,delay:0,duration:167,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(0.5, 0.5)"},{property:"opacity",delay:0,duration:167,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){S("continuumBackwardOut,StopTM")})},createPageNavigationAnimations:function(t,n,r){function o(){return a.wrap()}var l=s.PageNavigationAnimation;return i.isPhone&&t!==l.enterPage&&n!==l.enterPage?(n||(n=l.turnstile),t===l.slide&&r||n===l.slide&&!r?{exit:r?e.slideDown:o,entrance:r?o:e.slideUp}:{exit:e[n+(r?"Backward":"Forward")+"Out"],entrance:e[n+(r?"Backward":"Forward")+"In"]}):{exit:o,entrance:e.enterPage}}})}),define("WinJS/Binding/_BindingParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../ControlProcessor/_OptionsLexer","../ControlProcessor/_OptionsParser"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e,t){o("WinJS.Binding:bindingParser,StartTM");var n=d.lexer(e),i=new m.BindingInterpreter(n,e,t||{}),r=i.run();return o("WinJS.Binding:bindingParser,StopTM"),r}function c(e){o("WinJS.Binding:bindingParser,StartTM");var t=d.lexer(e),n=new m.BindingParser(t,e),i=n.run();return o("WinJS.Binding:bindingParser,StopTM"),i}var h={get invalidBinding(){return"Invalid binding:'{0}'. Expected to be '<destProp>:<sourceProp>;'. {1}"},get bindingInitializerNotFound(){return"Initializer not found:'{0}'"}},d=t.Namespace.defineWithParent(null,null,{lexer:t.Namespace._lazy(function(){return a._optionsLexer}),tokenType:t.Namespace._lazy(function(){return a._optionsLexer.tokenType})}),p=n.requireSupportedForProcessing,m=t.Namespace.defineWithParent(null,null,{BindingInterpreter:t.Namespace._lazy(function(){return t.Class.derive(l.optionsParser._BaseInterpreter,function(e,t,n){this._initialize(e,t,n)},{_error:function(e){throw new i("WinJS.Binding.ParseError",s._formatString(h.invalidBinding,this._originalSource,e))},_evaluateInitializerName:function(){if(this._current.type===d.tokenType.identifier){var e=this._evaluateIdentifierExpression();return r.log&&!e&&r.log(s._formatString(h.bindingInitializerNotFound,this._originalSource),"winjs binding","error"),p(e)}},_evaluateValue:function(){switch(this._current.type){case d.tokenType.stringLiteral:case d.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;default:return void this._unexpectedToken(d.tokenType.stringLiteral,d.tokenType.numberLiteral)}},_readBindDeclarations:function(){for(var e=[];;)switch(this._current.type){case d.tokenType.identifier:case d.tokenType.thisKeyword:e.push(this._readBindDeclaration());break;case d.tokenType.semicolon:this._read();break;case d.tokenType.eof:return e;default:return void this._unexpectedToken(d.tokenType.identifier,d.tokenType.semicolon,d.tokenType.eof)}},_readBindDeclaration:function(){var e=this._readDestinationPropertyName();this._read(d.tokenType.colon);var t=this._readSourcePropertyName(),n=this._evaluateInitializerName();return{destination:e,source:t,initializer:n}},_readDestinationPropertyName:function(){return this._readIdentifierExpression()},_readSourcePropertyName:function(){return this._readIdentifierExpression()},run:function(){return this._readBindDeclarations()}},{supportedForProcessing:!1})}),BindingParser:t.Namespace._lazy(function(){return t.Class.derive(m.BindingInterpreter,function(e,t){this._initialize(e,t,{})},{_readInitializerName:function(){return this._current.type===d.tokenType.identifier?this._readIdentifierExpression():void 0},_readBindDeclaration:function(){var e=this._readDestinationPropertyName();this._read(d.tokenType.colon);var t=this._readSourcePropertyName(),n=this._readInitializerName();return{destination:e,source:t,initializer:n}}},{supportedForProcessing:!1})})});t.Namespace._moduleDefine(e,"WinJS.Binding",{_bindingParser:u,_bindingParser2:c})}),define("WinJS/Binding/_DomWeakRefTable",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Scheduler"],function(e,t,n,i,r,s){"use strict";function o(){0===p&&(d=0);var e,t,n=Object.keys(f),i=Date.now()-m;for(e=0,t=n.length;t>e;e++){var r=n[e];f[r].time<i&&delete f[r]}l()}function a(){t.Debug&&t.Debug.debuggerEnabled&&_||d||(0===p?(s.schedule(o,s.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),d=1):d=t.setInterval(o,p))}function l(){t.Debug&&t.Debug.debuggerEnabled&&_||(0===p?d||0!==Object.keys(f).length&&(s.schedule(o,s.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),d=1):d&&0===Object.keys(f).length&&(t.clearInterval(d),d=0))}function u(e,t){return f[t]={element:e,time:Date.now()},a(),t}function c(e){if(g){var n=f[e];return n?n.element:t.document.getElementById(e)}var i=t.document.getElementById(e);if(i)delete f[e],l();else{var n=f[e];n&&(n.time=Date.now(),i=n.element)}return i}if(n.Windows.Foundation.Uri&&n.msSetWeakWinRTProperty&&n.msGetWeakWinRTProperty){var h=new n.Windows.Foundation.Uri("about://blank");return void i.Namespace._moduleDefine(e,"WinJS.Utilities",{_createWeakRef:function(e,t){return n.msSetWeakWinRTProperty(h,t,e),t},_getWeakRefElement:function(e){return n.msGetWeakWinRTProperty(h,e)}})}var d,p=500,m=1e3,f={},_=!0,g=!1;i.Namespace._moduleDefine(e,"WinJS.Utilities",{_DOMWeakRefTable_noTimeoutUnderDebugger:{get:function(){return _},set:function(e){_=e}},_DOMWeakRefTable_sweepPeriod:{get:function(){return p},set:function(e){p=e}},_DOMWeakRefTable_timeout:{get:function(){return m},set:function(e){m=e}},_DOMWeakRefTable_tableSize:{get:function(){return Object.keys(f).length}},_DOMWeakRefTable_fastLoadPath:{get:function(){return g},set:function(e){g=e}},_createWeakRef:u,_getWeakRefElement:c})}),define("WinJS/Binding/_Data",["exports","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Promise","../Scheduler","./_DomWeakRefTable"],function(e,t,n,i,r,s,o,a,l,u){"use strict";var c={get exceptionFromBindingInitializer(){return"Exception thrown from binding initializer: {0}"},get propertyIsUndefined(){return"{0} is undefined"},get unsupportedDataTypeForBinding(){return"Unsupported data type"}},h={_listeners:null,_pendingNotifications:null,_notifyId:0,_getObservable:function(){return this},_cancel:function(e){var t=this._pendingNotifications,n=!1;if(t)for(var i=Object.keys(t),r=i.length-1;r>=0;r--){var s=t[i[r]];s.target===e&&(s.promise&&(s.promise.cancel(),s.promise=null),delete t[i[r]],n=!0)}return n},notify:function(e,t,n){var i=this._listeners&&this._listeners[e];if(i){var r=this;r._cancel(e),r._pendingNotifications=r._pendingNotifications||{};var u=r._notifyId++,h=r._pendingNotifications[u]={target:e},d=function(){delete r._pendingNotifications[u]};return h.promise=l.schedulePromiseNormal(null,"WinJS.Binding.observableMixin.notify").then(function(){for(var e=0,r=i.length;r>e&&h.promise;e++)try{i[e](t,n)}catch(a){s.log&&s.log(o._formatString(c.exceptionFromBindingInitializer,a.toString()),"winjs binding","error")}return d(),t}),h.promise}return a.as()},bind:function(e,t){this._listeners=this._listeners||{};for(var n=this._listeners[e]=this._listeners[e]||[],i=!1,r=0,s=n.length;s>r;r++)if(n[r]===t){i=!0;break}return i||(n.push(t),t(C(this[e]))),this},unbind:function(e,t){if(this._listeners=this._listeners||{},e&&t){var n=this._listeners[e];if(n){for(var i,r=0,s=n.length;s>r;r++)n[r]!==t&&(i=i||[]).push(n[r]);this._listeners[e]=i}}else if(e)this._cancel(e),delete this._listeners[e];else{var o=this;if(o._pendingNotifications){var a=o._pendingNotifications;o._pendingNotifications={},Object.keys(a).forEach(function(e){var t=a[e];t.promise&&t.promise.cancel()})}this._listeners={}}return this}},d={_backingData:null,_initObservable:function(e){this._backingData=e||{}},getProperty:function(e){var t=this._backingData[e];return s.log&&void 0===t&&s.log(o._formatString(c.propertyIsUndefined,e),"winjs binding","warn"),w(t)},setProperty:function(e,t){return this.updateProperty(e,t),this},addProperty:function(e,t){return this[e]||Object.defineProperty(this,e,{get:function(){return this.getProperty(e)},set:function(t){this.setProperty(e,t)},enumerable:!0,configurable:!0}),this.setProperty(e,t)},updateProperty:function(e,t){var n=this._backingData[e],i=C(t);return n!==i&&(this._backingData[e]=i,this._backingData[e]===i)?this.notify(e,i,n):a.as()},removeProperty:function(e){var t,n=this._backingData[e];try{delete this._backingData[e]}catch(i){}try{delete this[e]}catch(i){}return this.notify(e,t,n),this}};Object.keys(h).forEach(function(e){d[e]=h[e]});var p=function(e,t){return g(e,t)},m=0,f=function(){return"bindHandler"+m++},_=function(e,n){if(!t.msGetWeakWinRTProperty)return e;var i=f();return u._getWeakRefElement(n)[i]=e,function(e,t){var r=u._getWeakRefElement(n);r&&r[i](e,t)}},g=function(e,t,n){function i(){a&&a.forEach(function(e){e.source.unbind(e.prop,e.listener)}),a=null}function r(e){o[e]&&(o[e].complexBind.cancel(),delete o[e])}if(e=w(e),!e)return{cancel:function(){},empty:!0};var s;n||(n=f(),s={},u._createWeakRef(s,n));var o={},a=null;return Object.keys(t).forEach(function(i){var l=t[i];if(l instanceof Function)l=_(l,n),l.bindState=s,a=a||[],a.push({source:e,prop:i,listener:l}),e.bind(i,l);else{var u=function(e){r(i);var t=g(w(e),l,n);if(t.empty){var s=function(e){Object.keys(e).forEach(function(t){var n=e[t];n instanceof Function?n(void 0,void 0):s(n)})};s(l)}o[i]={source:e,complexBind:t}};u=_(u,n),u.bindState=s,a=a||[],a.push({source:e,prop:i,listener:u}),e.bind(i,u)}}),{cancel:function(){i(),Object.keys(o).forEach(function(e){r(e)})}}},v=n.Class.mix(function(e){this._initObservable(e),Object.defineProperties(this,y(e))},d),y=function(e){function t(e){n[e]={get:function(){return this.getProperty(e)},set:function(t){this.setProperty(e,t)},enumerable:!0,configurable:!0}}for(var n={};e&&e!==Object.prototype;)Object.keys(e).forEach(t),e=Object.getPrototypeOf(e);return n},b=function(e){if(!(!e||"object"!=typeof e||e instanceof Date||Array.isArray(e)))return n.Class.mix(function(t){this._initObservable(t||Object.create(e))},d,y(e));if(i.validation)throw new r("WinJS.Binding.UnsupportedDataType",o._formatString(c.unsupportedDataTypeForBinding))},w=function(e){if(!e)return e;var t=typeof e;if("object"!==t||e instanceof Date||Array.isArray(e))return e;if(e._getObservable)return e._getObservable();var n=new v(e);return n.backingData=e,Object.defineProperty(e,"_getObservable",{value:function(){return n},enumerable:!1,writable:!1}),n},C=function(e){return e&&e.backingData?e.backingData:e};n.Namespace._moduleDefine(e,"WinJS.Binding",{mixin:{value:d,enumerable:!1,writable:!0,configurable:!0},dynamicObservableMixin:{value:d,enumerable:!0,writable:!0,configurable:!0},observableMixin:{value:h,enumerable:!0,writable:!0,configurable:!0},expandProperties:y,define:b,as:w,unwrap:C,bind:p})}),define("WinJS/Binding/_Declarative",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Utilities/_ElementUtilities","./_BindingParser","./_Data","./_DomWeakRefTable"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";function m(e,t){var n=e._autoDispose;n&&n.push(t)}function f(e){e._autoDispose=(e._autoDispose||[]).filter(function(e){return e()})}function _(e,t){return e?e.winBindingToken===t?e:void(o.log&&o.log(a._formatString(z.duplicateBindingDetected,e.id),"winjs binding","error")):e}function g(e){if(e.winBindingToken)return e.winBindingToken;var t="_win_bind"+N++;return Object.defineProperty(e,"winBindingToken",{configurable:!1,writable:!1,enumerable:!1,value:t}),t}function v(e,t,n,i,r,s,o){var a=e.initializer;if(a&&(a=a.winControl||a["data-win-control"]||a),a instanceof Function){var l=a(i,e.source,r,e.destination);return o&&(l&&l.cancel?o.bindings.push(function(){l.cancel()}):o.nocache=!0),l}a&&a.render&&(s.count++,o&&(o.nocache=!0),W(a.render).call(a,E(i,e.source),r).then(function(){s.checkComplete()}))}function y(e,t,n,i,r,s){var l,u=!0,c=!1;f(i);var h=function(){if(!c){var n=_(p._getWeakRefElement(e),t);return n||(o.log&&o.log(a._formatString(z.elementNotFound,e),"winjs binding","info"),l&&l.cancel()),n}},d=function(e){var t=h();t&&k(t,r.destination,e),u&&(n.checkComplete(),u=!1)};if(m(i,h),l=D(i,r.source,d)){var g=l.cancel;l.cancel=function(){return c=!0,g.call(l)},s&&s.bindings.push(function(){l.cancel()})}return l}function b(e,n,i,r,s,o,a){var l;return r!==t&&(r=d.as(r)),r._getObservable&&(l=r._getObservable()),l?(o.count++,y(n,i,o,l,e,a)):void k(s,e.destination,E(r,e.source))}function w(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],l=i.destination;if(1===l.length&&"id"===l[0]){if(r.validation)throw new s("WinJS.Binding.IdBindingNotSupported",a._formatString(z.idBindingNotSupported,t));o.log&&o.log(a._formatString(z.idBindingNotSupported,t),"winjs binding","error"),e.splice(n,1)}}return e}function C(e,n){if(n){var i,r=n.expressions[e];return r||(i=w(h._bindingParser(e,t),e),n.expressions[e]=i),i||(i=r),i}return w(h._bindingParser(e,t),e)}function x(e,n,i,r,s,o){l("WinJS.Binding:processAll,StartTM");var a,u={count:0,checkComplete:function(){this.count--,0===this.count&&(l("WinJS.Binding:processAll,StopTM"),o())}},h=e||t.document.body,d="[data-win-bind],[data-win-control]",m=h.querySelectorAll(d);!i&&h.getAttribute("data-win-bind")&&(a=h),u.count++;var f=n||t;p._DOMWeakRefTable_fastLoadPath=!0;try{var _=c.data(h);_.winBindings=_.winBindings||[];for(var y=a?-1:0,w=m.length;w>y;y++){var x=0>y?a:m[y];if(x.winControl&&x.winControl.constructor&&x.winControl.constructor.isDeclarativeControlContainer){y+=x.querySelectorAll(d).length;var I=x.winControl.constructor.isDeclarativeControlContainer;"function"==typeof I&&(I=W(I))(x.winControl,function(e){return S(e,n,!1,r,s)})}if(x.hasAttribute("data-win-bind")){var E=x.getAttribute("data-win-bind"),k=C(E,r);if(!k.implemented){for(var T=0,P=k.length;P>T;T++){var A=k[T];A.initializer=A.initializer||s,A.implementation=A.initializer?v:b}k.implemented=!0}u.count++;var M=g(x),O=F?M:x.id;O||(x.id=O=M),p._createWeakRef(x,O);var D=c.data(x);D.winBindings=null;var L;r&&r.elements&&(L=r.elements[O],L||(r.elements[O]=L={bindings:[]}));for(var R=0,B=k.length;B>R;R++){var N=k[R],z=N.implementation(N,O,M,f,x,u,L);z&&(D.winBindings=D.winBindings||[],D.winBindings.push(z),_.winBindings.push(z))
}u.count--}}}finally{p._DOMWeakRefTable_fastLoadPath=!1}u.checkComplete()}function S(e,t,n,i,r){return new u(function(s,o,a){x(e,t,n,i,r,s,o,a)}).then(null,function(e){return o.log&&o.log(a._formatString(z.errorInitializingBindings,e&&e.message),"winjs binding","error"),u.wrapError(e)})}function I(e){var n=function(n,i,r,s,l){var u=g(r),c=F?u:r.id;c||(r.id=c=u),p._createWeakRef(r,c);var h;if(n!==t&&(n=d.as(n)),n._getObservable&&(h=n._getObservable()),h){var m=0,f=D(d.as(n),i,function(t){if(1!==++m||t!==l){var n=_(p._getWeakRefElement(c),u);n?k(n,s,e(W(t))):f&&(o.log&&o.log(a._formatString(z.elementNotFound,c),"winjs binding","info"),f.cancel())}});return f}var v=E(n,i);v!==l&&k(r,s,e(v))};return H(n)}function E(e,n){if(e!==t&&(e=W(e)),n)for(var i=0,r=n.length;r>i&&null!==e&&void 0!==e;i++)e=W(e[n[i]]);return e}function k(e,n,i){W(i),e=W(e);for(var r=0,s=n.length-1;s>r;r++){if(e=W(e[n[r]]),!e)return void(o.log&&o.log(a._formatString(z.propertyDoesNotExist,n[r],n.join(".")),"winjs binding","error"));if(e instanceof t.Node)return void(o.log&&o.log(a._formatString(z.nestedDOMElementBindingNotSupported,n[r],n.join(".")),"winjs binding","error"))}if(0===n.length)return void(o.log&&o.log(z.cannotBindToThis,"winjs binding","error"));var l=n[n.length-1];o.log&&void 0===e[l]&&o.log(a._formatString(z.creatingNewProperty,l,n.join(".")),"winjs binding","warn"),e[l]=i}function T(e,t,n){return e=W(e),t&&1===t.length&&t[0]?void e.setAttribute(t[0],n):void(o.log&&o.log(z.attributeBindingSingleProperty,"winjs binding","error"))}function P(e,n,i,r,s){var l=g(i),u=F?l:i.id;u||(i.id=u=l),p._createWeakRef(i,u);var c;if(e!==t&&(e=d.as(e)),e._getObservable&&(c=e._getObservable()),c){var h=0,m=D(c,n,function(e){if(1!==++h||e!==s){var t=_(p._getWeakRefElement(u),l);t?T(t,r,W(e)):m&&(o.log&&o.log(a._formatString(z.elementNotFound,u),"winjs binding","info"),m.cancel())}});return m}var f=E(e,n);f!==s&&T(i,r,f)}function A(e,t,n,i){return T(n,i,E(e,t))}function M(e,t,n){n=W(n);var i=E(e,t);Array.isArray(i)?i.forEach(function(e){c.addClass(n,e)}):i&&c.addClass(n,i)}function O(e,t,n,i,r){return V(e,t,n,i,r)}function D(e,t,n){if(t.length>1){for(var i={},r=i,s=0,o=t.length-1;o>s;s++)r=r[t[s]]={};return r[t[t.length-1]]=n,d.bind(e,i,!0)}return 1===t.length?(e.bind(t[0],n,!0),{cancel:function(){e.unbind(t[0],n),this.cancel=L}}):void n(e)}function L(){}function R(e,t,n,i){return k(n,i,E(e,t)),{cancel:L}}function B(e){return H(e)}var N=1e3*Math.random()>>0,F=n.msSetWeakWinRTProperty&&n.msGetWeakWinRTProperty,z={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get creatingNewProperty(){return"Creating new property {0}. Full path:{1}"},get duplicateBindingDetected(){return"Binding against element with id {0} failed because a duplicate id was detected."},get elementNotFound(){return"Element not found:{0}"},get errorInitializingBindings(){return"Error initializing bindings: {0}"},get propertyDoesNotExist(){return"{0} doesn't exist. Full path:{1}"},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"},get nestedDOMElementBindingNotSupported(){return"Binding through a property {0} of type HTMLElement is not supported, Full path:{1}."}},H=r.markSupportedForProcessing,W=r.requireSupportedForProcessing,V=I(function(e){return e});i.Namespace._moduleDefine(e,"WinJS.Binding",{processAll:S,oneTime:B(R),defaultBind:B(O),converter:I,initializer:B,getValue:E,setAttribute:B(P),setAttributeOneTime:B(A),addClassOneTime:B(M)})}),define("WinJS/Binding",["./Binding/_BindingParser","./Binding/_Data","./Binding/_Declarative","./Binding/_DomWeakRefTable"],function(){}),define("WinJS/BindingTemplate/_DataTemplateCompiler",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Binding/_BindingParser","../Binding/_Declarative","../ControlProcessor","../ControlProcessor/_OptionsParser","../Fragments","../Promise","../_Signal","../Utilities/_Dispose","../Utilities/_SafeHtml","../Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g){"use strict";if(t.document){var v={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"}};n.Namespace._moduleDefine(e,"WinJS.Binding",{_TemplateCompiler:n.Namespace._lazy(function(){function e(e,t,n){var i=g.data(e).bindTokens;i&&i.forEach(function(e){e&&e.cancel&&e.cancel()}),t&&t.cancel(),n&&n.cancel()}function y(e,t){return function(n){return u.processAll(n,e,!1,null,t)}}function b(e){return e=Z(e),e instanceof t.Node?null:e}function w(e,t){var n=-1!==e.indexOf("\n"),i=arguments,s=e.replace(pt,function(s,o,a,l,u,c,h){if(u||c)throw new r("Format:MalformedInputString","Did you forget to escape a: "+(u||c)+" at: "+h);if(o)return"{";if(a)return"}";var d,p=+l;if(d=p===+p?i[p+1]:t[l],void 0===d)throw new r("Format:MissingPart","Missing part '"+l+"'");if(n){for(var m=h;m>0&&" "===e[--m];);m>=0&&"\n"===e[m]&&(d=C(h-m-1,d))}return d});return s}function C(e,t){for(var n="",i=0;e>i;i++)n+=" ";return t.split("\n").map(function(e,t){return t?n+e:e}).join("\n")}function x(e){return e.trim()}function S(e){return e.join(";\n")}function I(e){return e.join(", ")||"empty"}function E(e){return e.map(function(e){return e.match(ut)?"."+e:+e===e?w("[{0}]",e):w("[{0}]",T(e))}).join("")}function k(e,t,n,i){var t=t.map(function(e){return e.match(ut)?"."+e:(+e===e&&(e=+e),O(T(e)))}).map(function(e){return w("{filter}({temp} = {temp}{part})",{filter:i,temp:n,part:e})});return t.unshift(M(A(n,e))),t.push(n),M(t.join(" && "))}function T(e){return JSON.stringify(e)}function P(e){return e?"new Array("+ +e+")":"[]"}function A(e,t){return""+e+" = "+t}function M(e){return"("+e+")"}function O(e){return"["+e+"]"}function D(e){return e.match(ut)?e:+e===e?+e:T(e)}function L(e){return e=""+e,e.replace(ht,function(e){return dt[e]||" "})}function R(e,t,n){return new String(n?""+e+t+"_"+n:""+e+t)}function B(e){return e.replace(/\\n/g,"\\n\\\n")}function N(e){return Object.keys(e)}function F(e){return Object.keys(e).map(function(t){return e[t]})}function z(e,t){return H([e,t])}function H(e){for(var t={},n=0,i=e.length;i>n;n++)for(var r=e[n],s=Object.keys(r),o=0,a=s.length;a>o;o++){var l=s[o];t[l]=r[l]}return t}function W(e){return e.reduce(function(e,t){return e?Z(e[t]):null},t)}function V(e,t,n,i){var r=e.children;if(r){var s=Object.keys(r);t&&n&&n(e,t,s.length);for(var o=0,a=s.length;a>o;o++){var l=s[o],u=r[l];V(u,l,n,i)}t&&i&&i(e,t,Object.keys(r).length)}else t&&n&&n(e,t,0),t&&i&&i(e,t,0)}function j(e){return e.replace(/^\s*$/gm,"").replace(/^(.*[^\s])( *)$/gm,function(e,t){return t})}var U=p._cancelBlocker,q=u.defaultBind,K=u.oneTime,J=u.setAttribute,G=u.setAttributeOneTime,$=u.addClassOneTime,Y=p.as,Z=i.requireSupportedForProcessing,X=_.insertAdjacentHTMLUnsafe,Q=g.data,et=f.markDisposable,tt=c.processAll,nt=u.processAll,it=h._optionsParser,rt=h._CallExpression,st=h._IdentifierExpression,ot=l._bindingParser2,at=c.scopedSelect,lt=a,ut=/^[A-Za-z]\w*$/,ct=/[^A-Za-z\w$]/g,ht=/[&<>'"]/g,dt={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},pt=/({{)|(}})|{(\w+)}|({)|(})/g,mt=/^\s*;\s*$/,ft=/[A-Z]/g,_t=n.Class.define(function(e,t,n,i,r){var s=this;this.compiler=e,this.kind=n,this.base=new String(t),this.tree={children:{},parent:this.base,reference:function(){return s.base}},this.accessExpression=i,this.filter=r||""},{createPathExpression:function(e,t){if(e.length){var n=this,i=e.reduce(function(e,t){return e.children=e.children||{},e.children[t]=e.children[t]||{parent:e},e.children[t]},this.tree);return i.name=i.name||n.compiler.defineInstance(n.kind,t||"",function(){return n.accessExpression(i.parent.name?i.parent.name:i.parent.reference(),e.slice(-1)[0],i.parent.parent===n.base,n.filter,!0)}),i.name}return this.base},lower:function(){var e=this,t=[],n=function(t,n,i){return e.accessExpression(t.parent.name?t.parent.name:t.parent.reference(),n,t.parent.parent===e.base,e.filter,i)};V(this.tree,"",function(i,r,s){t.push(r),s>1?(i.name=i.name||e.compiler.defineInstance(e.kind,t.join("_"),n.bind(null,i,r,!0)),i.reference=function(){return i.name}):1===s&&(i.reference=n.bind(null,i,r))},function(){t.pop()})},deadNodeElimination:function(){V(this.tree,"",null,function(e,t,n){(!e.name||e.name.dead)&&0===n&&e.parent&&e.parent.children&&delete e.parent.children[t]})},definitions:function(){var e=[];return V(this.tree,"",function(t){t.name&&e.push(t)}),e.map(function(e){return e.name.definition()})}}),gt={capture:"capture",temporary:"temporary",variable:"variable",data:"data",global:"global"},vt={capture:"c",temporary:"t",variable:"iv",data:"d",global:"g"},yt={"import":"import",variable:"variable"},bt={"import":"i",variable:"sv"},wt={tree:"tree",text:"text",initializer:"initializer",template:"template",error:"error"},Ct={attribute:"attribute",booleanAttribute:"booleanAttribute",inlineStyle:"inlineStyle",textContent:"textContent"},xt="imports",St={initial:0,analyze:1,optimze:2,lower:3,compile:4,link:5,done:6},It=n.Class.define(function(e,n){if(this._stage=St.initial,this._staticVariables={},this._staticVariablesCount=0,this._instanceVariables={},this._instanceVariablesCount={},this._debugBreak=n.debugBreakOnRender,this._defaultInitializer=Z(n.defaultInitializer||q),this._optimizeTextBindings=!n.disableTextBindingOptimization,this._templateElement=e,this._templateContent=t.document.createElement(e.tagName),this._extractChild=n.extractChild||!1,this._controls=null,this._bindings=null,this._bindTokens=null,this._textBindingPrefix=null,this._textBindingId=0,this._suffix=[],this._htmlProcessors=[],this._profilerMarkIdentifier=n.profilerMarkIdentifier,this._captureCSE=new _t(this,"container",gt.capture,this.generateElementCaptureAccess.bind(this)),this._dataCSE=new _t(this,"data",gt.data,this.generateNormalAccess.bind(this),this.importSafe("dataSecurityCheck",Z)),this._globalCSE=new _t(this,this.importSafe("global",t),gt.global,this.generateNormalAccess.bind(this),this.importSafe("globalSecurityCheck",Z)),d.renderCopy(this._templateElement,this._templateContent),this._extractChild)for(;this._templateContent.childElementCount>1;)this._templateContent.removeChild(this._templateContent.lastElementChild)},{addClassOneTimeTextBinding:function(e){var t=this,n=this.createTextBindingHole(e.elementCapture.element.tagName,"class",++this._textBindingId);e.textBindingId=n,e.kind=wt.text,e.elementCapture.element.classList.add(n),e.elementCapture.refCount--,e.definition=function(){return t.formatCode("{htmlEscape}({value})",{htmlEscape:t._staticVariables.htmlEscape,value:e.value()})}},addClassOneTimeTreeBinding:function(e){var t=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.kind=wt.tree,e.definition=function(){return t.formatCode("{element}.classList.add({value})",{element:e.elementCapture,value:e.value()})}},analyze:function(){if(this._stage>St.analyze)throw"Illegal: once we have moved past analyze we cannot revist it";this._stage=St.analyze,this._controls=this.gatherControls(),this._bindings=this.gatherBindings(),this._children=this.gatherChildren(),this.cleanControlAndBindingAttributes(),this.async&&this.createAsyncParts(),this.nullableIdentifierAccessTemporary=this.defineInstance(gt.temporary);var e=this._templateContent.innerHTML;this._html=function(){return B(T(e))},this._html.text=e},bindingExpression:function(e){return this._dataCSE.createPathExpression(e.source,e.source.join("_"))},capture:function(e){var t=e._capture;if(t)return t.refCount++,t;for(var n=[e],i=e.parentNode,r=e.tagName;i!==this._templateContent;)r=i.tagName+"_"+r,n.unshift(i),i=i.parentNode;for(var s=0,o=n.length;o>s;s++){var a=n[s];n[s]=Array.prototype.indexOf.call(i.children,a),i=a}return t=this._captureCSE.createPathExpression(n,r.toLowerCase()),t.element=e,t.element._capture=t,t.refCount=1,t},cleanControlAndBindingAttributes:function(){for(var e="[data-win-bind],[data-win-control]",t=this._templateContent.querySelectorAll(e),n=0,i=t.length;i>n;n++){var r=t[n];r.isDeclarativeControlContainer&&(n+=r.querySelectorAll("[data-win-bind],[data-win-control]").length),r.removeAttribute("data-win-bind"),r.removeAttribute("data-win-control"),r.removeAttribute("data-win-options")}},compile:function(e,t,n){if(this._stage>St.compile)throw"Illegal: once we have moved past compile we cannot revist it";this._stage=St.compile;var i=this;this._returnedElement=this._extractChild?"container.firstElementChild":"container";var r,s,o=this._controls.map(function(e){var t;t=e.async?"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options}, controlDone)":"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options})";var n=i.formatCode(t,{target:e.elementCapture,SafeConstructor:e.SafeConstructor,options:i.generateOptionsLiteral(e.optionsParsed,e.elementCapture)});if(e.isDeclarativeControlContainer&&"function"==typeof e.isDeclarativeControlContainer.import){var r=[n];return r.push(i.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedControlProcessing})",{target:e.elementCapture,isDeclarativeControlContainer:e.isDeclarativeControlContainer,delayedControlProcessing:i._staticVariables.ui_processAll})),r.push(i.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedBindingProcessing}(data, {templateDefaultInitializer}))",{target:e.elementCapture,isDeclarativeControlContainer:e.isDeclarativeControlContainer,delayedBindingProcessing:i._staticVariables.delayedBindingProcessing,templateDefaultInitializer:i._staticVariables.templateDefaultInitializer||T(null)})),r.join(";\n")}return n}),a=this._bindings.map(function(e){switch(e.kind){case wt.template:return i.formatCode("({nestedTemplates}[{nestedTemplate}] = {template}.render({path}, {dest}))",{nestedTemplates:i._nestedTemplates,nestedTemplate:T(e.nestedTemplate),template:e.template,path:e.pathExpression,dest:e.elementCapture});case wt.initializer:var t;return t=e.initialValue?"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}, {initialValue}))":"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}))",i.formatCode(t,{bindTokens:i._bindTokens,bindToken:T(e.bindToken),initializer:e.initializer,sourceProperties:T(e.source),destProperties:T(e.destination),dest:e.elementCapture,initialValue:e.initialValue});case wt.tree:return e.definition();case wt.text:break;case wt.error:break;default:throw"NYI"}});n?(r=a.filter(function(e,t){return!i._bindings[t].delayable}),s=a.filter(function(e,t){return i._bindings[t].delayable})):(r=a,s=[]);var l=F(this._instanceVariables),u=l.filter(function(e){return e.kind===gt.variable}).map(function(e){return e.definition()}),c=this._captureCSE.definitions(),h=this._globalCSE.definitions(),d=this._dataCSE.definitions(),p=this._children.map(function(e){return i.formatCodeN("{0}.msParentSelectorScope = true",e)}),m=this._suffix.map(function(e){return e()}),f="";n&&s.length&&(f=i.formatCode(Lt,{delayed_binding_processing:S(s)}));var _=i.formatCode(e,H([this._staticVariables,t||{},{profilerMarkIdentifierStart:T("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StartTM"),profilerMarkIdentifierStop:T("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StopTM"),html:this._html(),tagName:T(this._templateElement.tagName),instance_variable_declarations:I(l),global_definitions:S(h),data_definitions:S(d),instance_variable_definitions:S(u),capture_definitions:S(c),set_msParentSelectorScope:S(p),debug_break:this.generateDebugBreak(),control_processing:S(o),control_counter:this._controlCounter,binding_processing:S(r),renderComplete:f,suffix_statements:S(m),nestedTemplates:this._nestedTemplates,returnedElement:this._returnedElement}]));return this.prettify(_)},createAsyncParts:function(){this._nestedTemplates=this._nestedTemplates||this.defineInstance(gt.variable,"nestedTemplates",function(){return P(0)}),this._controlCounter=this._controlCounter||this.defineInstance(gt.variable,"controlCounter",function(){return T(1)})},createTextBindingHole:function(e,t,n){if(!this._textBindingPrefix){for(var i="";-1!==this._html.text.indexOf("textbinding"+i);)i=i||0,i++;this._textBindingPrefix="textbinding"+i,this._textBindingRegex=new RegExp("(#?"+this._textBindingPrefix+"_\\d+)")}var r=this._textBindingPrefix+"_"+n;return"IMG"===e&&"src"===t&&(r="#"+r),r},deadCodeElimination:function(){var e=this;Object.keys(this._instanceVariables).forEach(function(t){var n=e._instanceVariables[t];n.kind===gt.capture&&(e._templateContent.contains(n.element)||(n.dead=!0),0===n.refCount&&(n.dead=!0),n.dead&&(n.definition=function(){},n.name=null,delete e._instanceVariables[t]))}),this._controls=this._controls.filter(function(e){return!e.elementCapture.dead}),this._bindings=this._bindings.filter(function(e){return!e.elementCapture.dead}),this._captureCSE.deadNodeElimination()},defineInstance:function(e,t,n){if(this._stage>=St.compile)throw"Illegal: define instance variable after compilation stage has started";var i=this._instanceVariablesCount[e]||0,r=t?t.replace(ct,"_"):"",s=R(vt[e],i,r);return s.definition=function(){return A(s,n())},s.kind=e,this._instanceVariables[s]=s,this._instanceVariablesCount[e]=i+1,s},defineStatic:function(e,t,n){if(this._stage>=St.link)throw"Illegal: define static variable after link stage has started";if(t){var i=this._staticVariables[t];if(i)return i}var r=t?t.replace(ct,"_"):"",s=R(bt[e],this._staticVariablesCount,r);return s.definition=function(){return A(s,n())},s.kind=e,this._staticVariables[t||s]=s,this._staticVariablesCount++,s},done:function(){if(this._stage>St.done)throw"Illegal: once we have moved past done we cannot revist it";this._stage=St.done},emitScopedSelect:function(e,t){return this.formatCode("{scopedSelect}({selector}, {element})",{scopedSelect:this._staticVariables.scopedSelect,selector:T(e),element:t})},emitOptionsNode:function(e,t,n){var i=this;if(e)switch(typeof e){case"object":if(Array.isArray(e)){t.push("[");for(var r=0,s=e.length;s>r;r++)this.emitOptionsNode(e[r],t,n),t.push(",");t.push("]")}else if(e instanceof rt)t.push("select"===e.target?this.emitScopedSelect(e.arg0Value,n):T(null));else if(e instanceof st&&e.parts[0]instanceof rt){var o=e.parts[0];t.push(k("select"===o.target?this.emitScopedSelect(o.arg0Value,n):T(null),e.parts.slice(1),this.nullableIdentifierAccessTemporary,this.importSafe("requireSupportedForProcessing",Z)))}else e instanceof st?t.push(e.pathExpression):(t.push("{"),Object.keys(e).forEach(function(r){t.push(D(r)),t.push(":"),i.emitOptionsNode(e[r],t,n),t.push(",")}),t.push("}"));break;default:t.push(T(e))}else t.push(T(null))},findGlobalIdentifierExpressions:function(e,t){t=t||[];var n=this;return Object.keys(e).forEach(function(i){var r=e[i];"object"==typeof r&&(r instanceof st?r.parts[0]instanceof rt||t.push(r):n.findGlobalIdentifierExpressions(r,t))}),t},formatCodeN:function(){if(this._stage<St.compile)throw"Illegal: format code at before compilation stage has started";return w.apply(null,arguments)},formatCode:function(e,t){if(this._stage<St.compile)throw"Illegal: format code at before compilation stage has started";return w(e,t)},gatherBindings:function(){for(var e=-1,n=this,i=-1,r=[],s="[data-win-bind],[data-win-control]",o=this._templateContent.querySelectorAll(s),a=0,l=o.length;l>a;a++){var u=o[a];if(u.isDeclarativeControlContainer&&(a+=u.querySelectorAll(s).length),u.hasAttribute("data-win-bind")){var c=u.getAttribute("data-win-bind"),h=ot(c,t);h.forEach(function(t){if(t.initializer){var r=t.initializer.join("."),s=W(t.initializer);s.render?(Z(s.render),t.template=n.importSafe(r,s),t.pathExpression=n.bindingExpression(t),t.nestedTemplate=++i,t.kind=wt.template):s.winControl&&s.winControl.render?(Z(s.winControl.render),t.template=n.importSafe(r,s.winControl),t.pathExpression=n.bindingExpression(t),t.nestedTemplate=++i,t.kind=wt.template):(t.initializer=n.import(r,s),t.bindToken=++e,t.kind=wt.initializer)}else t.initializer=n.importSafe("templateDefaultInitializer",n._defaultInitializer),t.bindToken=++e,t.kind=wt.initializer;t.elementCapture=n.capture(u),t.bindingText=c}),r.push.apply(r,h)}}var d=i+1;d>0&&(this.async=!0,this._nestedTemplates=this.defineInstance(gt.variable,"nestedTemplates",function(){return P(d)}));var p=e+1;return p>0&&(this._bindTokens=this.defineInstance(gt.variable,"bindTokens",function(){return P(p)}),this._suffix.push(function(){return n.formatCode("{utilities_data}(returnedElement).bindTokens = {bindTokens}",{utilities_data:n._staticVariables.utilities_data,bindTokens:n._bindTokens})})),r},gatherChildren:function(){var e=this;return Array.prototype.map.call(this._templateContent.children,function(t){return e.capture(t)})},gatherControls:function(){for(var e=this,n=0,r=[],s="[data-win-control]",o=this._templateContent.querySelectorAll(s),a=0,l=o.length;l>a;a++){var u=o[a],c=u.getAttribute("data-win-control"),h=i._getMemberFiltered(c.trim(),t,Z);if(h){var d=u.getAttribute("data-win-options")||T({}),p=h.length>2;p&&(n++,this.async=!0);var m=h.isDeclarativeControlContainer;m&&("function"==typeof m&&(m=this.import(c+"_isDeclarativeControlContainer",m)),u.isDeclarativeControlContainer=m,a+=u.querySelectorAll(s).length);var f={elementCapture:this.capture(u),name:c,SafeConstructor:this.importSafe(c,h),async:p,optionsText:T(d),optionsParsed:it(d),isDeclarativeControlContainer:m};r.push(f);var _=this.findGlobalIdentifierExpressions(f.optionsParsed);_.forEach(function(t){t.pathExpression=e.globalExpression(t.parts)})}}return n>0&&(this._controlCounter=this.defineInstance(gt.variable,"controlCounter",function(){return T(n+1)})),r},generateElementCaptureAccess:function(e,t,n){if(n){var i=""+t=="0"?"":" + "+t;return this.formatCodeN("{0}.children[startIndex{1}]",e,i)}return this.formatCodeN("{0}.children[{1}]",e,t)},generateNormalAccess:function(e,t,n,i,r){if(e.indexOf(this.nullableIdentifierAccessTemporary)>=0){var s;return s=r?"{left} && {filter}({temp}{right})":"{left} && ({temp} = {filter}({temp}{right}))",this.formatCode(s,{temp:this.nullableIdentifierAccessTemporary,left:e,right:E([t]),filter:i})}var s;return s=r?"({temp} = {left}) && {filter}({temp}{right})":"({temp} = {left}) && ({temp} = {filter}({temp}{right}))",this.formatCode(s,{temp:this.nullableIdentifierAccessTemporary,left:e,right:E([t]),filter:i})},generateOptionsLiteral:function(e,t){var n=[];return this.emitOptionsNode(e,n,t),n.join(" ")},generateDebugBreak:function(){if(this._debugBreak){var e=this.defineStatic(yt.variable,"debugCounter",function(){return T(0)});return this.formatCodeN("if (++{0} === 1) {{ debugger; }}",e)}return""},globalExpression:function(e){return this._globalCSE.createPathExpression(e,e.join("_"))},"import":function(e,t){return this.importSafe(e,Z(t))},importSafe:function(e,t){var n=this,i=this.defineStatic(yt.import,e,function(){return n.formatCodeN("({0}{1})",xt,E([e]))});if(i.import&&i.import!==t)throw"Duplicate import: '"+e+"'";return i.import=t,i},importAll:function(e){return Object.keys(e).forEach(function(t){Z(e[t])}),this.importAllSafe(e)},importAllSafe:function(e){var t=this,n=Object.keys(e).reduce(function(n,i){return n[i]=t.importSafe(i,e[i]),n},{});return n},link:function(e){if(this._stage>St.link)throw"Illegal: once we have moved past link we cannot revist it";this._stage=St.link;var t=this,n=N(this._staticVariables).filter(function(e){return t._staticVariables[e].kind===yt.import}).reduce(function(e,n){return e[n]=t._staticVariables[n].import,e},{}),i=F(this._staticVariables);return new Function(xt,this.formatCode(Bt,{static_variable_declarations:I(i),static_variable_definitions:S(i.map(function(e){return e.definition()})),body:e.trim()}))(n)},lower:function(){if(this._stage>St.lower)throw"Illegal: once we have moved past lower we cannot revist it";this._stage=St.lower,this._captureCSE.lower(),this._dataCSE.lower(),this._globalCSE.lower()},markBindingAsError:function(e){e&&(e.kind=wt.error,this.markBindingAsError(e.original))},oneTimeTextBinding:function(e){var t=this,n=this.oneTimeTextBindingAnalyze(e);if(n){var i;e.original&&(i=e.original.initialValue);var r=this.createTextBindingHole(e.elementCapture.element.tagName,n.attribute,++this._textBindingId);switch(e.textBindingId=r,e.kind=wt.text,e.elementCapture.refCount--,e.definition=function(){var n;return n=i?"{htmlEscape}({initialValue})":"{htmlEscape}({getter})",t.formatCode(n,{htmlEscape:t._staticVariables.htmlEscape,getter:e.value(),initialValue:i})},n.kind){case Ct.attribute:e.elementCapture.element.setAttribute(n.attribute,r);break;case Ct.booleanAttribute:e.elementCapture.element.setAttribute(n.attribute,r),e.definition=function(){var r;return r=i?'({initialValue} ? {attribute} : "")':'({value} ? {attribute} : "")',t.formatCode(r,{value:e.value(),attribute:T(n.attribute),initialValue:i})},this._htmlProcessors.push(function(e){return e.replace(new RegExp(n.attribute+'="'+r+'"',"i"),r)});break;case Ct.textContent:e.elementCapture.element.textContent=r;break;case Ct.inlineStyle:var s=e.elementCapture.element;if(!s.msReplaceStyle){s.msReplaceStyle=s.getAttribute("style")||"",""!==s.msReplaceStyle&&";"!==s.msReplaceStyle[s.msReplaceStyle.length-1]&&(s.msReplaceStyle=s.msReplaceStyle+";"),s.setAttribute("style","msReplaceStyle:'"+r+"'");var o=s.getAttribute("style");this._htmlProcessors.push(function(e){return e.replace(o,s.msReplaceStyle)})}s.msReplaceStyle=s.msReplaceStyle+n.property+":"+r+";";break;default:throw"NYI"}}},oneTimeTextBindingAnalyze:function(e){var t=e.elementCapture.element,n=t.tagName,i=e.destination[0];switch(n){case"A":switch(i){case"href":return{kind:Ct.attribute,attribute:i}}break;case"IMG":switch(i){case"alt":case"src":case"width":case"height":return{kind:Ct.attribute,attribute:i}}break;case"SELECT":switch(i){case"disabled":case"multiple":case"required":return{kind:Ct.booleanAttribute,attribute:i};case"size":return{kind:Ct.attribute,attribute:i}}break;case"OPTION":switch(i){case"label":case"value":return{kind:Ct.attribute,attribute:i};case"disabled":case"selected":return{kind:Ct.booleanAttribute,attribute:i}}break;case"INPUT":switch(i){case"checked":switch(t.type){case"checkbox":case"radio":return{kind:Ct.booleanAttribute,attribute:i}}break;case"disabled":return{kind:Ct.booleanAttribute,attribute:i};case"max":case"maxLength":case"min":case"step":case"value":return{kind:Ct.attribute,attribute:i};case"size":switch(t.type){case"text":case"search":case"tel":case"url":case"email":case"password":return{kind:Ct.attribute,attribute:i}}break;case"readOnly":switch(t.type){case"hidden":case"range":case"color":case"checkbox":case"radio":case"file":case"button":break;default:return{kind:Ct.booleanAttribute,attribute:i}}}break;case"BUTTON":switch(i){case"disabled":return{kind:Ct.booleanAttribute,attribute:i};case"value":return{kind:Ct.attribute,attribute:i}}break;case"TEXTAREA":switch(i){case"disabled":case"readOnly":case"required":return{kind:Ct.booleanAttribute,attribute:i};case"cols":case"maxLength":case"placeholder":case"rows":case"wrap":return{kind:Ct.attribute,attribute:i}}}switch(i){case"className":return{kind:Ct.attribute,attribute:"class"};case"dir":case"lang":case"name":case"title":case"tabIndex":return{kind:Ct.attribute,attribute:i};case"style":if(e.destination.length>1){var r=e.destination[1];if("cssText"===r)return;var s="string"==typeof t.style[r];if(s)return("m"===r[0]&&"s"===r[1]||"webkit"===r.substring(0,6))&&(r="-"+r),r=r.replace(ft,function(e){return"-"+e.toLowerCase()}),{kind:Ct.inlineStyle,property:r,attribute:"style"}}break;case"innerText":case"textContent":return{kind:Ct.textContent,attribute:"textContent"}}},oneTimeTreeBinding:function(e){if(1===e.destination.length&&"id"===e.destination[0]){if(i.validation)throw new r("WinJS.Binding.IdBindingNotSupported",o._formatString(v.idBindingNotSupported,e.bindingText));return s.log&&s.log(o._formatString(v.idBindingNotSupported,e.bindingText),"winjs binding","error"),void this.markBindingAsError(e)}if(0===e.destination.length)return s.log&&s.log(v.cannotBindToThis,"winjs binding","error"),void this.markBindingAsError(e);var t,n=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.original&&(t=e.pathExpression,e.original.initialValue=t),e.kind=wt.tree,e.definition=function(){var i;return i=t?"({targetPath} || {{}}){prop} = {initialValue}":"({targetPath} || {{}}){prop} = {sourcePath}",n.formatCode(i,{targetPath:k(e.elementCapture,e.destination.slice(0,-1),n.nullableIdentifierAccessTemporary,n.importSafe("targetSecurityCheck",b)),prop:E(e.destination.slice(-1)),sourcePath:e.value(),initialValue:t})}},optimize:function(){if(this._stage>St.optimze)throw"Illegal: once we have moved past link we cannot revist it";this._stage=St.optimze;for(var e=0;e<this._bindings.length;e++){var t=this._bindings[e];if(!t.template)switch(t.initializer.import){case q:var n=z(t,{kind:wt.tree,initializer:this.importSafe("init_oneTime",K),original:t});n.elementCapture.refCount++,this.oneTimeTreeBinding(n),this._bindings.splice(e,0,n),t.delayable=!0,e++;break;case J:var n=z(t,{kind:wt.tree,initializer:this.importSafe("init_setAttributeOneTime",G),original:t});n.elementCapture.refCount++,this.setAttributeOneTimeTreeBinding(n),this._bindings.splice(e,0,n),t.delayable=!0,e++;break;case K:this.oneTimeTreeBinding(t);break;case G:this.setAttributeOneTimeTreeBinding(t);break;case $:this.addClassOneTimeTreeBinding(t);break;default:t.initializer&&(t.delayable=!!t.initializer.import.delayable)}}if(this._optimizeTextBindings){for(var i={},e=0;e<this._bindings.length;e++){var t=this._bindings[e];if(!t.template&&t.kind!==wt.error){switch(t.initializer.import){case K:this.oneTimeTextBinding(t);break;case G:this.setAttributeOneTimeTextBinding(t);break;case $:this.addClassOneTimeTextBinding(t)}t.textBindingId&&(i[t.textBindingId]=t)}}if(Object.keys(i).length){var r=this._templateContent.innerHTML;r=this._htmlProcessors.reduce(function(e,t){return t(e)},r);for(var s=r.split(this._textBindingRegex),e=1;e<s.length;e+=2){var t=i[s[e]];s[e]=t.definition}this._html=function(){var e=s.map(function(e){return"string"==typeof e?T(e):e()}).join(" + ");return B(e)}}}},prettify:function(e){var t=e.split("\n");return t.filter(function(e){return!mt.test(e)}).join("\n")},setAttributeOneTimeTextBinding:function(e){var t,n=this,i=e.destination[0],r=this.createTextBindingHole(e.elementCapture.element.tagName,i,++this._textBindingId);e.original&&(t=e.original.initialValue),e.textBindingId=r,e.kind=wt.text,e.elementCapture.element.setAttribute(i,r),e.elementCapture.refCount--,e.definition=function(){var i;return i=t?"{htmlEscape}({initialValue})":"{htmlEscape}({value})",n.formatCode(i,{htmlEscape:n._staticVariables.htmlEscape,initialValue:t,value:e.value()})}},setAttributeOneTimeTreeBinding:function(e){if(1===e.destination.length&&"id"===e.destination[0]){if(i.validation)throw new r("WinJS.Binding.IdBindingNotSupported",o._formatString(v.idBindingNotSupported,e.bindingText));return s.log&&s.log(o._formatString(v.idBindingNotSupported,e.bindingText),"winjs binding","error"),void this.markBindingAsError(e)}if(1!==e.destination.length||!e.destination[0])return s.log&&s.log(v.attributeBindingSingleProperty,"winjs binding","error"),void this.markBindingAsError(e);var t,n=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.original&&(t=this.defineInstance(gt.variable,"",e.value),e.original.initialValue=t),e.kind=wt.tree,e.definition=function(){var i;return i=t?'{element}.setAttribute({attribute}, "" + {initialValue})':'{element}.setAttribute({attribute}, "" + {value})',n.formatCode(i,{element:e.elementCapture,attribute:T(e.destination[0]),initialValue:t,value:e.value()})
}}},{_TreeCSE:_t,compile:function(n,i,r){if(!(i instanceof t.HTMLElement))throw"Illegal";lt("WinJS.Binding.Template:compile"+r.profilerMarkIdentifier+",StartTM");var s=new It(i,r);s.analyze();var o=s.importAllSafe({Signal:m,global:t,document:t.document,cancelBlocker:U,promise_as:Y,disposeInstance:e,markDisposable:et,ui_processAll:tt,binding_processAll:nt,insertAdjacentHTMLUnsafe:X,promise:p,utilities_data:Q,requireSupportedForProcessing:Z,htmlEscape:L,scopedSelect:at,delayedBindingProcessing:y,writeProfilerMark:lt});s.optimize(),s.deadCodeElimination(),s.lower();var a,l;switch(r.target){case"render":a=s.async?Mt:At,l=!1;break;case"renderItem":a=s.async?Rt:Dt,l=!0}var u=s.compile(a,o,l),c=s.link(u);return s.done(),lt("WinJS.Binding.Template:compile"+r.profilerMarkIdentifier+",StopTM"),c}}),Et=j('container.classList.add("win-template");                                                              \nvar html = {html};                                                                                      \n{insertAdjacentHTMLUnsafe}(container, "beforeend", html);                                             \nreturnedElement = {returnedElement};                                                                    \n                                                                                                        \n// Capture Definitions                                                                                  \n{capture_definitions};                                                                                  \n{set_msParentSelectorScope};                                                                            \n                                                                                                        \n'),kt=j("// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \n// Binding Processing                                                                                   \n{binding_processing};                                                                                   \n                                                                                                        \nvar result = {promise_as}(returnedElement);                                                             \n"),Tt=j('var controlSignal = new {Signal}();                                                                     \nvar controlDone = function () {{ if (--{control_counter} === 0) {{ controlSignal.complete(); }} }};     \ncontrolDone();                                                                                          \n                                                                                                        \n// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \nvar result = controlSignal.promise.then(function () {{                                                  \n    // Binding Processing                                                                               \n    {binding_processing};                                                                               \n    return {promise}.join({nestedTemplates});                                                           \n}}).then(function () {{                                                                                 \n    return returnedElement;                                                                             \n}}).then(null, function (e) {{                                                                          \n    if (typeof e === "object" && e.name === "Canceled") {{ returnedElement.dispose(); }}            \n    return {promise}.wrapError(e);                                                                      \n}});                                                                                                    \n'),Pt=j("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result); }});       \n{suffix_statements};                                                                                    \n"),At=j('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data); }});                   \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+x(C(4,Et))+"                                           \n                                                                                                        \n    "+x(C(4,kt))+"                                      \n    "+x(C(4,Pt))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Mt=j('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data, container); }});        \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+x(C(4,Et))+"                                           \n                                                                                                        \n    "+x(C(4,Tt))+"                                 \n    "+x(C(4,Pt))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Ot=j("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result, renderComplete); }});\n{suffix_statements};                                                                                    \n"),Dt=j('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+x(C(8,Et))+"                                       \n                                                                                                        \n        "+x(C(8,kt))+"                                  \n        "+x(C(8,Ot))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Lt=j("renderComplete = element.then(function () {{                                                            \n    return itemPromise;                                                                                 \n}}).then(function (item) {{                                                                             \n    return item.ready || item;                                                                          \n}}).then(function (item) {{                                                                             \n    {delayed_binding_processing};                                                                       \n    return element;                                                                                     \n}});                                                                                                    \n"),Rt=j('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+x(C(8,Et))+"                                       \n                                                                                                        \n        "+x(C(8,Tt))+"                             \n        "+x(C(8,Ot))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Bt=j('"use strict";                                                                                         \n                                                                                                        \n// statics                                                                                              \nvar {static_variable_declarations};                                                                     \n{static_variable_definitions};                                                                          \n                                                                                                        \n// generated template rendering function                                                                \nreturn {body};                                                                                          \n');return It})})}}),define("WinJS/BindingTemplate",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_WriteProfilerMark","./Binding/_Declarative","./BindingTemplate/_DataTemplateCompiler","./ControlProcessor","./Fragments","./Promise","./Utilities/_Dispose","./Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";if(t.document){var m=h._cancelBlocker;i.Namespace._moduleDefine(e,"WinJS.Binding",{Template:i.Namespace._lazy(function(){function e(e,n,i){function r(){return p.removeClass(l,"win-loading"),o("WinJS.Binding:templateRender"+e._profilerMarkIdentifier+",StopTM"),g||l}o("WinJS.Binding:templateRender"+e._profilerMarkIdentifier+",StartTM"),1===++e._counter&&(e.debugBreakOnRender||f._debugBreakOnRender);var s=h.wrap(),l=i||t.document.createElement(e.element.tagName);p.addClass(l,"win-template"),p.addClass(l,"win-loading");var _,g,v=e,y=l.children.length,b=function(){var e=p.data(l).winBindings;e&&e.forEach(function(e){e.cancel()}),s.cancel()};e.extractChild?_=c.renderCopy(v.href||v.element,t.document.createElement(v.element.tagName)).then(function(e){var t=e.firstElementChild;return g=t,d.markDisposable(t,b),l.appendChild(t),t}):(d.markDisposable(l,b),_=c.renderCopy(v.href||v.element,l));var w=_.then(function(){function e(){return t(u.processAll).then(function(){return m(n)}).then(function(e){return t(a.processAll,e,!g&&!y,v.bindingCache)}).then(null,function(e){return"object"==typeof e&&"Canceled"===e.name&&(g||l).dispose(),h.wrapError(e)})}var t;if(0===y)t=function(e,t,n,i){return e(g||l,t,n,i)};else{var i=l.children;if(i.length===y+1)t=function(e,t,n,r){return e(i[y],t,n,r)};else{for(var r=[],o=y,c=i.length;c>o;o++)r.push(i[o]);t=function(e,t,n,i){var s=[];return r.forEach(function(r){s.push(e(r,t,n,i))}),h.join(s)}}}for(var d=l.firstElementChild;d;)d.msParentSelectorScope=!0,d=d.nextElementSibling;var p=v.processTimeout;return p?(0>p&&(p=0),h.timeout(p).then(function(){return s=e()})):s=e()}).then(r,function(e){return r(),h.wrapError(e)});return{element:_,renderComplete:w}}var f=i.Class.define(function(e,n){this._element=e||t.document.createElement("div"),this._element.winControl=this,this._profilerMarkIdentifier=r._getProfilerMarkIdentifier(this._element),o("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StartTM");var i=this;this._element.renderItem=function(e,t){return i._renderItemImpl(e,t)},n=n||{},this.href=n.href,this.enableRecycling=!!n.enableRecycling,this.processTimeout=n.processTimeout||0,this.bindingInitializer=n.bindingInitializer,this.debugBreakOnRender=n.debugBreakOnRender,this.disableOptimizedProcessing=n.disableOptimizedProcessing,this.extractChild=n.extractChild,this._counter=0,this._compile=!!n._compile,this.href||(this.element.style.display="none"),this.bindingCache={expressions:{}},o("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StopTM")},{_shouldCompile:{get:function(){var e=!0;return e=e&&!f._interpretAll,e=e&&!this.disableOptimizedProcessing,e&&(e=e&&0===this.processTimeout,e=e&&(!this.href||this.href instanceof t.HTMLElement),e||s.log&&s.log("Cannot compile templates which use processTimeout or href properties","winjs binding","warn")),e}},bindingInitializer:{get:function(){return this._bindingInitializer},set:function(e){this._bindingInitializer=e,this._reset()}},debugBreakOnRender:{get:function(){return this._debugBreakOnRender},set:function(e){this._debugBreakOnRender=!!e,this._reset()}},disableOptimizedProcessing:{get:function(){return this._disableOptimizedProcessing},set:function(e){this._disableOptimizedProcessing=!!e,this._reset()}},element:{get:function(){return this._element}},extractChild:{get:function(){return this._extractChild},set:function(e){this._extractChild=!!e,this._reset()}},processTimeout:{get:function(){return this._processTimeout||0},set:function(e){this._processTimeout=e,this._reset()}},render:r.markSupportedForProcessing(function(e,t){return this._renderImpl(e,t)}),_renderImpl:function(t,n){if(this._shouldCompile)try{return this._renderImpl=this._compileTemplate({target:"render"}),this._renderImpl(t,n)}catch(i){return h.wrapError(i)}var r=e(this,t,n);return r.element.then(function(){return r.renderComplete})},_renderInterpreted:function(t,n){return e(this,t,n)},renderItem:function(e,t){return this._renderItemImpl(e,t)},_renderItemImpl:function(t,n){if(this._shouldCompile)try{return this._renderItemImpl=this._compileTemplate({target:"renderItem"}),this._renderItemImpl(t)}catch(i){return{element:h.wrapError(i),renderComplete:h.wrapError(i)}}var r=this;if(this.enableRecycling&&!this.bindingCache.elements&&(this.bindingCache.elements={}),this.enableRecycling&&n&&n.msOriginalTemplate===this){var s=this.bindingCache.elements[n.id],o=!0;if(s&&(s.bindings.forEach(function(e){e()}),s.bindings=[],o=!s.nocache),o)return{element:n,renderComplete:t.then(function(e){return a.processAll(n,e.data,!0,r.bindingCache)})}}var l=e(this,t.then(function(e){return e.data}));return l.element=l.element.then(function(e){return e.msOriginalTemplate=r,e}),l},_compileTemplate:function(e){var t=this,i=l._TemplateCompiler.compile(this,this.href||this.element,{debugBreakOnRender:this.debugBreakOnRender||f._debugBreakOnRender,defaultInitializer:this.bindingInitializer||e.defaultInitializer,disableTextBindingOptimization:e.disableTextBindingOptimization||!1,target:e.target,extractChild:this.extractChild,profilerMarkIdentifier:this._profilerMarkIdentifier}),r=e.resetOnFragmentChange||n.Windows.ApplicationModel.DesignMode.designModeEnabled;if(r){var s=new p._MutationObserver(function(){t._reset(),s.disconnect()});s.observe(p.data(this.element).docFragment,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}return i},_reset:function(){delete this._renderImpl,delete this._renderItemImpl}},{isDeclarativeControlContainer:{value:!0,writable:!1,configurable:!1},render:{value:function(e,t,n){return new f(null,{href:e}).render(t,n)}}});return f})})}}),define("WinJS/BindingList/_BindingListDataSource",["exports","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Binding/_DomWeakRefTable","../Promise","../Scheduler","../Utilities/_UI"],function(e,t,n,i,r,s,o,a){"use strict";n.Namespace._moduleDefine(e,"WinJS.Binding",{_BindingListDataSource:n.Namespace._lazy(function(){function e(e,t){for(var n=e.length;n-1>t;){var i=e.getItem(++t);if(i)return i.key}return null}function l(e,t){for(;t>0;){var n=e.getItem(--t);if(n)return n.key}return null}function u(e,t){Object.keys(t).forEach(function(n){e.addEventListener(n,t[n])})}function c(e,t){Object.keys(t).forEach(function(n){e.removeEventListener(n,t[n])})}function h(e,t){return t?new k(e,t):new E}function d(e,t,n){return t?new T(e,t,n):new E}function p(e,t,n){return t&&e._annotateWithIndex(t,n)}function m(e,t){return this._list.unshift(t),this.itemFromIndex(0)}function f(e,t,n){var i=this._list.indexOfKey(n);return-1===i?S.noLongerMeaningful:(this._list.splice(i,0,t),this.itemFromIndex(i))}function _(e,t,n){var i=this._list.indexOfKey(n);return-1===i?S.noLongerMeaningful:(i+=1,this._list.splice(i,0,t),this.itemFromIndex(i))}function g(e,t){return this._list.push(t),this.itemFromIndex(this._list.length-1)}function v(e,t){var n=this._list.indexOfKey(e);return-1===n?S.noLongerMeaningful:(this._list.setAt(n,t),this.itemFromIndex(n))}function y(e){var t=this._list.indexOfKey(e);if(-1===t)return S.noLongerMeaningful;var n=0;return this._list.move(t,n),this.itemFromIndex(n)}function b(e,t){var n=this._list.indexOfKey(e),i=this._list.indexOfKey(t);return-1===n||-1===i?S.noLongerMeaningful:(i=i>n?i-1:i,this._list.move(n,i),this.itemFromIndex(i))}function w(e,t){var n=this._list.indexOfKey(e),i=this._list.indexOfKey(t);return-1===n||-1===i?S.noLongerMeaningful:(i=i>=n?i:i+1,this._list.move(n,i),this.itemFromIndex(i))}function C(e){var t=this._list.indexOfKey(e);if(-1===t)return S.noLongerMeaningful;var n=this._list.length-1;return this._list.move(t,n),this.itemFromIndex(n)}function x(e){var t=this._list.indexOfKey(e);return-1===t?S.noLongerMeaningful:(this._list.splice(t,1),s.wrap())}var S={get noLongerMeaningful(){return s.wrapError(new i(a.EditError.noLongerMeaningful))}},I=s.wrap().constructor,E=n.Class.derive(I,function(){this._value=null},{release:function(){},retain:function(){return this}},{supportedForProcessing:!1}),k=n.Class.derive(I,function(e,t){this._value=t,this._listBinding=e},{handle:{get:function(){return this._value.key}},index:{get:function(){return this._value.index}},release:function(){this._listBinding._release(this._value,this._listBinding._list.indexOfKey(this._value.key))},retain:function(){return this._listBinding._addRef(this._value,this._listBinding._list.indexOfKey(this._value.key)),this}},{supportedForProcessing:!1}),T=n.Class.derive(s,function(e,t,n){var i=this;this._item=t,this._listBinding=e,s.call(this,function(r){o.schedule(function(){return e._released?void i.cancel():void r(t)
},o.Priority.normal,null,"WinJS.Binding.List."+n)})},{handle:{get:function(){return this._item.key}},index:{get:function(){return this._item.index}},release:function(){this._listBinding._release(this._item,this._listBinding._list.indexOfKey(this._item.key))},retain:function(){return this._listBinding._addRef(this._item,this._listBinding._list.indexOfKey(this._item.key)),this}},{supportedForProcessing:!1}),P=n.Class.define(function(e,n,i,s){this._dataSource=e,this._list=n,this._editsCount=0,this._notificationHandler=i,this._pos=-1,this._retained=[],this._retained.length=n.length,this._retainedKeys={},this._affectedRange=null;var o=null;if(t.msSetWeakWinRTProperty&&t.msGetWeakWinRTProperty||(o=this),i){var a=function(e,t){var n=r._getWeakRefElement(s)||o;return n?(n["_"+e](t),!0):!1};this._handlers={itemchanged:function l(e){a("itemchanged",e)||n.removeEventListener("itemchanged",l)},iteminserted:function c(e){a("iteminserted",e)||n.removeEventListener("iteminserted",c)},itemmoved:function h(e){a("itemmoved",e)||n.removeEventListener("itemmoved",h)},itemremoved:function d(e){a("itemremoved",e)||n.removeEventListener("itemremoved",d)},reload:function p(){a("reload")||n.removeEventListener("reload",p)}},u(this._list,this._handlers)}},{_itemchanged:function(e){var t=e.detail.key,n=e.detail.index;this._updateAffectedRange(n,"changed");var i=e.detail.newItem,r=this._retained[n];if(r){var s=this._notificationHandler;if(r.index!==n){var o=r.index;r.index=n,s&&s.indexChanged&&s.indexChanged(i.key,n,o)}i=p(this._list,i,n),i._retainedCount=r._retainedCount,this._retained[n]=i,this._retainedKeys[t]=i,this._beginEdits(this._list.length),s&&s.changed&&s.changed(i,r),this._endEdits()}else this._beginEdits(this._list.length),this._endEdits()},_iteminserted:function(t){var n=t.detail.index;this._updateAffectedRange(n,"inserted"),this._beginEdits(this._list.length-1),n<=this._pos&&(this._pos=Math.min(this._pos+1,this._list.length));var i=this._retained;if(i.splice(n,0,0),delete i[n],this._shouldNotify(n)||1===this._list.length){var r=this._notificationHandler;r&&r.inserted&&r.inserted(h(this,p(this._list,this._list.getItem(n),n)),l(this._list,n),e(this._list,n))}this._endEdits()},_itemmoved:function(e){var t=e.detail.oldIndex,n=e.detail.newIndex;this._updateAffectedRange(t,"moved"),this._updateAffectedRange(n,"moved"),this._beginEdits(this._list.length),(t<this._pos||n<=this._pos)&&(n>this._pos?this._pos=Math.max(-1,this._pos-1):t>this._pos&&(this._pos=Math.min(this._pos+1,this._list.length)));var i=this._retained,r=i.splice(t,1)[0];i.splice(n,0,r),r||(delete i[n],r=p(this._list,this._list.getItem(n),n)),r._moved=!0,this._addRef(r,n),this._endEdits()},_itemremoved:function(e){var t=e.detail.key,n=e.detail.index;this._updateAffectedRange(n,"removed"),this._beginEdits(this._list.length+1),n<this._pos&&(this._pos=Math.max(-1,this._pos-1));var i=this._retained,r=this._retainedKeys,s=n in i;i.splice(n,1),delete r[t];var o=this._notificationHandler;s&&o&&o.removed&&o.removed(t,!1),this._endEdits()},_reload:function(){this._retained=[],this._retainedKeys={};var e=this._notificationHandler;e&&e.reload&&e.reload()},_addRef:function(e,t){t in this._retained?this._retained[t]._retainedCount++:(this._retained[t]=e,this._retainedKeys[e.key]=e,e._retainedCount=1)},_release:function(e,t){var n=this._retained[t];n&&(1===n._retainedCount?(delete this._retained[t],delete this._retainedKeys[n.key]):n._retainedCount--)},_shouldNotify:function(e){var t=this._retained;return e in t||e+1 in t||e-1 in t},_updateAffectedRange:function(e,t){if(this._notificationHandler.affectedRange){var n=e,i="removed"!==t?e+1:e;if(this._affectedRange){switch(t){case"inserted":e<=this._affectedRange.end&&++this._affectedRange.end;break;case"removed":e<this._affectedRange.end&&--this._affectedRange.end;break;case"moved":case"changed":}this._affectedRange.start=Math.min(this._affectedRange.start,n),this._affectedRange.end=Math.max(this._affectedRange.end,i)}else this._affectedRange={start:n,end:i}}},_notifyAffectedRange:function(){this._affectedRange&&(this._notificationHandler&&this._notificationHandler.affectedRange&&this._notificationHandler.affectedRange(this._affectedRange),this._affectedRange=null)},_notifyCountChanged:function(){var e=this._countAtBeginEdits,t=this._list.length;if(e!==t){var n=this._notificationHandler;n&&n.countChanged&&n.countChanged(t,e)}},_notifyIndicesChanged:function(){for(var e=this._retained,t=0,n=e.length;n>t;t++){var i=e[t];if(i&&i.index!==t){var r=t,s=i.index;i.index=r;var o=this._notificationHandler;o&&o.indexChanged&&o.indexChanged(i.key,r,s)}}},_notifyMoved:function(){for(var t=this._retained,n=0,i=t.length;i>n;n++){var r=t[n];if(r&&r._moved&&(r._moved=!1,this._release(r,n),this._shouldNotify(n))){var s=this._notificationHandler;s&&s.moved&&s.moved(h(this,r),l(this._list,n),e(this._list,n))}}},_beginEdits:function(e,t){this._editsCount++;var n=this._notificationHandler;if(1===this._editsCount&&n){if(!t){this._editsCount++;var i=this;o.schedule(function(){i._endEdits()},o.Priority.high,null,"WinJS.Binding.List._endEdits")}n.beginNotifications&&n.beginNotifications(),this._countAtBeginEdits=e}},_endEdits:function(){this._editsCount--;var e=this._notificationHandler;0===this._editsCount&&e&&(this._notifyIndicesChanged(),this._notifyMoved(),this._notifyCountChanged(),this._notifyAffectedRange(),e.endNotifications&&e.endNotifications())},jumpToItem:function(e){var t=this._list.indexOfKey(e.handle);return-1===t?s.wrap(null):(this._pos=t,this.current())},current:function(){return this.fromIndex(this._pos)},previous:function(){return this._pos=Math.max(-1,this._pos-1),this._fromIndex(this._pos,!0,"previous")},next:function(){return this._pos=Math.min(this._pos+1,this._list.length),this._fromIndex(this._pos,!0,"next")},releaseItem:function(e){e.release?e.release():this._release(e,this._list.indexOfKey(e.key))},release:function(){this._notificationHandler&&c(this._list,this._handlers),this._notificationHandler=null,this._dataSource._releaseBinding(this),this._released=!0},first:function(){return this.fromIndex(0)},last:function(){return this.fromIndex(this._list.length-1)},fromKey:function(e){var t,n=this._retainedKeys;return t=e in n?n[e]:p(this._list,this._list.getItemFromKey(e),this._list.indexOfKey(e)),h(this,t)},fromIndex:function(e){return this._fromIndex(e,!1,"fromIndex")},_fromIndex:function(e,t,n){var i,r=this._retained;return i=e in r?r[e]:p(this._list,this._list.getItem(e),e),t?d(this,i,n):h(this,i)}},{supportedForProcessing:!1}),A=0,M=n.Class.define(function(e){this._usingWeakRef=t.msSetWeakWinRTProperty&&t.msGetWeakWinRTProperty,this._bindings={},this._list=e,e.unshift&&(this.insertAtStart=m),e.push&&(this.insertAtEnd=g),e.setAt&&(this.change=v),e.splice&&(this.insertAfter=_,this.insertBefore=f,this.remove=x),e.move&&(this.moveAfter=w,this.moveBefore=b,this.moveToEnd=C,this.moveToStart=y)},{_releaseBinding:function(e){delete this._bindings[e._id]},addEventListener:function(){},removeEventListener:function(){},createListBinding:function(e){var t="ds_"+ ++A,n=new P(this,this._list,e,t);return n._id=t,this._usingWeakRef?(r._createWeakRef(n,t),this._bindings[t]=t):this._bindings[t]=n,n},getCount:function(){return s.wrap(this._list.length)},itemFromKey:function(e){var t=this._list,n=p(t,t.getItemFromKey(e),-1);return Object.defineProperty(n,"index",{get:function(){return t.indexOfKey(e)},enumerable:!1,configurable:!0}),s.wrap(n)},itemFromIndex:function(e){return s.wrap(p(this._list,this._list.getItem(e),e))},list:{get:function(){return this._list}},beginEdits:function(){var e=this._list.length;this._forEachBinding(function(t){t._beginEdits(e,!0)})},endEdits:function(){this._forEachBinding(function(e){e._endEdits()})},_forEachBinding:function(e){if(this._usingWeakRef){var t=[];Object.keys(this._bindings).forEach(function(n){var i=r._getWeakRefElement(n);i?e(i):t.push(n)});for(var n=0,i=t.length;i>n;n++)delete this._bindings[t[n]]}else{var s=this;Object.keys(this._bindings).forEach(function(t){e(s._bindings[t])})}},invalidateAll:function(){return s.wrap()},moveAfter:void 0,moveBefore:void 0,moveToEnd:void 0,moveToStart:void 0},{supportedForProcessing:!1});return M})})}),define("WinJS/BindingList",["exports","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Resources","./Binding/_Data","./BindingList/_BindingListDataSource"],function(e,t,n,i,r,s,o,a){"use strict";function l(e){return Array.prototype.slice.call(e,0)}function u(e){return{handle:e.handle,key:e.key,data:e.data,groupKey:e.groupKey,groupSize:e.groupSize,firstItemKey:e.firstItemKey,firstItemIndexHint:e.firstItemIndexHint}}function c(e){return void 0===e?void 0:+e}function h(e,t){var n=e.length;if(1>=n)return e;var i=n/2>>>0,r=h(e.slice(0,i),t),s=h(e.slice(i),t);return d(r,s,t)}function d(e,t,n){for(var i=[];e.length&&t.length;){var r=n(e[0],t[0]);i.push(0>=r?e.shift():t.shift())}return e.length&&i.push.apply(i,e),t.length&&i.push.apply(i,t),i}var p={get sparseArrayNotSupported(){return"Sparse arrays are not supported with proxy: true"},get illegalListLength(){return"List length must be assigned a finite positive number"}},m=r._createEventProperty,f={},_=t.Namespace.defineWithParent(null,null,{ListBase:t.Namespace._lazy(function(){var e=t.Class.define(null,{_annotateWithIndex:function(e,t){var n=u(e);return n.index=t,n},onitemchanged:m("itemchanged"),oniteminserted:m("iteminserted"),onitemmoved:m("itemmoved"),onitemmutated:m("itemmutated"),onitemremoved:m("itemremoved"),onreload:m("reload"),_notifyItemChanged:function(e,t,n,i,r,s){this._listeners&&this._listeners.itemchanged&&this.dispatchEvent("itemchanged",{key:e,index:t,oldValue:n,newValue:i,oldItem:r,newItem:s})},_notifyItemInserted:function(e,t,n){this._listeners&&this._listeners.iteminserted&&this.dispatchEvent("iteminserted",{key:e,index:t,value:n});var i=this.length;i!==this._lastNotifyLength&&(this.notify("length",i,this._lastNotifyLength),this._lastNotifyLength=i)},_notifyItemMoved:function(e,t,n,i){this._listeners&&this._listeners.itemmoved&&this.dispatchEvent("itemmoved",{key:e,oldIndex:t,newIndex:n,value:i})},_notifyItemMutated:function(e,t,n){this._listeners&&this._listeners.itemmutated&&this.dispatchEvent("itemmutated",{key:e,value:t,item:n})},_notifyItemRemoved:function(e,t,n,i){this._listeners&&this._listeners.itemremoved&&this.dispatchEvent("itemremoved",{key:e,index:t,value:n,item:i});var r=this.length;r!==this._lastNotifyLength&&(this.notify("length",r,this._lastNotifyLength),this._lastNotifyLength=r)},_notifyReload:function(){if(this._listeners&&this._listeners.reload&&this.dispatchEvent("reload"),e!==this._lastNotifyLength){var e=this.length;this.notify("length",e,this._lastNotifyLength),this._lastNotifyLength=e}},_normalizeIndex:function(e){return e=c(e),0>e?this.length+e:e},_notifyMutatedFromKey:function(e){var t=this.getItemFromKey(e);this._notifyItemMutated(e,t.data,t)},notifyReload:function(){this._notifyReload()},getAt:function(e){e=c(e);var t=this.getItem(e);return t&&t.data},_getArray:function(){for(var e=new Array(this.length),t=0,n=this.length;n>t;t++){var i=this.getItem(t);i&&(e[t]=i.data)}return e},_getFromKey:function(e){var t=this.getItemFromKey(e);return t&&t.data},_getKey:function(e){e=c(e);var t=this.getItem(e);return t&&t.key},concat:function(){var e=this._getArray();return e.concat.apply(e,arguments)},join:function(e){return this._getArray().join(e||",")},slice:function(e,t){return this._getArray().slice(e,t)},indexOf:function(e,t){t=c(t),t=Math.max(0,this._normalizeIndex(t)||0);for(var n=t,i=this.length;i>n;n++){var r=this.getItem(n);if(r&&r.data===e)return n}return-1},lastIndexOf:function(e,t){t=c(t);var n=this.length;t=Math.min(this._normalizeIndex(void 0!==t?t:n),n-1);var i;for(i=t;i>=0;i--){var r=this.getItem(i);if(r&&r.data===e)return i}return-1},every:function(e,t){return this._getArray().every(e,t)},filter:function(e,t){return this._getArray().filter(e,t)},forEach:function(e,t){this._getArray().forEach(e,t)},map:function(e,t){return this._getArray().map(e,t)},some:function(e,t){return this._getArray().some(e,t)},reduce:function(e,t){return arguments.length>1?this._getArray().reduce(e,t):this._getArray().reduce(e)},reduceRight:function(e,t){return arguments.length>1?this._getArray().reduceRight(e,t):this._getArray().reduceRight(e)},createFiltered:function(e){return new _.FilteredListProjection(this,e)},createGrouped:function(e,t,n){return new _.GroupedSortedListProjection(this,e,t,n)},createSorted:function(e){return new _.SortedListProjection(this,e)},dataSource:{get:function(){return this._dataSource=this._dataSource||new a._BindingListDataSource(this)}}},{supportedForProcessing:!1});return t.Class.mix(e,o.observableMixin),t.Class.mix(e,r.eventMixin),e}),ListBaseWithMutators:t.Namespace._lazy(function(){return t.Class.derive(_.ListBase,null,{pop:function(){return this.splice(-1,1)[0]},push:function(e){if(1===arguments.length)return this.splice(this.length,0,e),this.length;var t=l(arguments);return t.splice(0,0,this.length,0),this.splice.apply(this,t),this.length},shift:function(){return this.splice(0,1)[0]},unshift:function(e){if(1===arguments.length)this.splice(0,0,e);else{var t=l(arguments);t.splice(0,0,0,0),this.splice.apply(this,t)}return this.length}},{supportedForProcessing:!1})}),ListProjection:t.Namespace._lazy(function(){return t.Class.derive(_.ListBaseWithMutators,null,{_list:null,_myListeners:null,_addListListener:function(e,t){var n={name:e,handler:t.bind(this)};this._myListeners=this._myListeners||[],this._myListeners.push(n),this._list.addEventListener(e,n.handler)},dispose:function(){var t=this._list,n=this._myListeners;this._myListeners=[];for(var i=0,r=n.length;r>i;i++){var s=n[i];t.removeEventListener(s.name,s.handler)}this._list=new e.List,this._listReload()},getItemFromKey:function(e){return this._list.getItemFromKey(e)},move:function(e,t){e=c(e),t=c(t),e===t||0>e||0>t||e>=this.length||t>=this.length||(e=this._list.indexOfKey(this._getKey(e)),t=this._list.indexOfKey(this._getKey(t)),this._list.move(e,t))},_notifyMutatedFromKey:function(e){this._list._notifyMutatedFromKey(e)},splice:function(e){e=c(e),e=Math.max(0,this._normalizeIndex(e));var t=l(arguments);return e===this.length?(t[0]=this._list.length,this._list.splice.apply(this._list,t)):(t[0]=this._getKey(e),this._spliceFromKey.apply(this,t))},_setAtKey:function(e,t){this._list._setAtKey(e,t)}},{supportedForProcessing:!1})}),FilteredListProjection:t.Namespace._lazy(function(){return t.Class.derive(_.ListProjection,function(e,t){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._filter=t,this._initFilteredKeys()},{_filter:null,_filteredKeys:null,_initFilteredKeys:function(){for(var e=this._filter,t=this._list,n=[],i=0,r=t.length;r>i;i++){var s=t.getItem(i);s&&e(s.data)&&n.push(s.key)}this._filteredKeys=n},_findInsertionPosition:function(e,t){for(var n,i=this._filter;--t>=0;){var r=this._list.getItem(t);if(r&&i(r.data)){n=r.key;break}}var s=this._filteredKeys,o=n?s.indexOf(n)+1:0;return o},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.oldValue,r=e.detail.newValue,s=e.detail.oldItem,o=e.detail.newItem,a=this._filter,l=a(i),u=a(r);if(l&&u){var c=this._filteredKeys,h=c.indexOf(t);this._notifyItemChanged(t,h,i,r,s,o)}else l&&!u?this._listItemRemoved({detail:{key:t,index:n,value:i,item:s}}):!l&&u&&this._listItemInserted({detail:{key:t,index:n,value:r}})},_listItemInserted:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.value,r=this._filter;if(r(i)){var s=this._findInsertionPosition(t,n),o=this._filteredKeys;o.splice(s,0,t),this._notifyItemInserted(t,s,i)}},_listItemMoved:function(e){var t=e.detail.key,n=e.detail.newIndex,i=e.detail.value,r=this._filteredKeys,s=r.indexOf(t);if(-1!==s){r.splice(s,1);var o=this._findInsertionPosition(t,n);r.splice(o,0,t),this._notifyItemMoved(t,s,o,i)}},_listItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._filter,s=this._filteredKeys,o=s.indexOf(t),a=-1!==o,l=r(n);a&&l?this._notifyItemMutated(t,n,i):a&&!l?(s.splice(o,1),this._notifyItemRemoved(t,o,n,i)):!a&&l&&this._listItemInserted({detail:{key:t,index:this._list.indexOfKey(t),value:n}})},_listItemRemoved:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._filteredKeys,s=r.indexOf(t);-1!==s&&(r.splice(s,1),this._notifyItemRemoved(t,s,n,i))},_listReload:function(){this._initFilteredKeys(),this._notifyReload()},length:{get:function(){return this._filteredKeys.length},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",p.illegalListLength);var t=this.length;t>e&&this.splice(e,t-e)}},getItem:function(e){return e=c(e),this.getItemFromKey(this._filteredKeys[e])},indexOfKey:function(e){return this._filteredKeys.indexOf(e)},notifyMutated:function(e){return e=c(e),this._notifyMutatedFromKey(this._filteredKeys[e])},setAt:function(e,t){e=c(e),this._setAtKey(this._filteredKeys[e],t)},_spliceFromKey:function(e,t){if(arguments.length>2){var n=l(arguments);n[1]=0,this._list._spliceFromKey.apply(this._list,n)}var i=[];if(t){for(var r=[],s=this._filteredKeys,o=s.indexOf(e),a=o,u=s.length;u>a&&t>a-o;a++){var e=s[a];r.push(e)}var c=this;r.forEach(function(e){i.push(c._list._spliceFromKey(e,1)[0])})}return i}},{supportedForProcessing:!1})}),SortedListProjection:t.Namespace._lazy(function(){return t.Class.derive(_.ListProjection,function(e,t){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=t,this._initSortedKeys()},{_sortFunction:null,_sortedKeys:null,_initSortedKeys:function(){for(var e=this._list,t=[],n=0,i=e.length;i>n;n++){var r=e.getItem(n);r&&(t[n]=r.key)}var s=this._sortFunction,o=h(t,function(t,n){return t=e.getItemFromKey(t).data,n=e.getItemFromKey(n).data,s(t,n)});this._sortedKeys=o},_findInsertionPos:function(e,t,n,i,r){for(var s=this._sortFunction,o=this._sortedKeys,a=Math.max(0,i||-1),l=Math.min(o.length,r||Number.MAX_VALUE),u=a;l>=a;){u=(a+l)/2>>>0;var c=o[u];if(!c)break;var h=this.getItemFromKey(c),d=s(h.data,n);if(0>d)a=u+1;else{if(0===d)return this._findStableInsertionPos(e,t,a,l,u,n);l=u-1}}return a},_findBeginningOfGroup:function(e,t,n,i,r){for(var s=0,o=e;o>=s;){e=(s+o)/2>>>0;var a=i[e],l=n.getItemFromKey(a),u=t(l.data,r);0>u?s=e+1:o=e-1}return s},_findEndOfGroup:function(e,t,n,i,r){for(var s=e,o=i.length;o>=s;){e=(s+o)/2>>>0;var a=i[e];if(!a)return i.length;var l=n.getItemFromKey(a),u=t(l.data,r);0>=u?s=e+1:o=e-1}return s},_findStableInsertionPos:function(e,t,n,i,r,s){var o=this._list,a=o.length,l=this._sortFunction,u=this._sortedKeys;if(a/2>t){for(var c=t-1;c>=0;c--){var h=o.getItem(c);if(0===l(h.data,s))return a-n>i?u.indexOf(h.key,n)+1:u.lastIndexOf(h.key,i)+1}return this._findBeginningOfGroup(r,l,o,u,s)}for(var c=t+1;a>c;c++){var h=o.getItem(c);if(0===l(h.data,s))return a-n>i?u.indexOf(h.key,n):u.lastIndexOf(h.key,i)}return this._findEndOfGroup(r,l,o,u,s)},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.newValue,i=e.detail.oldValue,r=this._sortFunction;if(0===r(i,n)){var s=this.indexOfKey(t);this._notifyItemChanged(t,s,i,n,e.detail.oldItem,e.detail.newItem)}else this._listItemRemoved({detail:{key:t,index:e.detail.index,value:e.detail.oldValue,item:e.detail.oldItem}}),this._listItemInserted({detail:{key:t,index:e.detail.index,value:e.detail.newValue}})},_listItemInserted:function(e,t,n){var i=e.detail.key,r=e.detail.index,s=e.detail.value,o=this._findInsertionPos(i,r,s,t,n);this._sortedKeys.splice(o,0,i),this._notifyItemInserted(i,o,s)},_listItemMoved:function(e,t,n){var i=e.detail.key,r=e.detail.newIndex,s=e.detail.value,o=this._sortedKeys,a=o.indexOf(i,t);o.splice(a,1);var l=this._findInsertionPos(i,r,s,t,n);o.splice(l,0,i),l!==a&&this._notifyItemMoved(i,a,l,s)},_listItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._list.indexOfKey(t),s=this._sortedKeys.indexOf(t);this._sortedKeys.splice(s,1);var o=this._findInsertionPos(t,r,n);return this._sortedKeys.splice(s,0,t),s===o?void this._notifyItemMutated(t,n,i):(this._listItemRemoved({detail:{key:t,index:r,value:n,item:i}}),void this._listItemInserted({detail:{key:t,index:r,value:n}}))},_listItemRemoved:function(e,t){var n=e.detail.key,i=e.detail.value,r=e.detail.item,s=this._sortedKeys,o=s.indexOf(n,t);s.splice(o,1),this._notifyItemRemoved(n,o,i,r)},_listReload:function(){this._initSortedKeys(),this._notifyReload()},length:{get:function(){return this._sortedKeys.length},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",p.illegalListLength);var t=this.length;t>e&&this.splice(e,t-e)}},getItem:function(e){return e=c(e),this.getItemFromKey(this._sortedKeys[e])},indexOfKey:function(e){return this._sortedKeys.indexOf(e)},notifyMutated:function(e){e=c(e),this._notifyMutatedFromKey(this._sortedKeys[e])},setAt:function(e,t){e=c(e),this._setAtKey(this._sortedKeys[e],t)},_spliceFromKey:function(e,t){if(arguments.length>2){var n=l(arguments);n[1]=0,this._list._spliceFromKey.apply(this._list,n)}var i=[];if(t){for(var r=[],s=this._sortedKeys,o=s.indexOf(e),a=o,u=s.length;u>a&&t>a-o;a++)r.push(s[a]);var c=this;r.forEach(function(e){i.push(c._list._spliceFromKey(e,1)[0])})}return i}},{supportedForProcessing:!1})}),GroupedSortedListProjection:t.Namespace._lazy(function(){return t.Class.derive(_.SortedListProjection,function(e,t,n,i){this._list=e,this._addListListener("itemchanged",this._listGroupedItemChanged),this._addListListener("iteminserted",this._listGroupedItemInserted),this._addListListener("itemmoved",this._listGroupedItemMoved),this._addListListener("itemmutated",this._listGroupedItemMutated),this._addListListener("itemremoved",this._listGroupedItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=function(e,n){return e=t(e),n=t(n),i?i(e,n):n>e?-1:e===n?0:1},this._groupKeyOf=t,this._groupDataOf=n,this._initSortedKeys(),this._initGroupedItems()},{_groupKeyOf:null,_groupDataOf:null,_groupedItems:null,_initGroupedItems:function(){for(var e={},t=this._list,n=this._groupKeyOf,i=0,r=t.length;r>i;i++){var s=u(t.getItem(i));s.groupKey=n(s.data),e[s.key]=s}this._groupedItems=e},_groupsProjection:null,_listGroupedItemChanged:function(e){var t=e.detail.key,n=e.detail.oldValue,i=e.detail.newValue,r=this._groupedItems,s=r[t],o=u(s);o.data=i,o.groupKey=this._groupKeyOf(i),r[t]=o;var a;s.groupKey===o.groupKey?(a=this.indexOfKey(t),this._notifyItemChanged(t,a,n,i,s,o)):(a=e.detail.index,this._listItemChanged({detail:{key:t,index:a,oldValue:n,newValue:i,oldItem:s,newItem:o}}))},_listGroupedItemInserted:function(e){var t=e.detail.key,n=e.detail.value,i=this._groupKeyOf(n);this._groupedItems[t]={handle:t,key:t,data:n,groupKey:i};var r,s;if(this._groupsProjection){var o=this._groupsProjection._groupItems[i];o&&(r=o.firstItemIndexHint,s=r+o.groupSize)}this._listItemInserted(e,r,s)},_listGroupedItemMoved:function(e){var t,n,i=this._groupedItems[e.detail.key].groupKey;if(this._groupsProjection){var r=this._groupsProjection._groupItems[i];t=r.firstItemIndexHint,n=t+r.groupSize}this._listItemMoved(e,t,n)},_listGroupedItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=this._groupedItems,r=i[t],s=this._groupKeyOf(n);if(r.groupKey===s)this._notifyItemMutated(t,n,r);else{var o=u(r);o.groupKey=s,i[t]=o;var a=this._list.indexOfKey(t);this._listItemRemoved({detail:{key:t,index:a,value:n,item:r}}),this._listItemInserted({detail:{key:t,index:a,value:n}})}},_listGroupedItemRemoved:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.value,r=this._groupedItems,s=r[t];delete r[t];var o,a;if(this._groupsProjection){var l=this._groupsProjection._groupItems[s.groupKey];o=l.firstItemIndexHint,a=o+l.groupSize}this._listItemRemoved({detail:{key:t,index:n,value:i,item:s}},o,a)},_listReload:function(){this._initGroupedItems(),_.SortedListProjection.prototype._listReload.call(this)},groups:{get:function(){return null===this._groupsProjection&&(this._groupsProjection=new _.GroupsListProjection(this,this._groupKeyOf,this._groupDataOf)),this._groupsProjection}},getItemFromKey:function(e){return this._groupedItems[e]}},{supportedForProcessing:!1})}),GroupsListProjection:t.Namespace._lazy(function(){return t.Class.derive(_.ListBase,function(e,t,n){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._groupKeyOf=t,this._groupDataOf=n,this._initGroupKeysAndItems()},{_list:null,_addListListener:function(e,t){this._list.addEventListener(e,t.bind(this))},_groupDataOf:null,_groupKeyOf:null,_groupOf:function(e){return this.getItemFromKey(this._groupKeyOf(e.data))},_groupKeys:null,_groupItems:null,_initGroupKeysAndItems:function(){for(var e,t=this._groupDataOf,n=this._list,i={},r=[],s=null,o=null,a=0,l=n.length;l>a;a++){var u=n.getItem(a),c=u.groupKey;c!==s?(o&&(o.groupSize=e),e=1,s=c,o={handle:c,key:c,data:t(u.data),firstItemKey:u.key,firstItemIndexHint:a},i[c]=o,r.push(c)):e++}o&&(o.groupSize=e),this._groupKeys=r,this._groupItems=i},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.newValue,r=this._list,s=r.getItemFromKey(t).groupKey,o=this._groupItems,a=o[s];if(a.firstItemIndexHint===n){var l=u(a);l.data=this._groupDataOf(i),l.firstItemKey=t,o[s]=l,this._notifyItemChanged(s,this._groupKeys.indexOf(s),a.data,l.data,a,l)}},_listItemInserted:function(e){var t,n,i,r,s,o=e.detail.key,a=e.detail.index,l=e.detail.value,c=this._list,h=c.getItemFromKey(o).groupKey,d=this._groupItems,p=this._groupKeys,m=d[h];if(m)n=m,i=u(n),i.groupSize++,n.firstItemIndexHint===a&&(i.groupData=this._groupDataOf(l),i.firstItemKey=o,i.firstItemIndexHint=a),d[h]=i,t=p.indexOf(h),this._notifyItemChanged(h,t,n.data,i.data,n,i);else{for(r=0,s=p.length;s>r&&(m=d[p[r]],!(m.firstItemIndexHint>=a));r++);t=r,m={handle:h,key:h,data:this._groupDataOf(l),groupSize:1,firstItemKey:o,firstItemIndexHint:a},p.splice(t,0,h),d[h]=m,this._notifyItemInserted(h,t,m.data)}for(r=t+1,s=p.length;s>r;r++)n=d[p[r]],i=u(n),i.firstItemIndexHint++,d[i.key]=i,this._notifyItemChanged(i.key,r,n.data,i.data,n,i)},_listItemMoved:function(e){var t=e.detail.key,n=e.detail.oldIndex,i=e.detail.newIndex,r=this._list,s=r.getItemFromKey(t).groupKey,o=this._groupItems,a=o[s];if(a.firstItemIndexHint===i||a.firstItemIndexHint===n){var l=r.getItem(a.firstItemIndexHint),c=u(a);c.data=this._groupDataOf(l.data),c.firstItemKey=l.key,o[s]=c,this._notifyItemChanged(s,this._groupKeys.indexOf(s),a.data,c.data,a,c)}},_listItemRemoved:function(e){var t,n,i=e.detail.index,r=e.detail.item,s=this._groupItems,o=this._groupKeys,a=r.groupKey,l=s[a],c=o.indexOf(a);if(1===l.groupSize)o.splice(c,1),delete s[a],this._notifyItemRemoved(a,c,l.data,l),c--;else{if(t=l,n=u(t),n.groupSize--,t.firstItemIndexHint===i){var h=this._list.getItem(i);n.data=this._groupDataOf(h.data),n.firstItemKey=h.key}s[a]=n,this._notifyItemChanged(a,c,t.data,n.data,t,n)}for(var d=c+1,p=o.length;p>d;d++)t=s[o[d]],n=u(t),n.firstItemIndexHint--,s[n.key]=n,this._notifyItemChanged(n.key,d,t.data,n.data,t,n)},_listReload:function(){this._initGroupKeysAndItems(),this._notifyReload()},length:{get:function(){return this._groupKeys.length}},getItem:function(e){return e=c(e),this._groupItems[this._groupKeys[e]]},getItemFromKey:function(e){return this._groupItems[e]},indexOfKey:function(e){return this._groupKeys.indexOf(e)}},{supportedForProcessing:!1})})});t.Namespace._moduleDefine(e,"WinJS.Binding",{List:t.Namespace._lazy(function(){return t.Class.derive(_.ListBaseWithMutators,function(e,t){if(this._currentKey=0,this._keys=null,this._keyMap={},t=t||f,this._proxy=t.proxy,this._binding=t.binding,this._proxy){if(Object.keys(e).length!==e.length)throw new i("WinJS.Binding.List.NotSupported",p.sparseArrayNotSupported);this._data=e,this._currentKey=e.length}else if(e){for(var n=this._keyMap,r=0,s=0,a=e.length;a>s;s++)if(s in e){var l=e[s];this._binding&&(l=o.as(l));var u=r.toString();r++,n[u]={handle:u,key:u,data:l}}r!==s&&this._initializeKeys(),this._currentKey=r}},{_currentKey:0,_keys:null,_keyMap:null,_modifyingData:0,_initializeKeys:function(){if(!this._keys){var e=[];if(this._data){for(var t=this._keyMap,n=this._data,i=0,r=n.length;r>i;i++)if(i in n){var s=i.toString();if(e[i]=s,!(s in t)){var a=n[i];this._binding&&(a=o.as(a)),t[s]={handle:s,key:s,data:a}}}}else Object.keys(this._keyMap).forEach(function(t){e[t>>>0]=t});this._keys=e}},_lazyPopulateEntry:function(e){if(this._data&&e in this._data){var t=this._data[e];this._binding&&(t=o.as(t));var n=e.toString(),i={handle:n,key:n,data:t};return this._keyMap[i.key]=i,i}},_assignKey:function(){return(++this._currentKey).toString()},length:{get:function(){return this._data?this._data.length:this._keys?this._keys.length:this._currentKey},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",p.illegalListLength);this._initializeKeys();var t=this.length;if(t>e?this.splice(e,t-e):e=t,this._data){this._modifyingData++;try{this._data.length=e}finally{this._modifyingData--}}this._keys&&(this._keys.length=e)}},getItem:function(e){var t,n;return e=c(e),this._keys?(n=this._keys[e],t=n&&this._keyMap[n]):(n=e.toString(),t=this._keyMap[n]||this._lazyPopulateEntry(e)),t},getItemFromKey:function(e){var t;return t=this._keys||!this._data?this._keyMap[e]:this.getItem(e>>>0)},indexOfKey:function(e){var t=-1;if(this._keys)t=this._keys.indexOf(e);else{var n=e>>>0;n<this._currentKey&&(t=n)}return t},move:function(e,t){if(e=c(e),t=c(t),this._initializeKeys(),!(e===t||0>e||0>t||e>=this.length||t>=this.length)){if(this._data){this._modifyingData++;try{var n=this._data.splice(e,1)[0];this._data.splice(t,0,n)}finally{this._modifyingData--}}var i=this._keys.splice(e,1)[0];this._keys.splice(t,0,i),this._notifyItemMoved(i,e,t,this.getItemFromKey(i).data)}},notifyMutated:function(e){e=c(e);var t=this._keys?this._keys[e]:e.toString();this._notifyMutatedFromKey(t)},setAt:function(e,t){e=c(e),this._initializeKeys();var n=this.length;if(e===n)this.push(t);else if(n>e){if(this._data){this._modifyingData++;try{this._data[e]=t}finally{this._modifyingData--}}if(this._binding&&(t=o.as(t)),e in this._keys){var i=this._keys[e],r=this._keyMap[i],s=u(r);s.data=t,this._keyMap[i]=s,this._notifyItemChanged(i,e,r.data,t,r,s)}}},_setAtKey:function(e,t){this.setAt(this.indexOfKey(e),t)},reverse:function(){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.reverse()}finally{this._modifyingData--}}return this._keys.reverse(),this._notifyReload(),this},sort:function(e){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.sort(e)}finally{this._modifyingData--}}var t=this;return this._keys.sort(function(n,i){return n=t._keyMap[n],i=t._keyMap[i],e?e(n.data,i.data):(n=(n&&n.data||"").toString(),i=(n&&i.data||"").toString(),i>n?-1:n===i?0:1)}),this._notifyReload(),this},pop:function(){if(0!==this.length){this._initializeKeys();var e=this._keys.pop(),t=this._keyMap[e],n=t&&t.data;if(this._data){this._modifyingData++;try{this._data.pop()}finally{this._modifyingData--}}return delete this._keyMap[e],this._notifyItemRemoved(e,this._keys.length,n,t),n}},push:function(){this._initializeKeys();for(var e=arguments.length,t=0;e>t;t++){var n=arguments[t];this._binding&&(n=o.as(n));var i=this._assignKey();
if(this._keys.push(i),this._data){this._modifyingData++;try{this._data.push(arguments[t])}finally{this._modifyingData--}}this._keyMap[i]={handle:i,key:i,data:n},this._notifyItemInserted(i,this._keys.length-1,n)}return this.length},shift:function(){if(0!==this.length){this._initializeKeys();var e=this._keys.shift(),t=this._keyMap[e],n=t&&t.data;if(this._data){this._modifyingData++;try{this._data.shift()}finally{this._modifyingData--}}return delete this._keyMap[e],this._notifyItemRemoved(e,0,n,t),n}},unshift:function(){this._initializeKeys();for(var e=arguments.length,t=e-1;t>=0;t--){var n=arguments[t];this._binding&&(n=o.as(n));var i=this._assignKey();if(this._keys.unshift(i),this._data){this._modifyingData++;try{this._data.unshift(arguments[t])}finally{this._modifyingData--}}this._keyMap[i]={handle:i,key:i,data:n},this._notifyItemInserted(i,0,n)}return this.length},splice:function(e,t){e=c(e),this._initializeKeys(),e=Math.max(0,this._normalizeIndex(e)),t=Math.max(0,Math.min(t||0,this.length-e));for(var n=[];t;){var i=this._keys[e],r=this._keyMap[i],s=r&&r.data;if(n.push(s),this._keys.splice(e,1),this._data){this._modifyingData++;try{this._data.splice(e,1)}finally{this._modifyingData--}}delete this._keyMap[i],this._notifyItemRemoved(i,e,s,r),--t}if(arguments.length>2)for(var a=2,l=arguments.length;l>a;a++){var u=arguments[a];this._binding&&(u=o.as(u));var h=Math.min(e+a-2,this.length),d=this._assignKey();if(this._keys.splice(h,0,d),this._data){this._modifyingData++;try{this._data.splice(h,0,arguments[a])}finally{this._modifyingData--}}this._keyMap[d]={handle:d,key:d,data:u},this._notifyItemInserted(d,h,u)}return n},_spliceFromKey:function(e){this._initializeKeys();var t=l(arguments);return t[0]=this._keys.indexOf(e),this.splice.apply(this,t)}},{supportedForProcessing:!1})})})}),define("WinJS/Res",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./ControlProcessor/_OptionsParser","./Promise"],function(e,t,n,i,r,s,o,a){"use strict";function l(e,n){e=e||t.document.body;var n=n||0;if(4>n){if(0===n&&e.getAttribute){var s=e.getAttribute("data-win-res");if(s){var l=o.optionsParser(s);h(e,e,l,n)}}var u="[data-win-res],[data-win-control]",c=e.querySelectorAll(u);if(0===c.length)return a.as(e);for(var p=0,f=c.length;f>p;p++){var _=c[p];if(_.winControl&&_.winControl.constructor&&_.winControl.constructor.isDeclarativeControlContainer){var g=_.winControl.constructor.isDeclarativeControlContainer;"function"==typeof g&&(g=m(g),g(_.winControl,d),p+=_.querySelectorAll(u).length)}if(_.hasAttribute("data-win-res")){var l=o.optionsParser(_.getAttribute("data-win-res"));h(_,_,l,n)}}}else if(i.validation)throw new r("WinJS.Res.NestingExceeded","NestingExceeded");return a.as(e)}function u(e,t){for(var n=Object.keys(t),r=0,o=n.length;o>r;r++){var a=n[r],l=t[a],u=s.getString(l);u&&u.empty?i.validation&&c(l):(e.setAttribute(a,u.value),void 0!==u.lang&&void 0!==e.lang&&e.lang!==u.lang&&(e.lang=u.lang))}}function c(e){throw new r("WinJS.Res.NotFound",s._formatString("NotFound: {0}",e))}function h(e,t,n,r){var o=Object.keys(n);t=m(t);for(var a=0,d=o.length;d>a;a++){var p=o[a],f=n[p];if("string"==typeof f){var _=s.getString(f);_&&_.empty?i.validation&&c(f):(t[p]=_.value,void 0!==_.lang&&void 0!==e.lang&&e.lang!==_.lang&&(e.lang=_.lang),"innerHTML"===p&&l(t,r+1))}else e===t&&"attributes"===p?u(e,f):h(e,t[p],f,r)}}function d(e){if(!p)return i.ready().then(function(){return p=!0,l(e)});try{return l(e)}catch(t){return a.wrapError(t)}}var p=!1,m=i.requireSupportedForProcessing;n.Namespace._moduleDefine(e,"WinJS.Resources",{processAll:d})}),define("WinJS/Pages/_BasePage",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_WriteProfilerMark","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities"],function(e,t,n,i,r,s,o,a,l){"use strict";function u(e){var n=t.document.createElement("a");return n.href=e,n.href}function c(e){return t.document.location.href.toLowerCase()===e.toLowerCase()}function h(e,a){var h=d(e);return e=u(e),h||(h=n.Class.define(function(n,o,a,u){var h=this;this._disposed=!1,this.element=n=n||t.document.createElement("div"),l.addClass(n,"win-disposable"),n.msSourceLocation=e,this.uri=e,this.selfhost=c(e),n.winControl=this,l.addClass(n,"pagecontrol");var d=" uri='"+e+"'"+i._getProfilerMarkIdentifier(this.element);r("WinJS.UI.Pages:createPage"+d+",StartTM");var p=s.wrap().then(function(){return h.load(e)}),m=p.then(function(e){return s.join({loadResult:e,initResult:h.init(n,o)})}).then(function(e){return h.render(n,o,e.loadResult)});this.elementReady=m.then(function(){return n}),this.renderComplete=m.then(function(){return h.process(n,o)}).then(function(){return h.processed(n,o)}).then(function(){return h});var f=function(){a&&a(h),r("WinJS.UI.Pages:createPage"+d+",StopTM")};this.renderComplete.then(f,f),this.renderComplete.then(function(){return u}).then(function(){h.ready(n,o)}).then(null,function(e){return h.error(e)})},f),h=n.Class.mix(h,o.DOMEventMixin),m[e.toLowerCase()]=h),a&&(h=n.Class.mix(h,a)),h.selfhost=c(e),h}function d(e){return e=u(e),m[e.toLowerCase()]}function p(e){e=u(e),delete m[e.toLowerCase()]}if(t.document){var m={},f={dispose:function(){this._disposed||(this._disposed=!0,a.disposeSubTree(this.element),this.element=null)},load:function(){},init:function(){},process:function(){},processed:function(){},render:function(){},ready:function(){},error:function(e){return s.wrapError(e)}};n.Namespace._moduleDefine(e,null,{abs:u,define:h,get:d,remove:p})}}),define("WinJS/Pages",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./ControlProcessor","./Fragments","./Pages/_BasePage","./Promise"],function(e,t,n,i,r,s,o){"use strict";function a(e,r){var s=o.get(e);return s||(s=o.define(e,h)),r&&(s=n.Class.mix(s,r)),s.selfhost&&i.ready(function(){c(o.abs(e),t.document.body)},!0),s}function l(e){var t=o.get(e);return t||(t=a(e)),t}function u(e){s.clearCache(o.abs(e)),o.remove(e)}function c(e,t,n,i){var r=l(e),s=new r(t,n,null,i);return s.renderComplete}if(t.document){var h={load:function(e){return this.selfhost?void 0:s.renderCopy(o.abs(e))},process:function(e){return r.processAll(e)},render:function(e,t,n){return this.selfhost||e.appendChild(n),e}};n.Namespace._moduleDefine(e,"WinJS.UI.Pages",{define:a,get:l,_remove:u,render:c})}}),define("WinJS/Controls/HtmlControl",["exports","../Core/_Global","../Core/_Base","../Pages"],function(e,t,n,i){"use strict";t.document&&n.Namespace._moduleDefine(e,"WinJS.UI",{HtmlControl:n.Class.define(function(e,t,n){i.render(t.uri,e,t).then(n,function(){n()})})})}),define("base",["WinJS/Core/_WinJS","WinJS/Core","WinJS/Promise","WinJS/_Signal","WinJS/Scheduler","WinJS/Utilities","WinJS/Fragments","WinJS/Application","WinJS/Navigation","WinJS/Animations","WinJS/Binding","WinJS/BindingTemplate","WinJS/BindingList","WinJS/Res","WinJS/Pages","WinJS/ControlProcessor","WinJS/Controls/HtmlControl"],function(e){"use strict";return e.Namespace.define("WinJS.Utilities",{_require:require,_define:define}),e}),require(["WinJS/Core/_WinJS","base"],function(e){return global.WinJS=e,e})})}(this),!function(e){!function(t){"function"==typeof define&&define.amd?define(["./base"],t):(e.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.0.winjs.2014.10.2 ui.js,StartTM"),t(e.WinJS),e.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.0.winjs.2014.10.2 ui.js,StopTM"))}(function(t){var n=t.Utilities._require,i=t.Utilities._define;i("WinJS/VirtualizedDataSource/_VirtualizedDataSourceImpl",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../_Signal","../Utilities/_UI"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{VirtualizedDataSource:n.Namespace._lazy(function(){function e(e,n){function s(e){var t="WinJS.UI.VirtualizedDataSource:"+_r+":"+e+",StartTM";l(t),o.log&&o.log(t,"winjs vds","perf")}function b(e){var t="WinJS.UI.VirtualizedDataSource:"+_r+":"+e+",StopTM";l(t),o.log&&o.log(t,"winjs vds","perf")}function w(e){return"number"==typeof e&&e>=0}function C(e){return w(e)&&e===Math.floor(e)}function x(e){if(null===e)e=void 0;else if(void 0!==e&&!C(e))throw new r("WinJS.UI.ListDataSource.InvalidIndexReturned",v.invalidIndexReturned);return e}function S(e){if(null===e)e=void 0;else if(void 0!==e&&!C(e)&&e!==f.unknown)throw new r("WinJS.UI.ListDataSource.InvalidCountReturned",v.invalidCountReturned);return e}function I(){var e=(mi++).toString(),t={handle:e,item:null,itemNew:null,fetchListeners:null,cursorCount:0,bindingMap:null};return Hi[e]=t,t}function E(){return I()}function k(e,t){e.prev=t.prev,e.next=t,e.prev.next=e,t.prev=e}function T(e){e.lastInSequence&&(delete e.lastInSequence,e.prev.lastInSequence=!0),e.firstInSequence&&(delete e.firstInSequence,e.next.firstInSequence=!0),e.prev.next=e.next,e.next.prev=e.prev}function P(e){for(;!e.firstInSequence;)e=e.prev;return e}function A(e){for(;!e.lastInSequence;)e=e.next;return e}function M(e,t,n){return t.prev.next=n.next,n.next.prev=t.prev,t.prev=e.prev,n.next=e,t.prev.next=t,e.prev=n,!0}function O(e,t,n){return t.prev.next=n.next,n.next.prev=t.prev,t.prev=e,n.next=e.next,e.next=t,n.next.prev=n,!0}function D(e){delete e.lastInSequence,delete e.next.firstInSequence}function L(e){var t=e.next;e.lastInSequence=!0,t.firstInSequence=!0,t===Fi&&pt(Fi,void 0)}function R(e,t,n,i){k(e,t);var r=e.prev;r.lastInSequence&&(n?delete r.lastInSequence:e.firstInSequence=!0,i?delete t.firstInSequence:e.lastInSequence=!0)}function B(e,t){e.key=t,Wi[e.key]=e}function N(e,t,n){+t===t&&(e.index=t,n[t]=e,ki||(e.firstInSequence&&e.prev&&e.prev.index===t-1&&D(e.prev),e.lastInSequence&&e.next&&e.next.index===t+1&&D(e)))}function F(e,t){var n=t===Vi?E():I();return k(n,e),n}function z(e,t,n){var i=F(e,n);return i.firstInSequence=!0,i.lastInSequence=!0,N(i,t,n),i}function H(e,t){return z(e,t,Vi)}function W(e,t){var n=F(e,t);return delete e.firstInSequence,n.prev.index===n.index-1?delete n.prev.lastInSequence:n.firstInSequence=!0,N(n,e.index-1,t),n}function V(e,t){var n=F(e.next,t);return delete e.lastInSequence,n.next.index===n.index+1?delete n.next.firstInSequence:n.lastInSequence=!0,N(n,e.index+1,t),n}function j(e,t,n,i){R(e,t,n,i),Wi[e.key]=e,void 0!==e.index&&(Vi[e.index]=e)}function U(e){T(e),e.key&&delete Wi[e.key],void 0!==e.index&&Vi[e.index]===e&&delete Vi[e.index];var t=e.bindingMap;for(var n in t){var i=t[n].handle;i&&Hi[i]===e&&delete Hi[i]}Hi[e.handle]===e&&delete Hi[e.handle]}function q(e){return!Hi[e.handle]}function K(e,t,n,i,r){var s=r?null:t[e-1];if(s&&(s.next!==i||i.firstInSequence))s=s.next;else if(s=t[e+1],!s){s=n.next;for(var o;s.firstInSequence&&(o=s),e>=s.index&&s!==i;)s=s.next;s!==i||i.firstInSequence||(s=o&&void 0===o.index?o:void 0)}return s}function J(e){return!e.item&&!e.itemNew&&e!==Fi}function G(e,t){Object.defineProperty(e,"handle",{value:t,writable:!1,enumerable:!1,configurable:!0})}function $(e,t,n){G(e,n),Object.defineProperty(e,"index",{get:function(){for(;t.slotMergedWith;)t=t.slotMergedWith;return t.index},enumerable:!1,configurable:!0})}function Y(e){if(void 0===e)return e;var t=JSON.stringify(e);if(void 0===t)throw new r("WinJS.UI.ListDataSource.ObjectIsNotValidJson",v.objectIsNotValidJson);return t}function Z(t){return e.itemSignature?e.itemSignature(t.data):Y(t.data)}function X(t){var n=t.itemNew;t.itemNew=null,n&&(n=Object.create(n),$(n,t,t.handle),e.compareByIdentity||(t.signature=Z(n))),t.item=n,delete t.indexRequested,delete t.keyRequested}function Q(e){return e.bindingMap||e.cursorCount>0}function et(e){return Q(e)||e.fetchListeners||e.directFetchListeners}function tt(e){return et(e)||!e.firstInSequence&&Q(e.prev)||!e.lastInSequence&&Q(e.next)||!ur&&(!e.firstInSequence&&e.prev!==Ni&&!(e.prev.item||e.prev.itemNew))|(!e.lastInSequence&&e.next!==Fi&&!(e.next.item||e.next.itemNew))}function nt(e){L(e),U(e)}function it(){if(!Ci){(!Ui||q(Ui))&&(Ui=Fi.prev);for(var e=Ui.prev,t=Ui.next,n=0,i=function(e){e===Fi||tt(e)||(li>=n?n++:nt(e))};e||t;){if(e){var r=e;e=r.prev,r!==Ni&&i(r)}if(t){var s=t;t=s.next,s!==zi&&i(s)}}ji=0}}function rt(e){et(e)||(ji++,Ci||Ji||(Ui=e,ji>li&&!qi&&(qi=!0,c.schedule(function(){qi=!1,it()},c.Priority.idle,null,"WinJS.UI.VirtualizedDataSource.releaseSlotIfUnrequested"))))}function st(e){for(var t in di)e(di[t])}function ot(e,t){for(var n in e.bindingMap)t(e.bindingMap[n].bindingRecord,n)}function at(e){return e.notificationsSent||(e.notificationsSent=!0,e.notificationHandler.beginNotifications&&e.notificationHandler.beginNotifications()),e.notificationHandler}function lt(){yi||Ii||st(function(e){e.notificationsSent&&(e.notificationsSent=!1,e.notificationHandler.endNotifications&&e.notificationHandler.endNotifications())})}function ut(e,t){var n=e.bindingMap;if(n){var i=n[t];if(i){var r=i.handle;if(r)return r}}return e.handle}function ct(e,t){return e&&e.handle!==t&&(e=Object.create(e),G(e,t)),e}function ht(e){var t=Bi;Bi=e,st(function(e){e.notificationHandler&&e.notificationHandler.countChanged&&at(e).countChanged(Bi,t)})}function dt(e,t){ot(e,function(n,i){n.notificationHandler.indexChanged&&at(n).indexChanged(ut(e,i),e.index,t)})}function pt(e,t){var n=e.index;if(void 0!==n&&Vi[n]===e&&delete Vi[n],+t===t)N(e,t,Vi);else{if(+n!==n)return;delete e.index}dt(e,n)}function mt(e,t,n,i,r){var s={};if(!(!i&&t.lastInSequence||!r&&n.firstInSequence))if(t===Ni)if(n===Fi)for(var o in di)s[o]=di[o];else for(var o in n.bindingMap)s[o]=di[o];else if(n===Fi||n.bindingMap)for(var o in t.bindingMap)(n===Fi||n.bindingMap[o])&&(s[o]=di[o]);for(var o in e.bindingMap)s[o]=di[o];return s}function ft(e){var t,n=e.prev,i=e.next,r=mt(e,n,i);for(t in r){var s=r[t];s.notificationHandler&&at(s).inserted(s.itemPromiseFromKnownSlot(e),n.lastInSequence||n===Ni?null:ut(n,t),i.firstInSequence||i===Fi?null:ut(i,t))}}function _t(e){var t=e.item;X(e),ot(e,function(n,i){var r=ut(e,i);at(n).changed(ct(e.item,r),ct(t,r))})}function gt(e,t,n,i,r){var s,o=t.prev;if(t===e){if(!e.firstInSequence||!n)return;t=e.next}else if(o===e){if(!e.lastInSequence||!i)return;o=e.prev}if(!r){var a=mt(e,o,t,n,i);for(s in a){var l=a[s];at(l).moved(l.itemPromiseFromKnownSlot(e),(o.lastInSequence||o===e.prev)&&!n||o===Ni?null:ut(o,s),(t.firstInSequence||t===e.next)&&!i||t===Fi?null:ut(t,s))}st(function(t){t.adjustCurrentSlot(e)})}T(e),R(e,t,n,i)}function vt(e,t){kt(e,!0),ot(e,function(n,i){at(n).removed(ut(e,i),t)}),st(function(t){t.adjustCurrentSlot(e)}),U(e)}function yt(e){for(;!e.firstInSequence;)e=e.prev;var t;do{t=e.lastInSequence;var n=e.next;vt(e,!0),e=n}while(!t)}function bt(e){var t;if(!e)return t;for(var n=0;!e.firstInSequence;)n++,e=e.prev;return"number"==typeof e.indexNew?e.indexNew+n:"number"==typeof e.index?e.index+n:t}function wt(e,t){for(e=e.next;e;e=e.next)if(e.firstInSequence){var n=void 0!==e.indexNew?e.indexNew:e.index;void 0!==n&&(e.indexNew=n+t)}Ei+=t,ki=!0,Ji?xn():Pi++}function Ct(e,t){if(e.firstInSequence){var n;if(0>t)n=e.indexNew,void 0!==n?delete e.indexNew:n=e.index,e.lastInSequence||(e=e.next,void 0!==n&&(e.indexNew=n));else if(!e.lastInSequence){var i=e.next;n=i.indexNew,void 0!==n?delete i.indexNew:n=i.index,void 0!==n&&(e.indexNew=n)}}wt(e,t)}function xt(e,t){for(var n=Ni;n!==Fi;n=n.next){var i=n.indexNew;if(void 0!==i&&i>=e){wt(n,t);break}}}function St(){var e,t,n;for(e=Ni;;e=e.next){if(e.firstInSequence){if(t=e,void 0!==e.indexNew){if(n=e.indexNew,delete e.indexNew,isNaN(n))break}else n=e.index;e!==Ni&&e.prev.index===n-1&&D(e.prev)}if(e.lastInSequence)for(var i=n,r=t;r!==e.next;r=r.next)i!==r.index&&pt(r,i),+i===i&&i++;if(e===Fi)break}for(;e!==zi;e=e.next)void 0!==e.index&&e!==Fi&&pt(e,void 0);ki=!1,Ei&&+Bi===Bi&&(_i?_i.reset():ht(Bi+Ei),Ei=0)}function It(e,t,n,i,r){if(e.item)return new u(function(t){r?r(t,e.item):t(e.item)});var s={listBindingID:i,retained:!1};return e[t]||(e[t]={}),e[t][n]=s,s.promise=new u(function(e,t){s.complete=r?function(t){r(e,t)}:e,s.error=t},function(){for(;e.slotMergedWith;)e=e.slotMergedWith;var i=e[t];if(i){if(delete i[n],Object.keys(i).length>0)return;delete e[t]}rt(e)}),s.promise}function Et(e,t){for(var n in t)t[n].complete(e)}function kt(e,t){var n=e.fetchListeners,i=e.directFetchListeners;if(n||i){X(e);var r=e.item,s=function(e){t?Et(r,e):Di.push(function(){Et(r,e)})};i&&(e.directFetchListeners=null,s(i)),n&&(e.fetchListeners=null,s(n)),rt(e)}}function Tt(){var e=Di;Di=[];for(var t=0,n=e.length;n>t;t++)e[t]()}function Pt(e,t){var n=e.directFetchListeners;if(n){e.directFetchListeners=null;for(var i in n)n[i].error(t);rt(e)}}function At(e){return e.firstInSequence&&W(e,Vi),e.lastInSequence&&V(e,Vi),e.itemNew&&X(e),en(),e}function Mt(e){if(!e.firstInSequence){var t=e.prev;return t===Ni?null:At(t)}return At(W(e,Vi))}function Ot(e){if(!e.lastInSequence){var t=e.next;return t===Fi?null:At(t)}return At(V(e,Vi))}function Dt(e){return e?It(e,"directFetchListeners",(fi++).toString()):u.wrap(null)}function Lt(e){if("string"!=typeof e||!e)throw new r("WinJS.UI.ListDataSource.KeyIsInvalid",v.keyIsInvalid)}function Rt(e){var t=H(zi);return B(t,e),t.keyRequested=!0,t}function Bt(e,t){Lt(e);var n=Wi[e];return n||(n=Rt(e),n.hints=t),At(n)}function Nt(e){if("number"!=typeof e||0>e)throw new r("WinJS.UI.ListDataSource.IndexIsInvalid",v.indexIsInvalid);if(Fi.index<=e)return null;var t=Vi[e];if(!t){var n=K(e,Vi,Ni,Fi);if(!n)return null;n===Fi&&e>=Fi&&pt(Fi,void 0),t=n.prev.index===e-1?V(n.prev,Vi):n.index===e+1?W(n,Vi):H(n,e)}return t.item||(t.indexRequested=!0),At(t)}function Ft(e){var t=H(zi);return t.description=e,At(t)}function zt(e){if(ci=e,ui!==ci){var n=function(){hi=!1,ui!==ci&&(ui=ci,gr.dispatchEvent(y,ui))};ci===m.failure?n():hi||(hi=!0,t.setTimeout(n,40))}}function Ht(e){var t=e.fetchID;return t&&Oi[t]}function Wt(e,t){e.fetchID=t}function Vt(){var e=Mi;return Mi++,Oi[e]=!0,e}function jt(e,t,n){var i=Vt();Wt(e,i);for(var r=e;!r.firstInSequence&&t>0;)r=r.prev,t--,Wt(r,i);for(var s=e;!s.lastInSequence&&n>0;)s=s.next,n--,Wt(s,i);return i}function Ut(e){var t=e.items,n=e.offset,i=e.totalCount,r=e.absoluteIndex,s=e.atStart,o=e.atEnd;if(w(r)){if(w(i)){var a=t.length;r-n+a===i&&(o=!0)}n===r&&(s=!0)}s&&(t.unshift(Li),e.offset++),o&&t.push(Ri)}function qt(e,t,n){return delete Oi[n],t!==Pi||q(e)?(en(),!1):!0}function Kt(e,t,n,i){var o=Pi;n.then(function(n){if(!n.items||!n.items.length)return u.wrapError(new r(_.doesNotExist));var a="itemsFetched id="+t+" count="+n.items.length;s(a),qt(e,o,t)&&(+i===i&&(n.absoluteIndex=i),Ut(n),gn(e,n.items,n.offset,n.totalCount,n.absoluteIndex)),b(a)}).then(null,function(n){qt(e,o,t)&&vn(e,n)})}function Jt(e,t,n,i){var o=Pi;i.then(function(i){if(!i.items||!i.items.length)return u.wrapError(new r(_.doesNotExist));var a="itemsFetched id="+n+" count="+i.items.length;s(a),qt(t,o,n)&&(i.absoluteIndex=e,Ut(i),yn(e,t,i.items,i.offset,i.totalCount,i.absoluteIndex)),b(a)}).then(null,function(){qt(t,o,n)&&bn(e,t,o)})}function Gt(e,t){var n=jt(e,0,t-1);cr?Kt(e,n,cr(n,t),0):Kt(e,n,ur(n,0,0,t-1),0)}function $t(e,t){var n=jt(e,t-1,0);Kt(e,n,hr(n,t))}function Yt(e,t,n){var i=jt(e,t,n);Kt(e,i,lr(i,e.key,t,n,e.hints))}function Zt(e,t,n){var i=e.index;if(t>i&&(t=i),ur){var r=jt(e,t,n);Kt(e,r,ur(r,i,t,n),i)}else if(e.key)Yt(e,t,n);else{var s,o,a=Ni,l=i+1;for(s=e.prev;s!==Ni;s=s.prev)if(void 0!==s.index&&s.key){o=i-s.index,l>o&&(l=o,a=s);break}for(s=e.next;s!==Fi;s=s.next)if(void 0!==s.index&&s.key){o=s.index-i,l>o&&(l=o,a=s);break}if(a===Ni){var r=jt(e,0,i+1);Jt(0,e,r,cr(r,i+1))}else{var u=Math.max(a.index-i,0),c=Math.max(i-a.index,0),r=jt(a,u,c);Jt(a.index,e,r,lr(r,a.key,u,c,e.hints))}}}function Xt(e,t,n){var i=jt(e,t,n);Kt(e,i,dr(i,e.description,t,n))}function Qt(){if(!Ji){for(var e,t,n,i,r,s,o,a,l=!1,u=!1,c=Ni.next;c!==zi;){var h=c.next;if(c!==Fi&&J(c)&&(u=!0,e?t++:(e=c,t=1),Ht(c)&&(l=!0),c.keyRequested&&!n&&(n=c,i=t-1),void 0===c.description||r||(r=c,s=t-1),c.indexRequested&&!o&&(o=c,a=t-1),c.lastInSequence||h===zi||!J(h))){if(l)l=!1;else{if(gi=!1,!e.firstInSequence&&e.prev.key&&lr?Yt(e.prev,0,t):!c.lastInSequence&&h.key&&lr?Yt(h,t,0):e.prev!==Ni||e.firstInSequence||!cr&&!ur?h===Fi&&!c.lastInSequence&&hr?$t(c,t):n?Yt(n,i,t-1-i):r?Xt(r,s,t-1-s):o?Zt(o,a,t-1-a):"number"==typeof e.index?Zt(e,t-1,0):yt(e):Gt(e,t),gi)return void en();if(Ji)return}e=o=n=null}c=h}zt(u?m.waiting:m.ready)}}function en(){Ai||(Ai=!0,c.schedule(function(){Ai=!1,Qt(),lt()},c.Priority.max,null,"WinJS.UI.ListDataSource._fetch"))}function tn(t){var n=t.itemNew;if(!n)return!1;var i=t.item;for(var r in i)switch(r){case"data":break;default:if(i[r]!==n[r])return!0}return e.compareByIdentity?i.data!==n.data:t.signature!==Z(n)}function nn(e){et(e)?tn(e)?_t(e):e.itemNew=null:e.item=null}function rn(e){e.item?nn(e):kt(e)}function sn(e,t){e.key||B(e,t.key),e.itemNew=t,rn(e)}function on(e,t,n){var i=t.bindingMap;if(i)for(var r in n)if(i[r]){var s=t.fetchListeners;for(var o in s){var a=s[o];a.listBindingID===r&&a.retained&&(delete s[o],a.complete(null))}var l=i[r].bindingRecord;at(l).removed(ut(t,r),!0,ut(e,r)),t.bindingMap&&delete t.bindingMap[r]}}function an(e,t){if(e.index!==t.index){var n=t.index;t.index=e.index,dt(t,n)}t.slotMergedWith=e;var i=t.bindingMap;for(var r in i){e.bindingMap||(e.bindingMap={});var s=i[r];s.handle||(s.handle=t.handle),Hi[s.handle]=e,e.bindingMap[r]=s}st(function(n){n.adjustCurrentSlot(t,e)});var o=t.itemNew||t.item;if(o&&(o=Object.create(o),$(o,e,e.handle),sn(e,o)),e.item)t.directFetchListeners&&Di.push(function(){Et(e.item,t.directFetchListeners)}),t.fetchListeners&&Di.push(function(){Et(e.item,t.fetchListeners)});else{var a;for(a in t.directFetchListeners)e.directFetchListeners||(e.directFetchListeners={}),e.directFetchListeners[a]=t.directFetchListeners[a];for(a in t.fetchListeners)e.fetchListeners||(e.fetchListeners={}),e.fetchListeners[a]=t.fetchListeners[a]}e.itemNew&&kt(e),t.handle=(mi++).toString(),L(t),U(t)}function ln(e,t,n){t&&t.key&&(n||(n=t.itemNew||t.item),delete t.key,delete Wi[n.key],t.itemNew=null,t.item=null),n&&sn(e,n),t&&an(e,t)}function un(e){if("object"!=typeof e)throw new r("WinJS.UI.ListDataSource.InvalidItemReturned",v.invalidItemReturned);if(e===Li)return Ni;if(e===Ri)return Fi;if(e.key)return i.validation&&Lt(e.key),Wi[e.key];throw new r("WinJS.UI.ListDataSource.InvalidKeyReturned",v.invalidKeyReturned)}function cn(e,t){var n=un(t);n===e&&(n=null),n&&on(e,n,e.bindingMap),ln(e,n,t)}function hn(e,t,n,i){if(t&&e.key&&e.key!==t.key)return xn(),!1;var r=Vi[n];if(r)if(r===e)r=null;else{if(r.key&&(e.key||t&&r.key!==t.key))return xn(),!1;if(!e.key&&r.bindingMap)return!1}var s;if(t)if(s=Wi[t.key],s===e)s=null;else if(s&&s.bindingMap)return!1;return r?(on(e,r,e.bindingMap),delete Vi[n],pt(e,n),e.prev.index===n-1&&D(e.prev),e.next.index===n+1&&D(e),i.slotNext=r.slotNext,t||(t=r.itemNew||r.item,t&&(s=Wi[t.key]))):pt(e,n),s&&r!==s&&on(e,s,e.bindingMap),ln(e,s,t),r&&r!==s&&an(e,r),!0}function dn(e,t,n){if(t.key&&e.key&&t.key!==e.key)return xn(),!1;for(var i in e.bindingMap)n[i]=!0;return on(e,t,n),ln(e,t),!0}function pn(e,t){for(var n={};e;){var i=e.firstInSequence?null:e.prev;if(t.firstInSequence||t.prev!==Ni){if(t=t.firstInSequence?W(t,Vi):t.prev,!dn(t,e,n))return}else vt(e,!0);e=i}}function mn(e,t){for(var n={};e;){var i=e.lastInSequence?null:e.next;if(t.lastInSequence||t.next!==Fi){if(t=t.lastInSequence?V(t,Vi):t.next,!dn(t,e,n))return}else vt(e,!0);e=i}}function fn(e){for(var t=0;t<e.length;t++){var n=e[t];pn(n.slotBeforeSequence,n.slotFirstInSequence),mn(n.slotAfterSequence,n.slotLastInSequence)}}function _n(e,t){function n(t){for(var n=Fi.prev;!(n.index<e)&&n!==t;){var r=n.prev;void 0!==n.index&&vt(n,!0),n=r}i=0}for(var i=0,r=Fi.prev;!(r.index<e)||i>0;){var s=r.prev;if(r===Ni){n(Ni);break}if(r.key){if(r.index>=e)return xn(),!1;if(!(r.index>=t))return lr?Yt(r,0,i):Zt(r,0,i),!1;n(r)}else r.indexRequested||r.firstInSequence?n(s):i++;r=s}return!0}function gn(e,t,n,i,r){var o="WinJS.UI.ListDataSource.processResults";return s(o),r=x(r),i=S(i),Ci?void b(o):(ki&&St(),!w(i)&&i!==f.unknown||i===Bi||Fi.firstInSequence?(gi=!0,function(){var s,o,a,l,u=t.length;if("number"!=typeof r)for(s=0;u>s;s++)if(a=un(t[s]),a&&void 0!==a.index){r=a.index+n-s;break}"number"==typeof r&&t[u-1]===Ri?i=r-n+u-1:!w(i)||void 0!==r&&null!==r||(r=i-(u-1)+n),w(i)&&!_n(i,r-n)&&(i=void 0);var c=new Array(u);for(s=0;u>s;s++){var h=null;if(a=un(t[s])){if(s>0&&!a.firstInSequence&&a.prev.key&&a.prev.key!==t[s-1].key||"number"==typeof r&&void 0!==a.index&&a.index!==r-n+s)return void xn();(a===Ni||a===Fi||a.bindingMap)&&(h=a)}if("number"==typeof r&&(a=Vi[r-n+s])){if(a.key&&a.key!==t[s].key)return void xn();!h&&a.bindingMap&&(h=a)}if(s===n){if(e.key&&e.key!==t[s].key||"number"==typeof e.index&&"number"==typeof r&&e.index!==r)return void xn();h||(h=e)}c[s]=h}for(s=0;u>s;s++)a=c[s],a&&void 0!==a.index&&a!==Ni&&a!==Fi&&cn(a,t[s]);var d,p,m=[],f=!0;for(s=0;u>s;s++)if(a=c[s],a&&a!==Fi){var _=s;if(void 0===a.index){var g={};hn(a,t[s],r-n+s,g);var v,y=a,b=a;for(o=s-1;!y.firstInSequence&&(v=t[o],v!==Li);o--){var C=r-n+o;if(0>C)break;if(!hn(y.prev,v,C,g))break;y=y.prev,o>=0&&(c[o]=y)}for(o=s+1;!b.lastInSequence&&(v=t[o],v!==Ri&&o!==i||b.next===Fi)&&(b.next===Fi||hn(b.next,v,r-n+o,g))&&(b=b.next,u>o&&(c[o]=b),_=o,b!==Fi);o++);if(d=y.firstInSequence?null:y.prev,p=b.lastInSequence?null:b.next,d&&L(d),p&&L(b),"number"==typeof r){if(b===Fi)d&&O(Fi,P(d),d);else{var x=g.slotNext;x||(x=K(b.index,Vi,Ni,Fi,!0)),M(x,y,b)}y.prev.index===y.index-1&&D(y.prev),b.next.index===b.index+1&&D(b)}else f||(l=c[s-1],l&&(y.prev!==l&&(b===Fi?(d&&O(Fi,P(d),d),M(y,P(l),l)):O(l,y,b)),D(l)));if(f=!1,Ki)return;m.push({slotBeforeSequence:d,slotFirstInSequence:y,slotLastInSequence:b,slotAfterSequence:p})}s!==n||a===e||q(e)||(d=e.firstInSequence?null:e.prev,p=e.lastInSequence?null:e.next,on(a,e,a.bindingMap),an(a,e),m.push({slotBeforeSequence:d,slotFirstInSequence:a,slotLastInSequence:a,slotAfterSequence:p})),s=_}for(w(i)&&Fi.index!==i&&pt(Fi,i),fn(m),s=0;u>s;s++)if(a=c[s]){for(o=s-1;o>=0;o--){var S=c[o+1];cn(c[o]=S.firstInSequence?W(c[o+1],Vi):S.prev,t[o])}for(o=s+1;u>o;o++)l=c[o-1],a=c[o],a?a.firstInSequence&&(a.prev!==l&&O(l,a,A(a)),D(l)):cn(c[o]=l.lastInSequence?V(l,Vi):l.next,t[o]);break}delete e.description}(),Ki||(void 0!==i&&i!==Bi&&ht(i),en()),lt(),Tt(),void b(o)):(xn(),void b(o)))}function vn(e,t){switch(t.name){case _.noResponse:zt(m.failure),Pt(e,t);break;case _.doesNotExist:e.indexRequested?_n(e.index):(e.keyRequested||e.description)&&yt(e),lt(),xn()}}function yn(e,t,n,i,s,o){o=x(o),s=S(s);var a=e-i,l=n.length;if(t.index>=a&&t.index<a+l)gn(t,n,t.index-a,s,t.index);else if(i===l-1&&e<t.index||w(s)&&s<=t.index)vn(t,new r(_.doesNotExist));else if(t.index<a){var u=jt(t,0,a-t.index);Jt(a,t,u,lr(u,n[0].key,a-t.index,0))}else{var c=a+l-1,u=jt(t,t.index-c,0);Jt(c,t,u,lr(u,n[l-1].key,0,t.index-c))}}function bn(e,t,n){switch(n.name){case _.doesNotExist:e===Ni.index?(_n(0),vn(t,n)):xn();break;default:vn(t,n)}}function wn(){for(var e=0;e<mr.length&&"beginRefresh"!==mr[e].kind;e++);for(var t=e;t<mr.length&&"beginRefresh"!==mr[t].kind;t++);if(t>e&&t+(t-e)<mr.length){for(var n=!0,i=t-e,r=0;i>r;r++)if(mr[e+r].kind!==mr[t+r].kind){n=!1;break}if(n&&o.log){o.log(v.refreshCycleIdentified,"winjs vds","error");for(var r=e;t>r;r++)o.log(""+(r-e)+": "+JSON.stringify(mr[r]),"winjs vds","error")}return n}}function Cn(){return++pr>a&&wn()?void zt(m.failure):(mr[++fr%mr.length]={kind:"beginRefresh"},Xi={firstInSequence:!0,lastInSequence:!0,index:-1},Qi={firstInSequence:!0,lastInSequence:!0},Xi.next=Qi,Qi.prev=Xi,Yi=!1,Zi=void 0,er={},tr={},nr={},nr[-1]=Xi,void(ir={}))}function xn(){if(!Ki){if(Ki=!0,zt(m.waiting),Si)return Si=!1,void Xn();if(!Ci){var e=++Pi;Ji=!0,$i=0,c.schedule(function(){if(Pi===e){Ki=!1,Cn();for(var t=Ni.next;t!==zi;){var n=t.next;tt(t)||t===Fi||nt(t),t=n}Mn()}},c.Priority.high,null,"WinJS.VirtualizedDataSource.beginRefresh")}}}function Sn(){return Gi=Gi||new h,xn(),Gi.promise}function In(e,t){return delete Oi[t],e!==Pi?!1:($i--,!0)}function En(e,t,n,i,o){var a=Pi;$i++,i.then(function(t){if(!t.items||!t.items.length)return u.wrapError(new r(_.doesNotExist));var i="itemsFetched id="+n+" count="+t.items.length;s(i),In(a,n)&&(Ut(t),Nn(e,t.items,t.offset,t.totalCount,"number"==typeof o?o:t.absoluteIndex)),b(i)}).then(null,function(i){In(a,n)&&Fn(e,t,i)})}function kn(e,t,n,i){if(lr)En(e.key,!1,t,lr(t,e.key,n,i,e.hints));else{var r=10,s=e.index;nr[s]&&nr[s].firstInSequence?En(e.key,!1,t,ur(t,s-1,Math.min(n+r,s)-1,i+1+r),s-1):nr[s]&&nr[s].lastInSequence?En(e.key,!1,t,ur(t,s+1,Math.min(n+r,s)+1,i-1+r),s+1):En(e.key,!1,t,ur(t,s,Math.min(n+r,s),i+r),s)}}function Tn(e){cr?En(null,!0,e,cr(e,1),0):ur&&En(null,!0,e,ur(e,0,0,0),0)}function Pn(e){return Oi[er[e]]}function An(e,t){for(var n,i,r,s=3,o=Pi,a=0,l=e;l!==zi;l=l.next){if(!n&&l.key&&!ir[l.key]&&!Pn(l.key)){var u=tr[l.key];(!u||u.firstInSequence||u.lastInSequence)&&(n=l,i=u,r=Vt())}if(n){var c=Pn(l.key);if(ir[l.key]||tr[l.key]||c||(l.key&&(er[l.key]=r),a++),l.lastInSequence||l.next===Fi||c){if(kn(n,r,!i||i.firstInSequence?s:0,a-1+s),!t)break;n=null,a=0}}else l.key&&J(l)&&!ir[l.key]&&(tr[l.key]||(r=Vt(),En(l.key,!1,r,lr(r,l.key,1,1,l.hints))))}0!==$i||Yi||Pi!==o||Tn(Vt())}function Mn(){var e=Pi;do rr=!1,sr=!0,An(Ni.next,!0),sr=!1;while(0===$i&&rr&&Pi===e&&Ji);0===$i&&Pi===e&&Jn()}function On(e){var t=Pi;if(e){var n=Wi[e];n||(n=Ni.next);do or=!1,ar=!0,An(n,!1),ar=!1;while(or&&Pi===t&&Ji)}sr?rr=!0:0===$i&&Pi===t&&Mn()}function Dn(e){if("object"==typeof e&&e){if(e===Li)return Xi;if(e===Ri)return Qi;if(e.key)return tr[e.key];throw new r("WinJS.UI.ListDataSource.InvalidKeyReturned",v.invalidKeyReturned)}throw new r("WinJS.UI.ListDataSource.InvalidItemReturned",v.invalidItemReturned)}function Ln(e,t){for(;void 0===e.index;){if(N(e,t,nr),e.firstInSequence)return!0;e=e.prev,t--}return e.index!==t?(xn(),!1):!0}function Rn(e,t){e.key=t.key,tr[e.key]=e,e.item=t}function Bn(){for(var e=Qi;!e.firstInSequence;)if(e=e.prev,e===Xi)return null;return e}function Nn(e,t,n,i,r){r=x(r),i=S(i);var s=!1;Yi=!0;var o=r-n,a=t[0];a.key===e&&(s=!0);var l=Dn(a);if(l){if(+o===o&&!Ln(l,o))return}else{if(nr[o])return void xn();var u;if(void 0!==r&&(u=nr[o-1])){if(!u.lastInSequence)return void xn();l=V(u,nr)}else{var c=+o===o?K(o,nr,Xi,Qi):Bn(Xi,Qi);if(!c)return void xn();l=z(c,o,nr)}Rn(l,t[0])}for(var h=t.length,d=1;h>d;d++){a=t[d],a.key===e&&(s=!0);var p=Dn(a);if(p){if(void 0!==l.index&&!Ln(p,l.index+1))return;if(p!==l.next){if(!l.lastInSequence||!p.firstInSequence)return void xn();var m=A(p);if(m!==Qi)O(l,p,m);else{var _=P(l);if(_===Xi)return void xn();M(p,_,l)}D(l)}else l.lastInSequence&&D(l)}else{if(!l.lastInSequence)return void xn();p=V(l,nr),Rn(p,a)}l=p}if(s||(ir[e]=!0),!w(i)&&!Qi.firstInSequence){var g=Qi.prev.index;void 0!==g&&(i=g+1)}if(w(i)||i===f.unknown){if(w(Zi)){if(i!==Zi)return void xn()}else Zi=i;w(Zi)&&!nr[Zi]&&N(Qi,Zi,nr)}ar?or=!0:On(e)}function Fn(e,t,n){switch(n.name){case _.noResponse:zt(m.failure);break;case _.doesNotExist:t?(N(Qi,0,nr),Zi=0,Jn()):(ir[e]=!0,ar?or=!0:On(e))}}function zn(e){return e===Xi?Ni:e===Qi?Fi:Wi[e.key]}function Hn(e){return e===Ni?Xi:e===Fi?Qi:tr[e.key]}function Wn(e){D(e),e.next.mergedForRefresh=!0}function Vn(e,t){B(t,e.key),t.itemNew=e.item}function jn(e,t,n){var i=E();Vn(e,i),R(i,t,n,!n);var r=e.index;return+r!==r&&(r=n?i.prev.index+1:t.next.index-1),N(i,r,Vi),i}function Un(e,t,n){e?(on(e,t,e.bindingMap),ln(e,t,n.item)):(Vn(n,t),t.indexRequested&&rn(t))}function qn(e,t,n){return t.key?!1:(e?(n.mergeWithPrev=!t.firstInSequence,n.mergeWithNext=!t.lastInSequence):n.stationary=!0,Un(e,t,n),!0)}function Kn(e){var t;if(e.indexRequested)t=e.index;else{var n=Hn(e);n&&(t=n.index)}return t}function Jn(){pr=0,mr=new Array(100),fr=-1,ki=!0,er={};var e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v=[],y=[];for(m=0,a=Xi;a;a=a.next)a.sequenceNumber=m,a.firstInSequence&&(u=a),a.lastInSequence&&(y[m]={first:u,last:a,matchingItems:0},m++);for(Ui=null,ji=0,n=Ni.next;n!==zi;)a=tr[n.key],r=n.next,n!==Fi&&(tt(n)?n.key&&!a?vt(n,!1):0===Zi||n.indexRequested&&n.index>=Zi?vt(n,!0):n.item||n.keyRequested?n.itemNew=a.item:n.key&&(n.keyRequested||(delete Wi[n.key],delete n.key),n.itemNew=null):nt(n)),n=r;
for(n=Ni.next;n!==Fi;)r=n.next,n.indexRequested&&(a=nr[n.index],a&&Un(zn(a),n,a)),n=r;var b,w,C,x,S,I=0,E=[];for(c=0,n=Ni;n!==zi;n=n.next){if(n.firstInSequence)for(u=n,C=null,e=0;m>e;e++)E[e]=0;if(n.indexRequested&&(C=n),a=Hn(n),a&&E[a.sequenceNumber]++,n.lastInSequence){for(w=0,e=I;m>e;e++)w<E[e]&&(w=E[e],b=e);h={first:u,last:n,sequenceNew:w>0?y[b]:void 0,matchingItems:w},C&&(h.indexRequested=!0,h.stationarySlot=C),v[c]=h,n===Fi&&(x=c,S=h),c++,void 0!==y[b].first.index&&(I=b)}}v[0].sequenceNew!==y[0]&&(L(Ni),v[0].first=Ni.next,v.unshift({first:Ni,last:Ni,sequenceNew:y[0],matchingItems:1}),x++,c++);var k=!Fi.firstInSequence;for(S.sequenceNew!==y[m-1]&&(L(Fi.prev),S.last=Fi.prev,x++,v.splice(x,0,{first:Fi,last:Fi,sequenceNew:y[m-1],matchingItems:1}),c++,S=v[x]),e=0;c>e;e++)f=v[e].sequenceNew,f&&f.matchingItems<v[e].matchingItems&&(f.matchingItems=v[e].matchingItems,f.sequenceOld=v[e]);for(y[m-1].sequenceOld=S,S.stationarySlot=Fi,y[0].sequenceOld=v[0],v[0].stationarySlot=Ni,e=0;x>=e;e++)h=v[e],h.sequenceNew&&(p=h.sequenceNew.sequenceOld)===d&&d.last!==Fi?(Wn(p.last),p.last=h.last,delete v[e]):d=h;for(d=null,e=x;e>=0;e--)h=v[e],h&&(h.sequenceNew&&(p=h.sequenceNew.sequenceOld)===d&&h.last!==Fi?(Wn(h.last),p.first=h.first,delete v[e]):d=h);k&&delete Fi.mergedForRefresh;var T=[];for(e=x+1;c>e;e++)if(h=v[e],h&&(!h.sequenceNew||h.sequenceNew.sequenceOld!==h)){var P=!0,A=null,R=null,B=0;for(a=Hn(h.first),a&&(A=R=a,B=1),n=h.first;n!==h.last;n=n.next){var N=Hn(n.next);if(a&&N&&(a.lastInSequence||a.next!==N)){P=!1;break}a&&!A&&(A=R=a),N&&A&&(R=N,B++),a=N}if(P&&A&&void 0!==A.index){var F;A.firstInSequence||(s=zn(A.prev),s&&(F=s.index));var z;if(R.lastInSequence||(o=zn(R.next),o&&(z=o.index)),(!o||o.lastInSequence||o.mergedForRefresh)&&(void 0===F||void 0===z||z-F-1>=B)){for(h.locationJustDetermined=!0,a=A;a.locationJustDetermined=!0,a!==R;a=a.next);var u=zn(A),H=zn(R);T.push({slotBeforeSequence:u.firstInSequence?null:u.prev,slotFirstInSequence:u,slotLastInSequence:H,slotAfterSequence:H.lastInSequence?null:H.next})}}}for(e=0;c>e;e++)if(h=v[e],!(!h||h.indexRequested||h.locationJustDetermined||h.sequenceNew&&h.sequenceNew.sequenceOld===h)){h.sequenceNew=null,n=h.first;var W;do{if(W=n===h.last,r=n.next,n!==Ni&&n!==Fi&&n!==zi&&!n.item&&!n.keyRequested)if(vt(n,!0),h.first===n){if(h.last===n){delete v[e];break}h.first=n.next}else h.last===n&&(h.last=n.prev);n=r}while(!W)}for(e=0;m>e;e++){for(f=y[e],a=f.first;!zn(a)&&!a.lastInSequence;a=a.next);if(a.lastInSequence&&!zn(a))f.firstInner=f.lastInner=null;else{for(f.firstInner=a,a=f.last;!zn(a);a=a.prev);f.lastInner=a}}for(e=0;m>e;e++)if(f=y[e],f&&f.firstInner&&(h=f.sequenceOld)){var V=0;for(n=h.first;a=Hn(n),a&&a.sequenceNumber===f.firstInner.sequenceNumber&&(a.ordinal=V),!n.lastInSequence;n=n.next,V++);var j=[];for(a=f.firstInner;!0;a=a.next){if(V=a.ordinal,void 0!==V){for(var U=0,q=j.length-1;q>=U;){var K=Math.floor(.5*(U+q));j[K].ordinal<V?U=K+1:q=K-1}j[U]=a,U>0&&(a.predecessor=j[U-1])}if(a===f.lastInner)break}var G=[],$=j.length;for(a=j[$-1],t=$;t--;)a.stationary=!0,G[t]=a,a=a.predecessor;h.stationarySlot=zn(G[0]),a=G[0],n=zn(a),i=n.prev;for(var Y=n.firstInSequence;!a.firstInSequence;)if(a=a.prev,l=zn(a),!l||a.locationJustDetermined)for(;!Y&&i!==Ni&&(n=i,i=n.prev,Y=n.firstInSequence,!qn(l,n,a)););for(t=0;$-1>t;t++){a=G[t],n=zn(a);var l,Z=G[t+1],Q=null,et=zn(Z);for(r=n.next,a=a.next;a!==Z&&!Q&&n!==et;a=a.next)if(l=zn(a),!l||a.locationJustDetermined)for(;r!==et;){if(r.mergedForRefresh){Q=a.prev;break}if(n=r,r=n.next,qn(l,n,a))break}if(Q)for(i=et.prev,a=Z.prev;a!==Q&&et!==n;a=a.prev)if(l=zn(a),!l||a.locationJustDetermined)for(;i!==n&&(et=i,i=et.prev,!qn(l,et,a)););for(;r!==et;)n=r,r=n.next,n!==Ni&&J(n)&&!n.keyRequested&&vt(n)}for(a=G[$-1],n=zn(a),r=n.next,Y=n.lastInSequence;!a.lastInSequence;)if(a=a.next,l=zn(a),!l||a.locationJustDetermined)for(;!Y&&r!==Fi&&(n=r,r=n.next,Y=n.lastInSequence,!qn(l,n,a)););}for(e=0;m>e;e++)if(f=y[e],f.firstInner)for(i=null,a=f.firstInner;!0;a=a.next){if(n=zn(a)){if(!a.stationary){var it,rt=!1,st=!1;if(i)it=i.next,rt=!0;else{var ot;for(ot=f.firstInner;!ot.stationary&&ot!==f.lastInner;ot=ot.next);if(ot.stationary)it=zn(ot),st=!0;else if(_=a.index,0===_)it=Ni.next,rt=!0;else if(void 0===_)it=zi;else{it=Ni.next;for(var at=null;it.firstInSequence&&(at=it),!(_<it.index&&at||it===Fi);)it=it.next;!it.firstInSequence&&at&&(it=at)}}n.mergedForRefresh&&(delete n.mergedForRefresh,n.lastInSequence||(n.next.mergedForRefresh=!0)),rt=rt||a.mergeWithPrev,st=st||a.mergeWithNext;var ut=a.locationJustDetermined;gt(n,it,rt,st,ut),ut&&st&&(it.mergedForRefresh=!0)}i=n}if(a===f.lastInner)break}for(e=0;m>e;e++)if(f=y[e],f.firstInner)for(i=null,a=f.firstInner;!0;a=a.next){if(n=zn(a),!n){var ct;if(i)ct=i.next;else{var dt;for(dt=f.firstInner;!zn(dt);dt=dt.next);ct=zn(dt)}n=jn(a,ct,!!i);var N=Hn(ct);ct.mergedForRefresh||N&&N.locationJustDetermined||(X(n),ft(n))}if(i=n,a===f.lastInner)break}Vi=[];var mt=-1;for(n=Ni,g=0;n!==zi;g++){var r=n.next;if(n.firstInSequence&&(u=n,g=0),void 0===mt){var _t=Kn(n);void 0!==_t&&(mt=_t-g)}if(void 0!==mt&&!n.lastInSequence){var yt=Kn(n.next);if(void 0!==yt&&yt!==mt+g+1){L(n);for(var bt=!0,wt=n.next,Ct=!1;!Ct&&wt!==Fi;){var xt=wt.next;Ct=wt.lastInSequence,gt(wt,xt,!bt,!1),bt=!1,wt=xt}}}if(n.lastInSequence){_=mt;for(var St=u;St!==r;){var It=St.next;if(_>=Zi&&St!==Fi)vt(St,!0);else{var Et=Vi[_];_!==St.index?(delete Vi[_],pt(St,_)):+_===_&&Vi[_]!==St&&(Vi[_]=St),St.itemNew&&rn(St),Et&&(St.key?(on(St,Et,St.bindingMap),an(St,Et),+_===_&&(Vi[_]=St)):(on(Et,St,Et.bindingMap),an(Et,St),+_===_&&(Vi[_]=Et))),+_===_&&_++}St=It}mt=void 0}n=r}var kt,Pt=-2;for(n=Ni,g=0;n!==zi;g++){var r=n.next;if(n.firstInSequence&&(u=n,g=0),delete n.mergedForRefresh,n.lastInSequence)if(void 0===u.index){s=u.prev;var At;s&&(At=Hn(s))&&!At.lastInSequence&&(a=Hn(n))&&a.prev===At?(O(s,u,n),D(s)):n===Fi||kt||M(zi,u,n)}else{if(Pt<n.index&&!kt)Pt=n.index;else{for(o=Ni.next;o.index<n.index;o=o.next);for(var wt=u;wt!==r;){var xt=wt.next;a=Hn(wt),gt(wt,o,o.prev.index===wt.index-1,o.index===wt.index+1,a&&a.locationJustDetermined),wt=xt}}s=u.prev,s&&s.index===u.index-1&&D(s)}n===Fi&&(kt=!0),n=r}ki=!1,fn(T),void 0!==Zi&&Zi!==Bi&&ht(Zi),lt();var Mt=[];for(e=0;m>e;e++){f=y[e];var Ot=[];n=null,g=0;var Dt;for(a=f.first;a===Xi?Ot.push(Li):a===Qi?Ot.push(Ri):(Ot.push(a.item),n||(n=zn(a),Dt=g)),!a.lastInSequence;a=a.next,g++);n&&Mt.push({slot:n,results:Ot,offset:Dt})}for(Cn(),Ji=!1,Tt(),e=0;e<Mt.length;e++){var Lt=Mt[e];gn(Lt.slot,Lt.results,Lt.offset,Bi,Lt.slot.index)}if(Gi){var Rt=Gi;Gi=null,Rt.complete()}en()}function Gn(e,t,n,i,r,s,o){var a=wi.prev,l={prev:a,next:wi,applyEdit:e,editType:t,complete:n,error:i,keyUpdate:r};a.next=l,wi.prev=l,Ci=!0,(Ki||Ji)&&(Pi++,Ji=!1,Ki=!0),wi.next===l&&Xn(),l.failed||(s(),l.undo=o),yi||Qn()}function $n(){bi=!1;var e=wi.next.next;wi.next=e,e.prev=wi}function Yn(){for(;wi.prev!==wi;){var e=wi.prev;e.error&&e.error(new r(g.canceled)),e.undo&&!Ki&&e.undo(),wi.prev=e.prev}wi.next=wi,yi=!1,Qn()}function Zn(t){function n(){Si||(s?xi=!0:Xn())}function i(e){if(e){var i;if(o&&o.key!==e.key){var r=e.key;if(t.undo){if(i=o.slot){var a=i.key;a&&delete Wi[a],B(i,r),i.itemNew=e,i.item?(_t(i),lt()):kt(i)}}else o.key=r}else t.editType===vr.change&&(i.itemNew=e,s||nn(i))}$n(),t.complete&&t.complete(e),n()}function r(e){switch(e.Name){case g.noResponse:return zt(m.failure),Si=!0,void(bi=!1);case g.notPermitted:break;case g.noLongerMeaningful:xn()}t.failed=!0,$n(),Yn(),t.error&&t.error(e),n()}if(!bi){var s=!0,o=t.keyUpdate;e.beginEdits&&!vi&&(vi=!0,e.beginEdits()),bi=!0,t.applyEdit().then(i,r),s=!1}}function Xn(){for(;wi.next!==wi;)if(xi=!1,Zn(wi.next),!xi)return;ei()}function Qn(){St(),lt(),Tt(),wi.next===wi&&ei()}function ei(){Ci=!1,e.endEdits&&vi&&!yi&&(vi=!1,e.endEdits()),Ki?(Ki=!1,xn()):en()}function ti(e){return Lt(e),Wi[e]||Rt(e)}function ni(e,t,n,i,r){var s=E();return R(s,n,i,r),e&&B(s,e),s.itemNew=t,Ct(s,1),yi||Ii||(s.firstInSequence||"number"!=typeof s.prev.index?s.lastInSequence||"number"!=typeof s.next.index||N(s,s.next.index-1,Vi):N(s,s.prev.index+1,Vi)),X(s),ft(s),s}function ii(e,t,n,i,r){var s={key:e};return new u(function(e,o){Gn(r,vr.insert,e,o,s,function(){if(n){var e={key:s.key,data:t};s.slot=ni(s.key,e,n,i,!i)}},function(){var e=s.slot;e&&(Ct(e,-1),vt(e,!1))})})}function ri(e,t,n,i){return new u(function(r,s){var o,a,l,u;Gn(i,vr.move,r,s,null,function(){a=e.next,l=e.firstInSequence,u=e.lastInSequence;var i=e.prev;o=!("number"==typeof e.index||!l&&i.item||!u&&a.item),Ct(e,-1),gt(e,t,n,!n),Ct(e,1),o&&(L(i),l||pn(i,e),u||mn(a,e))},function(){o?xn():(Ct(e,-1),gt(e,a,!l,!u),Ct(e,1))})})}function si(){function e(){Ii||(St(),lt(),Tt())}this.invalidateAll=function(){return 0===Bi?(this.reload(),u.wrap()):Sn()},this.reload=function(){_i&&_i.cancel(),Gi&&Gi.cancel();for(var e=Ni.next;e!==zi;e=e.next){var t=e.fetchListeners;for(var n in t)t[n].promise.cancel();var i=e.directFetchListeners;for(var n in i)i[n].promise.cancel()}oi(),st(function(e){e.notificationHandler&&e.notificationHandler.reload()})},this.beginNotifications=function(){Ii=!0},this.inserted=function(t,n,i,r){if(Ci)xn();else{var s=t.key,o=Wi[n],a=Wi[i],l="string"==typeof n,u="string"==typeof i;if(l?a&&!a.firstInSequence&&(o=a.prev):u&&o&&!o.lastInSequence&&(a=o.next),(l||u)&&!o&&!a&&Ni.next===Fi)return void xn();if(Wi[s])return void xn();if(o&&a&&(o.next!==a||o.lastInSequence||a.firstInSequence))return void xn();if(o&&(o.keyRequested||o.indexRequested)||a&&(a.keyRequested||a.indexRequested))return void xn();if(o||a)ni(s,t,a?a:o.next,!!o,!!a);else if(Ni.next===Fi)ni(s,t,Ni.next,!0,!0);else{if(void 0===r)return void xn();xt(r,1)}e()}},this.changed=function(t){if(Ci)xn();else{var n=t.key,i=Wi[n];i&&(i.keyRequested?xn():(i.itemNew=t,i.item&&(_t(i),e())))}},this.moved=function(t,n,i,r,s){if(Ci)xn();else{var o=t.key,a=Wi[o],l=Wi[n],u=Wi[i];a&&a.keyRequested||l&&l.keyRequested||u&&u.keyRequested?xn():a?l&&u&&(l.next!==u||l.lastInSequence||u.firstInSequence)?xn():l||u?(Ct(a,-1),gt(a,u?u:l.next,!!l,!!u),Ct(a,1),e()):(Ct(a,-1),vt(a,!1),void 0!==r&&(s>r&&s--,xt(s,1)),e()):l||u?(void 0!==r&&(xt(r,-1),s>r&&s--),this.inserted(t,n,i,s)):void 0!==r&&(xt(r,-1),s>r&&s--,xt(s,1),e())}},this.removed=function(t,n){if(Ci)xn();else{var i;i="string"==typeof t?Wi[t]:Vi[n],i?i.keyRequested?xn():(Ct(i,-1),vt(i,!1),e()):void 0!==n&&(xt(n,-1),e())}},this.endNotifications=function(){Ii=!1,e()}}function oi(){zt(m.ready),_i=null,vi=!1,yi=!1,bi=!1,wi={},wi.next=wi,wi.prev=wi,Ci=!1,Si=!1,Ei=0,ki=!1,Ti=0,Oi={},Di=[],Bi=f.unknown,Ni={firstInSequence:!0,lastInSequence:!0,index:-1},Fi={firstInSequence:!0,lastInSequence:!0},zi={firstInSequence:!0,lastInSequence:!0},Ni.next=Fi,Fi.prev=Ni,Fi.next=zi,zi.prev=Fi,Hi={},Wi={},Vi={},Vi[-1]=Ni,ji=0,Ui=null,qi=!1,Ki=!1,Ji=!1,Gi=null}var ai,li,ui,ci,hi,di,pi,mi,fi,_i,gi,vi,yi,bi,wi,Ci,xi,Si,Ii,Ei,ki,Ti,Pi,Ai,Mi,Oi,Di,Li,Ri,Bi,Ni,Fi,zi,Hi,Wi,Vi,ji,Ui,qi,Ki,Ji,Gi,$i,Yi,Zi,Xi,Qi,er,tr,nr,ir,rr,sr,or,ar,lr,ur,cr,hr,dr,pr=0,mr=new Array(100),fr=-1;e.itemsFromKey&&(lr=function(t,n,i,r,o){var a="fetchItemsFromKey id="+t+" key="+n+" countBefore="+i+" countAfter="+r;s(a),mr[++fr%mr.length]={kind:"itemsFromKey",key:n,countBefore:i,countAfter:r};var l=e.itemsFromKey(n,i,r,o);return b(a),l}),e.itemsFromIndex&&(ur=function(t,n,i,r){var o="fetchItemsFromIndex id="+t+" index="+n+" countBefore="+i+" countAfter="+r;s(o),mr[++fr%mr.length]={kind:"itemsFromIndex",index:n,countBefore:i,countAfter:r};var a=e.itemsFromIndex(n,i,r);return b(o),a}),e.itemsFromStart&&(cr=function(t,n){var i="fetchItemsFromStart id="+t+" count="+n;s(i),mr[++fr%mr.length]={kind:"itemsFromStart",count:n};var r=e.itemsFromStart(n);return b(i),r}),e.itemsFromEnd&&(hr=function(t,n){var i="fetchItemsFromEnd id="+t+" count="+n;s(i),mr[++fr%mr.length]={kind:"itemsFromEnd",count:n};var r=e.itemsFromEnd(n);return b(i),r}),e.itemsFromDescription&&(dr=function(t,n,i,r){var o="fetchItemsFromDescription id="+t+" desc="+n+" countBefore="+i+" countAfter="+r;s(o),mr[++fr%mr.length]={kind:"itemsFromDescription",description:n,countBefore:i,countAfter:r};var a=e.itemsFromDescription(n,i,r);return b(o),a});var _r=++p,gr=this,vr={insert:"insert",change:"change",move:"move",remove:"remove"};if(!e)throw new r("WinJS.UI.ListDataSource.ListDataAdapterIsInvalid",v.listDataAdapterIsInvalid);li=e.compareByIdentity?0:200,n&&"number"==typeof n.cacheSize&&(li=n.cacheSize),e.setNotificationHandler&&(ai=new si,e.setNotificationHandler(ai)),ui=m.ready,hi=!1,di={},pi=0,mi=1,fi=0,Pi=0,Ai=!1,Mi=1,Li={},Ri={},oi(),this.createListBinding=function(e){function t(e){e&&e.cursorCount++}function n(e){e&&0===--e.cursorCount&&rt(e)}function i(e){t(e),n(d),d=e}function r(e,t){e===d&&(t||(t=!d||d.lastInSequence||d.next===Fi?null:d.next),i(t))}function s(e){var t=e.bindingMap,n=t[h].handle;delete e.bindingMap[h];var i=!0,r=!0;for(var s in t)if(i=!1,n&&t[s].handle===n){r=!1;break}n&&r&&delete Hi[n],i&&(e.bindingMap=null,rt(e))}function o(e,t){e.bindingMap||(e.bindingMap={});var n=e.bindingMap[h];if(n?n.count++:e.bindingMap[h]={bindingRecord:di[h],count:1},e.fetchListeners){var i=e.fetchListeners[t];i&&(i.retained=!0)}}function a(e){var t=Hi[e];if(t){var n=t.bindingMap[h];if(0===--n.count){var i=t.fetchListeners;for(var r in i){var o=i[r];o.listBindingID===h&&(o.retained=!1)}s(t)}}}function l(t){var n=ut(t,h),i=(fi++).toString(),r=It(t,"fetchListeners",i,h,function(e,t){e(ct(t,n))});return $(r,t,n),e&&(r.retain=function(){return m._retainItem(t,i),r},r.release=function(){m._releaseItem(n)}),r}function c(t){var n;return!p&&t?n=l(t):(p?(n=new u(function(){}),n.cancel()):n=u.wrap(null),G(n,null),e&&(n.retain=function(){return n},n.release=function(){})),i(t),n}var h=(pi++).toString(),d=null,p=!1;di[h]={notificationHandler:e,notificationsSent:!1,adjustCurrentSlot:r,itemPromiseFromKnownSlot:l};var m={_retainItem:function(e,t){o(e,t)},_releaseItem:function(e){a(e)},jumpToItem:function(e){return c(e?Hi[e.handle]:null)},current:function(){return c(d)},previous:function(){return c(d?Mt(d):null)},next:function(){return c(d?Ot(d):null)},releaseItem:function(e){this._releaseItem(e.handle)},release:function(){p=!0,n(d),d=null;for(var e=Ni.next;e!==zi;){var t=e.next,i=e.fetchListeners;for(var r in i){var o=i[r];o.listBindingID===h&&(o.promise.cancel(),delete i[r])}e.bindingMap&&e.bindingMap[h]&&s(e),e=t}delete di[h]}};return(cr||ur)&&(m.first=function(){return c(Ot(Ni))}),hr&&(m.last=function(){return c(Mt(Fi))}),lr&&(m.fromKey=function(e,t){return c(Bt(e,t))}),(ur||cr&&lr)&&(m.fromIndex=function(e){return c(Nt(e))}),dr&&(m.fromDescription=function(e){return c(Ft(e))}),m},this.invalidateAll=function(){return Sn()};var yr=function(e,t){var n=new h;e.then(function(e){n.complete(e)},function(e){n.error(e)});var i=n.promise.then(null,function(n){return"WinJS.UI.VirtualizedDataSource.resetCount"===n.name?(_i=null,e=t.getCount()):u.wrapError(n)}),s=0,o={get:function(){return s++,new u(function(e,t){i.then(e,t)},function(){0===--s&&(n.promise.cancel(),e.cancel(),o===_i&&(_i=null))})},reset:function(){n.error(new r("WinJS.UI.VirtualizedDataSource.resetCount"))},cancel:function(){n.promise.cancel(),e.cancel(),o===_i&&(_i=null)}};return o};this.getCount=function(){if(e.getCount){var t=this;return u.wrap().then(function(){if(yi||Ci)return Bi;var n;if(!_i){var i;n=e.getCount();var r;n.then(function(){_i===i&&(_i=null),r=!0},function(){_i===i&&(_i=null),r=!0}),Ei=0,r||(i=_i=yr(n,t))}return _i?_i.get():n}).then(function(e){if(!C(e)&&void 0!==e)throw new r("WinJS.UI.ListDataSource.InvalidRequestedCountReturned",v.invalidRequestedCountReturned);return e!==Bi&&(Bi===f.unknown?Bi=e:(ht(e),lt())),0===e&&(Ni.next!==Fi||Fi.next!==zi?xn():Ni.lastInSequence&&(D(Ni),Fi.index=0)),e}).then(null,function(e){return e.name===d.CountError.noResponse?(zt(m.failure),Bi):u.wrapError(e)})}return u.wrap(Bi)},lr&&(this.itemFromKey=function(e,t){return Dt(Bt(e,t))}),(ur||cr&&lr)&&(this.itemFromIndex=function(e){return Dt(Nt(e))}),dr&&(this.itemFromDescription=function(e){return Dt(Ft(e))}),this.beginEdits=function(){yi=!0},e.insertAtStart&&(this.insertAtStart=function(t,n){return ii(t,n,Ni.lastInSequence?null:Ni.next,!0,function(){return e.insertAtStart(t,n)})}),e.insertBefore&&(this.insertBefore=function(t,n,i){var r=ti(i);return ii(t,n,r,!1,function(){return e.insertBefore(t,n,i,bt(r))})}),e.insertAfter&&(this.insertAfter=function(t,n,i){var r=ti(i);return ii(t,n,r?r.next:null,!0,function(){return e.insertAfter(t,n,i,bt(r))})}),e.insertAtEnd&&(this.insertAtEnd=function(t,n){return ii(t,n,Fi.firstInSequence?null:Fi,!1,function(){return e.insertAtEnd(t,n)})}),e.change&&(this.change=function(t,n){var i=ti(t);return new u(function(r,s){var o;Gn(function(){return e.change(t,n,bt(i))},vr.change,r,s,null,function(){o=i.item,i.itemNew={key:t,data:n},o?_t(i):kt(i)},function(){o?(i.itemNew=o,_t(i)):xn()})})}),e.moveToStart&&(this.moveToStart=function(t){var n=ti(t);return ri(n,Ni.next,!0,function(){return e.moveToStart(t,bt(n))})}),e.moveBefore&&(this.moveBefore=function(t,n){var i=ti(t),r=ti(n);return ri(i,r,!1,function(){return e.moveBefore(t,n,bt(i),bt(r))})}),e.moveAfter&&(this.moveAfter=function(t,n){var i=ti(t),r=ti(n);return ri(i,r.next,!0,function(){return e.moveAfter(t,n,bt(i),bt(r))})}),e.moveToEnd&&(this.moveToEnd=function(t){var n=ti(t);return ri(n,Fi,!1,function(){return e.moveToEnd(t,bt(n))})}),e.remove&&(this.remove=function(t){Lt(t);var n=Wi[t];return new u(function(i,r){var s,o,a;Gn(function(){return e.remove(t,bt(n))},vr.remove,i,r,null,function(){n&&(s=n.next,o=n.firstInSequence,a=n.lastInSequence,Ct(n,-1),vt(n,!1))},function(){n&&(j(n,s,!o,!a),Ct(n,1),ft(n))})})}),this.endEdits=function(){yi=!1,Qn()}}var a=100,p=1,m=d.DataSourceStatus,f=d.CountResult,_=d.FetchError,g=d.EditError,v={get listDataAdapterIsInvalid(){return"Invalid argument: listDataAdapter must be an object or an array."},get indexIsInvalid(){return"Invalid argument: index must be a non-negative integer."},get keyIsInvalid(){return"Invalid argument: key must be a string."},get invalidItemReturned(){return"Error: data adapter returned item that is not an object."},get invalidKeyReturned(){return"Error: data adapter returned item with undefined or null key."},get invalidIndexReturned(){return"Error: data adapter should return undefined, null or a non-negative integer for the index."},get invalidCountReturned(){return"Error: data adapter should return undefined, null, CountResult.unknown, or a non-negative integer for the count."},get invalidRequestedCountReturned(){return"Error: data adapter should return CountResult.unknown, CountResult.failure, or a non-negative integer for the count."},get refreshCycleIdentified(){return"refresh cycle found, likely data inconsistency"}},y="statuschanged",b=n.Class.define(function(){},{_baseDataSourceConstructor:e,_isVirtualizedDataSource:!0},{supportedForProcessing:!1});return n.Class.mix(b,s.eventMixin),b})})}),i("WinJS/VirtualizedDataSource/_GroupDataSource",["exports","../Core/_Base","../Core/_ErrorFromName","../Promise","../Scheduler","../Utilities/_UI","./_VirtualizedDataSourceImpl"],function(e,t,n,i,r,s,o){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupDataSource:t.Namespace._lazy(function(){function e(){return new n(s.FetchError.doesNotExist)}function a(e){return e&&e.firstReached&&e.lastReached}var l=101,u=t.Class.define(function(e){this._groupDataAdapter=e},{beginNotifications:function(){},inserted:function(e,t,n){this._groupDataAdapter._inserted(e,t,n)},changed:function(e,t){this._groupDataAdapter._changed(e,t)},moved:function(e,t,n){this._groupDataAdapter._moved(e,t,n)},removed:function(e,t){this._groupDataAdapter._removed(e,t)},countChanged:function(e,t){0===e&&0!==t&&this._groupDataAdapter.invalidateGroups()},indexChanged:function(e,t,n){this._groupDataAdapter._indexChanged(e,t,n)},endNotifications:function(){this._groupDataAdapter._endNotifications()},reload:function(){this._groupDataAdapter._reload()}},{supportedForProcessing:!1}),c=t.Class.define(function(e,t,n,i){this._listBinding=e.createListBinding(new u(this)),this._groupKey=t,this._groupData=n,this._initializeState(),this._batchSize=l,this._count=null,i&&("number"==typeof i.groupCountEstimate&&(this._count=i.groupCountEstimate<0?null:Math.max(i.groupCountEstimate,1)),"number"==typeof i.batchSize&&(this._batchSize=i.batchSize+1)),this._listBinding.last&&(this.itemsFromEnd=function(e){var t=this;return this._fetchItems(function(){return t._lastGroup},function(e){if(e)return!1;var n=t._count;return+n!==n?!0:n>0?!0:void 0},function(){t._fetchBatch(t._listBinding.last(),t._batchSize-1,0)},e-1,0)})},{setNotificationHandler:function(e){this._listDataNotificationHandler=e},compareByIdentity:!0,itemsFromKey:function(e,t,n,i){var r=this;return this._fetchItems(function(){return r._keyMap[e]},function(){var e=r._lastGroup;return e?+e.index!==e.index?!0:void 0:!0},function(){i=i||{};var e="string"==typeof i.groupMemberKey&&r._listBinding.fromKey?r._listBinding.fromKey(i.groupMemberKey):"number"==typeof i.groupMemberIndex&&r._listBinding.fromIndex?r._listBinding.fromIndex(i.groupMemberIndex):void 0!==i.groupMemberDescription&&r._listBinding.fromDescription?r._listBinding.fromDescription(i.groupMemberDescription):r._listBinding.first(),t=Math.floor(.5*(r._batchSize-1));r._fetchBatch(e,t,r._batchSize-1-t)},t,n)},itemsFromIndex:function(e,t,n){var i=this;return this._fetchItems(function(){return i._indexMap[e]},function(){var t=i._lastGroup;return t?+t.index!==t.index?!0:e<=t.index?!0:void 0:!0},function(){i._fetchNextIndex()},t,n)},getCount:function(){if(this._lastGroup&&"number"==typeof this._lastGroup.index)return i.wrap(this._count);var e=this,t=new i(function(t){var n={initialBatch:function(){e._fetchNextIndex()},getGroup:function(){return null},countBefore:0,countAfter:0,complete:function(n){n&&(e._count=0);var i=e._count;return"number"==typeof i?(t(i),!0):!1}};e._fetchQueue.push(n),e._itemBatch||e._continueFetch(n)});return"number"==typeof this._count?i.wrap(this._count):t},invalidateGroups:function(){this._beginRefresh(),this._initializeState()},_initializeState:function(){this._count=null,this._indexMax=null,this._keyMap={},this._indexMap={},this._lastGroup=null,this._handleMap={},this._fetchQueue=[],this._itemBatch=null,this._itemsToFetch=0,this._indicesChanged=!1},_releaseItem:function(e){delete this._handleMap[e.handle],this._listBinding.releaseItem(e)},_processBatch:function(){for(var e=null,t=null,n=null,i=0,s=!0,o=0;o<this._batchSize;o++){var a=this._itemBatch[o],l=a?this._groupKey(a):null;if(a&&(s=!1),t&&null!==l&&l===t.key)i++,t.lastItem===e?(t.lastItem.handle!==t.firstItem.handle&&this._releaseItem(t.lastItem),t.lastItem=a,this._handleMap[a.handle]=t,t.size++):t.firstItem===a&&(t.firstItem.handle!==t.lastItem.handle&&this._releaseItem(t.firstItem),t.firstItem=n,this._handleMap[n.handle]=t,t.size+=i);else{var u=null;if(t&&(t.lastReached=!0,"number"==typeof t.index&&(u=t.index+1)),a){var c=this._keyMap[l];if(c||(c={key:l,data:this._groupData(a),firstItem:a,lastItem:a,size:1},this._keyMap[c.key]=c,this._handleMap[a.handle]=c),o>0&&(c.firstReached=!0,t||(u=0)),"number"!=typeof c.index&&"number"==typeof u){for(var h=c;h;h=this._nextGroup(h))h.index=u,this._indexMap[u]=h,u++;this._indexMax=u,"number"==typeof this._count&&!this._lastGroup&&this._count<=this._indexMax&&(this._count=this._indexMax+1)}n=a,i=0,t=c}else t&&(this._lastGroup=t,"number"==typeof t.index&&(this._count=t.index+1),this._listDataNotificationHandler.invalidateAll(),t=null)}e=a}var d;for(d=this._fetchQueue[0];d&&d.complete(s);d=this._fetchQueue[0])this._fetchQueue.splice(0,1);if(d){var p=this;r.schedule(function(){p._continueFetch(d)},r.Priority.normal,null,"WinJS.UI._GroupDataSource._continueFetch")}else this._itemBatch=null},_processPromise:function(e,t){e.retain(),this._itemBatch[t]=e;var n=this;e.then(function(e){n._itemBatch[t]=e,0===--n._itemsToFetch&&n._processBatch()})},_fetchBatch:function(e,t){this._itemBatch=new Array(this._batchSize),this._itemsToFetch=this._batchSize,this._processPromise(e,t);var n;for(this._listBinding.jumpToItem(e),n=t-1;n>=0;n--)this._processPromise(this._listBinding.previous(),n);for(this._listBinding.jumpToItem(e),n=t+1;n<this._batchSize;n++)this._processPromise(this._listBinding.next(),n)},_fetchAdjacent:function(e,t){this._fetchBatch(this._listBinding.fromKey?this._listBinding.fromKey(e.key):this._listBinding.fromIndex(e.index),t?0:this._batchSize-1,t?this._batchSize-1:0)},_fetchNextIndex:function(){var e=this._indexMap[this._indexMax-1];e?this._fetchAdjacent(e.lastItem,!0):this._fetchBatch(this._listBinding.first(),1,this._batchSize-2)},_continueFetch:function(e){if(e.initialBatch)e.initialBatch(),e.initialBatch=null;else{var t=e.getGroup();if(t){var n,i;t.firstReached?t.lastReached?e.countBefore>0&&0!==t.index&&!a(n=this._previousGroup(t))?this._fetchAdjacent(n&&n.lastReached?n.firstItem:t.firstItem,!1):(i=this._nextGroup(t),this._fetchAdjacent(i&&i.firstReached?i.lastItem:t.lastItem,!0)):this._fetchAdjacent(t.lastItem,!0):this._fetchAdjacent(t.firstItem,!1)}else this._fetchNextIndex()}},_fetchComplete:function(e,t,n,i,r){if(a(e)){var o=this._previousGroup(e);if(i||a(o)||0===e.index||0===t){var l=this._nextGroup(e);if(i||a(l)||this._lastGroup===e||0===n){for(var u=0,c=e;t>u&&(o=this._previousGroup(c),a(o));)c=o,u++;for(var h=0,d=e;n>h&&(l=this._nextGroup(d),a(l));)d=l,h++;for(var p=u+1+h,m=new Array(p),f=0;p>f;f++){var _={key:c.key,data:c.data,firstItemKey:c.firstItem.key,groupSize:c.size},g=c.firstItem.index;"number"==typeof g&&(_.firstItemIndexHint=g),m[f]=_,c=this._nextGroup(c)}var v={items:m,offset:u};return v.totalCount="number"==typeof this._count?this._count:s.CountResult.unknown,"number"==typeof e.index&&(v.absoluteIndex=e.index),d===this._lastGroup&&(v.atEnd=!0),r(v),!0}}}return!1},_fetchItems:function(t,n,r,s,o){var a=this;return new i(function(i,l){function u(r){var u=t();return u?a._fetchComplete(u,s,o,h,i,l):h&&!n(r)?(l(e()),!0):d>2?(l(e()),!0):(r?d++:d=0,!1)}var c=t(),h=!c,d=0;if(!u()){var p={initialBatch:h?r:null,getGroup:t,countBefore:s,countAfter:o,complete:u};a._fetchQueue.push(p),a._itemBatch||a._continueFetch(p)}})},_previousGroup:function(e){return e&&e.firstReached?(this._listBinding.jumpToItem(e.firstItem),this._handleMap[this._listBinding.previous().handle]):null},_nextGroup:function(e){return e&&e.lastReached?(this._listBinding.jumpToItem(e.lastItem),this._handleMap[this._listBinding.next().handle]):null},_invalidateIndices:function(e){this._count=null,this._lastGroup=null,"number"==typeof e.index&&(this._indexMax=e.index>0?e.index:null);for(var t=e;t&&"number"==typeof t.index;t=this._nextGroup(t))delete this._indexMap[t.index],t.index=null},_releaseGroup:function(e){this._invalidateIndices(e),delete this._keyMap[e.key],this._lastGroup===e&&(this._lastGroup=null),e.firstItem!==e.lastItem&&this._releaseItem(e.firstItem),this._releaseItem(e.lastItem)},_beginRefresh:function(){if(this._fetchQueue=[],this._itemBatch){for(var e=0;e<this._batchSize;e++){var t=this._itemBatch[e];t&&(t.cancel&&t.cancel(),this._listBinding.releaseItem(t))}this._itemBatch=null}this._itemsToFetch=0,this._listDataNotificationHandler.invalidateAll()},_processInsertion:function(e,t,n){var i=this._handleMap[t],r=this._handleMap[n],s=null;i&&(i.lastReached&&t===i.lastItem.handle&&(s=this._groupKey(e))!==i.key?this._lastGroup===i&&(this._lastGroup=null,this._count=null):this._releaseGroup(i),this._beginRefresh()),r&&r!==i&&(this._invalidateIndices(r),r.firstReached&&n===r.firstItem.handle&&(null!==s?s:this._groupKey(e))!==r.key||this._releaseGroup(r),this._beginRefresh())},_processRemoval:function(e){var t=this._handleMap[e];if(!t||e!==t.firstItem.handle&&e!==t.lastItem.handle){if(this._itemBatch)for(var n=0;n<this._batchSize;n++){var i=this._itemBatch[n];if(i&&i.handle===e){this._beginRefresh();break}}}else this._releaseGroup(t),this._beginRefresh()},_inserted:function(e,t,n){var i=this;e.then(function(e){i._processInsertion(e,t,n)})},_changed:function(e,t){var n=this._handleMap[e.handle];if(n&&e.handle===n.firstItem.handle&&(this._releaseGroup(n),this._beginRefresh()),this._groupKey(e)!==this._groupKey(t)){this._listBinding.jumpToItem(e);var i=this._listBinding.previous().handle;this._listBinding.jumpToItem(e);var r=this._listBinding.next().handle;this._processRemoval(e.handle),this._processInsertion(e,i,r)}},_moved:function(e,t,n){this._processRemoval(e.handle);var i=this;e.then(function(e){i._processInsertion(e,t,n)})},_removed:function(e,t){t||this._processRemoval(e)},_indexChanged:function(e,t,n){"number"==typeof n&&(this._indicesChanged=!0)},_endNotifications:function(){if(this._indicesChanged){this._indicesChanged=!1;for(var e in this._keyMap){var t=this._keyMap[e];if(t.firstReached&&t.lastReached){var n=t.lastItem.index+1-t.firstItem.index;isNaN(n)||(t.size=n)}}this._beginRefresh()}},_reload:function(){this._initializeState(),this._listDataNotificationHandler.reload()}},{supportedForProcessing:!1});return t.Class.derive(o.VirtualizedDataSource,function(e,t,n,i){var r=new c(e,t,n,i);this._baseDataSourceConstructor(r),this.extensions={invalidateGroups:function(){r.invalidateGroups()}}},{},{supportedForProcessing:!1})})})}),i("WinJS/VirtualizedDataSource/_GroupedItemDataSource",["../Core/_Base","./_GroupDataSource"],function(e,t){"use strict";e.Namespace.define("WinJS.UI",{computeDataSourceGroups:function(e,n,i,r){function s(e){if(e){var t=Object.create(e);return t.groupKey=n(e),i&&(t.groupData=i(e)),t}return null}function o(e){var t=Object.create(e);return t.then=function(t,n,i){return e.then(function(e){return t(s(e))},n,i)},t}var a=Object.create(e);a.createListBinding=function(t){var n;t?(n=Object.create(t),n.inserted=function(e,n,i){return t.inserted(o(e),n,i)},n.changed=function(e,n){return t.changed(s(e),s(n))},n.moved=function(e,n,i){return t.moved(o(e),n,i)}):n=null;for(var i=e.createListBinding(n),r=Object.create(i),a=["first","last","fromDescription","jumpToItem","current"],l=0,u=a.length;u>l;l++)!function(e){i[e]&&(r[e]=function(){return o(i[e].apply(i,arguments))})}(a[l]);return i.fromKey&&(r.fromKey=function(e){return o(i.fromKey(e))}),i.fromIndex&&(r.fromIndex=function(e){return o(i.fromIndex(e))}),r.prev=function(){return o(i.prev())},r.next=function(){return o(i.next())},r};for(var l=["itemFromKey","itemFromIndex","itemFromDescription","insertAtStart","insertBefore","insertAfter","insertAtEnd","change","moveToStart","moveBefore","moveAfter","moveToEnd"],u=0,c=l.length;c>u;u++)!function(t){e[t]&&(a[t]=function(){return o(e[t].apply(e,arguments))})}(l[u]);["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]&&(a[t]=function(){return e[t].apply(e,arguments)})});var h=null;return Object.defineProperty(a,"groups",{get:function(){return h||(h=new t._GroupDataSource(e,n,i,r)),h},enumerable:!0,configurable:!0}),a}})}),i("WinJS/VirtualizedDataSource/_StorageDataSource",["exports","../Core/_WinRT","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_WriteProfilerMark","../Animations","../Promise","../Utilities/_UI","./_VirtualizedDataSourceImpl"],function(e,t,n,i,r,s,o,a,l,u){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{StorageDataSource:i.Namespace._lazy(function(){var e=i.Class.define(function(e,n){s("WinJS.UI.StorageDataSource:constructor,StartTM");var i,r=t.Windows.Storage.FileProperties.ThumbnailMode.singleItem,o=256,a=t.Windows.Storage.FileProperties.ThumbnailOptions.useCurrentScale,l=!0;if("Pictures"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.picturesView,i=t.Windows.Storage.KnownFolders.picturesLibrary,o=190):"Music"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.musicView,i=t.Windows.Storage.KnownFolders.musicLibrary,o=256):"Documents"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.documentsView,i=t.Windows.Storage.KnownFolders.documentsLibrary,o=40):"Videos"===e&&(r=t.Windows.Storage.FileProperties.ThumbnailMode.videosView,i=t.Windows.Storage.KnownFolders.videosLibrary,o=190),i){var u=new t.Windows.Storage.Search.QueryOptions;u.folderDepth=t.Windows.Storage.Search.FolderDepth.deep,u.indexerOption=t.Windows.Storage.Search.IndexerOption.useIndexerWhenAvailable,this._query=i.createFileQueryWithOptions(u)
}else this._query=e;if(n){if("number"==typeof n.mode&&(r=n.mode),"number"==typeof n.requestedThumbnailSize)o=Math.max(1,Math.min(n.requestedThumbnailSize,1024));else switch(r){case t.Windows.Storage.FileProperties.ThumbnailMode.picturesView:case t.Windows.Storage.FileProperties.ThumbnailMode.videosView:o=190;break;case t.Windows.Storage.FileProperties.ThumbnailMode.documentsView:case t.Windows.Storage.FileProperties.ThumbnailMode.listView:o=40;break;case t.Windows.Storage.FileProperties.ThumbnailMode.musicView:case t.Windows.Storage.FileProperties.ThumbnailMode.singleItem:o=256}"number"==typeof n.thumbnailOptions&&(a=n.thumbnailOptions),"boolean"==typeof n.waitForFileLoad&&(l=!n.waitForFileLoad)}this._loader=new t.Windows.Storage.BulkAccess.FileInformationFactory(this._query,r,o,a,l),this.compareByIdentity=!1,this.firstDataRequest=!0,s("WinJS.UI.StorageDataSource:constructor,StopTM")},{setNotificationHandler:function(e){this._notificationHandler=e,this._query.addEventListener("contentschanged",function(){e.invalidateAll()}),this._query.addEventListener("optionschanged",function(){e.invalidateAll()})},itemsFromEnd:function(e){var t=this;return s("WinJS.UI.StorageDataSource:itemsFromEnd,info"),this.getCount().then(function(n){return 0===n?a.wrapError(new r(l.FetchError.doesNotExist)):t.itemsFromIndex(n-1,Math.min(n-1,e-1),1)})},itemsFromIndex:function(e,t,n){function i(e){c._notificationHandler.changed(c._item(e.target))}t+n>64&&(t=Math.min(t,32),n=64-(t+1));var o=e-t,u=t+1+n,c=this;c.firstDataRequest&&(c.firstDataRequest=!1,u=Math.max(u,32));var h="WinJS.UI.StorageDataSource:itemsFromIndex("+o+"-"+(o+u-1)+")";return s(h+",StartTM"),this._loader.getItemsAsync(o,u).then(function(n){var d=n.size;if(t>=d)return a.wrapError(new r(l.FetchError.doesNotExist));var p=new Array(d),m=new Array(d);n.getMany(0,m);for(var f=0;d>f;f++)p[f]=c._item(m[f]),m[f].addEventListener("propertiesupdated",i);var _={items:p,offset:t,absoluteIndex:e};return u>d&&(_.totalCount=o+d),s(h+",StopTM"),_})},itemsFromDescription:function(e,t,n){var i=this;return s("WinJS.UI.StorageDataSource:itemsFromDescription,info"),this._query.findStartIndexAsync(e).then(function(e){return i.itemsFromIndex(e,t,n)})},getCount:function(){return s("WinJS.UI.StorageDataSource:getCount,info"),this._query.getItemCountAsync()},itemSignature:function(e){return e.folderRelativeId},_item:function(e){return{key:e.path||e.folderRelativeId,data:e}}},{supportedForProcessing:!1});return i.Class.derive(u.VirtualizedDataSource,function(t,n){this._baseDataSourceConstructor(new e(t,n))},{},{loadThumbnail:function(e,i){var r,l,u=!1;return new a(function(c){var h=i?!0:!1,d=function(d){if(d){var p=n.URL.createObjectURL(d,{oneTimeOnly:!0});l=l?l.then(function(t){return e.loadImage(p,t)}):e.loadImage(p,i).then(function(t){return e.isOnScreen().then(function(e){var n;return e&&h?n=o.fadeIn(t).then(function(){return t}):(t.style.opacity=1,n=a.wrap(t)),n})}),d.type===t.Windows.Storage.FileProperties.ThumbnailType.icon||d.returnedSmallerCachedSize||(s("WinJS.UI.StorageDataSource:loadThumbnail complete,info"),e.data.removeEventListener("thumbnailupdated",r),u=!1,l=l.then(function(e){r=null,l=null,c(e)}))}};r=function(e){u&&d(e.target.thumbnail)},e.data.addEventListener("thumbnailupdated",r),u=!0,d(e.data.thumbnail)},function(){e.data.removeEventListener("thumbnailupdated",r),u=!1,r=null,l&&(l.cancel(),l=null)})},supportedForProcessing:!1})})})}),i("WinJS/VirtualizedDataSource",["./VirtualizedDataSource/_VirtualizedDataSourceImpl","./VirtualizedDataSource/_GroupDataSource","./VirtualizedDataSource/_GroupedItemDataSource","./VirtualizedDataSource/_StorageDataSource"],function(){}),i("require-style",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),i("require-style!less/desktop/styles-intrinsic",[],function(){}),i("require-style!less/desktop/colors-intrinsic",[],function(){}),i("require-style!less/phone/styles-intrinsic",[],function(){}),i("require-style!less/phone/colors-intrinsic",[],function(){}),i("WinJS/Controls/IntrinsicControls",["../Utilities/_Hoverable","require-style!less/desktop/styles-intrinsic","require-style!less/desktop/colors-intrinsic","require-style!less/phone/styles-intrinsic","require-style!less/phone/colors-intrinsic"],function(){}),i("WinJS/Controls/ItemContainer/_Constants",["exports","../../Core/_Base"],function(e,t){"use strict";var n={};n._listViewClass="win-listview",n._listViewSupportsCrossSlideClass="win-listview-supports-cross-slide",n._viewportClass="win-viewport",n._rtlListViewClass="win-rtl",n._horizontalClass="win-horizontal",n._verticalClass="win-vertical",n._scrollableClass="win-surface",n._itemsContainerClass="win-itemscontainer",n._padderClass="win-itemscontainer-padder",n._proxyClass="_win-proxy",n._itemClass="win-item",n._itemBoxClass="win-itembox",n._itemsBlockClass="win-itemsblock",n._containerClass="win-container",n._backdropClass="win-backdrop",n._footprintClass="win-footprint",n._groupsClass="win-groups",n._selectedClass="win-selected",n._swipeableClass="win-swipeable",n._swipeClass="win-swipe",n._selectionBorderClass="win-selectionborder",n._selectionBackgroundClass="win-selectionbackground",n._selectionCheckmarkClass="win-selectioncheckmark",n._selectionCheckmarkBackgroundClass="win-selectioncheckmarkbackground",n._pressedClass="win-pressed",n._headerClass="win-groupheader",n._headerContainerClass="win-groupheadercontainer",n._groupLeaderClass="win-groupleader",n._progressClass="win-progress",n._selectionHintClass="win-selectionhint",n._revealedClass="win-revealed",n._itemFocusClass="win-focused",n._itemFocusOutlineClass="win-focusedoutline",n._zoomingXClass="win-zooming-x",n._zoomingYClass="win-zooming-y",n._listLayoutClass="win-listlayout",n._gridLayoutClass="win-gridlayout",n._headerPositionTopClass="win-headerpositiontop",n._headerPositionLeftClass="win-headerpositionleft",n._structuralNodesClass="win-structuralnodes",n._uniformGridLayoutClass="win-uniformgridlayout",n._uniformListLayoutClass="win-uniformlistlayout",n._cellSpanningGridLayoutClass="win-cellspanninggridlayout",n._laidOutClass="win-laidout",n._nonDraggableClass="win-nondraggable",n._nonSelectableClass="win-nonselectable",n._nonSwipeableClass="win-nonswipeable",n._dragOverClass="win-dragover",n._dragSourceClass="win-dragsource",n._clipClass="win-clip",n._selectionModeClass="win-selectionmode",n._noCSSGrid="win-nocssgrid",n._INVALID_INDEX=-1,n._UNINITIALIZED=-1,n._LEFT_MSPOINTER_BUTTON=0,n._RIGHT_MSPOINTER_BUTTON=2,n._TAP_END_THRESHOLD=10,n._DEFAULT_PAGES_TO_LOAD=5,n._DEFAULT_PAGE_LOAD_THRESHOLD=2,n._MIN_AUTOSCROLL_RATE=150,n._MAX_AUTOSCROLL_RATE=1500,n._AUTOSCROLL_THRESHOLD=100,n._AUTOSCROLL_DELAY=50,n._DEFERRED_ACTION=250,n._DEFERRED_SCROLL_END=250,n._VERTICAL_SWIPE_SELECTION_THRESHOLD=39,n._VERTICAL_SWIPE_SPEED_BUMP_START=0,n._VERTICAL_SWIPE_SPEED_BUMP_END=127,n._VERTICAL_SWIPE_SELF_REVEAL_GESTURE=15,n._HORIZONTAL_SWIPE_SELECTION_THRESHOLD=27,n._HORIZONTAL_SWIPE_SPEED_BUMP_START=0,n._HORIZONTAL_SWIPE_SPEED_BUMP_END=150,n._HORIZONTAL_SWIPE_SELF_REVEAL_GESTURE=23,n._SELECTION_CHECKMARK="",n._LISTVIEW_PROGRESS_DELAY=2e3;var i={uninitialized:0,low:1,medium:2,high:3},r={rebuild:0,remeasure:1,relayout:2,realize:3};n._ScrollToPriority=i,n._ViewChange=r,t.Namespace._moduleDefine(e,"WinJS.UI",n)}),i("WinJS/Controls/ItemContainer/_ItemEventsHandler",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_WriteProfilerMark","../../Animations","../../Animations/_TransitionAnimation","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","./_Constants"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";function d(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return{x:e.x/t,y:e.y/t,z:e.z/t}}function p(e,t){var n=d(t),i=Math.cos(e),r=Math.sin(e),s=[i+n.x*n.x*(1-i),n.x*n.y*(1-i)-n.z*r,n.x*n.z*(1-i)+n.y*r,0,n.y*n.x*(1-i)+n.z*r,i+n.y*n.y*(1-i),n.y*n.z*(1-i)-n.x*r,0,n.z*n.x*(1-i)-n.y*r,n.z*n.y*(1-i)+n.x*r,i+n.z*n.z*(1-i),0,0,0,0,1];return s=s.map(function(e){return e.toFixed(8)}),"matrix3d("+s.join(",")+")"}function m(e,t,n){var i=u._clamp((e-n.left)/n.width,0,1),r=u._clamp((t-n.top)/n.height,0,1),s={x:r-.5,y:-(i-.5),z:1e-4},o=Math.abs(i-.5)+Math.abs(r-.5),a=o*_,l=1-(1-o)*g,c="perspective(800px) scale("+l+", "+l+") "+p(a,s);return c}var f=r._browserStyleEquivalents.transform,_=.15,g=.025,v=u._uniqueID,y=u._MSManipulationEvent;i.Namespace._moduleDefine(e,"WinJS.UI",{_rotationTransform3d:p,_tiltTransform:m,_ItemEventsHandler:i.Namespace._lazy(function(){function e(e,t){return e.querySelector("."+t)}function d(e,n){var i=t.document.createElement("div");return i.className=e,n||i.setAttribute("aria-hidden",!0),i}var p=u._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",_=i.Class.define(function(e){if(this._site=e,this._work=[],this._animations={},this._selectionHintTracker={},this._swipeClassTracker={},!r.isPhone&&this._selectionAllowed()){var n=this;t.setTimeout(function(){n._gestureRecognizer||e.isZombie()||(n._gestureRecognizer=n._createGestureRecognizer())},500)}},{dispose:function(){this._disposed||(this._disposed=!0,this._gestureRecognizer=null,u._removeEventListener(t,"pointerup",this._resetPointerDownStateBound),u._removeEventListener(t,"pointercancel",this._resetPointerDownStateBound))},onMSManipulationStateChanged:function(e){var t=e.currentState;if(t===y.MS_MANIPULATION_STATE_PRESELECT&&!this._site.pressedItemBox){var n=this._site.indexForItemElement(e.target);if(this._site.pressedEntity={type:c.ObjectType.item,index:n},this._site.pressedEntity.index!==h._INVALID_INDEX){this._site.pressedItemBox=this._site.itemBoxAtIndex(this._site.pressedEntity.index),this._site.pressedContainer=this._site.containerAtIndex(this._site.pressedEntity.index),this._site.animatedElement=r.isPhone?this._site.pressedItemBox:this._site.pressedContainer,this._site.pressedHeader=null;var i=this._site.verifySelectionAllowed(this._site.pressedEntity);this._canSelect=i.canSelect,this._canTapSelect=i.canTapSelect,this._swipeBehaviorSelectionChanged=!1,this._selectionHint=null,this._canSelect&&this._addSelectionHint()}}!this._canSelect||t!==y.MS_MANIPULATION_STATE_PRESELECT&&t!==y.MS_MANIPULATION_STATE_COMMITTED&&t!==y.MS_MANIPULATION_STATE_CANCELLED&&t!==y.MS_MANIPULATION_STATE_SELECTING&&t!==y.MS_MANIPULATION_STATE_DRAGGING||this._dispatchSwipeBehavior(t),(t===y.MS_MANIPULATION_STATE_COMMITTED||t===y.MS_MANIPULATION_STATE_CANCELLED||t===y.MS_MANIPULATION_STATE_STOPPED)&&this.resetPointerDownState()},onPointerDown:function(e){s("WinJS.UI._ItemEventsHandler:MSPointerDown,StartTM");var i,o,a=this._site,l=e.pointerType===p;if(a.pressedElement=e.target,n.Windows.UI.Input.PointerPoint){var d=this._getCurrentPoint(e),m=d.properties;l||m.isInverted||m.isEraser||m.isMiddleButtonPressed?i=o=!1:(o=m.isRightButtonPressed,i=!o&&m.isLeftButtonPressed)}else i=e.button===h._LEFT_MSPOINTER_BUTTON,o=e.button===h._RIGHT_MSPOINTER_BUTTON;this._DragStartBound=this._DragStartBound||this.onDragStart.bind(this),this._PointerEnterBound=this._PointerEnterBound||this.onPointerEnter.bind(this),this._PointerLeaveBound=this._PointerLeaveBound||this.onPointerLeave.bind(this),this._swipeBehaviorState=y.MS_MANIPULATION_STATE_STOPPED;var f=a.swipeBehavior===c.SwipeBehavior.select,_=this._isInteractive(e.target),g=a.indexForItemElement(e.target),v=a.indexForHeaderElement(e.target),b=!_&&g!==h._INVALID_INDEX;if((l||i||this._selectionAllowed()&&f&&o)&&this._site.pressedEntity.index===h._INVALID_INDEX&&!_&&(this._site.pressedEntity=v===h._INVALID_INDEX?{type:c.ObjectType.item,index:g}:{type:c.ObjectType.groupHeader,index:v},this._site.pressedEntity.index!==h._INVALID_INDEX)){this._site.pressedPosition=u._getCursorPos(e);var w=a.verifySelectionAllowed(this._site.pressedEntity);if(this._canSelect=w.canSelect,this._canTapSelect=w.canTapSelect,this._swipeBehaviorSelectionChanged=!1,this._selectionHint=null,this._site.pressedEntity.type!==c.ObjectType.groupHeader?(this._site.pressedItemBox=a.itemBoxAtIndex(this._site.pressedEntity.index),this._site.pressedContainer=a.containerAtIndex(this._site.pressedEntity.index),this._site.animatedElement=r.isPhone?this._site.pressedItemBox:this._site.pressedContainer,this._site.pressedHeader=null,this._togglePressed(!0,!1,e),this._site.pressedContainer.addEventListener("dragstart",this._DragStartBound),l||(u._addEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),u._addEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1))):(this._site.pressedHeader=this._site.headerFromElement(e.target),r.isPhone?(this._site.animatedElement=this._site.pressedHeader,this._togglePressed(!0,!1,e)):(this._site.pressedItemBox=null,this._site.pressedContainer=null,this._site.animatedElement=null)),this._resetPointerDownStateBound||(this._resetPointerDownStateBound=this._resetPointerDownStateForPointerId.bind(this)),l||(u._addEventListener(t,"pointerup",this._resetPointerDownStateBound,!1),u._addEventListener(t,"pointercancel",this._resetPointerDownStateBound,!1)),this._canSelect&&!r.isPhone&&(this._gestureRecognizer||(this._gestureRecognizer=this._createGestureRecognizer()),this._addSelectionHint()),this._pointerId=e.pointerId,this._pointerRightButton=o,this._pointerTriggeredSRG=!1,this._gestureRecognizer&&l)try{this._gestureRecognizer.addPointer(this._pointerId)}catch(C){this._gestureRecognizer.stop()}}if(b&&l)try{u._setPointerCapture(a.canvasProxy,e.pointerId)}catch(C){return void s("WinJS.UI._ItemEventsHandler:MSPointerDown,StopTM")}this._site.pressedEntity.type!==c.ObjectType.groupHeader&&this._selectionAllowed()&&this._multiSelection()&&this._site.pressedEntity.index!==h._INVALID_INDEX&&a.selection._getFocused().index!==h._INVALID_INDEX&&a.selection._pivot===h._INVALID_INDEX&&(a.selection._pivot=a.selection._getFocused().index),s("WinJS.UI._ItemEventsHandler:MSPointerDown,StopTM")},onPointerEnter:function(e){this._site.pressedContainer&&this._pointerId===e.pointerId&&this._togglePressed(!0,!1,e)},onPointerLeave:function(e){this._site.pressedContainer&&this._pointerId===e.pointerId&&this._togglePressed(!1,!0,e)},onDragStart:function(){this._resetPressedContainer()},_resetPressedContainer:function(){(this._site.pressedContainer||this._site.pressedHeader)&&this._site.animatedElement&&(this._togglePressed(!1),this._site.pressedContainer&&(this._site.pressedContainer.removeEventListener("dragstart",this._DragStartBound),u._removeEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),u._removeEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1)))},onClick:function(e){if(!this._skipClick){var t={type:c.ObjectType.item,index:this._site.indexForItemElement(e.target)};if(t.index===h._INVALID_INDEX&&(t.index=this._site.indexForHeaderElement(e.target),t.index!==h._INVALID_INDEX&&(t.type=c.ObjectType.groupHeader)),t.index!==h._INVALID_INDEX&&(u.hasClass(e.target,this._site.accessibleItemClass)||u.hasClass(e.target,h._headerClass))){var n=this._site.verifySelectionAllowed(t);n.canTapSelect&&this.handleTap(t),this._site.fireInvokeEvent(t,e.target)}}},onPointerUp:function(e){s("WinJS.UI._ItemEventsHandler:MSPointerUp,StartTM");var t=this._site;this._skipClick=!0;var n=this,i=this._site.swipeBehavior===c.SwipeBehavior.select;r._yieldForEvents(function(){n._skipClick=!1});try{u._releasePointerCapture(t.canvasProxy,e.pointerId)}catch(o){}var a=e.pointerType===p,l=this._releasedElement(e),d=t.indexForItemElement(l),m=t.indexForHeaderElement(l&&u.hasClass(l,h._headerContainerClass)?t.pressedHeader:l);if(this._pointerId===e.pointerId){var f;if(f=m===h._INVALID_INDEX?{type:c.ObjectType.item,index:d}:{type:c.ObjectType.groupHeader,index:m},this._resetPressedContainer(),this._site.pressedEntity.type!==c.ObjectType.groupHeader&&f.type!==c.ObjectType.groupHeader&&this._site.pressedContainer&&this._site.pressedEntity.index===f.index)if(e.shiftKey||(t.selection._pivot=h._INVALID_INDEX),e.shiftKey){if(this._selectionAllowed()&&this._multiSelection()&&t.selection._pivot!==h._INVALID_INDEX){var _=Math.min(this._site.pressedEntity.index,t.selection._pivot),g=Math.max(this._site.pressedEntity.index,t.selection._pivot),v=this._pointerRightButton||e.ctrlKey||t.tapBehavior===c.TapBehavior.toggleSelect;t.selectRange(_,g,v)}}else(e.ctrlKey||this._selectionAllowed()&&i&&this._pointerRightButton)&&this.handleSwipeBehavior(this._site.pressedEntity.index);if((this._site.pressedHeader||this._site.pressedContainer)&&this._swipeBehaviorState!==y.MS_MANIPULATION_STATE_COMMITTED){var b=u._getCursorPos(e),w=Math.abs(b.left-this._site.pressedPosition.left)<=h._TAP_END_THRESHOLD&&Math.abs(b.top-this._site.pressedPosition.top)<=h._TAP_END_THRESHOLD;this._endSelfRevealGesture(),this._clearItem(this._site.pressedEntity,this._isSelected(this._site.pressedEntity.index)),this._pointerRightButton||this._pointerTriggeredSRG||e.ctrlKey||e.shiftKey||!(a&&w||!a&&this._site.pressedEntity.index===f.index&&this._site.pressedEntity.type===f.type)||(f.type===c.ObjectType.groupHeader?(this._site.pressedHeader=t.headerAtIndex(f.index),this._site.pressedItemBox=null,this._site.pressedContainer=null):(this._site.pressedItemBox=t.itemBoxAtIndex(f.index),this._site.pressedContainer=t.containerAtIndex(f.index),this._site.pressedHeader=null),this._canTapSelect&&this.handleTap(this._site.pressedEntity),this._site.fireInvokeEvent(this._site.pressedEntity,this._site.pressedItemBox||this._site.pressedHeader))}this._site.pressedEntity.index!==h._INVALID_INDEX&&t.changeFocus(this._site.pressedEntity,!0,!1,!0),this.resetPointerDownState()}s("WinJS.UI._ItemEventsHandler:MSPointerUp,StopTM")},onPointerCancel:function(e){this._pointerId===e.pointerId&&this._swipeBehaviorState!==y.MS_MANIPULATION_STATE_PRESELECT&&(s("WinJS.UI._ItemEventsHandler:MSPointerCancel,info"),this.resetPointerDownState())},onLostPointerCapture:function(e){this._pointerId===e.pointerId&&this._swipeBehaviorState!==y.MS_MANIPULATION_STATE_PRESELECT&&(s("WinJS.UI._ItemEventsHandler:MSLostPointerCapture,info"),this.resetPointerDownState())},onContextMenu:function(e){var t=this._site.containerFromElement(e.target);this._selectionAllowed()&&t&&!this._isInteractive(e.target)&&e.preventDefault()},onMSHoldVisual:function(e){this._isInteractive(e.target)||e.preventDefault()},onDataChanged:function(){this.resetPointerDownState()},handleSwipeBehavior:function(e){this._selectionAllowed(e)&&this._toggleItemSelection(e)},handleTap:function(e){if(e.type!==c.ObjectType.groupHeader){var t=this._site,n=t.selection;this._selectionAllowed(e.index)&&this._selectOnTap()&&(t.tapBehavior===c.TapBehavior.toggleSelect?this._toggleItemSelection(e.index):t.selectionMode!==c.SelectionMode.multi&&n._isIncluded(e.index)||n.set(e.index))}},_toggleItemSelection:function(e){var t=this._site,n=t.selection,i=n._isIncluded(e);t.selectionMode===c.SelectionMode.single?i?n.clear():n.set(e):i?n.remove(e):n.add(e)},_getCurrentPoint:function(e){return n.Windows.UI.Input.PointerPoint.getCurrentPoint(e.pointerId)},_containedInElementWithClass:function(e,t){if(e.parentNode)for(var n=e.parentNode.querySelectorAll("."+t+", ."+t+" *"),i=0,r=n.length;r>i;i++)if(n[i]===e)return!0;return!1},_isSelected:function(e){return!this._swipeBehaviorSelectionChanged&&this._site.selection._isIncluded(e)||this._swipeBehaviorSelectionChanged&&this.swipeBehaviorSelected},_isInteractive:function(e){return this._containedInElementWithClass(e,"win-interactive")},_togglePressed:function(e,t,n){function i(e){""===d._site.animatedElement.style[f.scriptName]?(d._site.animatedElement.style[f.scriptName]=e,d._site.animatedElementScaleTransform=d._site.animatedElement.style[f.scriptName]):d._site.animatedElementScaleTransform=""}function o(e,t){s("WinJS.UI._ItemEventsHandler:removePressedUI,info"),u.removeClass(e,h._pressedClass),r.isPhone?d._containsTransform(e,t)&&a.executeTransition(e,{property:f.cssName,delay:0,duration:500,timing:"cubic-bezier(0.7025,0,0.9225,-0.115)",to:e.style[f.scriptName].replace(t,"")}):d._removeTransform(e,t)}var d=this,p=this._site.pressedEntity.type===c.ObjectType.groupHeader;if(this._site.animatedDownPromise&&this._site.animatedDownPromise.cancel(),!(r.isPhone&&!p&&u.hasClass(this._site.pressedItemBox,h._nonSelectableClass)||this._staticMode(p)))if(e){if(!u.hasClass(this._site.animatedElement,h._pressedClass))if(s("WinJS.UI._ItemEventsHandler:applyPressedUI,info"),u.addClass(this._site.animatedElement,h._pressedClass),n&&r.isPhone){var _=p?d._site.pressedHeader:d._site.pressedContainer,g=m(n.clientX,n.clientY,_.getBoundingClientRect());this._site.animatedDownPromise=l.timeout(50).then(function(){i(g)})}else{var v=.975,y=7;this._site.getItemPosition(this._site.pressedEntity).then(function(e){e.contentWidth>0&&(v=Math.max(v,1-y/e.contentWidth)),e.contentHeight>0&&(v=Math.max(v,1-y/e.contentHeight))},function(){}),i("scale("+v+","+v+")")}}else if(u.hasClass(this._site.animatedElement,h._pressedClass)){var b=this._site.animatedElement,w=this._site.animatedElementScaleTransform;t?o(b,w):r._setImmediate(function(){u.hasClass(b,h._pressedClass)&&o(b,w)})}},_containsTransform:function(e,t){return t&&-1!==e.style[f.scriptName].indexOf(t)},_removeTransform:function(e,t){this._containsTransform(e,t)&&(e.style[f.scriptName]=e.style[f.scriptName].replace(t,""))},_endSwipeBehavior:function(){if((this._swipeBehaviorState===y.MS_MANIPULATION_STATE_PRESELECT||this._swipeBehaviorState===y.MS_MANIPULATION_STATE_SELECTING||this._swipeBehaviorState===y.MS_MANIPULATION_STATE_DRAGGING||this._swipeBehaviorState===y.MS_MANIPULATION_STATE_COMMITTED||this._swipeBehaviorState===y.MS_MANIPULATION_STATE_CANCELLED)&&this._site.pressedEntity.type!==c.ObjectType.groupHeader){this._flushUIBatches();var e=this._selectionHint;if(this._selectionHint=null,this._site.pressedItemBox){var t=this._site.pressedEntity.index,n=this._site.selection._isIncluded(t);if(n)for(var i=u._getElementsByClasses(this._site.pressedItemBox,[h._selectionCheckmarkClass,h._selectionCheckmarkBackgroundClass]),r=0;r<i.length;r++)i[r].style.opacity=1;this._clearItem(this._site.pressedEntity,n),e&&this._removeSelectionHint(e),delete this._animations[t]}}},_createGestureRecognizer:function(){var e=this._site.eventHandlerRoot,t=u._createGestureRecognizer();t.target=e;var n=this;return e.addEventListener("MSGestureHold",function(e){-1!==n._site.pressedEntity.index&&e.detail===u._MSGestureEvent.MSGESTURE_FLAG_BEGIN&&n._startSelfRevealGesture()}),t},_dispatchSwipeBehavior:function(e){if(this._site.pressedEntity.type!==c.ObjectType.groupHeader&&this._site.swipeBehavior===c.SwipeBehavior.select){if(this._site.selection._pivot=h._INVALID_INDEX,this._site.pressedItemBox){var t=this._site.pressedEntity.index;if(this._swipeBehaviorState!==e)if(e===y.MS_MANIPULATION_STATE_DRAGGING&&this._canSelect)this._animateSelectionChange(this._site.selection._isIncluded(t)),this._removeSelectionHint(this._selectionHint);else if(e===y.MS_MANIPULATION_STATE_PRESELECT){s("WinJS.UI._ItemEventsHandler:crossSlidingStarted,info");var n=this._site,i=n.itemAtIndex(t),r=n.selection._isIncluded(t);this._selfRevealGesture?(this._selfRevealGesture.finishAnimation(),this._selfRevealGesture=null):this._canSelect&&this._prepareItem(this._site.pressedEntity,i,r),this._swipeBehaviorState!==y.MS_MANIPULATION_STATE_SELECTING?(this._site.animatedElement&&u.hasClass(this._site.animatedElement,h._pressedClass)&&(this._site.animatedDownPromise&&this._site.animatedDownPromise.cancel(),u.removeClass(this._site.animatedElement,h._pressedClass),this._removeTransform(this._site.animatedElement,this._site.animatedElementScaleTransform)),this._showSelectionHintCheckmark()):this._animateSelectionChange(this._site.selection._isIncluded(t))}else if(e===y.MS_MANIPULATION_STATE_COMMITTED){s("WinJS.UI._ItemEventsHandler:crossSlidingCompleted,info");var n=this._site,o=n.selection,a=this._swipeBehaviorSelectionChanged,l=this.swipeBehaviorSelected;this._swipeBehaviorState===y.MS_MANIPULATION_STATE_SELECTING&&a&&this._selectionAllowed()&&n.swipeBehavior===c.SwipeBehavior.select&&(n.selectionMode===c.SelectionMode.single?l?o.set(t):o._isIncluded(t)&&o.remove(t):l?o.add(t):o._isIncluded(t)&&o.remove(t)),this._endSwipeBehavior()}else e===y.MS_MANIPULATION_STATE_SELECTING&&this._canSelect?this._animateSelectionChange(!this._site.selection._isIncluded(t)):this._swipeBehaviorState===y.MS_MANIPULATION_STATE_SELECTING&&this._canSelect&&this._animateSelectionChange(this._site.selection._isIncluded(t),e===y.MS_MANIPULATION_STATE_CANCELLED)}this._swipeBehaviorState=e}},_resetPointerDownStateForPointerId:function(e){this._pointerId===e.pointerId&&this.resetPointerDownState()},resetPointerDownState:function(){this._gestureRecognizer&&(this._endSelfRevealGesture(),this._endSwipeBehavior()),this._site.pressedElement=null,u._removeEventListener(t,"pointerup",this._resetPointerDownStateBound),u._removeEventListener(t,"pointercancel",this._resetPointerDownStateBound),this._resetPressedContainer(),this._site.pressedContainer=null,this._site.animatedElement=null,this._site.pressedHeader=null,this._site.pressedItemBox=null,this._removeSelectionHint(this._selectionHint),this._selectionHint=null,this._site.pressedEntity={type:c.ObjectType.item,index:h._INVALID_INDEX},this._pointerId=null},_startSelfRevealGesture:function(){if(this._canSelect&&this._site.swipeBehavior===c.SwipeBehavior.select){s("WinJS.UI._ItemEventsHandler:playSelfRevealGesture,info");var e=this,t=this._site,n=this._site.pressedEntity.index,i=t.itemBoxAtIndex(n),r=t.selection._isIncluded(n),a=!1,u=function(){var e,n;return t.horizontal?(e=h._VERTICAL_SWIPE_SELF_REVEAL_GESTURE+"px",n="0px"):(e="0px",n=(t.rtl()?"":"-")+h._HORIZONTAL_SWIPE_SELF_REVEAL_GESTURE+"px"),o.swipeReveal(i,{top:e,left:n})},d=function(){return a?l.wrap():o.swipeReveal(i,{top:"0px",left:"0px"})},p=function(i){t.isZombie()||(i&&e._removeSelectionHint(i),e._clearItem(t.pressedEntity,t.selection._isIncluded(n)))},m=function(){e._selfRevealGesture._promise.cancel(),a=!0;var t=e._selectionHint;return e._selectionHint=null,d().then(function(){i.style[f.scriptName]="",p(t)})};this._prepareItem(this._site.pressedEntity,i,r),this._showSelectionHintCheckmark(),this._pointerTriggeredSRG=!0,this._selfRevealGesture={finishAnimation:m,_promise:u().then(d).then(function(){a||(e._hideSelectionHintCheckmark(),p(),e._selfRevealGesture=null)})}}},_endSelfRevealGesture:function(){this._selfRevealGesture&&(this._selfRevealGesture.finishAnimation(),this._selfRevealGesture=null)},_prepareItem:function(e,t,n){function i(e){r._swipeClassTracker[v(e)]?r._swipeClassTracker[v(e)]++:(u.addClass(e,h._swipeClass),r._swipeClassTracker[v(e)]=1)}if(e.type!==c.ObjectType.groupHeader){var r=this,s=this._site,o=e.index;if(n){var a=s.containerAtIndex(o);i(a)}else(this._animations[o]||l.wrap()).then(function(){if(!s.isZombie()&&e.type!==c.ObjectType.groupHeader&&-1!==s.pressedEntity.index){o=s.pressedEntity.index;var t=s.itemAtIndex(o),n=s.itemBoxAtIndex(o),r=s.containerAtIndex(o);if(i(r),!u._isSelectionRendered(n)){_.renderSelection(n,t,!0,r),u.removeClass(n,h._selectedClass),u.removeClass(r,h._selectedClass);for(var a=n.querySelectorAll(u._selectionPartsSelector),l=0,d=a.length;d>l;l++)a[l].style.opacity=0}}})}},_clearItem:function(e,t){function n(e){var t=--r._swipeClassTracker[v(e)];return t?!1:(delete r._swipeClassTracker[v(e)],u.removeClass(e,h._swipeClass),!0)}function i(e){var t=e.parentNode;t&&u.hasClass(t,h._itemsBlockClass)&&n(t)}if(e.type===c.ObjectType.item){var r=this,s=this._site,o=s.containerAtIndex(e.index),a=s.itemBoxAtIndex(e.index),l=s.itemAtIndex(e.index);if(o&&a&&l){var d=n(o);i(o),d&&_.renderSelection(a,l,t,!0,o)}}},_animateSelectionChange:function(t,n){function i(){var n=t?"addClass":"removeClass";if(u[n](a,h._selectedClass),u[n](o,h._selectedClass),r._selectionHint){var i=e(r._selectionHint,h._selectionHintClass);i&&u[n](i,h._revealedClass)}}var r=this,o=this._site.pressedContainer,a=this._site.pressedItemBox;this._swipeBehaviorSelectionChanged=!0,this.swipeBehaviorSelected=t;var l=u._getElementsByClasses(this._site.pressedItemBox,[h._selectionBorderClass,h._selectionBackgroundClass]);(!t||n)&&(l=l.concat(u._getElementsByClasses(this._site.pressedItemBox,[h._selectionCheckmarkBackgroundClass,h._selectionCheckmarkClass]))),s("WinJS.UI._ItemEventsHandler:"+(t?"hitSelectThreshold":"hitUnselectThreshold")+",info"),this._applyUIInBatches(function(){s("WinJS.UI._ItemEventsHandler:"+(t?"apply":"remove")+"SelectionVisual,info");for(var e=t?1:0,n=0;n<l.length;n++)l[n].style.opacity=e;i()})},_showSelectionHintCheckmark:function(){if(this._selectionHint){var t=e(this._selectionHint,h._selectionHintClass);t&&(t.style.display="block")}},_hideSelectionHintCheckmark:function(){if(this._selectionHint){var t=e(this._selectionHint,h._selectionHintClass);t&&(t.style.display="none")}},_addSelectionHint:function(){if(this._site.pressedEntity.type!==c.ObjectType.groupHeader){var e,n=this._site;if(n.customFootprintParent){e=this._selectionHint=t.document.createElement("div"),e.className=h._containerClass;var i=this;n.getItemPosition(this._site.pressedEntity).then(function(t){if(!n.isZombie()&&i._selectionHint&&i._selectionHint===e){var r=e.style,s=";position:absolute;"+(n.rtl()?"right:":"left:")+t.left+"px;top:"+t.top+"px;width:"+t.contentWidth+"px;height:"+t.contentHeight+"px";r.cssText+=s,n.customFootprintParent.insertBefore(i._selectionHint,i._site.pressedItemBox)}},function(){})}else e=this._selectionHint=this._site.pressedContainer;if(this._selectionHintTracker[v(e)])this._selectionHintTracker[v(e)]++;else{if(u.addClass(e,h._footprintClass),!n.selection._isIncluded(this._site.pressedEntity.index)){var r=t.document.createElement("div");r.className=h._selectionHintClass,r.textContent=h._SELECTION_CHECKMARK,r.style.display="none",this._selectionHint.insertBefore(r,this._selectionHint.firstElementChild)}this._selectionHintTracker[v(e)]=1}}},_removeSelectionHint:function(t){if(t){var n=--this._selectionHintTracker[v(t)];if(!n)if(delete this._selectionHintTracker[v(t)],this._site.customFootprintParent)t.parentNode&&t.parentNode.removeChild(t);else{u.removeClass(t,h._footprintClass);var i=e(t,h._selectionHintClass);i&&i.parentNode.removeChild(i)}}},_releasedElement:function(e){return t.document.elementFromPoint(e.clientX,e.clientY)},_applyUIInBatches:function(e){function t(){n._work.length>0?(n._flushUIBatches(),n._paintedThisFrame=r._requestAnimationFrame(t.bind(n))):n._paintedThisFrame=null}var n=this;this._work.push(e),this._paintedThisFrame||t()},_flushUIBatches:function(){if(this._work.length>0){var e=this._work;this._work=[];for(var t=0;t<e.length;t++)e[t]()}},_selectionAllowed:function(e){var t=void 0!==e?this._site.itemAtIndex(e):null,n=!(t&&u.hasClass(t,h._nonSelectableClass));return n&&this._site.selectionMode!==c.SelectionMode.none},_multiSelection:function(){return this._site.selectionMode===c.SelectionMode.multi},_selectOnTap:function(){return this._site.tapBehavior===c.TapBehavior.toggleSelect||this._site.tapBehavior===c.TapBehavior.directSelect},_staticMode:function(e){return e?this._site.headerTapBehavior===c.GroupHeaderTapBehavior.none:this._site.tapBehavior===c.TapBehavior.none&&this._site.selectionMode===c.SelectionMode.none}},{setAriaSelected:function(e,t){var n="true"===e.getAttribute("aria-selected");t!==n&&e.setAttribute("aria-selected",t)},renderSelection:function(e,t,n,i,r){if(!_._selectionTemplate){_._selectionTemplate=[],_._selectionTemplate.push(d(h._selectionBackgroundClass)),_._selectionTemplate.push(d(h._selectionBorderClass)),_._selectionTemplate.push(d(h._selectionCheckmarkBackgroundClass));var s=d(h._selectionCheckmarkClass);s.textContent=h._SELECTION_CHECKMARK,_._selectionTemplate.push(s)}if(n!==u._isSelectionRendered(e)){if(n){e.insertBefore(_._selectionTemplate[0].cloneNode(!0),e.firstElementChild);for(var o=1,a=_._selectionTemplate.length;a>o;o++)e.appendChild(_._selectionTemplate[o].cloneNode(!0))}else for(var l=e.querySelectorAll(u._selectionPartsSelector),o=0,a=l.length;a>o;o++)e.removeChild(l[o]);
u[n?"addClass":"removeClass"](e,h._selectedClass),r&&u[n?"addClass":"removeClass"](r,h._selectedClass)}i&&_.setAriaSelected(t,n)}});return _})})}),i("WinJS/Controls/ListView/_SelectionManager",["exports","../../Core/_Global","../../Core/_Base","../../Promise","../../_Signal","../../Utilities/_UI","../ItemContainer/_Constants"],function(e,t,n,i,r,s,o){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_ItemSet:n.Namespace._lazy(function(){var t=n.Class.define(function(e,t,n){this._listView=e,this._ranges=t,this._itemsCount=n});return t.prototype={getRanges:function(){for(var e=[],t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];e.push({firstIndex:i.firstIndex,lastIndex:i.lastIndex,firstKey:i.firstKey,lastKey:i.lastKey})}return e},getItems:function(){return e.getItemsFromRanges(this._listView._itemsManager.dataSource,this._ranges)},isEverything:function(){return this.count()===this._itemsCount},count:function(){for(var e=0,t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];e+=i.lastIndex-i.firstIndex+1}return e},getIndices:function(){for(var e=[],t=0,n=this._ranges.length;n>t;t++)for(var i=this._ranges[t],r=i.firstIndex;r<=i.lastIndex;r++)e.push(r);return e}},t}),getItemsFromRanges:function(e,t){function n(){for(var e=[],n=0,r=t.length;r>n;n++)for(var s=t[n],o=s.firstIndex;o<=s.lastIndex;o++)e.push(o);return i.wrap(e)}var r=e.createListBinding(),s=[];return n().then(function(e){for(var t=0;t<e.length;t++)s.push(r.fromIndex(e[t]));return i.join(s).then(function(e){return r.release(),e})})},_Selection:n.Namespace._lazy(function(){function t(e){return e&&0===e.firstIndex&&e.lastIndex===Number.MAX_VALUE}return n.Class.derive(e._ItemSet,function(e,t){this._listView=e,this._itemsCount=-1,this._ranges=[],t&&this.set(t)},{clear:function(){return this._releaseRanges(this._ranges),this._ranges=[],i.wrap()},set:function(e){if(t(e))return this.selectAll();this._releaseRanges(this._ranges),this._ranges=[];var n=this;return this._execute("_set",e).then(function(){return n._ranges.sort(function(e,t){return e.firstIndex-t.firstIndex}),n._ensureKeys()}).then(function(){return n._ensureCount()})},add:function(e){if(t(e))return this.selectAll();var n=this;return this._execute("_add",e).then(function(){return n._ensureKeys()}).then(function(){return n._ensureCount()})},remove:function(e){var t=this;return this._execute("_remove",e).then(function(){return t._ensureKeys()})},selectAll:function(){var e=this;return e._ensureCount().then(function(){if(e._itemsCount){var t={firstIndex:0,lastIndex:e._itemsCount-1};return e._retainRange(t),e._releaseRanges(e._ranges),e._ranges=[t],e._ensureKeys()}})},_execute:function(e,t){function n(e,t,n){var i={};return i["first"+e]=t,i["last"+e]=n,i}function r(t){var n=s._getListBinding(),r=i.join([n.fromKey(t.firstKey),n.fromKey(t.lastKey)]).then(function(n){return n[0]&&n[1]&&(t.firstIndex=n[0].index,t.lastIndex=n[1].index,s[e](t)),t});l.push(r)}for(var s=this,o=!!s._getListBinding().fromKey,a=Array.isArray(t)?t:[t],l=[i.wrap()],u=0,c=a.length;c>u;u++){var h=a[u];"number"==typeof h?this[e](n("Index",h,h)):h&&(o&&void 0!==h.key?r(n("Key",h.key,h.key)):o&&void 0!==h.firstKey&&void 0!==h.lastKey?r(n("Key",h.firstKey,h.lastKey)):void 0!==h.index&&"number"==typeof h.index?this[e](n("Index",h.index,h.index)):void 0!==h.firstIndex&&void 0!==h.lastIndex&&"number"==typeof h.firstIndex&&"number"==typeof h.lastIndex&&this[e](n("Index",h.firstIndex,h.lastIndex)))}return i.join(l)},_set:function(e){this._retainRange(e),this._ranges.push(e)},_add:function(e){for(var t,n,i,r=this,s=null,o=function(e,t){t.lastIndex>e.lastIndex&&(e.lastIndex=t.lastIndex,e.lastKey=t.lastKey,e.lastPromise&&e.lastPromise.release(),e.lastPromise=r._getListBinding().fromIndex(e.lastIndex).retain())},a=0,l=this._ranges.length;l>a;a++){if(t=this._ranges[a],e.firstIndex<t.firstIndex){i=s&&e.firstIndex<s.lastIndex+1,i?(n=a-1,o(s,e)):(this._insertRange(a,e),n=a);break}if(e.firstIndex===t.firstIndex){o(t,e),n=a;break}s=t}if(void 0===n){var u=this._ranges.length?this._ranges[this._ranges.length-1]:null,c=u&&e.firstIndex<u.lastIndex+1;c?o(u,e):(this._retainRange(e),this._ranges.push(e))}else{for(s=null,a=n+1,l=this._ranges.length;l>a;a++){if(t=this._ranges[a],e.lastIndex<t.firstIndex){i=s&&s.lastIndex>e.lastIndex,i&&o(this._ranges[n],s),this._removeRanges(n+1,a-n-1);break}if(e.lastIndex===t.firstIndex){o(this._ranges[n],t),this._removeRanges(n+1,a-n);break}s=t}a>=l&&(o(this._ranges[n],this._ranges[l-1]),this._removeRanges(n+1,l-n-1))}},_remove:function(e){function t(e){return n._getListBinding().fromIndex(e).retain()}for(var n=this,i=[],r=0,s=this._ranges.length;s>r;r++){var o=this._ranges[r];o.lastIndex<e.firstIndex||o.firstIndex>e.lastIndex?i.push(o):o.firstIndex<e.firstIndex&&o.lastIndex>=e.firstIndex&&o.lastIndex<=e.lastIndex?(i.push({firstIndex:o.firstIndex,firstKey:o.firstKey,firstPromise:o.firstPromise,lastIndex:e.firstIndex-1,lastPromise:t(e.firstIndex-1)}),o.lastPromise.release()):o.lastIndex>e.lastIndex&&o.firstIndex>=e.firstIndex&&o.firstIndex<=e.lastIndex?(i.push({firstIndex:e.lastIndex+1,firstPromise:t(e.lastIndex+1),lastIndex:o.lastIndex,lastKey:o.lastKey,lastPromise:o.lastPromise}),o.firstPromise.release()):o.firstIndex<e.firstIndex&&o.lastIndex>e.lastIndex?(i.push({firstIndex:o.firstIndex,firstKey:o.firstKey,firstPromise:o.firstPromise,lastIndex:e.firstIndex-1,lastPromise:t(e.firstIndex-1)}),i.push({firstIndex:e.lastIndex+1,firstPromise:t(e.lastIndex+1),lastIndex:o.lastIndex,lastKey:o.lastKey,lastPromise:o.lastPromise})):(o.firstPromise.release(),o.lastPromise.release())}this._ranges=i},_ensureKeys:function(){for(var e=[i.wrap()],t=this,n=function(e,t){var n=e+"Key";if(t[n])return i.wrap();var r=t[e+"Promise"];return r.then(function(e){e&&(t[n]=e.key)}),r},r=0,s=this._ranges.length;s>r;r++){var o=this._ranges[r];e.push(n("first",o)),e.push(n("last",o))}return i.join(e).then(function(){t._ranges=t._ranges.filter(function(e){return e.firstKey&&e.lastKey})}),i.join(e)},_mergeRanges:function(e,t){e.lastIndex=t.lastIndex,e.lastKey=t.lastKey},_isIncluded:function(e){if(this.isEverything())return!0;for(var t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];if(i.firstIndex<=e&&e<=i.lastIndex)return!0}return!1},_ensureCount:function(){var e=this;return this._listView._itemsCount().then(function(t){e._itemsCount=t})},_insertRange:function(e,t){this._retainRange(t),this._ranges.splice(e,0,t)},_removeRanges:function(e,t){for(var n=0;t>n;n++)this._releaseRange(this._ranges[e+n]);this._ranges.splice(e,t)},_retainRange:function(e){e.firstPromise||(e.firstPromise=this._getListBinding().fromIndex(e.firstIndex).retain()),e.lastPromise||(e.lastPromise=this._getListBinding().fromIndex(e.lastIndex).retain())},_retainRanges:function(){for(var e=0,t=this._ranges.length;t>e;e++)this._retainRange(this._ranges[e])},_releaseRange:function(e){e.firstPromise.release(),e.lastPromise.release()},_releaseRanges:function(e){for(var t=0,n=e.length;n>t;++t)this._releaseRange(e[t])},_getListBinding:function(){return this._listView._itemsManager._listBinding}},{supportedForProcessing:!1})}),_SelectionManager:n.Namespace._lazy(function(){var n=function(t){this._listView=t,this._selected=new e._Selection(this._listView),this._pivot=o._INVALID_INDEX,this._focused={type:s.ObjectType.item,index:0},this._pendingChange=i.wrap()};return n.prototype={count:function(){return this._selected.count()},getIndices:function(){return this._selected.getIndices()},getItems:function(){return this._selected.getItems()},getRanges:function(){return this._selected.getRanges()},isEverything:function(){return this._selected.isEverything()},set:function(t){var n=this,s=new r;return this._synchronize(s).then(function(){var r=new e._Selection(n._listView);return r.set(t).then(function(){n._set(r),s.complete()},function(e){return r.clear(),s.complete(),i.wrapError(e)})})},clear:function(){var t=this,n=new r;return this._synchronize(n).then(function(){var r=new e._Selection(t._listView);return r.clear().then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},add:function(e){var t=this,n=new r;return this._synchronize(n).then(function(){var r=t._cloneSelection();return r.add(e).then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},remove:function(e){var t=this,n=new r;return this._synchronize(n).then(function(){var r=t._cloneSelection();return r.remove(e).then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},selectAll:function(){var t=this,n=new r;return this._synchronize(n).then(function(){var r=new e._Selection(t._listView);return r.selectAll().then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},_synchronize:function(e){var t=this;return this._listView._versionManager.unlocked.then(function(){var n=t._pendingChange;return t._pendingChange=i.join([n,e.promise]).then(function(){}),n})},_reset:function(){this._pivot=o._INVALID_INDEX,this._setFocused({type:s.ObjectType.item,index:0},this._keyboardFocused()),this._pendingChange.cancel(),this._pendingChange=i.wrap(),this._selected.clear(),this._selected=new e._Selection(this._listView)},_dispose:function(){this._selected.clear(),this._selected=null,this._listView=null},_set:function(e){var t=this;return this._fireSelectionChanging(e).then(function(n){return n?(t._selected.clear(),t._selected=e,t._listView._updateSelection(),t._fireSelectionChanged()):e.clear(),n})},_fireSelectionChanging:function(e){var n=t.document.createEvent("CustomEvent"),r=i.wrap();n.initCustomEvent("selectionchanging",!0,!0,{newSelection:e,preventTapBehavior:function(){},setPromise:function(e){r=e}});var s=this._listView._element.dispatchEvent(n);return r.then(function(){return s})},_fireSelectionChanged:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("selectionchanged",!0,!1,null),this._listView._element.dispatchEvent(e)},_getFocused:function(){return{type:this._focused.type,index:this._focused.index}},_setFocused:function(e,t){this._focused={type:e.type,index:e.index},this._focusedByKeyboard=t},_keyboardFocused:function(){return this._focusedByKeyboard},_updateCount:function(e){this._selected._itemsCount=e},_isIncluded:function(e){return this._selected._isIncluded(e)},_cloneSelection:function(){var t=new e._Selection(this._listView);return t._ranges=this._selected.getRanges(),t._itemsCount=this._selected._itemsCount,t._retainRanges(),t}},n.supportedForProcessing=!1,n})})}),i("WinJS/Controls/ListView/_BrowseMode",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Animations","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_SelectionManager"],function(e,t,n,i,r,s,o,a,l,u,c){"use strict";var h=i._browserStyleEquivalents.transform.scriptName;n.Namespace._moduleDefine(e,"WinJS.UI",{_SelectionMode:n.Namespace._lazy(function(){function e(e,t,n){return Math.max(e,Math.min(t,n))}function r(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("keyboardnavigating",!0,!0,{oldFocus:n.index,oldFocusType:n.type,newFocus:i.index,newFocusType:i.type}),e.dispatchEvent(r)}var d=n.Class.define(function(e){this.inboundFocusHandled=!1,this._pressedContainer=null,this._pressedItemBox=null,this._pressedHeader=null,this._pressedEntity={type:a.ObjectType.item,index:l._INVALID_INDEX},this._pressedPosition=null,this.initialize(e)},{_dispose:function(){this._itemEventsHandler&&this._itemEventsHandler.dispose(),this._setNewFocusItemOffsetPromise&&this._setNewFocusItemOffsetPromise.cancel()},initialize:function(e){function t(t,n){var i=function(n){return e._view.getAdjacent(n,t)};return i.clampToBounds=n,i}this.site=e,this._keyboardNavigationHandlers={},this._keyboardAcceleratorHandlers={};var n=this.site,i=this;this._itemEventsHandler=new u._ItemEventsHandler(Object.create({containerFromElement:function(e){return n._view.items.containerFrom(e)},indexForItemElement:function(e){return n._view.items.index(e)},indexForHeaderElement:function(e){return n._groups.index(e)},itemBoxAtIndex:function(e){return n._view.items.itemBoxAt(e)},itemAtIndex:function(e){return n._view.items.itemAt(e)},headerAtIndex:function(e){return n._groups.group(e).header},headerFromElement:function(e){return n._groups.headerFrom(e)},containerAtIndex:function(e){return n._view.items.containerAt(e)},isZombie:function(){return n._isZombie()},getItemPosition:function(e){return n._getItemPosition(e)},rtl:function(){return n._rtl()},fireInvokeEvent:function(e,t){return i._fireInvokeEvent(e,t)},verifySelectionAllowed:function(e){return i._verifySelectionAllowed(e)},changeFocus:function(e,t,i,r,s){return n._changeFocus(e,t,i,r,s)},selectRange:function(e,t,n){return i._selectRange(e,t,n)}},{pressedEntity:{enumerable:!0,get:function(){return i._pressedEntity},set:function(e){i._pressedEntity=e}},pressedContainerScaleTransform:{enumerable:!0,get:function(){return i._pressedContainerScaleTransform},set:function(e){i._pressedContainerScaleTransform=e}},pressedContainer:{enumerable:!0,get:function(){return i._pressedContainer},set:function(e){i._pressedContainer=e}},pressedItemBox:{enumerable:!0,get:function(){return i._pressedItemBox},set:function(e){i._pressedItemBox=e}},pressedHeader:{enumerable:!0,get:function(){return i._pressedHeader},set:function(e){return i._pressedHeader=e}},pressedPosition:{enumerable:!0,get:function(){return i._pressedPosition},set:function(e){i._pressedPosition=e}},pressedElement:{enumerable:!0,set:function(e){i._pressedElement=e}},swipeBehavior:{enumerable:!0,get:function(){return n._swipeBehavior}},eventHandlerRoot:{enumerable:!0,get:function(){return n._viewport}},selectionMode:{enumerable:!0,get:function(){return n._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return l._itemClass}},canvasProxy:{enumerable:!0,get:function(){return n._canvasProxy}},tapBehavior:{enumerable:!0,get:function(){return n._tap}},headerTapBehavior:{enumerable:!0,get:function(){return n._groupHeaderTap}},draggable:{enumerable:!0,get:function(){return n.itemsDraggable||n.itemsReorderable}},selection:{enumerable:!0,get:function(){return n._selection}},horizontal:{enumerable:!0,get:function(){return n._horizontal()}},customFootprintParent:{enumerable:!0,get:function(){return null}}}));var r=o.Key;this._keyboardNavigationHandlers[r.upArrow]=t(r.upArrow),this._keyboardNavigationHandlers[r.downArrow]=t(r.downArrow),this._keyboardNavigationHandlers[r.leftArrow]=t(r.leftArrow),this._keyboardNavigationHandlers[r.rightArrow]=t(r.rightArrow),this._keyboardNavigationHandlers[r.pageUp]=t(r.pageUp,!0),this._keyboardNavigationHandlers[r.pageDown]=t(r.pageDown,!0),this._keyboardNavigationHandlers[r.home]=function(e){return s.wrap({type:e.type,index:0})},this._keyboardNavigationHandlers[r.end]=function(e){return e.type===a.ObjectType.groupHeader?s.wrap({type:e.type,index:n._groups.length()-1}):i.site._view.finalItem().then(function(t){return{type:e.type,index:t}},function(e){return s.wrapError(e)})},this._keyboardAcceleratorHandlers[r.a]=function(){i.site._multiSelection()&&i._selectAll()}},staticMode:function(){return this.site._tap===a.TapBehavior.none&&this.site._selectionMode===a.SelectionMode.none},itemUnrealized:function(e,t){if(this._pressedEntity.type!==a.ObjectType.groupHeader&&(this._pressedEntity.index===e&&this._resetPointerDownState(),this._itemBeingDragged(e)))for(var n=this._draggedItemBoxes.length-1;n>=0;n--)this._draggedItemBoxes[n]===t&&(o.removeClass(t,l._dragSourceClass),this._draggedItemBoxes.splice(n,1))},_fireInvokeEvent:function(e,n){function i(i,s){var o=i.createListBinding(),a=o.fromIndex(e.index),l=s?"groupheaderinvoked":"iteminvoked";a.done(function(){o.release()});var u=t.document.createEvent("CustomEvent");u.initCustomEvent(l,!0,!0,s?{groupHeaderPromise:a,groupHeaderIndex:e.index}:{itemPromise:a,itemIndex:e.index}),n.dispatchEvent(u)&&r.site._defaultInvoke(e)}if(n){var r=this;e.type===a.ObjectType.groupHeader?this.site._groupHeaderTap===a.GroupHeaderTapBehavior.invoke&&e.index!==l._INVALID_INDEX&&i(this.site.groupDataSource,!0):this.site._tap!==a.TapBehavior.none&&e.index!==l._INVALID_INDEX&&i(this.site.itemDataSource,!1)}},_verifySelectionAllowed:function(e){if(e.type===a.ObjectType.groupHeader)return{canSelect:!1,canTapSelect:!1};var n=e.index,i=this.site,r=this.site._view.items.itemAt(n);if(!i._selectionAllowed()||!i._selectOnTap()&&i._swipeBehavior!==a.SwipeBehavior.select||r&&o.hasClass(r,l._nonSelectableClass))return{canSelect:!1,canTapSelect:!1};var u=i._selection._isIncluded(n),c=!i._multiSelection(),h=i._selection._cloneSelection();u?c?h.clear():h.remove(n):c?h.set(n):h.add(n);var d,p=t.document.createEvent("CustomEvent"),m=s.wrap(),f=!1,_=!1;p.initCustomEvent("selectionchanging",!0,!0,{newSelection:h,preventTapBehavior:function(){_=!0},setPromise:function(e){m=e}});var g=i._element.dispatchEvent(p);m.then(function(){f=!0,d=h._isIncluded(n),h.clear()});var v=g&&f&&(u||d);return{canSelect:v,canTapSelect:v&&!_}},_containedInElementWithClass:function(e,t){if(e.parentNode)for(var n=e.parentNode.querySelectorAll("."+t+", ."+t+" *"),i=0,r=n.length;r>i;i++)if(n[i]===e)return!0;return!1},_isDraggable:function(e){return!this._containedInElementWithClass(e,l._nonDraggableClass)},_isInteractive:function(e){return this._containedInElementWithClass(e,"win-interactive")},_resetPointerDownState:function(){this._itemEventsHandler.resetPointerDownState()},onMSManipulationStateChanged:function(e){this._itemEventsHandler.onMSManipulationStateChanged(e)},onPointerDown:function(e){this._itemEventsHandler.onPointerDown(e)},onclick:function(e){this._itemEventsHandler.onClick(e)},onPointerUp:function(e){this._itemEventsHandler.onPointerUp(e)},onPointerCancel:function(e){this._itemEventsHandler.onPointerCancel(e)},onLostPointerCapture:function(e){this._itemEventsHandler.onLostPointerCapture(e)},onContextMenu:function(e){this._itemEventsHandler.onContextMenu(e)},onMSHoldVisual:function(e){this._itemEventsHandler.onMSHoldVisual(e)},onDataChanged:function(e){this._itemEventsHandler.onDataChanged(e)},_removeTransform:function(e,t){t&&-1!==e.style[h].indexOf(t)&&(e.style[h]=e.style[h].replace(t,""))},_selectAll:function(){var e=[];this.site._view.items.each(function(t,n){n&&o.hasClass(n,l._nonSelectableClass)&&e.push(t)}),this.site._selection.selectAll(),e.length>0&&this.site._selection.remove(e)},_selectRange:function(e,t,n){for(var i=[],r=-1,s=e;t>=s;s++){var a=this.site._view.items.itemAt(s);a&&o.hasClass(a,l._nonSelectableClass)?-1!==r&&(i.push({firstIndex:r,lastIndex:s-1}),r=-1):-1===r&&(r=s)}-1!==r&&i.push({firstIndex:r,lastIndex:t}),i.length>0&&this.site._selection[n?"add":"set"](i)},onDragStart:function(e){if(this._pressedEntity={type:a.ObjectType.item,index:this.site._view.items.index(e.target)},this.site._selection._pivot=l._INVALID_INDEX,this._pressedEntity.index===l._INVALID_INDEX||!this.site.itemsDraggable&&!this.site.itemsReorderable||this.site._view.animating||!this._isDraggable(e.target)||this._pressedElement&&this._isInteractive(this._pressedElement))e.preventDefault();else{this._dragging=!0,this._dragDataTransfer=e.dataTransfer,this._pressedPosition=o._getCursorPos(e),this._dragInfo=null,this._lastEnteredElement=e.target,this.site._selection._isIncluded(this._pressedEntity.index)?this._dragInfo=this.site.selection:(this._draggingUnselectedItem=!0,this._dragInfo=new c._Selection(this.site,[{firstIndex:this._pressedEntity.index,lastIndex:this._pressedEntity.index}]));var n=this.site.itemsReorderable,r=t.document.createEvent("CustomEvent");if(r.initCustomEvent("itemdragstart",!0,!1,{dataTransfer:e.dataTransfer,dragInfo:this._dragInfo}),e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage){var s=this.site._view.items.itemDataAt(this._pressedEntity.index);if(s&&s.container){var u=s.container.getBoundingClientRect();e.dataTransfer.setDragImage(s.container,e.clientX-u.left,e.clientY-u.top)}}this.site.element.dispatchEvent(r),this.site.itemsDraggable&&!this.site.itemsReorderable&&(this._firedDragEnter||this._fireDragEnterEvent(e.dataTransfer)&&(n=!0,this._dragUnderstood=!0)),n&&(this._addedDragOverClass=!0,o.addClass(this.site._element,l._dragOverClass)),this._draggedItemBoxes=[];var h=this,d=e.target;d.addEventListener("dragend",function p(e){d.removeEventListener("dragend",p),h.onDragEnd(e)}),i._yieldForDomModification(function(){if(h._dragging)for(var e=h._dragInfo.getIndices(),t=0,n=e.length;n>t;t++){var i=h.site._view.items.itemDataAt(e[t]);i&&i.itemBox&&h._addDragSourceClass(i.itemBox)}})}},onDragEnter:function(e){var n=this._dragUnderstood;this._lastEnteredElement=e.target,this._exitEventTimer&&(t.clearTimeout(this._exitEventTimer),this._exitEventTimer=0),this._firedDragEnter||this._fireDragEnterEvent(e.dataTransfer)&&(n=!0),(n||this._dragging&&this.site.itemsReorderable)&&(e.preventDefault(),this._dragUnderstood=!0,this._addedDragOverClass||(this._addedDragOverClass=!0,o.addClass(this.site._element,l._dragOverClass))),this._pointerLeftRegion=!1},onDragLeave:function(e){e.target===this._lastEnteredElement&&(this._pointerLeftRegion=!0,this._handleExitEvent())},fireDragUpdateEvent:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("itemdragchanged",!0,!1,{dataTransfer:this._dragDataTransfer,dragInfo:this._dragInfo}),this.site.element.dispatchEvent(e)},_fireDragEnterEvent:function(e){var n=t.document.createEvent("CustomEvent");n.initCustomEvent("itemdragenter",!0,!0,{dataTransfer:e});var i=!this.site.element.dispatchEvent(n);return this._firedDragEnter=!0,i},_fireDragBetweenEvent:function(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("itemdragbetween",!0,!0,{index:e,insertAfterIndex:n,dataTransfer:i}),this.site.element.dispatchEvent(r)},_fireDropEvent:function(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("itemdragdrop",!0,!0,{index:e,insertAfterIndex:n,dataTransfer:i}),this.site.element.dispatchEvent(r)},_handleExitEvent:function(){this._exitEventTimer&&(t.clearTimeout(this._exitEventTimer),this._exitEventTimer=0);var e=this;this._exitEventTimer=t.setTimeout(function(){if(!e.site._disposed&&e._pointerLeftRegion){if(e.site._layout.dragLeave&&e.site._layout.dragLeave(),e._pointerLeftRegion=!1,e._dragUnderstood=!1,e._lastEnteredElement=null,e._lastInsertPoint=null,e._dragBetweenDisabled=!1,e._firedDragEnter){var n=t.document.createEvent("CustomEvent");n.initCustomEvent("itemdragleave",!0,!1,{}),e.site.element.dispatchEvent(n),e._firedDragEnter=!1}e._addedDragOverClass&&(e._addedDragOverClass=!1,o.removeClass(e.site._element,l._dragOverClass)),e._exitEventTimer=0,e._stopAutoScroll()}},40)},_getEventPositionInElementSpace:function(e,n){var i={left:0,top:0};try{i=e.getBoundingClientRect()}catch(r){}var s=t.getComputedStyle(e,null),o=parseInt(s.paddingLeft),a=parseInt(s.paddingTop),l=parseInt(s.borderLeftWidth),u=parseInt(s.borderTopWidth),c=n.clientX,h=n.clientY,d={x:+c===c?c-i.left-o-l:0,y:+h===h?h-i.top-a-u:0};return this.site._rtl()&&(d.x=i.right-i.left-d.x),d},_getPositionInCanvasSpace:function(e){var t=this.site._horizontal()?this.site.scrollPosition:0,n=this.site._horizontal()?0:this.site.scrollPosition,i=this._getEventPositionInElementSpace(this.site.element,e);return{x:i.x+t,y:i.y+n}},_itemBeingDragged:function(e){return this._dragging?this._draggingUnselectedItem&&this._dragInfo._isIncluded(e)||!this._draggingUnselectedItem&&this.site._isSelected(e):!1},_addDragSourceClass:function(e){this._draggedItemBoxes.push(e),o.addClass(e,l._dragSourceClass),e.parentNode&&o.addClass(e.parentNode,l._footprintClass)},renderDragSourceOnRealizedItem:function(e,t){this._itemBeingDragged(e)&&this._addDragSourceClass(t)},onDragOver:function(t){if(this._dragUnderstood){this._pointerLeftRegion=!1,t.preventDefault();var n=this._getPositionInCanvasSpace(t),i=this._getEventPositionInElementSpace(this.site.element,t);if(this._checkAutoScroll(i.x,i.y),this.site._layout.hitTest)if(this._autoScrollFrame)this._lastInsertPoint&&(this.site._layout.dragLeave(),this._lastInsertPoint=null);else{var r=this.site._view.hitTest(n.x,n.y);r.insertAfterIndex=e(-1,this.site._cachedCount-1,r.insertAfterIndex),this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===r.insertAfterIndex&&this._lastInsertPoint.index===r.index||(this._dragBetweenDisabled=!this._fireDragBetweenEvent(r.index,r.insertAfterIndex,t.dataTransfer),this._dragBetweenDisabled?this.site._layout.dragLeave():this.site._layout.dragOver(n.x,n.y,this._dragInfo)),this._lastInsertPoint=r}}},_clearDragProperties:function(){if(this._addedDragOverClass&&(this._addedDragOverClass=!1,o.removeClass(this.site._element,l._dragOverClass)),this._draggedItemBoxes){for(var e=0,t=this._draggedItemBoxes.length;t>e;e++)o.removeClass(this._draggedItemBoxes[e],l._dragSourceClass),this._draggedItemBoxes[e].parentNode&&o.removeClass(this._draggedItemBoxes[e].parentNode,l._footprintClass);this._draggedItemBoxes=[]}this.site._layout.dragLeave(),this._dragging=!1,this._dragInfo=null,this._draggingUnselectedItem=!1,this._dragDataTransfer=null,this._lastInsertPoint=null,this._resetPointerDownState(),this._lastEnteredElement=null,this._dragBetweenDisabled=!1,this._firedDragEnter=!1,this._dragUnderstood=!1,this._stopAutoScroll()},onDragEnd:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("itemdragend",!0,!1,{}),this.site.element.dispatchEvent(e),this._clearDragProperties()},_findFirstAvailableInsertPoint:function(e,t,n){for(var i=e.getIndices(),r=-1,s=this.site._cachedCount,o=i.length,a=-1,l=t,u=0;o>u;u++)if(i[u]===l){r=u,a=u;break}for(;r>=0&&l>=0;)n?(l++,o>r&&i[r+1]===l&&s>l?r++:l>=s?(n=!1,l=t,r=a):r=-1):(l--,r>0&&i[r-1]===l?r--:r=-1);return l},_reorderItems:function(e,t,n,i,r){var s=this.site,o=function(e){n?s._selection.remove({key:e[0].key}):s._selection.set({firstKey:e[0].key,lastKey:e[e.length-1].key}),r&&s.ensureVisible(s._selection._getFocused())};t.getItems().then(function(t){var n=s.itemDataSource;if(-1===e){n.beginEdits();for(var r=t.length-1;r>=0;r--)n.moveToStart(t[r].key);n.endEdits(),o(t)}else{var a=n.createListBinding();a.fromIndex(e).then(function(e){if(a.release(),n.beginEdits(),i)for(var r=0,s=t.length;s>r;r++)n.moveBefore(t[r].key,e.key);else for(var r=t.length-1;r>=0;r--)n.moveAfter(t[r].key,e.key);n.endEdits(),o(t)})}})},onDrop:function(t){if(this._draggedItemBoxes)for(var n=0,i=this._draggedItemBoxes.length;i>n;n++)this._draggedItemBoxes[n].parentNode&&o.removeClass(this._draggedItemBoxes[n].parentNode,l._footprintClass);if(!this._dragBetweenDisabled){var r=this._getPositionInCanvasSpace(t),s=this.site._view.hitTest(r.x,r.y),a=e(-1,this.site._cachedCount-1,s.insertAfterIndex),u=!0;if(this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===a&&this._lastInsertPoint.index===s.index||(u=this._fireDragBetweenEvent(s.index,a,t.dataTransfer)),u&&(this._lastInsertPoint=null,this.site._layout.dragLeave(),this._fireDropEvent(s.index,a,t.dataTransfer)&&this._dragging&&this.site.itemsReorderable)){if(this._dragInfo.isEverything()||this.site._groupsEnabled())return;a=this._findFirstAvailableInsertPoint(this._dragInfo,a,!1),this._reorderItems(a,this._dragInfo,this._draggingUnselectedItem)}}this._clearDragProperties(),t.preventDefault()},_checkAutoScroll:function(e,n){var r=this.site._getViewportLength(),s=this.site._horizontal(),a=s?e:n,u=this.site._viewport[s?"scrollWidth":"scrollHeight"],c=Math.floor(this.site.scrollPosition),h=0;if(a<l._AUTOSCROLL_THRESHOLD?h=a-l._AUTOSCROLL_THRESHOLD:a>r-l._AUTOSCROLL_THRESHOLD&&(h=a-(r-l._AUTOSCROLL_THRESHOLD)),h=Math.round(h/l._AUTOSCROLL_THRESHOLD*(l._MAX_AUTOSCROLL_RATE-l._MIN_AUTOSCROLL_RATE)),(0===c&&0>h||c>=u-r&&h>0)&&(h=0),0===h)this._autoScrollDelay&&(t.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0);else if(!this._autoScrollDelay&&!this._autoScrollFrame){var d=this;this._autoScrollDelay=t.setTimeout(function(){if(d._autoScrollRate){d._lastDragTimeout=i._now();var e=function(){if(!d._autoScrollRate&&d._autoScrollFrame||d.site._disposed)d._stopAutoScroll();else{var t=i._now(),n=d._autoScrollRate*((t-d._lastDragTimeout)/1e3);n=0>n?Math.min(-1,n):Math.max(1,n);var r={};r[d.site._scrollProperty]=d.site._viewportScrollPosition+n,o.setScrollPosition(d.site._viewport,r),d._lastDragTimeout=t,d._autoScrollFrame=i._requestAnimationFrame(e)}};d._autoScrollFrame=i._requestAnimationFrame(e)}},l._AUTOSCROLL_DELAY)}this._autoScrollRate=h},_stopAutoScroll:function(){this._autoScrollDelay&&(t.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0),this._autoScrollRate=0,this._autoScrollFrame=0},onKeyDown:function(e){function t(e,t,o){function u(u){var c=!0,h=!1;if(o?e.index=Math.max(0,Math.min(u,e.index)):(e.index<0||e.index>u)&&(h=!0),!h&&(d.index!==e.index||d.type!==e.type)){var p=r(i._element,d,e);p&&(c=!1,n._setNewFocusItemOffsetPromise&&n._setNewFocusItemOffsetPromise.cancel(),i._batchViewUpdates(l._ViewChange.realize,l._ScrollToPriority.high,function(){return n._setNewFocusItemOffsetPromise=i._getItemOffset(d,!0).then(function(r){r=i._convertFromCanvasCoordinates(r);var o=r.end<=i.scrollPosition||r.begin>=i.scrollPosition+i._getViewportLength()-1;return n._setNewFocusItemOffsetPromise=i._getItemOffset(e).then(function(r){n._setNewFocusItemOffsetPromise=null;var a={position:i.scrollPosition,direction:"right"};return o&&(i._selection._setFocused(e,!0),r=i._convertFromCanvasCoordinates(r),e.index>d.index?(a.direction="right",a.position=r.end-i._getViewportLength()):(a.direction="left",a.position=r.begin)),i._changeFocus(e,t,m,o,!0),o?a:s.cancel},function(n){return i._changeFocus(e,t,m,!0,!0),s.wrapError(n)}),n._setNewFocusItemOffsetPromise},function(n){return i._changeFocus(e,t,m,!0,!0),s.wrapError(n)}),n._setNewFocusItemOffsetPromise},!0))}return c&&(i._selection._setFocused(d,!0),i.ensureVisible(d)),h?{type:a.ObjectType.item,index:l._INVALID_INDEX}:e}return e.type!==a.ObjectType.groupHeader?h.finalItem().then(u):s.wrap(i._groups.length()-1).then(u)}var n=this,i=this.site,u=i._swipeBehavior===a.SwipeBehavior.select,h=i._view,d=i._selection._getFocused(),p=!0,m=e.ctrlKey,f=o.Key,_=e.keyCode,g=i._rtl();if(!this._isInteractive(e.target)){if(e.ctrlKey&&!e.altKey&&!e.shiftKey&&this._keyboardAcceleratorHandlers[_]&&this._keyboardAcceleratorHandlers[_](),i.itemsReorderable&&!e.ctrlKey&&e.altKey&&e.shiftKey&&d.type===a.ObjectType.item&&(_===f.leftArrow||_===f.rightArrow||_===f.upArrow||_===f.downArrow)){var v=i._selection,y=d.index,b=!1,w=!0;if(!v.isEverything()){if(!v._isIncluded(y)){var C=i._view.items.itemAt(y);C&&o.hasClass(C,l._nonDraggableClass)?w=!1:(b=!0,v=new c._Selection(this.site,[{firstIndex:y,lastIndex:y}]))}if(w){var x=y;_===f.rightArrow?x+=g?-1:1:_===f.leftArrow?x+=g?1:-1:_===f.upArrow?x--:x++;var S=x>y,I=S;S&&x>=this.site._cachedCount&&(I=!1,x=this.site._cachedCount-1),x=this._findFirstAvailableInsertPoint(v,x,I),x=Math.min(Math.max(-1,x),this.site._cachedCount-1);var E=x-(S||-1===x?0:1),k=x,T=this.site._groupsEnabled();if(T){var P=this.site._groups,A=x>-1?P.groupFromItem(x):0;S?P.group(A).startIndex===x&&E--:A<P.length()-1&&x===P.group(A+1).startIndex-1&&E++}if(this._fireDragBetweenEvent(k,E,null)&&this._fireDropEvent(k,E,null)){if(T)return;this._reorderItems(x,v,b,!S,!0)}}}}else if(e.altKey)p=!1;else if(this._keyboardNavigationHandlers[_])this._keyboardNavigationHandlers[_](d).then(function(r){var s=n._keyboardNavigationHandlers[_].clampToBounds;r.type!==a.ObjectType.groupHeader&&e.shiftKey&&i._selectionAllowed()&&i._multiSelection()?(i._selection._pivot===l._INVALID_INDEX&&(i._selection._pivot=d.index),t(r,!0,s).then(function(t){if(t.index!==l._INVALID_INDEX){var r=Math.min(t.index,i._selection._pivot),s=Math.max(t.index,i._selection._pivot),o=e.ctrlKey||i._tap===a.TapBehavior.toggleSelect;n._selectRange(r,s,o)}})):(i._selection._pivot=l._INVALID_INDEX,t(r,!1,s))});else if(e.ctrlKey||_!==f.enter)d.type!==a.ObjectType.groupHeader&&(e.ctrlKey&&_===f.enter||u&&e.shiftKey&&_===f.F10||u&&_===f.menu||_===f.space)?(this._itemEventsHandler.handleSwipeBehavior(d.index),i._changeFocus(d,!0,m,!1,!0)):_===f.escape&&i._selection.count()>0?(i._selection._pivot=l._INVALID_INDEX,i._selection.clear()):p=!1;
else{var M=d.type===a.ObjectType.groupHeader?i._groups.group(d.index).header:i._view.items.itemBoxAt(d.index);if(M){d.type===a.ObjectType.groupHeader?(this._pressedHeader=M,this._pressedItemBox=null,this._pressedContainer=null):(this._pressedItemBox=M,this._pressedContainer=i._view.items.containerAt(d.index),this._pressedHeader=null);var O=this._verifySelectionAllowed(d);O.canTapSelect&&this._itemEventsHandler.handleTap(d),this._fireInvokeEvent(d,M)}}this._keyDownHandled=p,p&&(e.stopPropagation(),e.preventDefault())}_===f.tab&&(this.site._keyboardFocusInbound=!0)},onKeyUp:function(e){this._keyDownHandled&&(e.stopPropagation(),e.preventDefault())},onTabEntered:function(e){if(0!==this.site._groups.length()){var t=this.site,n=t._selection._getFocused(),i=e.detail,s=!t._hasKeyboardFocus||e.target===t._viewport;if(s)if(this.inboundFocusHandled=!0,n.index=n.index===l._INVALID_INDEX?0:n.index,i||!this.site._supportsGroupHeaderKeyboarding){var o={type:a.ObjectType.item};n.type===a.ObjectType.groupHeader?(o.index=t._groupFocusCache.getIndexForGroup(n.index),r(t._element,n,o)?t._changeFocus(o,!0,!1,!1,!0):t._changeFocus(n,!0,!1,!1,!0)):(o.index=n.index,t._changeFocus(o,!0,!1,!1,!0)),e.preventDefault()}else{var o={type:a.ObjectType.groupHeader};n.type!==a.ObjectType.groupHeader?(o.index=t._groups.groupFromItem(n.index),r(t._element,n,o)?t._changeFocus(o,!0,!1,!1,!0):t._changeFocus(n,!0,!1,!1,!0)):(o.index=n.index,t._changeFocus(o,!0,!1,!1,!0)),e.preventDefault()}}},onTabExiting:function(e){if(this.site._supportsGroupHeaderKeyboarding&&0!==this.site._groups.length()){var t=this.site,n=t._selection._getFocused(),i=e.detail;if(i&&n.type!==a.ObjectType.groupHeader){var s={type:a.ObjectType.groupHeader,index:t._groups.groupFromItem(n.index)};r(t._element,n,s)&&(t._changeFocus(s,!0,!1,!1,!0),e.preventDefault())}else if(!i&&n.type===a.ObjectType.groupHeader){var s={type:a.ObjectType.item,index:t._groupFocusCache.getIndexForGroup(n.index)};r(t._element,n,s)&&(t._changeFocus(s,!0,!1,!1,!0),e.preventDefault())}}}});return d})})}),i("WinJS/Controls/ListView/_ErrorMessages",["exports","../../Core/_Base","../../Core/_Resources"],function(e,t){"use strict";t.Namespace._moduleDefine(e,null,{modeIsInvalid:{get:function(){return"Invalid argument: mode must be one of following values: 'none', 'single' or 'multi'."}},loadingBehaviorIsDeprecated:{get:function(){return"Invalid configuration: loadingBehavior is deprecated. The control will default this property to 'randomAccess'. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoad is deprecated. The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadThresholdIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoadThreshold is deprecated.  The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},automaticallyLoadPagesIsDeprecated:{get:function(){return"Invalid configuration: automaticallyLoadPages is deprecated. The control will default this property to false. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},invalidTemplate:{get:function(){return"Invalid template: Templates must be created before being passed to the ListView, and must contain a valid tree of elements."}},loadMorePagesIsDeprecated:{get:function(){return"loadMorePages is deprecated. Invoking this function will not have any effect. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},disableBackdropIsDeprecated:{get:function(){return"Invalid configuration: disableBackdrop is deprecated. Style: .win-listview .win-container.win-backdrop { background-color:transparent; } instead."}},backdropColorIsDeprecated:{get:function(){return"Invalid configuration: backdropColor is deprecated. Style: .win-listview .win-container.win-backdrop { rgba(155,155,155,0.23); } instead."}},itemInfoIsDeprecated:{get:function(){return"GridLayout.itemInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},groupInfoIsDeprecated:{get:function(){return"GridLayout.groupInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},resetItemIsDeprecated:{get:function(){return"resetItem may be altered or unavailable in future versions. Instead, mark the element as disposable using WinJS.Utilities.markDisposable."}},resetGroupHeaderIsDeprecated:{get:function(){return"resetGroupHeader may be altered or unavailable in future versions. Instead, mark the header element as disposable using WinJS.Utilities.markDisposable."}},maxRowsIsDeprecated:{get:function(){return"GridLayout.maxRows may be altered or unavailable in future versions. Instead, use the maximumRowsOrColumns property."}}})}),i("WinJS/Controls/ListView/_GroupFocusCache",["exports","../../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupFocusCache:t.Namespace._lazy(function(){return t.Class.define(function(e){this._listView=e,this.clear()},{updateCache:function(e,t,n){n=""+n,this._itemToIndex[t]=n,this._groupToItem[e]=t},deleteItem:function(e){if(this._itemToIndex[e])for(var t=this,n=Object.keys(this._groupToItem),i=0,r=n.length;r>i;i++){var s=n[i];if(t._groupToItem[s]===e){t.deleteGroup(s);break}}},deleteGroup:function(e){var t=this._groupToItem[e];t&&delete this._itemToIndex[t],delete this._groupToItem[e]},updateItemIndex:function(e,t){this._itemToIndex[e]&&(this._itemToIndex[e]=""+t)},getIndexForGroup:function(e){var t=this._listView._groups.group(e).key,n=this._groupToItem[t];return n&&this._itemToIndex[n]?+this._itemToIndex[n]:this._listView._groups.fromKey(t).group.startIndex},clear:function(){this._groupToItem={},this._itemToIndex={}}})}),_UnsupportedGroupFocusCache:t.Namespace._lazy(function(){return t.Class.define(null,{updateCache:function(){},deleteItem:function(){},deleteGroup:function(){},updateItemIndex:function(){},getIndexForGroup:function(){return 0},clear:function(){}})})})}),i("WinJS/Controls/ListView/_GroupsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_ItemsManager","../../Utilities/_UI","../ItemContainer/_Constants"],function(e,t,n,i,r,s,o,a){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupsContainerBase:t.Namespace._lazy(function(){return t.Class.define(function(){},{index:function(e){var t=this.headerFrom(e);if(t)for(var n=0,i=this.groups.length;i>n;n++)if(t===this.groups[n].header)return n;return a._INVALID_INDEX},headerFrom:function(e){for(;e&&!r.hasClass(e,a._headerClass);)e=e.parentNode;return e},requestHeader:function(e){this._waitingHeaderRequests=this._waitingHeaderRequests||{},this._waitingHeaderRequests[e]||(this._waitingHeaderRequests[e]=[]);var t=this;return new n(function(n){var i=t.groups[e];i&&i.header?n(i.header):t._waitingHeaderRequests[e].push(n)})},notify:function(e,t){if(this._waitingHeaderRequests&&this._waitingHeaderRequests[e]){for(var n=this._waitingHeaderRequests[e],i=0,r=n.length;r>i;i++)n[i](t);this._waitingHeaderRequests[e]=[]}},groupFromImpl:function(e,t,n){if(e>t)return null;var i=e+Math.floor((t-e)/2),r=this.groups[i];return n(r,i)?this.groupFromImpl(e,i-1,n):t>i&&!n(this.groups[i+1],i+1)?this.groupFromImpl(i+1,t,n):i},groupFrom:function(e){if(this.groups.length>0){var t=this.groups.length-1,n=this.groups[t];return e(n,t)?this.groupFromImpl(0,this.groups.length-1,e):t}return null},groupFromItem:function(e){return this.groupFrom(function(t){return e<t.startIndex})},groupFromOffset:function(e){return this.groupFrom(function(t){return e<t.offset})},group:function(e){return this.groups[e]},length:function(){return this.groups.length},cleanUp:function(){if(this.listBinding){for(var e=0,t=this.groups.length;t>e;e++){var n=this.groups[e];n.userData&&this.listBinding.releaseItem(n.userData)}this.listBinding.release()}},_dispose:function(){this.cleanUp()},synchronizeGroups:function(){var e=this;return this.pendingChanges=[],this.ignoreChanges=!0,this.groupDataSource.invalidateAll().then(function(){return n.join(e.pendingChanges)}).then(function(){return e._listView._ifZombieDispose()?n.cancel:void 0}).then(function(){e.ignoreChanges=!1},function(t){return e.ignoreChanges=!1,n.wrapError(t)})},fromKey:function(e){for(var t=0,n=this.groups.length;n>t;t++){var i=this.groups[t];if(i.key===e)return{group:i,index:t}}return null},fromHandle:function(e){for(var t=0,n=this.groups.length;n>t;t++){var i=this.groups[t];if(i.handle===e)return{group:i,index:t}}return null}})}),_UnvirtualizedGroupsContainer:t.Namespace._lazy(function(){return t.Class.derive(e._GroupsContainerBase,function(e,t){this._listView=e,this.groupDataSource=t,this.groups=[],this.pendingChanges=[],this.dirty=!0;var n=this,s={beginNotifications:function(){n._listView._versionManager.beginNotifications()},endNotifications:function(){n._listView._versionManager.endNotifications(),n._listView._ifZombieDispose()||!n.ignoreChanges&&n._listView._groupsChanged&&n._listView._scheduleUpdate()},indexChanged:function(){n._listView._versionManager.receivedNotification(),n._listView._ifZombieDispose()||this.scheduleUpdate()},itemAvailable:function(){},countChanged:function(e){n._listView._versionManager.receivedNotification(),n._listView._writeProfilerMark("groupCountChanged("+e+"),info"),n._listView._ifZombieDispose()||this.scheduleUpdate()},changed:function(e){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){var t=n.fromKey(e.key);t&&(n._listView._writeProfilerMark("groupChanged("+t.index+"),info"),t.group.userData=e,t.group.startIndex=e.firstItemIndexHint,this.markToRemove(t.group)),this.scheduleUpdate()}},removed:function(e){if(n._listView._versionManager.receivedNotification(),n._listView._groupRemoved(e),!n._listView._ifZombieDispose()){var t=n.fromHandle(e);if(t){n._listView._writeProfilerMark("groupRemoved("+t.index+"),info"),n.groups.splice(t.index,1);var i=n.groups.indexOf(t.group,t.index);i>-1&&n.groups.splice(i,1),this.markToRemove(t.group)}this.scheduleUpdate()}},inserted:function(e,t,i){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){n._listView._writeProfilerMark("groupInserted,info");var r=this;e.retain().then(function(s){var o;if(o=t||i||n.groups.length?r.findIndex(t,i):0,-1!==o){var a={key:s.key,startIndex:s.firstItemIndexHint,userData:s,handle:e.handle};n.groups.splice(o,0,a)}r.scheduleUpdate()}),n.pendingChanges.push(e)}},moved:function(e,t,i){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){n._listView._writeProfilerMark("groupMoved,info");var r=this;e.then(function(s){var o=r.findIndex(t,i),a=n.fromKey(s.key);if(a)n.groups.splice(a.index,1),-1!==o&&(a.index<o&&o--,a.group.key=s.key,a.group.userData=s,a.group.startIndex=s.firstItemIndexHint,n.groups.splice(o,0,a.group));else if(-1!==o){var l={key:s.key,startIndex:s.firstItemIndexHint,userData:s,handle:e.handle};n.groups.splice(o,0,l),e.retain()}r.scheduleUpdate()}),n.pendingChanges.push(e)}},reload:function(){n._listView._versionManager.receivedNotification(),n._listView._ifZombieDispose()||n._listView._processReload()},markToRemove:function(e){if(e.header){var t=e.header;e.header=null,e.left=-1,e.width=-1,e.decorator=null,e.tabIndex=-1,t.tabIndex=-1,n._listView._groupsToRemove[r._uniqueID(t)]={group:e,header:t}}},scheduleUpdate:function(){n.dirty=!0,n.ignoreChanges||(n._listView._groupsChanged=!0)},findIndex:function(e,t){var i,r=-1;return e&&(i=n.fromHandle(e),i&&(r=i.index+1)),-1===r&&t&&(i=n.fromHandle(t),i&&(r=i.index)),r},removeElements:function(e){if(e.header){var t=e.header.parentNode;t&&(i.disposeSubTree(e.header),t.removeChild(e.header)),e.header=null,e.left=-1,e.width=-1}}};this.listBinding=this.groupDataSource.createListBinding(s)},{initialize:function(){this.initializePromise&&this.initializePromise.cancel(),this._listView._writeProfilerMark("GroupsContainer_initialize,StartTM");var e=this;return this.initializePromise=this.groupDataSource.getCount().then(function(t){for(var i=[],r=0;t>r;r++)i.push(e.listBinding.fromIndex(r).retain());return n.join(i)}).then(function(t){e.groups=[];for(var n=0,i=t.length;i>n;n++){var r=t[n];e.groups.push({key:r.key,startIndex:r.firstItemIndexHint,handle:r.handle,userData:r})}e._listView._writeProfilerMark("GroupsContainer_initialize groups("+t.length+"),info"),e._listView._writeProfilerMark("GroupsContainer_initialize,StopTM")},function(t){return e._listView._writeProfilerMark("GroupsContainer_initialize,StopTM"),n.wrapError(t)}),this.initializePromise},renderGroup:function(e){if(this._listView.groupHeaderTemplate){var t=this.groups[e];return n.wrap(this._listView._groupHeaderRenderer(n.wrap(t.userData))).then(s._normalizeRendererReturn)}return n.wrap(null)},setDomElement:function(e,t){this.groups[e].header=t,this.notify(e,t)},removeElements:function(){for(var e=this._listView._groupsToRemove||{},t=Object.keys(e),n=!1,r=this._listView._selection._getFocused(),s=0,a=t.length;a>s;s++){var l=e[t[s]],u=l.header,c=l.group;if(n||r.type!==o.ObjectType.groupHeader||c.userData.index!==r.index||(this._listView._unsetFocusOnItem(),n=!0),u){var h=u.parentNode;h&&(i._disposeElement(u),h.removeChild(u))}}n&&this._listView._setFocusOnItem(r),this._listView._groupsToRemove={}},resetGroups:function(){for(var e=this.groups.slice(0),t=0,n=e.length;n>t;t++){var i=e[t];this.listBinding&&i.userData&&this.listBinding.releaseItem(i.userData)}this.groups.length=0,this.dirty=!0}})}),_NoGroups:t.Namespace._lazy(function(){return t.Class.derive(e._GroupsContainerBase,function(e){this._listView=e,this.groups=[{startIndex:0}],this.dirty=!0},{synchronizeGroups:function(){return n.wrap()},addItem:function(){return n.wrap(this.groups[0])},resetGroups:function(){this.groups=[{startIndex:0}],delete this.pinnedItem,delete this.pinnedOffset,this.dirty=!0},renderGroup:function(){return n.wrap(null)},ensureFirstGroup:function(){return n.wrap(this.groups[0])},groupOf:function(){return n.wrap(this.groups[0])},removeElements:function(){}})})})}),i("WinJS/Controls/ListView/_Helpers",["exports","../../Core/_Base","../../Animations"],function(e,t,n){"use strict";function i(e){return Array.prototype.slice.call(e)}function r(e,t){return new Array(t+1).join(e)}t.Namespace._moduleDefine(e,"WinJS.UI",{_nodeListToArray:i,_repeat:r,_ListViewAnimationHelper:{fadeInElement:function(e){return n.fadeIn(e)},fadeOutElement:function(e){return n.fadeOut(e)},animateEntrance:function(e,t){return n.enterContent(e,[{left:t?"100px":"40px",top:"0px",rtlflip:!0}],{mechanism:"transition"})}}})}),i("WinJS/Controls/ListView/_ItemsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_ElementUtilities","../ItemContainer/_Constants"],function(e,t,n,i,r){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_ItemsContainer:t.Namespace._lazy(function(){var e=function(e){this.site=e,this._itemData={},this.waitingItemRequests={}};return e.prototype={requestItem:function(e){this.waitingItemRequests[e]||(this.waitingItemRequests[e]=[]);var t=this,i=new n(function(n){var i=t._itemData[e];i&&!i.detached&&i.element?n(i.element):t.waitingItemRequests[e].push(n)});return i},removeItem:function(e){delete this._itemData[e]},removeItems:function(){this._itemData={},this.waitingItemRequests={}},setItemAt:function(e,t){this._itemData[e]=t,t.detached||this.notify(e,t)},notify:function(e,t){if(this.waitingItemRequests[e]){for(var n=this.waitingItemRequests[e],i=0;i<n.length;i++)n[i](t.element);this.waitingItemRequests[e]=[]}},elementAvailable:function(e){var t=this._itemData[e];t.detached=!1,this.notify(e,t)},itemAt:function(e){var t=this._itemData[e];return t?t.element:null},itemDataAt:function(e){return this._itemData[e]},containerAt:function(e){var t=this._itemData[e];return t?t.container:null},itemBoxAt:function(e){var t=this._itemData[e];return t?t.itemBox:null},itemBoxFrom:function(e){for(;e&&!i.hasClass(e,r._itemBoxClass);)e=e.parentNode;return e},containerFrom:function(e){for(;e&&!i.hasClass(e,r._containerClass);)e=e.parentNode;return e},index:function(e){var t=this.containerFrom(e);if(t)for(var n in this._itemData)if(this._itemData[n].container===t)return parseInt(n,10);return r._INVALID_INDEX},each:function(e){for(var t in this._itemData)if(this._itemData.hasOwnProperty(t)){var n=this._itemData[t];e(parseInt(t,10),n.element,n)}},eachIndex:function(e){for(var t in this._itemData)if(e(parseInt(t,10)))break},count:function(){return Object.keys(this._itemData).length}},e})})}),i("WinJS/Controls/ListView/_Layouts",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations/_TransitionAnimation","../../Promise","../../Scheduler","../../_Signal","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","./_ErrorMessages"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_){"use strict";function g(e){return"_win-dynamic-"+e+"-"+N++}function v(){var e,t,n,i=B.sheet.cssRules,r=F.length;for(e=0;r>e;e++)for(n="."+F[e]+" ",t=i.length-1;t>=0;t--)-1!==i[t].selectorText.indexOf(n)&&B.sheet.deleteRule(t);F=[]}function y(e,t,n,i){v();var r="."+f._listViewClass+" ."+e+" "+n+" { "+i+"}",s="_addDynamicCssRule:"+e+",info";t?t._writeProfilerMark(s):o("WinJS.UI.ListView:Layout"+s),B.sheet.insertRule(r,0)}function b(e){F.push(e)}function w(e,t,n){return Math.max(e,Math.min(t,n))}function C(e,n){return d.convertToPixels(e,t.getComputedStyle(e,null)[n])}function x(e,t){return C(t,"margin"+e)+C(t,"border"+e+"Width")+C(t,"padding"+e)}function S(e){return x("Top",e)+x("Bottom",e)}function I(e){return x("Left",e)+x("Right",e)}function E(e,t){if(e.items)for(var n=0,i=e.items.length;i>n;n++)t(e.items[n],n);else for(var r=0,s=0;r<e.itemsBlocks.length;r++)for(var o=e.itemsBlocks[r],n=0,i=o.items.length;i>n;n++)t(o.items[n],s++)}function k(e,t){if(0>t)return null;if(e.items)return t<e.items.length?e.items[t]:null;var n=e.itemsBlocks[0].items.length,i=Math.floor(t/n),r=t%n;return i<e.itemsBlocks.length&&r<e.itemsBlocks[i].items.length?e.itemsBlocks[i].items[r]:null}function T(e,t){for(var n,i=0,r=t.length;r>i;i++)if(t[i].itemsContainer.element===e){n=t[i].itemsContainer;break}return n}function P(e){var t,n;return e.itemsBlocks?(t=e.itemsBlocks.length,n=t>0?e.itemsBlocks[0].items.length*(t-1)+e.itemsBlocks[t-1].items.length:0):n=e.items.length,n}function A(e){if(!U){var n=t.document.createElement("div");n.style.width="500px",n.style.visibility="hidden";var i=t.document.createElement("div");i.style.cssText+="width: 500px; height: 200px; display: -webkit-flex; display: flex",p.setInnerHTMLUnsafe(i,"<div style='height: 100%; display: -webkit-flex; display: flex; flex-flow: column wrap; align-content: flex-start; -webkit-flex-flow: column wrap; -webkit-align-content: flex-start'><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div></div>"),n.appendChild(i),e.viewport.insertBefore(n,e.viewport.firstChild);var r=n.offsetWidth>0,s=200;r&&(U={supportsCSSGrid:!!("-ms-grid-row"in t.document.documentElement.style),nestedFlexTooLarge:i.firstElementChild.offsetWidth>s,nestedFlexTooSmall:i.firstElementChild.offsetWidth<s}),e.viewport.removeChild(n)}return U}function M(e){return l.is(e)?{realizedRangeComplete:e,layoutComplete:e}:"object"==typeof e&&e&&e.layoutComplete?e:{realizedRangeComplete:l.wrap(),layoutComplete:l.wrap()}}function O(e){return{left:C(e,"marginLeft"),right:C(e,"marginRight"),top:C(e,"marginTop"),bottom:C(e,"marginBottom")}}var D=d.Key,L=d._uniqueID,R={get itemInfoIsInvalid(){return"Invalid argument: An itemInfo function must be provided which returns an object with numeric width and height properties."},get groupInfoResultIsInvalid(){return"Invalid result: groupInfo result for cell spanning groups must include the following numeric properties: cellWidth and cellHeight."}},B=t.document.createElement("style");t.document.head.appendChild(B);var N=0,F=[],z=i._browserStyleEquivalents,H=z.transform,W=i._browserStyleEquivalents.transition.scriptName,V=H.cssName+" cubic-bezier(0.1, 0.9, 0.2, 1) 167ms",j=12,U=null;n.Namespace._moduleDefine(e,"WinJS.UI",{Layout:n.Class.define(function(){}),_LayoutCommon:n.Namespace._lazy(function(){return n.Class.derive(e.Layout,null,{groupHeaderPosition:{enumerable:!0,get:function(){return this._groupHeaderPosition},set:function(e){this._groupHeaderPosition=e,this._invalidateLayout()}},initialize:function(e,t){e._writeProfilerMark("Layout:initialize,info"),this._inListMode||d.addClass(e.surface,f._gridLayoutClass),this._backdropColorClassName&&d.addClass(e.surface,this._backdropColorClassName),this._disableBackdropClassName&&d.addClass(e.surface,this._disableBackdropClassName),this._groups=[],this._groupMap={},this._oldGroupHeaderPosition=null,this._usingStructuralNodes=!1,this._site=e,this._groupsEnabled=t,this._resetAnimationCaches(!0)},orientation:{enumerable:!0,get:function(){return this._orientation},set:function(e){this._orientation=e,this._horizontal="horizontal"===e,this._invalidateLayout()}},uninitialize:function(){function e(e){var t,n=e.length;for(t=0;n>t;t++)e[t].cleanUp(!0)}var t="Layout:uninitialize,info";this._elementsToMeasure={},this._site?(this._site._writeProfilerMark(t),d.removeClass(this._site.surface,f._gridLayoutClass),d.removeClass(this._site.surface,f._headerPositionTopClass),d.removeClass(this._site.surface,f._headerPositionLeftClass),d.removeClass(this._site.surface,f._structuralNodesClass),this._site.surface.style.cssText="",this._groups&&(e(this._groups),this._groups=null,this._groupMap=null),this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this._resetMeasurements(),this._oldGroupHeaderPosition=null,this._usingStructuralNodes=null,this._backdropColorClassName&&(d.removeClass(this._site.surface,this._backdropColorClassName),b(this._backdropColorClassName),this._backdropColorClassName=null),this._disableBackdropClassName&&(d.removeClass(this._site.surface,this._disableBackdropClassName),b(this._disableBackdropClassName),this._disableBackdropClassName=null),this._site=null,this._groupsEnabled=null,this._animationsRunning&&this._animationsRunning.cancel(),this._animatingItemsBlocks={}):o("WinJS.UI.ListView:"+t)},numberOfItemsPerItemsBlock:{get:function(){function t(){var e,t=n._site.groupCount;for(e=0;t>e;e++)if(n._isCellSpanning(e))return!1;return!0}var n=this;return n._measureItem(0).then(function(){return n._sizes.viewportContentSize!==n._getViewportCrossSize()&&n._viewportSizeChanged(n._getViewportCrossSize()),n._envInfo.nestedFlexTooLarge||n._envInfo.nestedFlexTooSmall||!t()?(n._usingStructuralNodes=!1,null):(n._usingStructuralNodes=e._LayoutCommon._barsPerItemsBlock>0,e._LayoutCommon._barsPerItemsBlock*n._itemsPerBar)})}},layout:function(e,t,n,i){function r(e){function t(e){if(h._usingStructuralNodes){var t=[];return e.itemsBlocks.forEach(function(e){t=t.concat(e.items.slice(0))}),t}return e.items.slice(0)}return{element:e.element,items:t(e)}}function s(){function n(e,t){var n=e.enableCellSpanning?q.CellSpanningGroup:q.UniformGroup;return new n(h,t)}var i,s=h._groups.length>0?h._getRealizationRange():null,o=[],a=[],u={},c={},d=0,p=e.length;for(i=0;p>i;i++){var m=null,f=h._getGroupInfo(i),_=h._site.groupFromIndex(i).key,g=h._groupMap[_],v=g instanceof q.CellSpanningGroup,y=f.enableCellSpanning;if(g)if(v!==y)u[_]=!0;else{var b=Math.max(0,t.firstIndex-g.startIndex),w=h._rangeForGroup(g,s);w&&b<=w.lastIndex&&(m={firstIndex:Math.max(b,w.firstIndex),lastIndex:w.lastIndex})}var C,x=n(f,e[i].itemsContainer.element);C=x.prepareLayoutWithCopyOfTree?x.prepareLayoutWithCopyOfTree(r(e[i].itemsContainer),m,g,{groupInfo:f,startIndex:d}):x.prepareLayout(P(e[i].itemsContainer),m,g,{groupInfo:f,startIndex:d}),a.push(C),d+=x.count,o.push(x),c[_]=x}return l.join(a).then(function(){for(var e=0,t=0,n=o.length;n>t;t++){var i=o[t];i.offset=e,e+=h._getGroupSize(i)}Object.keys(h._groupMap).forEach(function(e){var t=!u[e];h._groupMap[e].cleanUp(t)}),h._groups=o,h._groupMap=c})}function o(e,n,i){var r,s=h._groups[e],o=Math.max(0,t.firstIndex-s.startIndex),a=h._rangeForGroup(s,n);return i?void s.layoutRealizedRange(o,a):(a||(r=s.startIndex+s.count-1<n.firstIndex),s.layoutUnrealizedRange(o,a,r))}function a(){if(0!==h._groups.length){var n,i=h._getRealizationRange(),r=e.length,s=p.groupIndexFromItemIndex(t.firstIndex);for(n=s;r>n;n++)o(n,i,!0),h._layoutGroup(n)}}function u(){if(0===h._groups.length)return l.wrap();var e=h._getRealizationRange(),n=p.groupIndexFromItemIndex(e.firstIndex-1),i=p.groupIndexFromItemIndex(e.lastIndex+1),r=p.groupIndexFromItemIndex(t.firstIndex),s=[],a=h._groups.length,u=!1,c=n,d=Math.max(r,i);for(d=Math.max(c+1,d);!u;)u=!0,c>=r&&(s.push(o(c,e,!1)),u=!1,c--),a>d&&(s.push(o(d,e,!1)),u=!1,d++);return l.join(s)}var c,h=this,p=h._site,m="Layout.layout",_=m+":realizedRange";return h._site._writeProfilerMark(m+",StartTM"),h._site._writeProfilerMark(_+",StartTM"),c=h._measureItem(0).then(function(){return d[h._usingStructuralNodes?"addClass":"removeClass"](h._site.surface,f._structuralNodesClass),h._sizes.viewportContentSize!==h._getViewportCrossSize()&&h._viewportSizeChanged(h._getViewportCrossSize()),h._cacheRemovedElements(n,h._cachedItemRecords,h._cachedInsertedItemRecords,h._cachedRemovedItems,!1),h._cacheRemovedElements(i,h._cachedHeaderRecords,h._cachedInsertedHeaderRecords,h._cachedRemovedHeaders,!0),s()}).then(function(){h._syncDomWithGroupHeaderPosition(e);var t=0;if(h._groups.length>0){var r=h._groups[h._groups.length-1];t=r.offset+h._getGroupSize(r)}h._horizontal?(h._groupsEnabled&&h._groupHeaderPosition===K.left?p.surface.style.cssText+=";height:"+h._sizes.surfaceContentSize+"px;-ms-grid-columns: ("+h._sizes.headerContainerWidth+"px auto)["+e.length+"]":p.surface.style.height=h._sizes.surfaceContentSize+"px",(h._envInfo.nestedFlexTooLarge||h._envInfo.nestedFlexTooSmall)&&(p.surface.style.width=t+"px")):(h._groupsEnabled&&h._groupHeaderPosition===K.top?p.surface.style.cssText+=";width:"+h._sizes.surfaceContentSize+"px;-ms-grid-rows: ("+h._sizes.headerContainerHeight+"px auto)["+e.length+"]":p.surface.style.width=h._sizes.surfaceContentSize+"px",(h._envInfo.nestedFlexTooLarge||h._envInfo.nestedFlexTooSmall)&&(p.surface.style.height=t+"px")),a(),h._layoutAnimations(n,i),h._site._writeProfilerMark(_+":complete,info"),h._site._writeProfilerMark(_+",StopTM")},function(e){return h._site._writeProfilerMark(_+":canceled,info"),h._site._writeProfilerMark(_+",StopTM"),l.wrapError(e)}),h._layoutPromise=c.then(function(){return u().then(function(){h._site._writeProfilerMark(m+":complete,info"),h._site._writeProfilerMark(m+",StopTM")},function(e){return h._site._writeProfilerMark(m+":canceled,info"),h._site._writeProfilerMark(m+",StopTM"),l.wrapError(e)})}),{realizedRangeComplete:c,layoutComplete:h._layoutPromise}},itemsFromRange:function(e,t){return this._rangeContainsItems(e,t)?{firstIndex:this._firstItemFromRange(e),lastIndex:this._lastItemFromRange(t)}:{firstIndex:0,lastIndex:-1}},getAdjacent:function(t,n){function i(){var e={type:t.type,index:t.index-o.startIndex},n=o.getAdjacent(e,a);if("boundary"===n){var i=r._groups[s-1],l=r._groups[s+1],u=r._groups.length-1;if(a===D.leftArrow){if(0===s)return t;if(i instanceof q.UniformGroup&&o instanceof q.UniformGroup){var c=r._indexToCoordinate(e.index),h=r._horizontal?c.row:c.column,d=Math.floor((i.count-1)/r._itemsPerBar),p=d*r._itemsPerBar;return{type:m.ObjectType.item,index:i.startIndex+Math.min(i.count-1,p+h)}}return{type:m.ObjectType.item,index:o.startIndex-1}}if(a===D.rightArrow){if(s===u)return t;if(o instanceof q.UniformGroup&&l instanceof q.UniformGroup){var c=r._indexToCoordinate(e.index),h=r._horizontal?c.row:c.column;return{type:m.ObjectType.item,index:l.startIndex+Math.min(l.count-1,h)}}return{type:m.ObjectType.item,index:l.startIndex}}return t}return n.index+=o.startIndex,n}var r=this,s=r._site.groupIndexFromItemIndex(t.index),o=r._groups[s],a=r._adjustedKeyForOrientationAndBars(r._adjustedKeyForRTL(n),o instanceof q.CellSpanningGroup);if(t.type===m.ObjectType.groupHeader){if(n!==D.pageUp&&n!==D.pageDown){switch(a){case D.leftArrow:return{type:m.ObjectType.groupHeader,index:Math.max(0,t.index-1)};case D.rightArrow:return{type:m.ObjectType.groupHeader,index:Math.min(r._groups.length-1,t.index+1)}}return t}t={type:m.ObjectType.item,index:this._groups[t.index].startIndex}}switch(r._adjustedKeyForRTL(n)){case D.upArrow:case D.leftArrow:case D.downArrow:case D.rightArrow:return i();default:return e._LayoutCommon.prototype._getAdjacentForPageKeys.call(r,t,n)}},hitTest:function(e,t){var n,i=this._sizes;e-=i.layoutOriginX,t-=i.layoutOriginY;var r=this._groupFromOffset(this._horizontal?e:t),s=this._groups[r];return this._horizontal?e-=s.offset:t-=s.offset,this._groupsEnabled&&(this._groupHeaderPosition===K.left?e-=i.headerContainerWidth:t-=i.headerContainerHeight),n=s.hitTest(e,t),n.index+=s.startIndex,n.insertAfterIndex+=s.startIndex,n},setupAnimations:function(){if(0===this._groups.length)return void this._resetAnimationCaches();if(!Object.keys(this._cachedItemRecords).length){this._site._writeProfilerMark("Animation:setupAnimations,StartTM");for(var e=this._getRealizationRange(),t=this._site.tree,n=0,i="horizontal"===this.orientation,r=0,s=t.length;s>r;r++){var o=t[r],a=!1,l=this._groups[r],u=l instanceof q.CellSpanningGroup,c=l?l.offset:0;if(E(o.itemsContainer,function(t,i){if(e.firstIndex<=n&&e.lastIndex>=n&&(a=!0,!this._cachedItemRecords[n])){var s=this._getItemPositionForAnimations(n,r,i),o=s.row,l=s.column,c=s.left,h=s.top;this._cachedItemRecords[n]={oldRow:o,oldColumn:l,oldLeft:c,oldTop:h,width:s.width,height:s.height,element:t,inCellSpanningGroup:u}}n++}.bind(this)),a){var h=r;if(!this._cachedHeaderRecords[h]){var d=this._getHeaderPositionForAnimations(h);this._cachedHeaderRecords[h]={oldLeft:d.left,oldTop:d.top,width:d.width,height:d.height,element:o.header}}this._cachedGroupRecords[L(o.itemsContainer.element)]||(this._cachedGroupRecords[L(o.itemsContainer.element)]={oldLeft:i?c:0,left:i?c:0,oldTop:i?0:c,top:i?0:c,element:o.itemsContainer.element})}}this._site._writeProfilerMark("Animation:setupAnimations,StopTM")}},_layoutAnimations:function(e,t){if(Object.keys(this._cachedItemRecords).length||Object.keys(this._cachedGroupRecords).length||Object.keys(this._cachedHeaderRecords).length){this._site._writeProfilerMark("Animation:layoutAnimation,StartTM"),this._updateAnimationCache(e,t);for(var n=this._getRealizationRange(),i=this._site.tree,r=0,s="horizontal"===this.orientation,o=0,a=i.length;a>o;o++){var l=i[o],u=this._groups[o],c=u instanceof q.CellSpanningGroup,h=u?u.offset:0,p=0,m=0,_=this._cachedGroupRecords[L(l.itemsContainer.element)];_&&(s?p=_.oldLeft-h:m=_.oldTop-h),E(l.itemsContainer,function(e,t){if(n.firstIndex<=r&&n.lastIndex>=r){var i=this._cachedItemRecords[r];if(i){var s=this._getItemPositionForAnimations(r,o,t),a=s.row,l=s.column,u=s.left,h=s.top;if(i.inCellSpanningGroup=i.inCellSpanningGroup||c,i.oldRow!==a||i.oldColumn!==l||i.oldTop!==h||i.oldLeft!==u){i.row=a,i.column=l,i.left=u,i.top=h;var _=i.oldLeft-i.left-p,g=i.oldTop-i.top-m;if(_=(this._site.rtl?-1:1)*_,i.xOffset=_,i.yOffset=g,0!==_||0!==g){var v=i.element;i.needsToResetTransform=!0,v.style[W]="",v.style[H.scriptName]="translate("+_+"px,"+g+"px)"}var y=e.parentNode;d.hasClass(y,f._itemsBlockClass)&&(this._animatingItemsBlocks[L(y)]=y)}}else this._cachedInsertedItemRecords[r]=e,e.style[W]="",e.style.opacity=0}r++}.bind(this));var g=o,v=this._cachedHeaderRecords[g];
if(v){var y=this._getHeaderPositionForAnimations(g);if(v.height=y.height,v.width=y.width,v.oldLeft!==y.left||v.oldTop!==y.top){v.left=y.left,v.top=y.top;var b=v.oldLeft-v.left,w=v.oldTop-v.top;if(b=(this._site.rtl?-1:1)*b,0!==b||0!==w){v.needsToResetTransform=!0;var C=v.element;C.style[W]="",C.style[H.scriptName]="translate("+b+"px,"+w+"px)"}}}if(_&&(s&&_.left!==h||!s&&_.top!==h)){var x=_.element;if(0===p&&0===m)_.needsToResetTransform&&(_.needsToResetTransform=!1,x.style[H.scriptName]="");else{var S=(this._site.rtl?-1:1)*p,I=m;_.needsToResetTransform=!0,x.style[W]="",x.style[H.scriptName]="translate("+S+"px, "+I+"px)"}}}if(this._inListMode||1===this._itemsPerBar)for(var k=Object.keys(this._animatingItemsBlocks),T=0,P=k.length;P>T;T++)this._animatingItemsBlocks[k[T]].style.overflow="visible";this._site._writeProfilerMark("Animation:layoutAnimation,StopTM")}},executeAnimations:function(){function t(){if(r(),D)s();else{if(tt._itemsPerBar>1)for(var e=tt._itemsPerBar*tt._sizes.containerCrossSize+tt._getHeaderSizeContentAdjustment()+tt._sizes.containerMargins[K?"top":w.rtl?"right":"left"]+(K?tt._sizes.layoutOriginY:tt._sizes.layoutOriginX),t=0,n=S.length;n>t;t++){var i=S[t];i[J]>i[G]?(z=Math.max(z,i[$]+i[K?"height":"width"]),j=Math.max(j,e-i[Y]),R=!0,q.push(i)):i[J]<i[G]&&(V=Math.max(V,e-i[$]),U=Math.max(U,i[Y]+i[K?"height":"width"]),q.push(i),R=!0)}w.rtl&&!K&&(z*=-1,j*=-1,V*=-1,U*=-1),R?u(tt._itemsPerBar):_()}}function n(t){M=l.join(O),M.done(function(){O=[],y&&(e.Layout._debugAnimations?i._requestAnimationFrame(function(){t()}):t())})}function r(){if(x.length){w._writeProfilerMark("Animation:setupRemoveAnimation,StartTM"),k+=60,A+=60;var e=120;b&&(e*=10),O.push(a.executeTransition(x,[{property:"opacity",delay:E,duration:e,timing:"linear",to:0,skipStylesReset:!0}])),w._writeProfilerMark("Animation:setupRemoveAnimation,StopTM")}}function s(){w._writeProfilerMark("Animation:cellSpanningFadeOutMove,StartTM");for(var e=[],t=0,i=S.length;i>t;t++){var r=S[t],s=r.element;e.push(s)}for(var t=0,i=I.length;i>t;t++){var r=I[t],s=r.element;e.push(s)}var l=120;b&&(l*=10),O.push(a.executeTransition(e,{property:"opacity",delay:E,duration:l,timing:"linear",to:0})),n(o),w._writeProfilerMark("Animation:cellSpanningFadeOutMove,StopTM")}function o(){w._writeProfilerMark("Animation:cellSpanningFadeInMove,StartTM"),A=0;for(var e=[],t=0,n=S.length;n>t;t++){var i=S[t],r=i.element;r.style[H.scriptName]="",e.push(r)}for(var t=0,n=I.length;n>t;t++){var i=I[t],r=i.element;r.style[H.scriptName]="",e.push(r)}var s=120;b&&(s*=10),O.push(a.executeTransition(e,{property:"opacity",delay:A,duration:s,timing:"linear",to:1})),w._writeProfilerMark("Animation:cellSpanningFadeInMove,StopTM"),g()}function u(e){w._writeProfilerMark("Animation:setupReflowAnimation,StartTM");for(var t={},i=0,r=q.length;r>i;i++){var s=q[i],o=s.xOffset,l=s.yOffset;s[J]>s[G]?K?l-=z:o-=z:s[J]<s[G]&&(K?l+=V:o+=V);var u=s.element;B=Math.min(B,K?o:l),N=Math.max(N,K?o:l);var c=u.parentNode;d.hasClass(c,"win-itemscontainer")||(c=c.parentNode);var h=t[L(c)];if(!h){var p=P(T(c,w.tree));t[L(c)]=h=Math.ceil(p/e)-1}q[i][K?"column":"row"]===h&&(F[L(c)]=c);var _=80;b&&(_*=10),O.push(a.executeTransition(u,{property:H.cssName,delay:k,duration:_,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"translate("+o+"px,"+l+"px)"}))}for(var g=Object.keys(F),i=0,r=g.length;r>i;i++){var v=F[g[i]];w.rtl&&K?(v.style.paddingLeft=-1*B+"px",v.style.marginLeft=B+"px"):(v.style[K?"paddingRight":"paddingBottom"]=N+"px",v.style[K?"marginRight":"marginBottom"]="-"+N+"px")}for(var y=Object.keys(Z),i=0,r=y.length;r>i;i++)Z[y[i]].classList.add(f._clipClass);n(m),w._writeProfilerMark("Animation:setupReflowAnimation,StopTM")}function p(){for(var e=Object.keys(F),t=0,n=e.length;n>t;t++){var i=F[e[t]];w.rtl&&K?(i.style.paddingLeft="",i.style.marginLeft=""):(i.style[K?"paddingRight":"paddingBottom"]="",i.style[K?"marginRight":"marginBottom"]="")}F={};for(var r=Object.keys(Z),t=0,n=r.length;n>t;t++){var s=Z[r[t]];s.style.overflow="",s.classList.remove(f._clipClass)}}function m(){w._writeProfilerMark("Animation:prepareReflowedItems,StartTM");for(var t=0,n=q.length;n>t;t++){var r=q[t],s=0,o=0;r[J]>r[G]?K?o=j:s=j:r[J]<r[G]&&(K?o=-1*U:s=-1*U),r.element.style[W]="",r.element.style[H.scriptName]="translate("+s+"px,"+o+"px)"}w._writeProfilerMark("Animation:prepareReflowedItems,StopTM"),e.Layout._debugAnimations?i._requestAnimationFrame(function(){_(!0)}):_(!0)}function _(e){var t=200;if(e&&(t=150,k=0,A=0),b&&(t*=10),S.length>0||I.length>0){w._writeProfilerMark("Animation:setupMoveAnimation,StartTM");for(var n=[],i=0,r=I.length;r>i;i++){var s=I[i].element;n.push(s)}for(var i=0,r=S.length;r>i;i++){var s=S[i].element;n.push(s)}O.push(a.executeTransition(n,{property:H.cssName,delay:k,duration:t,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""})),A+=80,w._writeProfilerMark("Animation:setupMoveAnimation,StopTM")}g()}function g(){if(C.length>0){w._writeProfilerMark("Animation:setupInsertAnimation,StartTM");var e=120;b&&(e*=10),O.push(a.executeTransition(C,[{property:"opacity",delay:A,duration:e,timing:"linear",to:1}])),w._writeProfilerMark("Animation:setupInsertAnimation,StopTM")}n(v)}function v(){w._writeProfilerMark("Animation:cleanupAnimations,StartTM"),p();for(var e=0,t=x.length;t>e;e++){var n=x[e];n.parentNode&&(h._disposeElement(n),n.parentNode.removeChild(n))}w._writeProfilerMark("Animation:cleanupAnimations,StopTM"),tt._animationsRunning=null,y.complete()}var y=new c;if(this._filterInsertedElements(),this._filterMovedElements(),this._filterRemovedElements(),0===this._insertedElements.length&&0===this._removedElements.length&&0===this._itemMoveRecords.length&&0===this._moveRecords.length)return this._resetAnimationCaches(!0),y.complete(),y.promise;this._animationsRunning=y.promise;for(var b=e.Layout._debugAnimations||e.Layout._slowAnimations,w=this._site,C=this._insertedElements,x=this._removedElements,S=this._itemMoveRecords,I=this._moveRecords,E=0,k=0,A=0,M=null,O=[],D=!1,R=!1,B=0,N=0,F={},z=0,V=0,j=0,U=0,q=[],K="horizontal"===this.orientation,J=K?"oldColumn":"oldRow",G=K?"column":"row",$=K?"oldTop":"oldLeft",Y=K?"top":"left",Z=this._animatingItemsBlocks,X=0,Q=S.length;Q>X;X++){var et=S[X];if(et.inCellSpanningGroup){D=!0;break}}var tt=this;return e.Layout._debugAnimations?i._requestAnimationFrame(function(){t()}):t(),this._resetAnimationCaches(!0),y.promise.then(null,function(){p();for(var e=0,t=I.length;t>e;e++){var n=I[e].element;n.style[H.scriptName]="",n.style.opacity=1}for(var e=0,t=S.length;t>e;e++){var n=S[e].element;n.style[H.scriptName]="",n.style.opacity=1}for(var e=0,t=C.length;t>e;e++)C[e].style.opacity=1;for(var e=0,t=x.length;t>e;e++){var n=x[e];n.parentNode&&(h._disposeElement(n),n.parentNode.removeChild(n))}this._animationsRunning=null,y=null,M&&M.cancel()}.bind(this)),y.promise},dragOver:function(e,t,n){var i=this.hitTest(e,t),r=this._groups?this._site.groupIndexFromItemIndex(i.index):0,s=this._site.tree[r].itemsContainer,o=P(s),a=this._groups?this._groups[r].startIndex:0,l=this._getVisibleRange();i.index-=a,i.insertAfterIndex-=a,l.firstIndex=Math.max(l.firstIndex-a-1,0),l.lastIndex=Math.min(l.lastIndex-a+1,o);var u=Math.max(Math.min(o-1,i.insertAfterIndex),-1),c=Math.min(u+1,o);if(n){for(var h=u;h>=l.firstIndex;h--){if(!n._isIncluded(h+a)){u=h;break}h===l.firstIndex&&(u=-1)}for(var h=c;h<l.lastIndex;h++){if(!n._isIncluded(h+a)){c=h;break}h===l.lastIndex-1&&(c=o)}}var d=k(s,c),p=k(s,u);if(this._animatedDragItems)for(var h=0,m=this._animatedDragItems.length;m>h;h++){var f=this._animatedDragItems[h];f&&(f.style[W]=this._site.animationsDisabled?"":V,f.style[H.scriptName]="")}this._animatedDragItems=[];var _="horizontal"===this.orientation,g=this._inListMode||1===this._itemsPerBar;this._groups&&this._groups[r]instanceof q.CellSpanningGroup&&(g=1===this._groups[r]._slotsPerColumn);var v=0,y=0;!_&&!g||_&&g?v=this._site.rtl?-j:j:y=j,d&&(d.style[W]=this._site.animationsDisabled?"":V,d.style[H.scriptName]="translate("+v+"px, "+y+"px)",this._animatedDragItems.push(d)),p&&(p.style[W]=this._site.animationsDisabled?"":V,p.style[H.scriptName]="translate("+-v+"px, -"+y+"px)",this._animatedDragItems.push(p))},dragLeave:function(){if(this._animatedDragItems)for(var e=0,t=this._animatedDragItems.length;t>e;e++)this._animatedDragItems[e].style[W]=this._site.animationsDisabled?"":V,this._animatedDragItems[e].style[H.scriptName]="";this._animatedDragItems=[]},_setMaxRowsOrColumns:function(e){e===this._maxRowsOrColumns||this._inListMode||(this._sizes&&this._sizes.containerSizeLoaded&&(this._itemsPerBar=Math.floor(this._sizes.maxItemsContainerContentSize/this._sizes.containerCrossSize),e&&(this._itemsPerBar=Math.min(this._itemsPerBar,e)),this._itemsPerBar=Math.max(1,this._itemsPerBar)),this._maxRowsOrColumns=e,this._invalidateLayout())},_getItemPosition:function(e){if(this._groupsEnabled){var t=Math.min(this._groups.length-1,this._site.groupIndexFromItemIndex(e)),n=this._groups[t],i=e-n.startIndex;return this._getItemPositionForAnimations(e,t,i)}return this._getItemPositionForAnimations(e,0,e)},_getRealizationRange:function(){var e=this._site.realizedRange;return{firstIndex:this._firstItemFromRange(e.firstPixel),lastIndex:this._lastItemFromRange(e.lastPixel)}},_getVisibleRange:function(){var e=this._site.visibleRange;return{firstIndex:this._firstItemFromRange(e.firstPixel),lastIndex:this._lastItemFromRange(e.lastPixel)}},_resetAnimationCaches:function(e){if(!e){this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords),this._resetStylesForRemovedRecords(this._cachedRemovedItems),this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);for(var t=Object.keys(this._animatingItemsBlocks),n=0,i=t.length;i>n;n++){var r=this._animatingItemsBlocks[t[n]];r.style.overflow="",r.classList.remove(f._clipClass)}}this._cachedGroupRecords={},this._cachedItemRecords={},this._cachedHeaderRecords={},this._cachedInsertedItemRecords={},this._cachedInsertedHeaderRecords={},this._cachedRemovedItems=[],this._cachedRemovedHeaders=[],this._animatingItemsBlocks={}},_cacheRemovedElements:function(e,t,n,i,r){var s="left";this._site.rtl&&(s="right");var o,a;r?(o=this._sizes.headerContainerOuterX,a=this._sizes.headerContainerOuterY):(o=this._sizes.containerMargins[s],a=this._sizes.containerMargins.top);for(var l=0,u=e.length;u>l;l++){var c=e[l];if(-1===c.newIndex){var h=c.element,d=t[c.oldIndex];d&&(d.element=h,delete t[c.oldIndex],h.style.position="absolute",h.style[W]="",h.style.top=d.oldTop-a+"px",h.style[s]=d.oldLeft-o+"px",h.style.width=d.width+"px",h.style.height=d.height+"px",h.style[H.scriptName]="",this._site.surface.appendChild(h),i.push(d)),n[c.oldIndex]&&delete n[c.oldIndex]}}},_cacheInsertedElements:function(e,t,n){for(var i={},r=0,s=e.length;s>r;r++){var o=e[r],a=t[o.oldIndex];if(a&&delete t[o.oldIndex],a||-1===o.oldIndex||o.moved){var l=n[o.newIndex];l&&delete n[o.newIndex];var u=o.element;i[o.newIndex]=u,u.style[W]="",u.style[H.scriptName]="",u.style.opacity=0}}for(var c=Object.keys(t),r=0,s=c.length;s>r;r++)i[c[r]]=t[c[r]];return i},_resetStylesForRecords:function(e){for(var t=Object.keys(e),n=0,i=t.length;i>n;n++){var r=e[t[n]];r.needsToResetTransform&&(r.element.style[H.scriptName]="",r.needsToResetTransform=!1)}},_resetStylesForInsertedRecords:function(e){for(var t=Object.keys(e),n=0,i=t.length;i>n;n++){var r=e[t[n]];r.style.opacity=1}},_resetStylesForRemovedRecords:function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t].element;i.parentNode&&(h._disposeElement(i),i.parentNode.removeChild(i))}},_updateAnimationCache:function(e,t){function n(e,t){for(var n={},r=0,s=e.length;s>r;r++){var o=e[r],a=t[o.oldIndex];a&&(n[o.newIndex]=a,a.element=o.element,delete t[o.oldIndex])}for(var l=Object.keys(t),r=0,s=l.length;s>r;r++){var u=l[r],c=t[u];(!c.element||i[L(c.element)])&&(n[u]=c)}return n}this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);for(var i={},r=this._getRealizationRange(),s=this._site.tree,o=0,a=0,l=s.length;l>o;o++)E(s[o].itemsContainer,function(e){r.firstIndex<=a&&r.lastIndex>=a&&(i[L(e)]=!0),a++});this._cachedItemRecords=n(e,this._cachedItemRecords),this._cachedHeaderRecords=n(t,this._cachedHeaderRecords),this._cachedInsertedItemRecords=this._cacheInsertedElements(e,this._cachedInsertedItemRecords,this._cachedItemRecords),this._cachedInsertedHeaderRecords=this._cacheInsertedElements(t,this._cachedInsertedHeaderRecords,this._cachedHeaderRecords)},_filterRemovedElements:function(){function e(e,o){for(var a=0,l=e.length;l>a;a++){var u=e[a],c=u.element;u[n]+u[i]-1<r||u[n]>s||!t._site.viewport.contains(c)?c.parentNode&&(h._disposeElement(c),c.parentNode.removeChild(c)):o.push(c)}}if(this._removedElements=[],this._site.animationsDisabled)return this._resetStylesForRemovedRecords(this._cachedRemovedItems),void this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);var t=this,n="horizontal"===this.orientation?"oldLeft":"oldTop",i="horizontal"===this.orientation?"width":"height",r=this._site.scrollbarPos,s=r+this._site.viewportSize[i]-1;e(this._cachedRemovedItems,this._removedElements),e(this._cachedRemovedHeaders,this._removedElements)},_filterInsertedElements:function(){function e(e,i){for(var r=Object.keys(e),s=0,o=r.length;o>s;s++){var a=r[s],l=e[a];a<n.firstIndex||a>n.lastIndex||t._site.viewport.contains(l.element)?l.style.opacity=1:i.push(l)}}if(this._insertedElements=[],this._site.animationsDisabled)return this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),void this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);var t=this,n=this._getVisibleRange();e(this._cachedInsertedItemRecords,this._insertedElements),e(this._cachedInsertedHeaderRecords,this._insertedElements)},_filterMovedElements:function(){var e=this,t="horizontal"===this.orientation?"oldLeft":"oldTop",n="horizontal"===this.orientation?"left":"top",i="horizontal"===this.orientation?"width":"height",r=this._getRealizationRange(),s=this._site.scrollbarPos,o=s+this._site.viewportSize[i]-1;if(this._itemMoveRecords=[],this._moveRecords=[],!this._site.animationsDisabled)for(var a=this._site.tree,l=0,u=0,c=a.length;c>u;u++){var h=a[u],d=!1;E(h.itemsContainer,function(){if(r.firstIndex<=l&&r.lastIndex>=l){var a=this._cachedItemRecords[l];if(a){var u=(a[t]+a[i]-1>=s&&a[t]<=o||a[n]+a[i]-1>=s&&a[n]<=o)&&e._site.viewport.contains(a.element);u&&(d=!0,a.needsToResetTransform&&(this._itemMoveRecords.push(a),delete this._cachedItemRecords[l]))}}l++}.bind(this));var p=u,m=this._cachedHeaderRecords[p];m&&d&&m.needsToResetTransform&&(this._moveRecords.push(m),delete this._cachedHeaderRecords[p]);var f=this._cachedGroupRecords[L(h.itemsContainer.element)];f&&d&&f.needsToResetTransform&&(this._moveRecords.push(f),delete this._cachedGroupRecords[L(h.itemsContainer.element)])}this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords)},_getItemPositionForAnimations:function(e,t,n){var i=this._groups[t],r=i.getItemPositionForAnimations(n),s=this._groups[t]?this._groups[t].offset:0,o=this._groupsEnabled&&this._groupHeaderPosition===K.left?this._sizes.headerContainerWidth:0,a=this._groupsEnabled&&this._groupHeaderPosition===K.top?this._sizes.headerContainerHeight:0;return r.left+=this._sizes.layoutOriginX+o+this._sizes.itemsContainerOuterX,r.top+=this._sizes.layoutOriginY+a+this._sizes.itemsContainerOuterY,r[this._horizontal?"left":"top"]+=s,r},_getHeaderPositionForAnimations:function(e){var t;if(this._groupsEnabled){var n=this._sizes.headerContainerWidth-this._sizes.headerContainerOuterWidth,i=this._sizes.headerContainerHeight-this._sizes.headerContainerOuterHeight;this._groupHeaderPosition!==K.left||this._horizontal?this._groupHeaderPosition===K.top&&this._horizontal&&(n=this._groups[e].getItemsContainerSize()-this._sizes.headerContainerOuterWidth):i=this._groups[e].getItemsContainerSize()-this._sizes.headerContainerOuterHeight;var r=this._horizontal?this._groups[e].offset:0,s=this._horizontal?0:this._groups[e].offset;t={top:this._sizes.layoutOriginY+s+this._sizes.headerContainerOuterY,left:this._sizes.layoutOriginX+r+this._sizes.headerContainerOuterX,height:i,width:n}}else t={top:0,left:0,height:0,width:0};return t},_rangeContainsItems:function(e,t){if(0===this._groups.length)return!1;var n=this._groups[this._groups.length-1],i=this._sizes.layoutOrigin+n.offset+this._getGroupSize(n)-1;return t>=0&&i>=e},_itemFromOffset:function(e,t){function n(e){if(!t.wholeItem){var n=r._horizontal?r._site.rtl?"right":"left":"top",i=r._horizontal?r._site.rtl?"left":"right":"bottom";return t.last?e-r._sizes.containerMargins[n]:e+r._sizes.containerMargins[i]}return e}function i(e){return t.last?e-r._getHeaderSizeGroupAdjustment()-r._sizes.itemsContainerOuterStart:e}var r=this;if(0===this._groups.length)return 0;t=t||{},e-=this._sizes.layoutOrigin,e=n(e);var s=this._groupFromOffset(i(e)),o=this._groups[s];return e-=o.offset,e-=this._getHeaderSizeGroupAdjustment(),o.startIndex+o.itemFromOffset(e,t)},_firstItemFromRange:function(e,t){return t=t||{},t.last=0,this._itemFromOffset(e,t)},_lastItemFromRange:function(e,t){return t=t||{},t.last=1,this._itemFromOffset(e,t)},_adjustedKeyForRTL:function(e){return this._site.rtl&&(e===D.leftArrow?e=D.rightArrow:e===D.rightArrow&&(e=D.leftArrow)),e},_adjustedKeyForOrientationAndBars:function(e,t){var n=e;if(t)return e;if(!this._horizontal)switch(n){case D.leftArrow:n=D.upArrow;break;case D.rightArrow:n=D.downArrow;break;case D.upArrow:n=D.leftArrow;break;case D.downArrow:n=D.rightArrow}return 1===this._itemsPerBar&&(n===D.upArrow?n=D.leftArrow:n===D.downArrow&&(n=D.rightArrow)),n},_getAdjacentForPageKeys:function(e,t){var n,i=this._sizes.containerMargins,r="horizontal"===this.orientation?i.left+i.right:i.top+i.bottom,s=this._site.viewportSize["horizontal"===this.orientation?"width":"height"],o=this._site.scrollbarPos,a=o+s-1-i["horizontal"===this.orientation?"right":"bottom"],l=this._firstItemFromRange(o,{wholeItem:!0}),u=this._lastItemFromRange(a,{wholeItem:!1}),c=this._getItemPosition(e.index),h=!1;if((e.index<l||e.index>u)&&(h=!0,o="horizontal"===this.orientation?c.left-r:c.top-r,a=o+s-1,l=this._firstItemFromRange(o,{wholeItem:!0}),u=this._lastItemFromRange(a,{wholeItem:!1})),t===D.pageUp){if(!h&&l!==e.index)return{type:m.ObjectType.item,index:l};var d;d="horizontal"===this.orientation?c.left+c.width+r+i.left:c.top+c.height+r+i.bottom;var p=this._firstItemFromRange(d-s,{wholeItem:!0});n=e.index===p?Math.max(0,e.index-this._itemsPerBar):p}else{if(!h&&u!==e.index)return{type:m.ObjectType.item,index:u};var f;f="horizontal"===this.orientation?c.left-r-i.right:c.top-r-i.bottom;var _=Math.max(0,this._lastItemFromRange(f+s-1,{wholeItem:!0}));n=e.index===_?e.index+this._itemsPerBar:_}return{type:m.ObjectType.item,index:n}},_isCellSpanning:function(e){var t=this._site.groupFromIndex(e),n=this._groupInfo;return n?!!("function"==typeof n?n(t):n).enableCellSpanning:!1},_getGroupInfo:function(e){var t=this._site.groupFromIndex(e),n=this._groupInfo,i=this._sizes.containerMargins,s={enableCellSpanning:!1};if(n="function"==typeof n?n(t):n){if(n.enableCellSpanning&&(+n.cellWidth!==n.cellWidth||+n.cellHeight!==n.cellHeight))throw new r("WinJS.UI.GridLayout.GroupInfoResultIsInvalid",R.groupInfoResultIsInvalid);s={enableCellSpanning:!!n.enableCellSpanning,cellWidth:n.cellWidth+i.left+i.right,cellHeight:n.cellHeight+i.top+i.bottom}}return s},_getItemInfo:function(e){var t;if(this._itemInfo&&"function"==typeof this._itemInfo)t=this._itemInfo(e);else{if(!this._useDefaultItemInfo)throw new r("WinJS.UI.GridLayout.ItemInfoIsInvalid",R.itemInfoIsInvalid);t=this._defaultItemInfo(e)}return l.as(t).then(function(e){if(!e||+e.width!==e.width||+e.height!==e.height)throw new r("WinJS.UI.GridLayout.ItemInfoIsInvalid",R.itemInfoIsInvalid);return e})},_defaultItemInfo:function(e){var t=this;return this._site.renderItem(this._site.itemFromIndex(e)).then(function(n){return t._elementsToMeasure[e]={element:n},t._measureElements()}).then(function(){var n=t._elementsToMeasure[e],i={width:n.width,height:n.height};return delete t._elementsToMeasure[e],i},function(n){return delete t._elementsToMeasure[e],l.wrapError(n)})},_getGroupSize:function(e){var t=0;return this._groupsEnabled&&(this._horizontal&&this._groupHeaderPosition===K.top?t=this._sizes.headerContainerMinWidth:this._horizontal||this._groupHeaderPosition!==K.left||(t=this._sizes.headerContainerMinHeight)),Math.max(t,e.getItemsContainerSize()+this._getHeaderSizeGroupAdjustment())},_groupFromOffset:function(e){return e<this._groups[0].offset?0:this._groupFrom(function(t){return e<t.offset})},_groupFromImpl:function(e,t,n){if(e>t)return null;var i=e+Math.floor((t-e)/2),r=this._groups[i];return n(r,i)?this._groupFromImpl(e,i-1,n):t>i&&!n(this._groups[i+1],i+1)?this._groupFromImpl(i+1,t,n):i},_groupFrom:function(e){if(this._groups.length>0){var t=this._groups.length-1,n=this._groups[t];return e(n,t)?this._groupFromImpl(0,this._groups.length-1,e):t}return null},_invalidateLayout:function(){this._site&&this._site.invalidateLayout()},_resetMeasurements:function(){this._measuringPromise&&(this._measuringPromise.cancel(),this._measuringPromise=null),this._containerSizeClassName&&(d.removeClass(this._site.surface,this._containerSizeClassName),b(this._containerSizeClassName),this._containerSizeClassName=null),this._sizes=null,this._resetAnimationCaches()},_measureElements:function(){if(!this._measuringElements){var e=this;e._measuringElements=u.schedulePromiseHigh(null,"WinJS.UI.GridLayout._measuringElements").then(function(){e._site._writeProfilerMark("_measureElements,StartTM");var n=e._createMeasuringSurface(),i=t.document.createElement("div"),r=e._site,s=e._measuringElements,o=e._elementsToMeasure,a=!1;i.className=f._itemsContainerClass+" "+f._laidOutClass,i.style.cssText+=";display: -ms-grid;-ms-grid-column: 1;-ms-grid-row: 1";var l,u,c=Object.keys(o);for(u=0,l=c.length;l>u;u++){var h=o[c[u]].element;h.style["-ms-grid-column"]=u+1,h.style["-ms-grid-row"]=u+1,i.appendChild(h)}for(n.appendChild(i),r.viewport.insertBefore(n,r.viewport.firstChild),s.then(null,function(){a=!0}),u=0,l=c.length;l>u&&!a;u++){var p=o[c[u]],m=p.element.querySelector("."+f._itemClass);p.width=d.getTotalWidth(m),p.height=d.getTotalHeight(m)}n.parentNode&&n.parentNode.removeChild(n),s===e._measuringElements&&(e._measuringElements=null),r._writeProfilerMark("_measureElements,StopTM")},function(t){return e._measuringElements=null,l.wrapError(t)})}return this._measuringElements},_ensureEnvInfo:function(){return this._envInfo||(this._envInfo=A(this._site),this._envInfo&&!this._envInfo.supportsCSSGrid&&d.addClass(this._site.surface,f._noCSSGrid)),!!this._envInfo},_createMeasuringSurface:function(){var e=t.document.createElement("div");return e.style.cssText="visibility: hidden;-ms-grid-columns: auto;-ms-grid-rows: auto;-ms-flex-align: start;-webkit-align-items: flex-start;align-items: flex-start",e.className=f._scrollableClass+" "+(this._inListMode?f._listLayoutClass:f._gridLayoutClass),this._envInfo.supportsCSSGrid||d.addClass(e,f._noCSSGrid),this._groupsEnabled&&(this._groupHeaderPosition===K.top?d.addClass(e,f._headerPositionTopClass):d.addClass(e,f._headerPositionLeftClass)),e},_measureItem:function(e){function n(e,r){var r,a=!!r,u={},c=s.rtl?"right":"left";return s.itemCount.then(function(t){return!t||i._groupsEnabled&&!s.groupCount?l.cancel:(r=r||s.itemFromIndex(e),u.container=s.renderItem(r),i._groupsEnabled&&(u.headerContainer=s.renderHeader(i._site.groupFromIndex(s.groupIndexFromItemIndex(e)))),l.join(u))}).then(function(u){function h(){var e=i._horizontal,t=i._groupsEnabled,n=!1;o.then(null,function(){n=!0});var r=O(T),a=s.rtl?s.viewport.offsetWidth-(T.offsetLeft+T.offsetWidth):T.offsetLeft,l=T.offsetTop,h={viewportContentSize:0,surfaceContentSize:0,maxItemsContainerContentSize:0,surfaceOuterHeight:S(m),surfaceOuterWidth:I(m),layoutOriginX:a-r[c],layoutOriginY:l-r.top,itemsContainerOuterHeight:S(_),itemsContainerOuterWidth:I(_),itemsContainerOuterX:x(s.rtl?"Right":"Left",_),itemsContainerOuterY:x("Top",_),itemsContainerMargins:O(_),itemBoxOuterHeight:S(v),itemBoxOuterWidth:I(v),containerOuterHeight:S(u.container),containerOuterWidth:I(u.container),emptyContainerContentHeight:d.getContentHeight(g),emptyContainerContentWidth:d.getContentWidth(g),containerMargins:O(u.container),containerWidth:0,containerHeight:0,containerSizeLoaded:!1};t&&(h.headerContainerOuterX=x(s.rtl?"Right":"Left",u.headerContainer),h.headerContainerOuterY=x("Top",u.headerContainer),h.headerContainerOuterWidth=I(u.headerContainer),h.headerContainerOuterHeight=S(u.headerContainer),h.headerContainerWidth=d.getTotalWidth(u.headerContainer),h.headerContainerHeight=d.getTotalHeight(u.headerContainer),h.headerContainerMinWidth=C(u.headerContainer,"minWidth")+h.headerContainerOuterWidth,h.headerContainerMinHeight=C(u.headerContainer,"minHeight")+h.headerContainerOuterHeight);var p={sizes:h,viewportContentWidth:d.getContentWidth(s.viewport),viewportContentHeight:d.getContentHeight(s.viewport),containerContentWidth:d.getContentWidth(u.container),containerContentHeight:d.getContentHeight(u.container),containerWidth:d.getTotalWidth(u.container),containerHeight:d.getTotalHeight(u.container)};return p.viewportCrossSize=p[e?"viewportContentHeight":"viewportContentWidth"],s.readyToMeasure(),n?null:p}function p(){m.parentNode&&m.parentNode.removeChild(m)}var m=i._createMeasuringSurface(),_=t.document.createElement("div"),g=t.document.createElement("div"),v=u.container.querySelector("."+f._itemBoxClass),y=s.groupIndexFromItemIndex(e);g.className=f._containerClass,_.className=f._itemsContainerClass+" "+f._laidOutClass;var b=1,w=1,E=2,k=2,T=_,P=!1;i._inListMode&&i._groupsEnabled&&(i._horizontal&&i._groupHeaderPosition===K.top?(b=2,k=1,E=1,T=u.headerContainer,P=!0):i._horizontal||i._groupHeaderPosition!==K.left||(w=2,k=1,E=1,T=u.headerContainer,P=!0)),_.style.cssText+=";display: "+(i._inListMode?(i._horizontal?"flex":"block")+"; overflow: hidden":"inline-block")+";vertical-align:top;-ms-grid-column: "+w+";-ms-grid-row: "+b,i._inListMode||(u.container.style.display="inline-block"),i._groupsEnabled&&(u.headerContainer.style.cssText+=";display: inline-block;-ms-grid-column: "+k+";-ms-grid-row: "+E,d.addClass(u.headerContainer,f._laidOutClass+" "+f._groupLeaderClass),(i._groupHeaderPosition===K.top&&i._horizontal||i._groupHeaderPosition===K.left&&!i._horizontal)&&d.addClass(_,f._groupLeaderClass)),P&&m.appendChild(u.headerContainer),_.appendChild(u.container),_.appendChild(g),m.appendChild(_),!P&&i._groupsEnabled&&m.appendChild(u.headerContainer),s.viewport.insertBefore(m,s.viewport.firstChild);var A=h();if(!A)return p(),l.cancel;if(i._horizontal&&0===A.viewportContentHeight||!i._horizontal&&0===A.viewportContentWidth)return p(),l.cancel;if(!(a||i._isCellSpanning(y)||0!==A.containerContentWidth&&0!==A.containerContentHeight))return p(),r.then(function(){return n(e,r)});var M=i._sizes=A.sizes;if(Object.defineProperties(M,{surfaceOuterCrossSize:{get:function(){return i._horizontal?M.surfaceOuterHeight:M.surfaceOuterWidth},enumerable:!0},layoutOrigin:{get:function(){return i._horizontal?M.layoutOriginX:M.layoutOriginY},enumerable:!0},itemsContainerOuterSize:{get:function(){return i._horizontal?M.itemsContainerOuterWidth:M.itemsContainerOuterHeight},enumerable:!0},itemsContainerOuterCrossSize:{get:function(){return i._horizontal?M.itemsContainerOuterHeight:M.itemsContainerOuterWidth},enumerable:!0},itemsContainerOuterStart:{get:function(){return i._horizontal?M.itemsContainerOuterX:M.itemsContainerOuterY},enumerable:!0},itemsContainerOuterCrossStart:{get:function(){return i._horizontal?M.itemsContainerOuterY:M.itemsContainerOuterX},enumerable:!0},containerCrossSize:{get:function(){return i._horizontal?M.containerHeight:M.containerWidth},enumerable:!0},containerSize:{get:function(){return i._horizontal?M.containerWidth:M.containerHeight},enumerable:!0}}),!i._isCellSpanning(y)){if(i._inListMode){var D=A.viewportCrossSize-M.surfaceOuterCrossSize-i._getHeaderSizeContentAdjustment()-M.itemsContainerOuterCrossSize;i._horizontal?(M.containerHeight=D,M.containerWidth=A.containerWidth):(M.containerHeight=A.containerHeight,M.containerWidth=D)}else M.containerWidth=A.containerWidth,M.containerHeight=A.containerHeight;M.containerSizeLoaded=!0}i._createContainerStyleRule(),i._viewportSizeChanged(A.viewportCrossSize),p()})}var i=this,r="Layout:measureItem",s=i._site,o=i._measuringPromise;if(!o){s._writeProfilerMark(r+",StartTM");var a=new c;i._measuringPromise=o=a.promise.then(function(){return i._ensureEnvInfo()?n(e):l.cancel}).then(function(){s._writeProfilerMark(r+":complete,info"),s._writeProfilerMark(r+",StopTM")},function(e){return i._measuringPromise=null,s._writeProfilerMark(r+":canceled,info"),s._writeProfilerMark(r+",StopTM"),l.wrapError(e)}),a.complete()}return o},_getHeaderSizeGroupAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===K.left)return this._sizes.headerContainerWidth;if(!this._horizontal&&this._groupHeaderPosition===K.top)return this._sizes.headerContainerHeight}return 0},_getHeaderSizeContentAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===K.top)return this._sizes.headerContainerHeight;if(!this._horizontal&&this._groupHeaderPosition===K.left)return this._sizes.headerContainerWidth}return 0},_getViewportCrossSize:function(){return this._site.viewportSize[this._horizontal?"height":"width"]},_viewportSizeChanged:function(e){var t=this._sizes;t.viewportContentSize=e,t.surfaceContentSize=e-t.surfaceOuterCrossSize,t.maxItemsContainerContentSize=t.surfaceContentSize-t.itemsContainerOuterCrossSize-this._getHeaderSizeContentAdjustment(),t.containerSizeLoaded&&!this._inListMode?(this._itemsPerBar=Math.floor(t.maxItemsContainerContentSize/t.containerCrossSize),this.maximumRowsOrColumns&&(this._itemsPerBar=Math.min(this._itemsPerBar,this.maximumRowsOrColumns)),this._itemsPerBar=Math.max(1,this._itemsPerBar)):(this._inListMode&&(t[this._horizontal?"containerHeight":"containerWidth"]=t.maxItemsContainerContentSize),this._itemsPerBar=1),this._resetAnimationCaches()},_createContainerStyleRule:function(){var e=this._sizes;if(!this._containerSizeClassName&&e.containerSizeLoaded&&(0===e.emptyContainerContentHeight||0===e.emptyContainerContentWidth)){var t=e.containerWidth-e.containerOuterWidth+"px",n=e.containerHeight-e.containerOuterHeight+"px";this._inListMode&&(this._horizontal?n="calc(100% - "+(e.containerMargins.top+e.containerMargins.bottom)+"px)":t="auto"),this._containerSizeClassName||(this._containerSizeClassName=g("containersize"),d.addClass(this._site.surface,this._containerSizeClassName));var i="."+f._containerClass,r="width:"+t+";height:"+n+";";y(this._containerSizeClassName,this._site,i,r)}},_ensureContainerSize:function(e){var t=this._sizes;if(t.containerSizeLoaded||this._ensuringContainerSize)return this._ensuringContainerSize?this._ensuringContainerSize:l.wrap();var n;if(this._itemInfo&&"function"==typeof this._itemInfo||!this._useDefaultItemInfo)n=this._getItemInfo();else{var i=t.containerMargins;n=l.wrap({width:e.groupInfo.cellWidth-i.left-i.right,height:e.groupInfo.cellHeight-i.top-i.bottom})}var r=this;return this._ensuringContainerSize=n.then(function(e){t.containerSizeLoaded=!0,t.containerWidth=e.width+t.itemBoxOuterWidth+t.containerOuterWidth,t.containerHeight=e.height+t.itemBoxOuterHeight+t.containerOuterHeight,r._inListMode?r._itemsPerBar=1:(r._itemsPerBar=Math.floor(t.maxItemsContainerContentSize/t.containerCrossSize),r.maximumRowsOrColumns&&(r._itemsPerBar=Math.min(r._itemsPerBar,r.maximumRowsOrColumns)),r._itemsPerBar=Math.max(1,r._itemsPerBar)),r._createContainerStyleRule()
}),n.done(function(){r._ensuringContainerSize=null},function(){r._ensuringContainerSize=null}),n},_indexToCoordinate:function(e,t){t=t||this._itemsPerBar;var n=Math.floor(e/t);return this._horizontal?{column:n,row:e-n*t}:{row:n,column:e-n*t}},_rangeForGroup:function(e,t){var n=e.startIndex,i=n+e.count-1;return!t||t.firstIndex>i||t.lastIndex<n?null:{firstIndex:Math.max(0,t.firstIndex-n),lastIndex:Math.min(e.count-1,t.lastIndex-n)}},_syncDomWithGroupHeaderPosition:function(e){if(this._groupsEnabled&&this._oldGroupHeaderPosition!==this._groupHeaderPosition){var t,n=e.length;if(this._oldGroupHeaderPosition===K.top)if(d.removeClass(this._site.surface,f._headerPositionTopClass),this._horizontal)for(t=0;n>t;t++)e[t].header.style.maxWidth="",d.removeClass(e[t].itemsContainer.element,f._groupLeaderClass);else this._site.surface.style.msGridRows="";else if(this._oldGroupHeaderPosition===K.left){if(d.removeClass(this._site.surface,f._headerPositionLeftClass),!this._horizontal)for(t=0;n>t;t++)e[t].header.style.maxHeight="",d.removeClass(e[t].itemsContainer.element,f._groupLeaderClass);this._site.surface.style.msGridColumns=""}if(this._groupHeaderPosition===K.top){if(d.addClass(this._site.surface,f._headerPositionTopClass),this._horizontal)for(t=0;n>t;t++)d.addClass(e[t].itemsContainer.element,f._groupLeaderClass)}else if(d.addClass(this._site.surface,f._headerPositionLeftClass),!this._horizontal)for(t=0;n>t;t++)d.addClass(e[t].itemsContainer.element,f._groupLeaderClass);this._oldGroupHeaderPosition=this._groupHeaderPosition}},_layoutGroup:function(e){var t=this._groups[e],n=this._site.tree[e],i=n.header,r=n.itemsContainer.element,s=this._sizes,o=t.getItemsContainerCrossSize();if(this._groupsEnabled){if(this._horizontal)if(this._groupHeaderPosition===K.top){var a=s.headerContainerMinWidth-s.headerContainerOuterWidth,l=t.getItemsContainerSize()-s.headerContainerOuterWidth;i.style.maxWidth=Math.max(a,l)+"px",this._envInfo.supportsCSSGrid?(i.style.msGridColumn=e+1,r.style.msGridColumn=e+1):(i.style.height=s.headerContainerHeight-s.headerContainerOuterHeight+"px",r.style.height=o-s.itemsContainerOuterHeight+"px",r.style.marginBottom=s.itemsContainerMargins.bottom+(s.maxItemsContainerContentSize-o+s.itemsContainerOuterHeight)+"px"),d.addClass(r,f._groupLeaderClass)}else this._envInfo.supportsCSSGrid?(i.style.msGridColumn=2*e+1,r.style.msGridColumn=2*e+2):(i.style.width=s.headerContainerWidth-s.headerContainerOuterWidth+"px",i.style.height=o-s.headerContainerOuterHeight+"px",r.style.height=o-s.itemsContainerOuterHeight+"px");else if(this._groupHeaderPosition===K.left){var u=s.headerContainerMinHeight-s.headerContainerOuterHeight,c=t.getItemsContainerSize()-s.headerContainerOuterHeight;i.style.maxHeight=Math.max(u,c)+"px",this._envInfo.supportsCSSGrid?(i.style.msGridRow=e+1,r.style.msGridRow=e+1):(i.style.width=s.headerContainerWidth-s.headerContainerOuterWidth+"px",r.style.width=o-s.itemsContainerOuterWidth+"px",r.style["margin"+(this._site.rtl?"Left":"Right")]=s.itemsContainerMargins[this._site.rtl?"left":"right"]+(s.maxItemsContainerContentSize-o+s.itemsContainerOuterWidth)+"px"),d.addClass(r,f._groupLeaderClass)}else i.style.msGridRow=2*e+1,this._inListMode?i.style.height=s.headerContainerHeight-s.headerContainerOuterHeight+"px":this._envInfo.supportsCSSGrid?r.style.msGridRow=2*e+2:(i.style.height=s.headerContainerHeight-s.headerContainerOuterHeight+"px",i.style.width=o-s.headerContainerOuterWidth+"px",r.style.width=o-s.itemsContainerOuterWidth+"px");d.addClass(i,f._laidOutClass+" "+f._groupLeaderClass)}d.addClass(r,f._laidOutClass)}},{_barsPerItemsBlock:4})}),_LegacyLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LayoutCommon,null,{disableBackdrop:{get:function(){return this._backdropDisabled||!1},set:function(e){if(d._deprecated(_.disableBackdropIsDeprecated),e=!!e,this._backdropDisabled!==e&&(this._backdropDisabled=e,this._disableBackdropClassName&&(b(this._disableBackdropClassName),this._site&&d.removeClass(this._site.surface,this._disableBackdropClassName),this._disableBackdropClassName=null),this._disableBackdropClassName=g("disablebackdrop"),this._site&&d.addClass(this._site.surface,this._disableBackdropClassName),e)){var t=".win-container.win-backdrop",n="background-color:transparent;";y(this._disableBackdropClassName,this._site,t,n)}}},backdropColor:{get:function(){return this._backdropColor||"rgba(155,155,155,0.23)"},set:function(e){if(d._deprecated(_.backdropColorIsDeprecated),e&&this._backdropColor!==e){this._backdropColor=e,this._backdropColorClassName&&(b(this._backdropColorClassName),this._site&&d.removeClass(this._site.surface,this._backdropColorClassName),this._backdropColorClassName=null),this._backdropColorClassName=g("backdropcolor"),this._site&&d.addClass(this._site.surface,this._backdropColorClassName);var t=".win-container.win-backdrop",n="background-color:"+e+";";y(this._backdropColorClassName,this._site,t,n)}}}})}),GridLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LegacyLayout,function(e){e=e||{},this.itemInfo=e.itemInfo,this.groupInfo=e.groupInfo,this._maxRowsOrColumns=0,this._useDefaultItemInfo=!0,this._elementsToMeasure={},this._groupHeaderPosition=e.groupHeaderPosition||K.top,this.orientation=e.orientation||"horizontal",e.maxRows&&(this.maxRows=+e.maxRows),e.maximumRowsOrColumns&&(this.maximumRowsOrColumns=+e.maximumRowsOrColumns)},{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(e){this._setMaxRowsOrColumns(e)}},maxRows:{get:function(){return this.maximumRowsOrColumns},set:function(e){d._deprecated(_.maxRowsIsDeprecated),this.maximumRowsOrColumns=e}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(e){e&&d._deprecated(_.itemInfoIsDeprecated),this._itemInfo=e,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(e){e&&d._deprecated(_.groupInfoIsDeprecated),this._groupInfo=e,this._invalidateLayout()}}})})});var q=n.Namespace.defineWithParent(null,null,{UniformGroupBase:n.Namespace._lazy(function(){return n.Class.define(null,{cleanUp:function(){},itemFromOffset:function(e,t){t=t||{};var n=this._layout._sizes;e-=n.itemsContainerOuterStart,t.wholeItem&&(e+=(t.last?-1:1)*(n.containerSize-1));var i=this.count-1,r=Math.floor(i/this._layout._itemsPerBar),s=w(0,r,Math.floor(e/n.containerSize)),o=(s+t.last)*this._layout._itemsPerBar-t.last;return w(0,this.count-1,o)},hitTest:function(e,t){var n=this._layout._horizontal,i=this._layout._itemsPerBar,r=this._layout._inListMode||1===i,s=n?e:t,o=n?t:e,a=this._layout._sizes;s-=a.itemsContainerOuterStart,o-=a.itemsContainerOuterCrossStart;var l,u=Math.floor(s/a.containerSize),c=w(0,i-1,Math.floor(o/a.containerCrossSize)),h=Math.max(-1,u*i+c);if(l=!n&&r||n&&!r?(t-a.containerHeight/2)/a.containerHeight:(e-a.containerWidth/2)/a.containerWidth,r)return l=Math.floor(l),{index:h,insertAfterIndex:l>=0&&h>=0?l:-1};l=w(-1,i-1,l);var d;return d=0>l?u*i-1:u*i+Math.floor(l),{index:w(-1,this.count-1,h),insertAfterIndex:w(-1,this.count-1,d)}},getAdjacent:function(e,t){var n,i=e.index,r=Math.floor(i/this._layout._itemsPerBar),s=i%this._layout._itemsPerBar;switch(t){case D.upArrow:n=0===s?"boundary":i-1;break;case D.downArrow:var o=i===this.count-1,a=this._layout._itemsPerBar>1&&s===this._layout._itemsPerBar-1;n=o||a?"boundary":i+1;break;case D.leftArrow:n=0===r&&this._layout._itemsPerBar>1?"boundary":i-this._layout._itemsPerBar;break;case D.rightArrow:var l=this.count-1,u=Math.floor(l/this._layout._itemsPerBar);n=r===u?"boundary":Math.min(i+this._layout._itemsPerBar,this.count-1)}return"boundary"===n?n:{type:m.ObjectType.item,index:n}},getItemsContainerSize:function(){var e=this._layout._sizes,t=Math.ceil(this.count/this._layout._itemsPerBar);return t*e.containerSize+e.itemsContainerOuterSize},getItemsContainerCrossSize:function(){var e=this._layout._sizes;return this._layout._itemsPerBar*e.containerCrossSize+e.itemsContainerOuterCrossSize},getItemPositionForAnimations:function(e){var t=this._layout._sizes,n=this._layout._site.rtl?"right":"left",i=this._layout._sizes.containerMargins,r=this._layout._indexToCoordinate(e),s={row:r.row,column:r.column,top:i.top+r.row*t.containerHeight,left:i[n]+r.column*t.containerWidth,height:t.containerHeight-t.containerMargins.top-t.containerMargins.bottom,width:t.containerWidth-t.containerMargins.left-t.containerMargins.right};return s}})}),UniformGroup:n.Namespace._lazy(function(){return n.Class.derive(q.UniformGroupBase,function(e,t){this._layout=e,this._itemsContainer=t,d.addClass(this._itemsContainer,e._inListMode?f._uniformListLayoutClass:f._uniformGridLayoutClass)},{cleanUp:function(e){e||(d.removeClass(this._itemsContainer,f._uniformGridLayoutClass),d.removeClass(this._itemsContainer,f._uniformListLayoutClass),this._itemsContainer.style.height=this._itemsContainer.style.width=""),this._itemsContainer=null,this._layout=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayout:function(e,t,n,i){return this.groupInfo=i.groupInfo,this.startIndex=i.startIndex,this.count=e,this._layout._ensureContainerSize(this)},layoutRealizedRange:function(){var e=this._layout._sizes;this._itemsContainer.style[this._layout._horizontal?"width":"height"]=this.getItemsContainerSize()-e.itemsContainerOuterSize+"px",this._itemsContainer.style[this._layout._horizontal?"height":"width"]=this._layout._inListMode?e.maxItemsContainerContentSize+"px":this._layout._itemsPerBar*e.containerCrossSize+"px"},layoutUnrealizedRange:function(){return l.wrap()}})}),UniformFlowGroup:n.Namespace._lazy(function(){return n.Class.derive(q.UniformGroupBase,function(e,t){this._layout=e,this._itemsContainer=t.element,d.addClass(this._itemsContainer,e._inListMode?f._uniformListLayoutClass:f._uniformGridLayoutClass)},{cleanUp:function(e){e||(d.removeClass(this._itemsContainer,f._uniformListLayoutClass),d.removeClass(this._itemsContainer,f._uniformGridLayoutClass),this._itemsContainer.style.height="")},layout:function(){this._layout._site._writeProfilerMark("Layout:_UniformFlowGroup:setItemsContainerHeight,info"),this._itemsContainer.style.height=this.count*this._layout._sizes.containerHeight+"px"}})}),CellSpanningGroup:n.Namespace._lazy(function(){return n.Class.define(function(e,t){this._layout=e,this._itemsContainer=t,d.addClass(this._itemsContainer,f._cellSpanningGridLayoutClass),this.resetMap()},{cleanUp:function(e){e||(this._cleanContainers(),d.removeClass(this._itemsContainer,f._cellSpanningGridLayoutClass),this._itemsContainer.style.cssText=""),this._itemsContainer=null,this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this.resetMap(),this._slotsPerColumn=null,this._offScreenSlotsPerColumn=null,this._items=null,this._layout=null,this._containersToHide=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayoutWithCopyOfTree:function(e,t,n,i){var r,s=this;if(this._containersToHide={},t)for(r=t.firstIndex;r<=t.lastIndex;r++)this._containersToHide[L(n._items[r])]=n._items[r];this.groupInfo=i.groupInfo,this.startIndex=i.startIndex,this.count=e.items.length,this._items=e.items,this._slotsPerColumn=Math.floor(this._layout._sizes.maxItemsContainerContentSize/this.groupInfo.cellHeight),this._layout.maximumRowsOrColumns&&(this._slotsPerColumn=Math.min(this._slotsPerColumn,this._layout.maximumRowsOrColumns)),this._slotsPerColumn=Math.max(this._slotsPerColumn,1),this.resetMap();var o=new Array(this.count);for(r=0;r<this.count;r++)o[r]=this._layout._getItemInfo(this.startIndex+r);return l.join(o).then(function(e){e.forEach(function(e,t){s.addItemToMap(t,e)})})},layoutRealizedRange:function(e,t){if(t){var n,i=Math.max(e,t.firstIndex);for(n=i;n<=t.lastIndex;n++)this._layoutItem(n),delete this._containersToHide[L(this._items[n])]}Object.keys(this._containersToHide).forEach(function(e){d.removeClass(this._containersToHide[e],f._laidOutClass)}.bind(this)),this._containersToHide={},this._itemsContainer.style.cssText+=";width:"+(this.getItemsContainerSize()-this._layout._sizes.itemsContainerOuterSize)+"px;height:"+this._layout._sizes.maxItemsContainerContentSize+"px;-ms-grid-columns: ("+this.groupInfo.cellWidth+"px)["+this.getColumnCount()+"];-ms-grid-rows: ("+this.groupInfo.cellHeight+"px)["+(this._slotsPerColumn+this._offScreenSlotsPerColumn)+"]"},layoutUnrealizedRange:function(e,t,n){var i,r=this;return r._layoutPromise=new l(function(s){function o(){i=null,s()}function a(e){return u.schedule(e,u.Priority.normal,null,"WinJS.UI.GridLayout.CellSpanningGroup.LayoutUnrealizedRange")}if(t){var l=!1,c=t.firstIndex-1,h=Math.max(e,t.lastIndex+1);h=Math.max(c+1,h),i=a(function p(t){for(;!l;){if(t.shouldYield)return void t.setWork(p);l=!0,c>=e&&(r._layoutItem(c),c--,l=!1),h<r.count&&(r._layoutItem(h),h++,l=!1)}o()})}else if(n){var d=r.count-1;i=a(function m(t){for(;d>=e;d--){if(t.shouldYield)return void t.setWork(m);r._layoutItem(d)}o()})}else{var d=e;i=a(function f(e){for(;d<r.count;d++){if(e.shouldYield)return void e.setWork(f);r._layoutItem(d)}o()})}},function(){i&&i.cancel(),i=null}),r._layoutPromise},itemFromOffset:function(e,t){t=t||{};var n=this._layout._sizes,i=n.containerMargins;e-=n.itemsContainerOuterX,e-=(t.last?1:-1)*i[t.last?"left":"right"];var r=this.indexFromOffset(e,t.wholeItem,t.last).item;return w(0,this.count-1,r)},getAdjacent:function(e,t){var n,i;n=i=e.index;var r,s,o;o=this.lastAdjacent===n?this.lastInMapIndex:this.findItem(n);do{var a=Math.floor(o/this._slotsPerColumn),l=o-a*this._slotsPerColumn,u=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);switch(t){case D.upArrow:if(!(l>0))return{type:m.ObjectType.item,index:i};o--;break;case D.downArrow:if(!(l+1<this._slotsPerColumn))return{type:m.ObjectType.item,index:i};o++;break;case D.leftArrow:o=a>0?o-this._slotsPerColumn:-1;break;case D.rightArrow:o=u>a?o+this._slotsPerColumn:this.occupancyMap.length}s=o>=0&&o<this.occupancyMap.length,s&&(r=this.occupancyMap[o]?this.occupancyMap[o].index:void 0)}while(s&&(n===r||void 0===r));return this.lastAdjacent=r,this.lastInMapIndex=o,s?{type:m.ObjectType.item,index:r}:"boundary"},hitTest:function(e,t){var n=this._layout._sizes,i=0;if(e-=n.itemsContainerOuterX,t-=n.itemsContainerOuterY,this.occupancyMap.length>0){for(var r=this.indexFromOffset(e,!1,0),s=Math.min(this._slotsPerColumn-1,Math.floor(t/this.groupInfo.cellHeight)),o=r.index,a=o;s-->0;)o++,this.occupancyMap[o]&&(a=o);this.occupancyMap[a]||a--,i=this.occupancyMap[a].index}var l=this.getItemSize(i),u=l.column*this.groupInfo.cellWidth,c=l.row*this.groupInfo.cellHeight,h=1===this._slotsPerColumn,d=i;return(h&&e<u+l.contentWidth/2||!h&&t<c+l.contentHeight/2)&&d--,{type:m.ObjectType.item,index:w(0,this.count-1,i),insertAfterIndex:w(-1,this.count-1,d)}},getItemsContainerSize:function(){var e=this._layout._sizes;return this.getColumnCount()*this.groupInfo.cellWidth+e.itemsContainerOuterSize},getItemsContainerCrossSize:function(){var e=this._layout._sizes;return e.maxItemsContainerContentSize+e.itemsContainerOuterCrossSize},getItemPositionForAnimations:function(e){var t=this._layout._site.rtl?"right":"left",n=this._layout._sizes.containerMargins,i=this.getItemSize(e),r=this.groupInfo,s={row:i.row,column:i.column,top:n.top+i.row*r.cellHeight,left:n[t]+i.column*r.cellWidth,height:i.contentHeight,width:i.contentWidth};return s},_layoutItem:function(e){var t=this.getItemSize(e);return this._items[e].style.cssText+=";-ms-grid-row:"+(t.row+1)+";-ms-grid-column:"+(t.column+1)+";-ms-grid-row-span:"+t.rows+";-ms-grid-column-span:"+t.columns+";height:"+t.contentHeight+"px;width:"+t.contentWidth+"px",d.addClass(this._items[e],f._laidOutClass),this._items[e]},_cleanContainers:function(){var e,t=this._items,n=t.length;for(e=0;n>e;e++)t[e].style.cssText="",d.removeClass(t[e],f._laidOutClass)},getColumnCount:function(){return Math.ceil(this.occupancyMap.length/this._slotsPerColumn)},getOccupancyMapItemCount:function(){var e=-1;return this.occupancyMap.forEach(function(t){t.index>e&&(e=t.index)}),e+1},coordinateToIndex:function(e,t){return e*this._slotsPerColumn+t},markSlotAsFull:function(e,t){for(var n=this._layout._indexToCoordinate(e,this._slotsPerColumn),i=n.row+t.rows,r=n.row;i>r&&r<this._slotsPerColumn;r++)for(var s=n.column,o=n.column+t.columns;o>s;s++)this.occupancyMap[this.coordinateToIndex(s,r)]=t;this._offScreenSlotsPerColumn=Math.max(this._offScreenSlotsPerColumn,i-this._slotsPerColumn)},isSlotEmpty:function(e,t,n){for(var i=t,r=t+e.rows;r>i;i++)for(var s=n,o=n+e.columns;o>s;s++)if(i>=this._slotsPerColumn||void 0!==this.occupancyMap[this.coordinateToIndex(s,i)])return!1;return!0},findEmptySlot:function(e,t,n){var i=this._layout._indexToCoordinate(e,this._slotsPerColumn),r=i.row,s=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);if(n){for(var o=i.column+1;s>=o;o++)if(this.isSlotEmpty(t,0,o))return this.coordinateToIndex(o,0)}else for(var o=i.column;s>=o;o++){for(var a=r;a<this._slotsPerColumn;a++)if(this.isSlotEmpty(t,a,o))return this.coordinateToIndex(o,a);r=0}return(s+1)*this._slotsPerColumn},findItem:function(e){for(var t=e,n=this.occupancyMap.length;n>t;t++){var i=this.occupancyMap[t];if(i&&i.index===e)return t}return t},getItemSize:function(e){var t=this.findItem(e),n=this.occupancyMap[t],i=this._layout._indexToCoordinate(t,this._slotsPerColumn);return e===n.index?{row:i.row,column:i.column,contentWidth:n.contentWidth,contentHeight:n.contentHeight,columns:n.columns,rows:n.rows}:null},resetMap:function(){this.occupancyMap=[],this.lastAdded=0,this._offScreenSlotsPerColumn=0},addItemToMap:function(e,t){function n(e,t){var n=i.findEmptySlot(i.lastAdded,e,t);i.lastAdded=n,i.markSlotAsFull(n,e)}var i=this,r=i.groupInfo,s=i._layout._sizes.containerMargins,o={index:e,contentWidth:t.width,contentHeight:t.height,columns:Math.max(1,Math.ceil((t.width+s.left+s.right)/r.cellWidth)),rows:Math.max(1,Math.ceil((t.height+s.top+s.bottom)/r.cellHeight))};n(o,t.newColumn)},indexFromOffset:function(e,t,n){var i=0,r=0,s=this.groupInfo,o=0;if(this.occupancyMap.length>0){if(r=this.getOccupancyMapItemCount()-1,i=Math.ceil((this.occupancyMap.length-1)/this._slotsPerColumn)*s.cellWidth,i>e){for(var a=this._slotsPerColumn,o=(Math.max(0,Math.floor(e/s.cellWidth))+n)*this._slotsPerColumn-n;!this.occupancyMap[o]&&a-->0;)o+=n>0?-1:1;return{index:o,item:this.occupancyMap[o].index}}o=this.occupancyMap.length-1}return{index:o,item:r+(Math.max(0,Math.floor((e-i)/s.cellWidth))+n)*this._slotsPerColumn-n}}})})});n.Namespace._moduleDefine(e,"WinJS.UI",{ListLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LegacyLayout,function(e){e=e||{},this._itemInfo={},this._groupInfo={},this._groupHeaderPosition=e.groupHeaderPosition||K.top,this._inListMode=!0,this.orientation=e.orientation||"vertical"},{initialize:function(t,n){d.addClass(t.surface,f._listLayoutClass),e._LegacyLayout.prototype.initialize.call(this,t,n)},uninitialize:function(){this._site&&d.removeClass(this._site.surface,f._listLayoutClass),e._LegacyLayout.prototype.uninitialize.call(this)},layout:function(t,n,i,r){return this._groupsEnabled||this._horizontal?e._LegacyLayout.prototype.layout.call(this,t,n,i,r):this._layoutNonGroupedVerticalList(t,n,i,r)},_layoutNonGroupedVerticalList:function(e,t,n,i){var r=this,s="Layout:_layoutNonGroupedVerticalList";return r._site._writeProfilerMark(s+",StartTM"),this._layoutPromise=r._measureItem(0).then(function(){d[r._usingStructuralNodes?"addClass":"removeClass"](r._site.surface,f._structuralNodesClass),r._sizes.viewportContentSize!==r._getViewportCrossSize()&&r._viewportSizeChanged(r._getViewportCrossSize()),r._cacheRemovedElements(n,r._cachedItemRecords,r._cachedInsertedItemRecords,r._cachedRemovedItems,!1),r._cacheRemovedElements(i,r._cachedHeaderRecords,r._cachedInsertedHeaderRecords,r._cachedRemovedHeaders,!0);var t=e[0].itemsContainer,o=new q.UniformFlowGroup(r,t);r._groups=[o],o.groupInfo={enableCellSpanning:!1},o.startIndex=0,o.count=P(t),o.offset=0,o.layout(),r._site._writeProfilerMark(s+":setSurfaceWidth,info"),r._site.surface.style.width=r._sizes.surfaceContentSize+"px",r._layoutAnimations(n,i),r._site._writeProfilerMark(s+":complete,info"),r._site._writeProfilerMark(s+",StopTM")},function(e){return r._site._writeProfilerMark(s+":canceled,info"),r._site._writeProfilerMark(s+",StopTM"),l.wrapError(e)}),{realizedRangeComplete:this._layoutPromise,layoutComplete:this._layoutPromise}},numberOfItemsPerItemsBlock:{get:function(){var t=this;return this._measureItem(0).then(function(){return t._usingStructuralNodes=t._envInfo.nestedFlexTooLarge||t._envInfo.nestedFlexTooSmall?!1:e.ListLayout._numberOfItemsPerItemsBlock>0,t._usingStructuralNodes?e.ListLayout._numberOfItemsPerItemsBlock:null})}}},{_numberOfItemsPerItemsBlock:10})}),CellSpanningLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LayoutCommon,function(e){e=e||{},this._itemInfo=e.itemInfo,this._groupInfo=e.groupInfo,this._groupHeaderPosition=e.groupHeaderPosition||K.top,this._horizontal=!0,this._cellSpanning=!0},{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(e){this._setMaxRowsOrColumns(e)}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(e){this._itemInfo=e,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(e){this._groupInfo=e,this._invalidateLayout()}},orientation:{enumerable:!0,get:function(){return"horizontal"}}})}),_LayoutWrapper:n.Namespace._lazy(function(){return n.Class.define(function(e){this.defaultAnimations=!0,this.initialize=function(t,n){e.initialize(t,n)},this.hitTest=function(t,n){return e.hitTest(t,n)},e.uninitialize&&(this.uninitialize=function(){e.uninitialize()}),"numberOfItemsPerItemsBlock"in e&&Object.defineProperty(this,"numberOfItemsPerItemsBlock",{get:function(){return e.numberOfItemsPerItemsBlock}}),e._getItemPosition&&(this._getItemPosition=function(t){return e._getItemPosition(t)}),e.itemsFromRange&&(this.itemsFromRange=function(t,n){return e.itemsFromRange(t,n)}),e.getAdjacent&&(this.getAdjacent=function(t,n){return e.getAdjacent(t,n)}),e.dragOver&&(this.dragOver=function(t,n,i){return e.dragOver(t,n,i)}),e.dragLeave&&(this.dragLeave=function(){return e.dragLeave()});var t={enumerable:!0,get:function(){return"vertical"}};if(void 0!==e.orientation&&(t.get=function(){return e.orientation},t.set=function(t){e.orientation=t}),Object.defineProperty(this,"orientation",t),(e.setupAnimations||e.executeAnimations)&&(this.defaultAnimations=!1,this.setupAnimations=function(){return e.setupAnimations()},this.executeAnimations=function(){return e.executeAnimations()}),e.layout)if(this.defaultAnimations){var n=this;this.layout=function(t,i,r,s){var o,a=M(e.layout(t,i,[],[]));return a.realizedRangeComplete.then(function(){o=!0}),o&&n._layoutAnimations(r,s),a}}else this.layout=function(t,n,i,r){return M(e.layout(t,n,i,r))}},{uninitialize:function(){},numberOfItemsPerItemsBlock:{get:function(){}},layout:function(e,t,n,i){return this.defaultAnimations&&this._layoutAnimations(n,i),M()},itemsFromRange:function(){return{firstIndex:0,lastIndex:Number.MAX_VALUE}},getAdjacent:function(e,t){switch(t){case D.pageUp:case D.upArrow:case D.leftArrow:return{type:e.type,index:e.index-1};case D.downArrow:case D.rightArrow:case D.pageDown:return{type:e.type,index:e.index+1}}},dragOver:function(){},dragLeave:function(){},setupAnimations:function(){},executeAnimations:function(){},_getItemPosition:function(){},_layoutAnimations:function(){}})})});var K={left:"left",top:"top"};n.Namespace._moduleDefine(e,"WinJS.UI",{HeaderPosition:K,_getMargins:O})}),i("WinJS/Controls/ListView/_VirtualizeContentsView",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Promise","../../_Signal","../../Scheduler","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_Helpers","./_ItemsContainer"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m){"use strict";function f(e,t){l._setAttribute(e,"aria-flowto",t.id),l._setAttribute(t,"x-ms-aria-flowfrom",e.id)}n.Namespace._moduleDefine(e,"WinJS.UI",{_VirtualizeContentsView:n.Namespace._lazy(function(){function e(t){for(var n,i=t.job._workItems;i.length&&!t.shouldYield;)(n=i.shift())();t.setWork(e),i.length||t.job.pause()}function _(t,n){var i=o.schedule(e,t,null,n);return i._workItems=[],i.addWork=function(e,t){t?this._workItems.unshift(e):this._workItems.push(e),this.resume()},i.clearWork=function(){this._workItems.length=0},i.dispose=function(){this.cancel(),this._workItems.length=0},i}function g(e){return e._zooming||e._pinching}function v(e,t){return e._isZombie()?r.wrap():g(e)?(+t!==t&&(t=w._waitForSeZoTimeoutDuration),r.timeout(w._waitForSeZoIntervalDuration).then(function(){return t-=w._waitForSeZoIntervalDuration,0>=t?!0:v(e,t)})):r.wrap()}function y(e){if("number"==typeof e){var t=e;e=function(){return{position:t,direction:"right"}}}return e}function b(){}var w=n.Class.define(function(e){this._listView=e,this._forceRelayout=!1,this.items=new m._ItemsContainer(e),this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this.begin=0,this.end=0,this._realizePass=1,this._firstLayoutPass=!0,this._runningAnimations=null,this._renderCompletePromise=r.wrap(),this._state=new C(this),this._createLayoutSignal(),this._createTreeBuildingSignal(),this._layoutWork=null,this._onscreenJob=_(o.Priority.aboveNormal,"on-screen items"),this._frontOffscreenJob=_(o.Priority.normal,"front off-screen items"),this._backOffscreenJob=_(o.Priority.belowNormal,"back off-screen items"),this._scrollbarPos=0,this._direction="right",this._scrollToFunctor=y(0)},{_dispose:function(){this.cleanUp(),this.items=null,this._renderCompletePromise&&this._renderCompletePromise.cancel(),this._renderCompletePromise=null,this._onscreenJob.dispose(),this._frontOffscreenJob.dispose(),this._backOffscreenJob.dispose()},_createItem:function(e,t,n,i){this._listView._writeProfilerMark("createItem("+e+") "+this._getBoundingRectString(e)+",info");var s=this;s._listView._itemsManager._itemFromItemPromiseThrottled(t).done(function(t){t?n(e,t,s._listView._itemsManager._recordFromElement(t)):i(e)},function(t){return i(e),r.wrapError(t)})},_addItem:function(e,t,n,i){if(this._realizePass===i){var r=this._listView._itemsManager._recordFromElement(n);delete this._pendingItemPromises[r.itemPromise.handle],this.items.setItemAt(t,{itemBox:null,container:null,element:n,detached:!0,itemsManagerRecord:r})}},finalItem:function(){return this.containers?r.wrap(this.containers.length-1):r.cancel},_setSkipRealizationForChange:function(e){e?this._realizationLevel!==w._realizationLevel.realize&&(this._realizationLevel=w._realizationLevel.skip):this._realizationLevel=w._realizationLevel.realize},_realizeItems:function(e,t,n,i,a,u,p,m,f,_){function g(e,t){P.push(r._cancelBlocker(t.renderComplete)),w(e)}function v(e,t){function n(e,t){!e.updatedSwipeableAttribute&&(D._listView.itemsDraggable||D._listView.itemsReorderable||D._listView._swipeable)&&e.itemsManagerRecord.renderComplete.done(function(){if(D._realizePass===a){var n=l.hasClass(t,h._nonDraggableClass),i=l.hasClass(t,h._nonSelectableClass),r=D._listView.itemsDraggable||D._listView.itemsReorderable,s=D._listView._selectionAllowed()&&D._listView._swipeBehavior===c.SwipeBehavior.select;r&&!n&&(e.itemBox.draggable=!0),D._listView._swipeable&&(r&&!s&&n||s&&!r&&i||n&&i)&&l.addClass(e.itemBox,h._nonSwipeableClass),e.updatedSwipeableAttribute=!0}})}if(D._listView._writeProfilerMark("_realizeItems_appendedItemsToDom,StartTM"),!D._listView._isZombie()){var i,r=0,s=-1,o=-1;for(i=e;t>=i;i++){var u=D.items.itemDataAt(i);if(u){var m=u.element,f=u.itemBox;f||(f=D._listView._itemBoxTemplate.cloneNode(!0),u.itemBox=f,f.appendChild(m),l.addClass(m,h._itemClass),D._listView._setupAriaSelectionObserver(m),D._listView._isSelected(i)&&d._ItemEventsHandler.renderSelection(f,m,!0,!0),D._listView._currentMode().renderDragSourceOnRealizedItem(i,f)),n(u,m,f);var _=D.getContainer(i);f.parentNode!==_&&(D._appendAndRestoreFocus(_,f),r++,0>s&&(s=i),o=i,u.container=_,D._listView._isSelected(i)&&l.addClass(_,h._selectedClass),l.removeClass(_,h._backdropClass),D.items.elementAvailable(i))}}D._listView._writeProfilerMark("_realizeItems_appendedItemsToDom,StopTM"),r>0&&(D._listView._writeProfilerMark("_realizeItems_appendedItemsToDom:"+r+" ("+s+"-"+o+"),info"),D._reportElementsLevel(p))}}function y(e,t,n,i){function r(e,t){var n=D.items.itemDataAt(e);if(n){var i=n.itemBox;return i&&i.parentNode?t?(l.addClass(i.parentNode,h._backdropClass),i.parentNode.removeChild(i),!0):!1:!0}return!0}if(!_){for(var s=!1;e>=n;)s=r(e,s),e--;for(s=!1;i>=t;)s=r(t,s),t++}}function b(e,t,n,i,s){function o(e){var t=D.items.itemDataAt(e);if(t){var i=t.itemsManagerRecord;i.readyComplete||D._realizePass!==a||n.addWork(function(){D._listView._isZombie()||i.pendingReady&&D._realizePass===a&&(D._listView._writeProfilerMark("pendingReady("+e+"),info"),i.pendingReady())},s)}}for(var l=[],u=e;t>=u;u++){var c=D.items.itemDataAt(u);c&&l.push(c.itemsManagerRecord.itemPromise)}r.join(l).then(function(){if("right"===i)for(var n=e;t>=n;n++)o(n);else for(var n=t;n>=e;n--)o(n)})}function w(e){if(D._realizePass===a){if(e>=m&&f>=e){if(0===--E){if(v(m,f),y(m,f,t,n),D._firstLayoutPass){b(m,f,D._frontOffscreenJob,"right"===p?"left":"right",!0);var i=o.schedulePromiseHigh(null,"WinJS.UI.ListView.entranceAnimation").then(function(){if(!D._listView._isZombie()){D._listView._writeProfilerMark("entranceAnimation,StartTM");var e=D._listView._animateListEntrance(!D._firstEntranceAnimated);return D._firstEntranceAnimated=!0,e}});D._runningAnimations=r.join([D._runningAnimations,i]),D._runningAnimations.done(function(){D._listView._writeProfilerMark("entranceAnimation,StopTM"),D._realizePass===a&&(D._runningAnimations=null,A.complete())}),D._firstLayoutPass=!1,D._listView._isCurrentZoomView&&o.requestDrain(D._onscreenJob.priority)}else b(m,f,D._frontOffscreenJob,p),A.complete();D._updateHeaders(D._listView._canvas,m,f+1).done(function(){M.complete()})}}else m>e?(--T,T%I===0&&v(t,m-1),T||(D._updateHeaders(D._listView._canvas,t,m).done(function(){"right"!==p&&O.complete()}),b(t,m-1,"right"!==p?D._frontOffscreenJob:D._backOffscreenJob,"left"))):e>f&&(--k,k%I===0&&v(f+1,n-1),k||(D._updateHeaders(D._listView._canvas,f+1,n).then(function(){"right"===p&&O.complete()}),b(f+1,n-1,"right"===p?D._frontOffscreenJob:D._backOffscreenJob,"right")));S--,0===S&&(D._renderCompletePromise=r.join(P).then(null,function(e){var t=Array.isArray(e)&&e.some(function(e){return e&&!(e instanceof Error&&"Canceled"===e.name)});return t?r.wrapError(e):void 0}),(D._headerRenderPromises||r.wrap()).done(function(){o.schedule(function(){D._listView._isZombie()?F.cancel():F.complete()},Math.min(D._onscreenJob.priority,D._backOffscreenJob.priority),null,"WinJS.UI.ListView._allItemsRealized")}))}}function C(t,n,i){if(D._realizePass===a){var n=i.element;D._addItem(e,t,n,a),g(t,i)}}var x="_realizeItems("+t+"-"+(n-1)+") visible("+m+"-"+f+")";this._listView._writeProfilerMark(x+",StartTM"),p=p||"right";var S=n-t,I=f-m+1,E=I,k=n-f-1,T=m-t,P=[],A=new s,M=new s,O=new s,D=this;if(S>0){var L=0,R=0,B=0;D.firstIndexDisplayed=m,D.lastIndexDisplayed=f;var N=D._listView._isCurrentZoomView;D._highPriorityRealize&&(D._firstLayoutPass||D._hasAnimationInViewportPending)?(D._highPriorityRealize=!1,D._onscreenJob.priority=o.Priority.high,D._frontOffscreenJob.priority=o.Priority.normal,D._backOffscreenJob.priority=o.Priority.belowNormal):D._highPriorityRealize?(D._highPriorityRealize=!1,D._onscreenJob.priority=o.Priority.high,D._frontOffscreenJob.priority=o.Priority.high-1,D._backOffscreenJob.priority=o.Priority.high-1):N?(D._onscreenJob.priority=o.Priority.aboveNormal,D._frontOffscreenJob.priority=o.Priority.normal,D._backOffscreenJob.priority=o.Priority.belowNormal):(D._onscreenJob.priority=o.Priority.belowNormal,D._frontOffscreenJob.priority=o.Priority.idle,D._backOffscreenJob.priority=o.Priority.idle);
var F=new s,z=D._listView._versionManager.cancelOnNotification(F.promise),H=function(e,t){t.startStage1&&t.stage0.then(function(){D._realizePass===a&&t.startStage1&&e.addWork(t.startStage1)})},W=function(e,t){var n=D.items.itemDataAt(t);if(!n){var i=D._listView._itemsManager._itemPromiseAtIndex(t);D._pendingItemPromises[i.handle]=i,delete D._previousRealizationPendingItemPromises[i.handle],e.addWork(function(){if(!D._listView._isZombie()&&(L++,D._createItem(t,i,C,w),!D._listView._isZombie()&&D._realizePass===a&&i.handle)){var n=D._listView._itemsManager._recordFromHandle(i.handle);H(e,n)}})}},V=function(e,t,n){for(var i=t;n>=i;i++)W(e,i)},j=function(e,t,n){for(var i=n;i>=t;i--)W(e,i)},U=function(e,t,n){for(var i=t;n>=i;i++){var r=D.items.itemDataAt(i);if(r){var s=r.itemsManagerRecord;g(i,s),R++,H(e,s)}}};this._previousRealizationPendingItemPromises=this._pendingItemPromises||{},this._pendingItemPromises={};var q;"left"===p?(j(D._onscreenJob,m,f),j(D._frontOffscreenJob,t,m-1),q=t>m-1):(V(D._onscreenJob,m,f),V(D._frontOffscreenJob,f+1,n-1),q=f+1>n-1);for(var K=0,J=Object.keys(this._previousRealizationPendingItemPromises),G=J.length;G>K;K++){var $=J[K];D._listView._itemsManager.releaseItemPromise(this._previousRealizationPendingItemPromises[$])}this._previousRealizationPendingItemPromises={},U(D._onscreenJob,m,f),"left"===p?U(D._frontOffscreenJob,t,m-1):U(D._frontOffscreenJob,f+1,n-1);var Y=E===f-m+1;return D._firstLayoutPass?D._listView._canvas.style.opacity=0:Y?D._listView._showProgressBar(D._listView._element,"50%","50%"):D._listView._hideProgressBar(),D._frontOffscreenJob.pause(),D._backOffscreenJob.pause(),M.promise.done(function(){D._frontOffscreenJob.resume(),q&&O.complete()},function(){F.cancel()}),O.promise.done(function(){D._listView._writeProfilerMark("frontItemsRealized,info"),"left"===p?(V(D._backOffscreenJob,f+1,n-1),U(D._backOffscreenJob,f+1,n-1)):(j(D._backOffscreenJob,t,m-1),U(D._backOffscreenJob,t,m-1)),D._backOffscreenJob.resume()}),F.promise.done(function(){D._listView._versionManager.clearCancelOnNotification(z),D._listView._writeProfilerMark(x+" complete(created:"+L+" updated:"+R+"),info")},function(e){return D._listView._versionManager.clearCancelOnNotification(z),D._onscreenJob.clearWork(),D._frontOffscreenJob.clearWork(),D._backOffscreenJob.clearWork(),A.cancel(),M.cancel(),D._listView._writeProfilerMark(x+" canceled(created:"+L+" updated:"+R+" clean:"+B+"),info"),r.wrapError(e)}),D._listView._writeProfilerMark(x+",StopTM"),{viewportItemsRealized:M.promise,allItemsRealized:F.promise,loadingCompleted:r.join([F.promise,A.promise]).then(function(){for(var e=[],i=t;n>i;i++){var s=D.items.itemDataAt(i);s&&e.push(s.itemsManagerRecord.itemReadyPromise)}return r._cancelBlocker(r.join(e))})}}return D._listView._writeProfilerMark(x+",StopTM"),{viewportItemsRealized:r.wrap(),allItemsRealized:r.wrap(),loadingCompleted:r.wrap()}},_setAnimationInViewportState:function(e){if(this._hasAnimationInViewportPending=!1,e&&e.length>0)for(var t=this._listView._getViewportLength(),n=this._listView._layout.itemsFromRange(this._scrollbarPos,this._scrollbarPos+t-1),i=0,r=e.length;r>i;i++){var s=e[i];if(s.newIndex>=n.firstIndex&&s.newIndex<=n.lastIndex&&s.newIndex!==s.oldIndex){this._hasAnimationInViewportPending=!0;break}}},_addHeader:function(e,t){var n=this;return this._listView._groups.renderGroup(t).then(function(e){if(e){e.element.tabIndex=0;var i=n._getHeaderContainer(t);e.element.parentNode!==i&&(i.appendChild(e.element),l.addClass(e.element,h._headerClass)),n._listView._groups.setDomElement(t,e.element)}})},_updateHeaders:function(e,t,n){function i(t){var n=o._listView._groups.group(t);if(n&&!n.header){var i=n.headerPromise;return i||(i=n.headerPromise=o._addHeader(e,t),i.done(function(){n.headerPromise=null},function(){n.headerPromise=null})),i}return r.wrap()}function s(){o._headerRenderPromises=null}var o=this;this._listView._groups.removeElements();var a=this._listView._groups.groupFromItem(t),l=a,u=this._listView._groups.groupFromItem(n-1),c=[];if(null!==l)for(;u>=l;l++)c.push(i(l));return this._headerRenderPromises=r.join(c,this._headerRenderPromises).then(s,s),this._headerRenderPromises||r.wrap()},_unrealizeItem:function(e){var t,n=this._listView;this._listView._writeProfilerMark("_unrealizeItem("+e+"),info");var i=n._selection._getFocused();i.type!==c.ObjectType.groupHeader&&i.index===e&&(n._unsetFocusOnItem(),t=!0);var r=this.items.itemDataAt(e),s=r.element,o=r.itemBox;o&&o.parentNode&&(l.removeClass(o.parentNode,h._selectedClass),l.removeClass(o.parentNode,h._footprintClass),l.addClass(o.parentNode,h._backdropClass),o.parentNode.removeChild(o)),r.container=null,n._currentMode().itemUnrealized&&n._currentMode().itemUnrealized(e,o),this.items.removeItem(e),r.removed||n._itemsManager.releaseItem(s),a._disposeElement(s),t&&n._setFocusOnItem(n._selection._getFocused())},_unrealizeGroup:function(e){var t,n=e.header,i=this._listView._selection._getFocused();i.type===c.ObjectType.groupHeader&&this._listView._groups.group(i.index)===e&&(this._listView._unsetFocusOnItem(),t=!0),n.parentNode&&n.parentNode.removeChild(n),a._disposeElement(n),e.header=null,e.left=-1,e.top=-1,t&&this._listView._setFocusOnItem(this._listView._selection._getFocused())},_unrealizeItems:function(e){var t=this,n=0;this.items.eachIndex(function(i){return i<t.begin||i>=t.end?(t._unrealizeItem(i),e&&++n>=e):void 0});var i=this._listView._groups,r=i.groupFromItem(this.begin);if(null!==r)for(var s=i.groupFromItem(this.end-1),o=0,a=i.length();a>o;o++){var l=i.group(o);(r>o||o>s)&&l.header&&this._unrealizeGroup(l)}},_unrealizeExcessiveItems:function(){var e=this.items.count(),t=this.end-this.begin,n=t+this._listView._maxDeferredItemCleanup;this._listView._writeProfilerMark("_unrealizeExcessiveItems realized("+e+") approved("+n+"),info"),e>n&&this._unrealizeItems(e-n)},_lazilyUnrealizeItems:function(){this._listView._writeProfilerMark("_lazilyUnrealizeItems,StartTM");var e=this;return v(this._listView).then(function(){function t(){e._listView._writeProfilerMark("_lazilyUnrealizeItems,StopTM")}if(e._listView._isZombie())return void t();var n=[];e.items.eachIndex(function(t){(t<e.begin||t>=e.end)&&n.push(t)}),e._listView._writeProfilerMark("_lazilyUnrealizeItems itemsToUnrealize("+n.length+"),info");var i=[],s=e._listView._groups,a=s.groupFromItem(e.begin);if(null!==a)for(var l=s.groupFromItem(e.end-1),u=0,c=s.length();c>u;u++){var h=s.group(u);(a>u||u>l)&&h.header&&i.push(h)}if(n.length||i.length){var d,p=new r(function(t){function r(s){if(!e._listView._isZombie()){for(var o=-1,a=-1,l=0,u=g(e._listView);n.length&&!u&&!s.shouldYield;){var c=n.shift();e._unrealizeItem(c),l++,0>o&&(o=c),a=c}for(e._listView._writeProfilerMark("unrealizeWorker removeItems:"+l+" ("+o+"-"+a+"),info");i.length&&!u&&!s.shouldYield;)e._unrealizeGroup(i.shift());n.length||i.length?u?s.setPromise(v(e._listView).then(function(){return r})):s.setWork(r):t()}}d=o.schedule(r,o.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyUnrealizeItems")});return p.then(t,function(t){return d.cancel(),e._listView._writeProfilerMark("_lazilyUnrealizeItems canceled,info"),e._listView._writeProfilerMark("_lazilyUnrealizeItems,StopTM"),r.wrapError(t)})}return t(),r.wrap()})},_getBoundingRectString:function(e){var t;if(e>=0&&e<this.containers.length){var n=this._listView._layout._getItemPosition(e);n&&(t="["+n.left+"; "+n.top+"; "+n.width+"; "+n.height+" ]")}return t||""},_clearDeferTimeout:function(){this.deferTimeout&&(this.deferTimeout.cancel(),this.deferTimeout=null),-1!==this.deferredActionCancelToken&&(this._listView._versionManager.clearCancelOnNotification(this.deferredActionCancelToken),this.deferredActionCancelToken=-1)},_setupAria:function(e){function t(){i._listView._writeProfilerMark("aria work,StopTM")}function n(e){var t=i._listView._groups,n=t.group(e+1);return n?Math.min(n.startIndex-1,i.end-1):i.end-1}if(!this._listView._isZombie()){var i=this;return this._listView._createAriaMarkers(),this._listView._itemsCount().then(function(s){if(!(s>0&&-1!==i.firstIndexDisplayed&&-1!==i.lastIndexDisplayed))return r.wrap();i._listView._writeProfilerMark("aria work,StartTM");var a,u,c,h,d,p,m=i._listView._ariaStartMarker,_=i._listView._ariaEndMarker,y=i.begin,b=i.items.itemAt(i.begin);return b?(l._ensureId(b),i._listView._groupsEnabled()?(u=i._listView._groups,c=h=u.groupFromItem(i.begin),d=u.group(h),p=n(h),l._ensureId(d.header),l._setAttribute(d.header,"role",i._listView._headerRole),l._setAttribute(d.header,"x-ms-aria-flowfrom",m.id),f(d.header,b),l._setAttribute(d.header,"tabindex",i._listView._tabIndex)):l._setAttribute(b,"x-ms-aria-flowfrom",m.id),new r(function(r){var m=e;a=o.schedule(function w(e){if(i._listView._isZombie())return void t();for(;y<i.end;y++){if(!m&&g(i._listView))return void e.setPromise(v(i._listView).then(function(e){return m=e,w}));if(e.shouldYield)return void e.setWork(w);b=i.items.itemAt(y);var o=i.items.itemAt(y+1);if(o&&l._ensureId(o),l._setAttribute(b,"role",i._listView._itemRole),l._setAttribute(b,"aria-setsize",s),l._setAttribute(b,"aria-posinset",y+1),l._setAttribute(b,"tabindex",i._listView._tabIndex),i._listView._groupsEnabled())if(y!==p&&o)f(b,o);else{var a=u.group(h+1);a&&a.header&&o?(l._setAttribute(a.header,"tabindex",i._listView._tabIndex),l._setAttribute(a.header,"role",i._listView._headerRole),l._ensureId(a.header),f(b,a.header),f(a.header,o)):l._setAttribute(b,"aria-flowto",_.id),h++,d=a,p=n(h)}else o?f(b,o):l._setAttribute(b,"aria-flowto",_.id);if(!o)break}i._listView._fireAccessibilityAnnotationCompleteEvent(i.begin,y,c,h-1),t(),r()},o.Priority.belowNormal,null,"WinJS.UI.ListView._setupAria")},function(){a.cancel(),t()})):void t()})}},_setupDeferredActions:function(){function e(){t._listView._isZombie()||(t.deferTimeout=null,t._listView._versionManager.clearCancelOnNotification(t.deferredActionCancelToken),t.deferredActionCancelToken=-1)}this._listView._writeProfilerMark("_setupDeferredActions,StartTM");var t=this;this._clearDeferTimeout(),this.deferTimeout=this._lazilyRemoveRedundantItemsBlocks().then(function(){return r.timeout(h._DEFERRED_ACTION)}).then(function(){return v(t._listView)}).then(function(e){return t._setupAria(e)}).then(e,function(t){return e(),r.wrapError(t)}),this.deferredActionCancelToken=this._listView._versionManager.cancelOnNotification(this.deferTimeout),this._listView._writeProfilerMark("_setupDeferredActions,StopTM")},_updateAriaMarkers:function(e,t,n){function i(){return s.items.itemAt(t)}function r(){for(var e=n;e>=t;e--)if(s.items.itemAt(e))return s.items.itemAt(e);return null}var s=this;if(!this._listView._isZombie()){this._listView._createAriaMarkers();var o,a,u=this._listView._ariaStartMarker,c=this._listView._ariaEndMarker;if(-1!==t&&-1!==n&&n>=t&&(o=i(),a=r()),!e&&o&&a){if(l._ensureId(o),l._ensureId(a),this._listView._groupsEnabled()){var h=this._listView._groups,d=h.group(h.groupFromItem(t));d.header&&(l._ensureId(d.header),t===d.startIndex?l._setAttribute(u,"aria-flowto",d.header.id):l._setAttribute(u,"aria-flowto",o.id))}else l._setAttribute(u,"aria-flowto",o.id);l._setAttribute(c,"x-ms-aria-flowfrom",a.id)}else f(u,c),this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1)}},updateAriaForAnnouncement:function(e,t){var n=-1,i=c.ObjectType.item;l.hasClass(e,h._headerClass)?(n=this._listView._groups.index(e),i=c.ObjectType.groupHeader,l._setAttribute(e,"role",this._listView._headerRole),l._setAttribute(e,"tabindex",this._listView._tabIndex)):(n=this.items.index(e),l._setAttribute(e,"aria-setsize",t),l._setAttribute(e,"aria-posinset",n+1),l._setAttribute(e,"role",this._listView._itemRole),l._setAttribute(e,"tabindex",this._listView._tabIndex)),i===c.ObjectType.groupHeader?this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1,n,n):this._listView._fireAccessibilityAnnotationCompleteEvent(n,n,-1,-1)},_reportElementsLevel:function(e){function t(e,t){for(var n=0,r=e;t>=r;r++){var s=i.itemDataAt(r);s&&s.container&&n++}return n}var n,i=this.items;n=Math.floor("right"===e?100*t(this.firstIndexDisplayed,this.end-1)/(this.end-this.firstIndexDisplayed):100*t(this.begin,this.lastIndexDisplayed)/(this.lastIndexDisplayed-this.begin+1)),this._listView._writeProfilerMark("elementsLevel level("+n+"),info")},_createHeaderContainer:function(e){return this._createSurfaceChild(h._headerContainerClass,e)},_createItemsContainer:function(e){var n=this._createSurfaceChild(h._itemsContainerClass,e),i=t.document.createElement("div");return i.className=h._padderClass,n.appendChild(i),n},_ensureContainerInDOM:function(e){var t=this.containers[e];return t&&!this._listView._canvas.contains(t)?(this._forceItemsBlocksInDOM(e,e+1),!0):!1},_ensureItemsBlocksInDOM:function(e,t){if(this._expandedRange){var n=this._expandedRange.first.index,i=this._expandedRange.last.index+1;n>=e&&t>n?t=Math.max(t,i):i>e&&t>=i&&(e=Math.min(e,n))}this._forceItemsBlocksInDOM(e,t)},_removeRedundantItemsBlocks:function(){-1!==this.begin&&-1!==this.end&&this._forceItemsBlocksInDOM(this.begin,this.end)},_lazilyRemoveRedundantItemsBlocks:function(){this._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StartTM");var e=this;return v(this._listView).then(function(){function t(){e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StopTM")}if(e._listView._isZombie())return void t();if(e._expandedRange&&-1!==e.begin&&-1!==e.end&&(e._expandedRange.first.index<e.begin||e._expandedRange.last.index+1>e.end)){var n,i=new r(function(t){function i(n){if(!e._listView._isZombie()){for(var r=g(e._listView);e._expandedRange.first.index<e.begin&&!r&&!n.shouldYield;){var s=Math.min(e.begin,e._expandedRange.first.index+e._blockSize*w._blocksToRelease);e._forceItemsBlocksInDOM(s,e.end)}for(;e._expandedRange.last.index+1>e.end&&!r&&!n.shouldYield;){var o=Math.max(e.end,e._expandedRange.last.index-e._blockSize*w._blocksToRelease);e._forceItemsBlocksInDOM(e.begin,o)}e._expandedRange.first.index<e.begin||e._expandedRange.last.index+1>e.end?r?n.setPromise(v(e._listView).then(function(){return i})):n.setWork(i):t()}}n=o.schedule(i,o.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyRemoveRedundantItemsBlocks")});return i.then(t,function(t){return n.cancel(),e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks canceled,info"),e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StopTM"),r.wrapError(t)})}return t(),r.wrap()})},_forceItemsBlocksInDOM:function(e,t){function n(e,t){var n=e.element.firstElementChild;n.style[_]=t}function i(e){for(var t=0;t<p.tree.length;t++)for(var n=p.tree[t].itemsContainer,i=0,r=n.itemsBlocks.length;r>i;i++)if(e(n,n.itemsBlocks[i]))return}function r(e){p._listView._writeProfilerMark("_itemsBlockExtent,StartTM"),p._listView._itemsBlockExtent=l[p._listView._horizontal()?"getTotalWidth":"getTotalHeight"](e.element),p._listView._writeProfilerMark("_itemsBlockExtent("+p._listView._itemsBlockExtent+"),info"),p._listView._writeProfilerMark("_itemsBlockExtent,StopTM")}function s(){return-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize&&t.element.parentNode===e.element?(r(t),!0):!1}),-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize?(e.element.appendChild(t.element),r(t),e.element.removeChild(t.element),!0):!1}),p._listView._itemsBlockExtent}function o(e,t,n){function i(t){var n=e.itemsBlocks[t];n&&n.element.parentNode===e.element&&(e.element.removeChild(n.element),f++)}if(Array.isArray(t))t.forEach(i);else for(var r=t;n>r;r++)i(r)}function a(e,t,n){for(var i=e.element.firstElementChild,r=i,s=t;n>s;s++){var o=e.itemsBlocks[s];o&&(o.element.parentNode!==e.element&&(e.element.insertBefore(o.element,r.nextElementSibling),m++),r=o.element)}}function u(e){if(e<p.tree.length){p._listView._writeProfilerMark("collapseGroup("+e+"),info");var t=p.tree[e].itemsContainer;o(t,0,t.itemsBlocks.length),n(t,"")}}function c(e){if(e<p.tree.length){p._listView._writeProfilerMark("expandGroup("+e+"),info");var t=p.tree[e].itemsContainer;a(t,0,t.itemsBlocks.length),n(t,"")}}function h(e,t){function n(e,t){for(var n=[],i=e;t>=i;i++)n.push(i);return n}var i=t[0],r=t[1],s=e[0],o=e[1];return s>r||i>o?n(s,o):i>s&&o>r?n(s,i-1).concat(n(r+1,o)):i>s?n(s,i-1):o>r?n(r+1,o):null}if(this._blockSize){var d="_forceItemsBlocksInDOM begin("+e+") end("+t+"),";this._listView._writeProfilerMark(d+"StartTM");var p=this,m=0,f=0,_="padding"+(this._listView._horizontal()?"Left":"Top"),g=this._listView._groups.groupFromItem(e),v=this._listView._groups.groupFromItem(t-1),y=this._listView._groups.group(g),b=p.tree[g].itemsContainer,w=Math.floor((e-y.startIndex)/this._blockSize),C=this._listView._groups.group(v),x=p.tree[v].itemsContainer,S=Math.floor((t-1-C.startIndex)/this._blockSize);w&&-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize&&t.element.parentNode===e.element?(r(t),!0):!1});var I=this._expandedRange?h([this._expandedRange.first.groupIndex,this._expandedRange.last.groupIndex],[g,v]):null;if(I&&I.forEach(u),this._expandedRange&&this._expandedRange.first.groupKey===y.key){var E=h([this._expandedRange.first.block,Number.MAX_VALUE],[w,Number.MAX_VALUE]);E&&o(b,E)}else this._expandedRange&&g>=this._expandedRange.first.groupIndex&&g<=this._expandedRange.last.groupIndex&&o(b,0,w);if(g!==v?(a(b,w,b.itemsBlocks.length),a(x,0,S+1)):a(b,w,S+1),this._expandedRange&&this._expandedRange.last.groupKey===C.key){var E=h([0,this._expandedRange.last.block],[0,S]);E&&o(x,E)}else this._expandedRange&&v>=this._expandedRange.first.groupIndex&&v<=this._expandedRange.last.groupIndex&&o(x,S+1,x.itemsBlocks.length);n(b,w?w*s()+"px":""),g!==v&&n(x,"");for(var k=g+1;v>k;k++)c(k);this._expandedRange={first:{index:e,groupIndex:g,groupKey:y.key,block:w},last:{index:t-1,groupIndex:v,groupKey:C.key,block:S}},this._listView._writeProfilerMark("_forceItemsBlocksInDOM groups("+g+"-"+v+") blocks("+w+"-"+S+") added("+m+") removed("+f+"),info"),this._listView._writeProfilerMark(d+"StopTM")}},_realizePageImpl:function(){var e=this,t="realizePage(scrollPosition:"+this._scrollbarPos+" forceLayout:"+this._forceRelayout+")";return this._listView._writeProfilerMark(t+",StartTM"),this._listView._versionManager.locked?(this._listView._versionManager.unlocked.done(function(){e._listView._isZombie()||e._listView._batchViewUpdates(h._ViewChange.realize,h._ScrollToPriority.low,e._listView.scrollPosition)}),this._listView._writeProfilerMark(t+",StopTM"),r.cancel):new r(function(n){function o(){n(),h.complete()}function a(){e._listView._hideProgressBar(),e._state.setLoadingState(e._listView._LoadingState.viewPortLoaded),e._executeAnimations&&e._setState(M,h.promise)}function u(t){e._updateAriaMarkers(0===t,e.firstIndexDisplayed,e.lastIndexDisplayed),e._state.setLoadingState&&e._state.setLoadingState(e._listView._LoadingState.itemsLoaded)}function c(t){e._listView._clearInsertedItems(),e._listView._groups.removeElements(),a(),u(t),o()}var h=new s;e._state.setLoadingState(e._listView._LoadingState.itemsLoading),e._firstLayoutPass&&e._listView._showProgressBar(e._listView._element,"50%","50%");var d=e.containers.length;if(d){var p=w._pagesToPrefetch,m=w._customPagesToPrefetchMax,f=w._customPagesToPrefetchMin;e._listView._zooming&&(p=0,m=0,f=0);var _,g,v=e._listView._getViewportLength();if(i._isiOS&&!w._disableCustomPagesPrefetch){_="left"===e._direction?m:f;var y=Math.max(0,_-e._scrollbarPos/v);g=Math.min(m,y+("right"===e._direction?m:f))}else _=p,g=p;var b=Math.max(0,e._scrollbarPos-_*v),C=e._scrollbarPos+(1+g)*v,x=e._listView._layout.itemsFromRange(b,C-1);if((x.firstIndex<0||x.firstIndex>=d)&&(x.lastIndex<0||x.lastIndex>=d))e.begin=-1,e.end=-1,e.firstIndexDisplayed=-1,e.lastIndexDisplayed=-1,c(d);else{var S=l._clamp(x.firstIndex,0,d-1),I=l._clamp(x.lastIndex+1,0,d),E=e._listView._layout.itemsFromRange(e._scrollbarPos,e._scrollbarPos+v-1),k=l._clamp(E.firstIndex,0,d-1),T=l._clamp(E.lastIndex,0,d-1);if(e._realizationLevel!==w._realizationLevel.skip||e.lastRealizePass||k!==e.firstIndexDisplayed||T!==e.lastIndexDisplayed)if((e._forceRelayout||S!==e.begin||I!==e.end||k!==e.firstIndexDisplayed||T!==e.lastIndexDisplayed)&&I>S&&C>b){e._listView._writeProfilerMark("realizePage currentInView("+k+"-"+T+") previousInView("+e.firstIndexDisplayed+"-"+e.lastIndexDisplayed+") change("+(k-e.firstIndexDisplayed)+"),info"),e._cancelRealize();var P=e._realizePass;e.begin=S,e.end=I,e.firstIndexDisplayed=k,e.lastIndexDisplayed=T,e.deletesWithoutRealize=0,e._ensureItemsBlocksInDOM(e.begin,e.end);var A=e._realizeItems(e._listView._itemCanvas,e.begin,e.end,d,P,e._scrollbarPos,e._direction,k,T,e._forceRelayout);e._forceRelayout=!1;var O=A.viewportItemsRealized.then(function(){return a(),A.allItemsRealized}).then(function(){return e._realizePass===P?e._updateHeaders(e._listView._canvas,e.begin,e.end).then(function(){u(d)}):void 0}).then(function(){return A.loadingCompleted}).then(function(){e._unrealizeExcessiveItems(),e.lastRealizePass=null,o()},function(t){return e._realizePass===P&&(e.lastRealizePass=null,e.begin=-1,e.end=-1),r.wrapError(t)});e.lastRealizePass=r.join([A.viewportItemsRealized,A.allItemsRealized,A.loadingCompleted,O]),e._unrealizeExcessiveItems()}else e.lastRealizePass?e.lastRealizePass.then(o):c(d);else e.begin=S,e.end=S+Object.keys(e.items._itemData).length,e._updateHeaders(e._listView._canvas,e.begin,e.end).done(function(){e.lastRealizePass=null,c(d)})}}else e.begin=-1,e.end=-1,e.firstIndexDisplayed=-1,e.lastIndexDisplayed=-1,c(d);e._reportElementsLevel(e._direction),e._listView._writeProfilerMark(t+",StopTM")})},realizePage:function(e,t,n,i){this._scrollToFunctor=y(e),this._forceRelayout=this._forceRelayout||t,this._scrollEndPromise=n,this._listView._writeProfilerMark(this._state.name+"_realizePage,info"),this._state.realizePage(i||E)},onScroll:function(e,t){this.realizePage(e,!1,t,T)},reload:function(e,t){this._listView._isZombie()||(this._scrollToFunctor=y(e),this._forceRelayout=!0,this._highPriorityRealize=!!t,this.stopWork(!0),this._listView._writeProfilerMark(this._state.name+"_rebuildTree,info"),this._state.rebuildTree())},refresh:function(e){this._listView._isZombie()||(this._scrollToFunctor=y(e),this._forceRelayout=!0,this._highPriorityRealize=!0,this.stopWork(),this._listView._writeProfilerMark(this._state.name+"_relayout,info"),this._state.relayout())},waitForValidScrollPosition:function(e){var t=this,n=this._listView._viewport[this._listView._scrollLength]-this._listView._getViewportLength();return e>n?t._listView._itemsCount().then(function(n){return t.containers.length<n?r._cancelBlocker(t._creatingContainersWork&&t._creatingContainersWork.promise).then(function(){return t._getLayoutCompleted()}).then(function(){return e}):e}):r.wrap(e)},waitForEntityPosition:function(e){var t=this;return this._listView._writeProfilerMark(this._state.name+"_waitForEntityPosition("+e.type+": "+e.index+"),info"),r._cancelBlocker(this._state.waitForEntityPosition(e).then(function(){return e.type!==c.ObjectType.groupHeader&&e.index>=t.containers.length||e.type===c.ObjectType.groupHeader&&t._listView._groups.group(e.index).startIndex>=t.containers.length?t._creatingContainersWork&&t._creatingContainersWork.promise:void 0}).then(function(){return t._getLayoutCompleted()}))},stopWork:function(e){this._listView._writeProfilerMark(this._state.name+"_stop,info"),this._state.stop(e),this._layoutWork&&this._layoutWork.cancel(),e&&this._creatingContainersWork&&this._creatingContainersWork.cancel(),e&&(this._state=new C(this))},_cancelRealize:function(){this._listView._writeProfilerMark("_cancelRealize,StartTM"),(this.lastRealizePass||this.deferTimeout)&&(this._forceRelayout=!0),this._clearDeferTimeout(),this._realizePass++,this._headerRenderPromises&&(this._headerRenderPromises.cancel(),this._headerRenderPromises=null);var e=this.lastRealizePass;e&&(this.lastRealizePass=null,this.begin=-1,this.end=-1,e.cancel()),this._listView._writeProfilerMark("_cancelRealize,StopTM")},resetItems:function(e){if(!this._listView._isZombie()){this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this._runningAnimations=null,this._executeAnimations=!1;var t=this._listView;this._firstLayoutPass=!0,t._unsetFocusOnItem(),t._currentMode().onDataChanged&&t._currentMode().onDataChanged(),this.items.each(function(n,i){e&&i.parentNode&&i.parentNode.parentNode&&i.parentNode.parentNode.removeChild(i.parentNode),t._itemsManager.releaseItem(i),a._disposeElement(i)}),this.items.removeItems(),this._deferredReparenting=[],e&&t._groups.removeElements(),t._clearInsertedItems()}},reset:function(){if(this.stopWork(!0),this._state=new C(this),this.resetItems(),!this._listView._isZombie()){var e=this._listView;e._groups.resetGroups(),e._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null}},cleanUp:function(){this.stopWork(!0),this._runningAnimations&&this._runningAnimations.cancel();var e=this._listView._itemsManager;this.items.each(function(t,n){e.releaseItem(n),a._disposeElement(n)}),this._listView._unsetFocusOnItem(),this.items.removeItems(),this._deferredReparenting=[],this._listView._groups.resetGroups(),this._listView._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null,this.destroyed=!0},getContainer:function(e){return this.containers[e]},_getHeaderContainer:function(e){return this.tree[e].header},_getGroups:function(e){if(this._listView._groupDataSource){var t=this._listView._groups.groups,n=[];if(e)for(var i=0,r=t.length;r>i;i++){var s=t[i],o=r>i+1?t[i+1].startIndex:e;n.push({key:s.key,size:o-s.startIndex})}return n}return[{key:"-1",size:e}]},_createChunk:function(e,t,n){function i(e,t){var i=e.element.children,r=i.length,o=Math.min(t-e.items.length,n);u.insertAdjacentHTMLUnsafe(e.element,"beforeend",p._repeat("<div class='win-container win-backdrop'></div>",o));for(var a=0;o>a;a++){var l=i[r+a];e.items.push(l),s.containers.push(l)}}function r(e){var t={header:s._listView._groupDataSource?s._createHeaderContainer():null,itemsContainer:{element:s._createItemsContainer(),items:[]}};s.tree.push(t),s.keyToGroupIndex[e.key]=s.tree.length-1,i(t.itemsContainer,e.size)}var s=this;if(this._listView._writeProfilerMark("createChunk,StartTM"),this.tree.length&&this.tree.length<=e.length){var o=this.tree[this.tree.length-1],a=e[this.tree.length-1].size;if(o.itemsContainer.items.length<a)return i(o.itemsContainer,a),void this._listView._writeProfilerMark("createChunk,StopTM")}this.tree.length<e.length&&r(e[this.tree.length]),this._listView._writeProfilerMark("createChunk,StopTM")},_createChunkWithBlocks:function(e,n,i,r){function s(e,n){var s=e.itemsBlocks.length?e.itemsBlocks[e.itemsBlocks.length-1]:null;if(s&&s.items.length<i){var o=Math.min(n,i-s.items.length);u.insertAdjacentHTMLUnsafe(s.element,"beforeend",p._repeat("<div class='win-container win-backdrop'></div>",o));var l=s.items.length;v=s.element.children;for(var c=0;o>c;c++){var h=v[l+c];s.items.push(h),a.containers.push(h)}n-=o}n>r&&(n=Math.min(n,Math.max(1,Math.floor(r/i))*i));var d=Math.floor(n/i),m=n%i,f="<div class='win-itemsblock'>"+p._repeat("<div class='win-container win-backdrop'></div>",i)+"</div>",_=p._repeat(f,d);m&&(_+="<div class='win-itemsblock'>"+p._repeat("<div class='win-container win-backdrop'></div>",m)+"</div>",d++);var g=t.document.createElement("div");u.setInnerHTMLUnsafe(g,_);for(var v=g.children,y=0;d>y;y++){var b=v[y],w={element:b,items:p._nodeListToArray(b.children)};e.itemsBlocks.push(w);for(var C=0;C<w.items.length;C++)a.containers.push(w.items[C])}}function o(e){var t={header:a._listView._groupDataSource?a._createHeaderContainer():null,itemsContainer:{element:a._createItemsContainer(),itemsBlocks:[]}};a.tree.push(t),a.keyToGroupIndex[e.key]=a.tree.length-1,s(t.itemsContainer,e.size)}var a=this;if(this._listView._writeProfilerMark("createChunk,StartTM"),this.tree.length&&this.tree.length<=e.length){var l=this.tree[this.tree.length-1].itemsContainer,c=e[this.tree.length-1].size,h=0;if(l.itemsBlocks.length&&(h=(l.itemsBlocks.length-1)*i+l.itemsBlocks[l.itemsBlocks.length-1].items.length),c>h)return s(l,c-h),void this._listView._writeProfilerMark("createChunk,StopTM")}this.tree.length<e.length&&o(e[this.tree.length]),this._listView._writeProfilerMark("createChunk,StopTM")},_generateCreateContainersWorker:function(){var e=this,t=0,n=!1;return function r(s){e._listView._versionManager.locked?s.setPromise(e._listView._versionManager.unlocked.then(function(){return r})):e._listView._itemsCount().then(function(o){var a=!n&&g(e._listView);if(a)s.setPromise(v(e._listView).then(function(e){return n=e,r}));else{if(e._listView._isZombie())return;n=!1;var l=i._now()+w._createContainersJobTimeslice,u=e._getGroups(o),c=e.containers.length,h=e.end===e.containers.length,d=w._chunkSize;do e._blockSize?e._createChunkWithBlocks(u,o,e._blockSize,d):e._createChunk(u,o,d),t++;while(e.containers.length<o&&i._now()<l);e._listView._writeProfilerMark("createContainers yields containers("+e.containers.length+"),info"),e._listView._affectedRange.add({start:c,end:e.containers.length},o),h?(e.stopWork(),e._listView._writeProfilerMark(e._state.name+"_relayout,info"),e._state.relayout()):(e._listView._writeProfilerMark(e._state.name+"_layoutNewContainers,info"),e._state.layoutNewContainers()),e.containers.length<o?s.setWork(r):(e._listView._writeProfilerMark("createContainers completed steps("+t+"),info"),e._creatingContainersWork.complete())}})}},_scheduleLazyTreeCreation:function(){return o.schedule(this._generateCreateContainersWorker(),o.Priority.idle,this,"WinJS.UI.ListView.LazyTreeCreation")},_createContainers:function(){this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null;var e,t=this;return this._listView._itemsCount().then(function(n){return 0===n&&t._listView._hideProgressBar(),e=n,t._listView._writeProfilerMark("createContainers("+e+"),StartTM"),t._listView._groupDataSource?t._listView._groups.initialize():void 0}).then(function(){return t._listView._writeProfilerMark("numberOfItemsPerItemsBlock,StartTM"),e&&t._listView._groups.length()?t._listView._layout.numberOfItemsPerItemsBlock:null}).then(function(n){t._listView._writeProfilerMark("numberOfItemsPerItemsBlock("+n+"),info"),t._listView._writeProfilerMark("numberOfItemsPerItemsBlock,StopTM"),t._listView._resetCanvas(),t.tree=[],t.keyToGroupIndex={},t.containers=[],t._blockSize=n;var r,s=t._getGroups(e),o=i._now()+w._maxTimePerCreateContainers,a=Math.min(w._startupChunkSize,w._chunkSize);do r=n?t._createChunkWithBlocks(s,e,n,a):t._createChunk(s,e,a);while(i._now()<o&&t.containers.length<e&&!r);if(t._listView._writeProfilerMark("createContainers created("+t.containers.length+"),info"),t._listView._affectedRange.add({start:0,end:t.containers.length},e),t.containers.length<e){var l=t._scheduleLazyTreeCreation();t._creatingContainersWork.promise.done(null,function(){l.cancel()})}else t._listView._writeProfilerMark("createContainers completed synchronously,info"),t._creatingContainersWork.complete();t._listView._writeProfilerMark("createContainers("+e+"),StopTM")})},_updateItemsBlocks:function(e){function n(){var e=t.document.createElement("div");return e.className=h._itemsBlockClass,e}function i(t,i){function o(){t.itemsBlocks=null,t.items=[];for(var e=0;c>e;e++){var n=r.containers[i+e];t.element.appendChild(n),t.items.push(n)}}function a(){t.itemsBlocks=[{element:u.length?u.shift():n(),items:[]}];for(var s=t.itemsBlocks[0],o=0;c>o;o++){if(s.items.length===e){var a=u.length?u.shift():n();t.itemsBlocks.push({element:a,items:[]}),s=t.itemsBlocks[t.itemsBlocks.length-1]}var l=r.containers[i+o];s.element.appendChild(l),s.items.push(l)}t.items=null}var l,u=[],c=0,h=t.itemsBlocks;if(h)for(l=0;l<h.length;l++)c+=h[l].items.length,u.push(h[l].element);else c=t.items.length;for(s?a():o(),l=0;l<u.length;l++){var d=u[l];d.parentNode===t.element&&t.element.removeChild(d)}return c}for(var r=this,s=!!e,o=0,a=0;o<this.tree.length;o++)a+=i(this.tree[o].itemsContainer,a);r._blockSize=e
},_layoutItems:function(){var e=this;return this._listView._itemsCount().then(function(){return r.as(e._listView._layout.numberOfItemsPerItemsBlock).then(function(t){e._listView._writeProfilerMark("numberOfItemsPerItemsBlock("+t+"),info"),t!==e._blockSize&&(e._updateItemsBlocks(t),e._listView._itemsBlockExtent=-1);var n,i=e._listView._affectedRange.get();return i&&(n={firstIndex:Math.max(i.start-1,0),lastIndex:Math.min(e.containers.length-1,i.end)},n.firstIndex<e.containers.length||0===e.containers.length)?e._listView._layout.layout(e.tree,n,e._modifiedElements||[],e._modifiedGroups||[]):(e._listView._affectedRange.clear(),{realizedRangeComplete:r.wrap(),layoutComplete:r.wrap()})})})},updateTree:function(e,t,n){return this._listView._writeProfilerMark(this._state.name+"_updateTree,info"),this._state.updateTree(e,t,n)},_updateTreeImpl:function(e,n,i,r){function s(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];i.parentNode.removeChild(i)}}if(this._executeAnimations=!0,this._modifiedElements=i,!i.handled){i.handled=!0,this._listView._writeProfilerMark("_updateTreeImpl,StartTM");var o,a=this;r||this._unrealizeItems();for(var o=0,u=i.length;u>o;o++)i[o]._itemBox&&i[o]._itemBox.parentNode&&l.removeClass(i[o]._itemBox.parentNode,h._selectedClass);this.items.each(function(e,t,n){n.container&&l.removeClass(n.container,h._selectedClass),n.container&&l.addClass(n.container,h._backdropClass)});var c=this._listView._updateContainers(this._getGroups(e),e,n,i);s(c.removedHeaders),s(c.removedItemsContainers);for(var o=0,u=i.length;u>o;o++){var p=i[o];if(-1!==p.newIndex){if(p.element=this.getContainer(p.newIndex),!p.element)throw"Container missing after updateContainers."}else l.removeClass(p.element,h._backdropClass)}var m=t.document.activeElement;this._listView._canvas.contains(m)&&(this._requireFocusRestore=m),this._deferredReparenting=[],this.items.each(function(e,t,n){var i=a.getContainer(e),r=n.itemBox;r&&i&&(r.parentNode!==i&&(e>=a.firstIndexDisplayed&&e<=a.lastIndexDisplayed?a._appendAndRestoreFocus(i,r):a._deferredReparenting.push({itemBox:r,container:i})),l.removeClass(i,h._backdropClass),n.container=i,l[a._listView.selection._isIncluded(e)?"addClass":"removeClass"](i,h._selectedClass),!a._listView.selection._isIncluded(e)&&l.hasClass(r,h._selectedClass)&&d._ItemEventsHandler.renderSelection(r,n.element,!1,!0))}),this._listView._writeProfilerMark("_updateTreeImpl,StopTM")}},_completeUpdateTree:function(){if(this._deferredReparenting){var e=this._deferredReparenting.length;if(e>0){var t="_completeReparenting("+e+")";this._listView._writeProfilerMark(t+",StartTM");for(var n,i=0;e>i;i++)n=this._deferredReparenting[i],this._appendAndRestoreFocus(n.container,n.itemBox);this._deferredReparenting=[],this._listView._writeProfilerMark(t+",StopTM")}}this._requireFocusRestore=null},_appendAndRestoreFocus:function(e,n){if(n.parentNode!==e){var i;if(this._requireFocusRestore&&(i=t.document.activeElement),this._requireFocusRestore&&this._requireFocusRestore===i&&(e.contains(i)||n.contains(i))&&(this._listView._unsetFocusOnItem(),i=t.document.activeElement),l.empty(e),e.appendChild(n),this._requireFocusRestore&&i===this._listView._keyboardEventsHelper){var r=this._listView._selection._getFocused();r.type===c.ObjectType.item&&this.items.itemBoxAt(r.index)===n&&(l._setActive(this._requireFocusRestore),this._requireFocusRestore=null)}}},_startAnimations:function(){this._listView._writeProfilerMark("startAnimations,StartTM");var e=this;this._hasAnimationInViewportPending=!1;var t=r.as(this._listView._layout.executeAnimations()).then(function(){e._listView._writeProfilerMark("startAnimations,StopTM")});return t},_setState:function(e,t){if(!this._listView._isZombie()){var n=this._state.name;this._state=new e(this,t),this._listView._writeProfilerMark(this._state.name+"_enter from("+n+"),info"),this._state.enter()}},getAdjacent:function(e,t){var n=this;return this.waitForEntityPosition(e).then(function(){return n._listView._layout.getAdjacent(e,t)})},hitTest:function(e,t){if(this._realizedRangeLaidOut)return{index:-1,insertAfterIndex:-1};var n=this._listView._layout.hitTest(e,t);return n.index=l._clamp(n.index,-1,this._listView._cachedCount-1,0),n.insertAfterIndex=l._clamp(n.insertAfterIndex,-1,this._listView._cachedCount-1,0),n},_createTreeBuildingSignal:function(){if(!this._creatingContainersWork){this._creatingContainersWork=new s;var e=this;this._creatingContainersWork.promise.done(function(){e._creatingContainersWork=null},function(){e._creatingContainersWork=null})}},_createLayoutSignal:function(){var e=this;this._layoutCompleted||(this._layoutCompleted=new s,this._layoutCompleted.promise.done(function(){e._layoutCompleted=null},function(){e._layoutCompleted=null})),this._realizedRangeLaidOut||(this._realizedRangeLaidOut=new s,this._realizedRangeLaidOut.promise.done(function(){e._realizedRangeLaidOut=null},function(){e._realizedRangeLaidOut=null}))},_getLayoutCompleted:function(){return this._layoutCompleted?r._cancelBlocker(this._layoutCompleted.promise):r.wrap()},_createSurfaceChild:function(e,n){var i=t.document.createElement("div");return i.className=e,this._listView._canvas.insertBefore(i,n?n.nextElementSibling:null),i},_executeScrollToFunctor:function(){var e=this;return r.as(this._scrollToFunctor?this._scrollToFunctor():null).then(function(t){e._scrollToFunctor=null,t=t||{},+t.position===t.position&&(e._scrollbarPos=t.position),e._direction=t.direction||"right"})}},{_pagesToPrefetch:2,_customPagesToPrefetchMax:6,_customPagesToPrefetchMin:2,_disableCustomPagesPrefetch:!1,_waitForSeZoIntervalDuration:100,_waitForSeZoTimeoutDuration:500,_chunkSize:500,_startupChunkSize:100,_maxTimePerCreateContainers:5,_createContainersJobTimeslice:15,_blocksToRelease:10,_realizationLevel:{skip:"skip",realize:"realize",normal:"normal"}}),C=n.Class.define(function(e){this.view=e,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()},{name:"CreatedState",enter:function(){this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()},stop:b,realizePage:b,rebuildTree:function(){this.view._setState(x)},relayout:function(){this.view._setState(x)},layoutNewContainers:b,waitForEntityPosition:function(){return this.view._setState(x),this.view._getLayoutCompleted()},updateTree:b}),x=n.Class.define(function(e){this.view=e},{name:"BuildingState",enter:function(){this.canceling=!1,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal();var e=this,t=new s;this.promise=t.promise.then(function(){return e.view._createContainers()}).then(function(){e.view._setState(S)},function(t){return e.canceling||(e.view._setState(C),e.view._listView._raiseViewComplete()),r.wrapError(t)}),t.complete()},stop:function(){this.canceling=!0,this.promise.cancel(),this.view._setState(C)},realizePage:b,rebuildTree:function(){this.canceling=!0,this.promise.cancel(),this.enter()},relayout:b,layoutNewContainers:b,waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:b}),S=n.Class.define(function(e,t){this.view=e,this.nextStateType=t||E},{name:"LayingoutState",enter:function(){var e=this;this.canceling=!1,this.view._createLayoutSignal(),this.view._listView._writeProfilerMark(this.name+"_enter_layoutItems,StartTM");var t=new s;this.promise=t.promise.then(function(){return e.view._layoutItems()}).then(function(t){return e.view._layoutWork=t.layoutComplete,t.realizedRangeComplete}).then(function(){e.view._listView._writeProfilerMark(e.name+"_enter_layoutItems,StopTM"),e.view._listView._clearInsertedItems(),e.view._setAnimationInViewportState(e.view._modifiedElements),e.view._modifiedElements=[],e.view._modifiedGroups=[],e.view._realizedRangeLaidOut.complete(),e.view._layoutWork.then(function(){e.view._listView._writeProfilerMark(e.name+"_enter_layoutCompleted,info"),e.view._listView._affectedRange.clear(),e.view._layoutCompleted.complete()}),e.canceling||e.view._setState(e.nextStateType)},function(t){return e.view._listView._writeProfilerMark(e.name+"_enter_layoutCanceled,info"),e.canceling||(e.view.firstIndexDisplayed=e.view.lastIndexDisplayed=-1,e.view._updateAriaMarkers(!0,e.view.firstIndexDisplayed,e.view.lastIndexDisplayed),e.view._setState(O)),r.wrapError(t)}),t.complete(),this.canceling&&this.promise.cancel()},cancelLayout:function(e){this.view._listView._writeProfilerMark(this.name+"_cancelLayout,info"),this.canceling=!0,this.promise&&this.promise.cancel(),e&&this.view._setState(I)},stop:function(){this.cancelLayout(!0)},realizePage:b,rebuildTree:function(){this.cancelLayout(!1),this.view._setState(x)},relayout:function(){this.cancelLayout(!1),this.enter()},layoutNewContainers:function(){this.relayout()},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),I=n.Class.define(function(e){this.view=e},{name:"LayoutCanceledState",enter:b,stop:b,realizePage:function(){this.relayout()},rebuildTree:function(){this.view._setState(x)},relayout:function(){this.view._setState(S)},layoutNewContainers:function(){this.relayout()},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),E=n.Class.define(function(e){this.view=e,this.nextState=A,this.relayoutNewContainers=!0},{name:"RealizingState",enter:function(){var e=this,t=new s;this.promise=t.promise.then(function(){return e.view._executeScrollToFunctor()}).then(function(){return e.relayoutNewContainers=!1,r._cancelBlocker(e.view._realizePageImpl())}).then(function(){e.view._state===e&&(e.view._completeUpdateTree(),e.view._listView._writeProfilerMark("RealizingState_to_UnrealizingState"),e.view._setState(e.nextState))},function(t){return e.view._state!==e||e.canceling||(e.view._listView._writeProfilerMark("RealizingState_to_CanceledState"),e.view._setState(k)),r.wrapError(t)}),t.complete()},stop:function(){this.canceling=!0,this.promise.cancel(),this.view._cancelRealize(),this.view._setState(k)},realizePage:function(){this.canceling=!0,this.promise.cancel(),this.enter()},rebuildTree:function(){this.stop(),this.view._setState(x)},relayout:function(){this.stop(),this.view._setState(S)},layoutNewContainers:function(){this.relayoutNewContainers?this.relayout():(this.view._createLayoutSignal(),this.view._relayoutInComplete=!0)},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)},setLoadingState:function(e){this.view._listView._setViewState(e)}}),k=n.Class.define(function(e){this.view=e},{name:"CanceledState",enter:b,stop:function(){this.view._cancelRealize()},realizePage:function(e){this.stop(),this.view._setState(e)},rebuildTree:function(){this.stop(),this.view._setState(x)},relayout:function(e){this.stop(),this.view._setState(S,e)},layoutNewContainers:function(){this.relayout(k)},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),T=n.Class.derive(E,function(e){this.view=e,this.nextState=P,this.relayoutNewContainers=!0},{name:"ScrollingState",setLoadingState:function(){}}),P=n.Class.derive(k,function(e){this.view=e},{name:"ScrollingPausedState",enter:function(){var e=this;this.promise=r._cancelBlocker(this.view._scrollEndPromise).then(function(){e.view._setState(A)})},stop:function(){this.promise.cancel(),this.view._cancelRealize()}}),A=n.Class.define(function(e){this.view=e},{name:"UnrealizingState",enter:function(){var e=this;this.promise=this.view._lazilyUnrealizeItems().then(function(){return e.view._listView._writeProfilerMark("_renderCompletePromise wait starts,info"),e.view._renderCompletePromise}).then(function(){e.view._setState(O)})},stop:function(){this.view._cancelRealize(),this.promise.cancel(),this.view._setState(k)},realizePage:function(e){this.promise.cancel(),this.view._setState(e)},rebuildTree:function(){this.view._setState(x)},relayout:function(){this.view._setState(S)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),M=n.Class.define(function(e,t){this.view=e,this.realizePromise=t,this.realizeId=1},{name:"RealizingAnimatingState",enter:function(){var e=this;this.animating=!0,this.animatePromise=this.view._startAnimations(),this.animateSignal=new s,this.view._executeAnimations=!1,this.animatePromise.done(function(){e.animating=!1,e.modifiedElements?(e.view._updateTreeImpl(e.count,e.delta,e.modifiedElements),e.modifiedElements=null,e.view._setState(k)):e.animateSignal.complete()},function(t){return e.animating=!1,r.wrapError(t)}),this._waitForRealize()},_waitForRealize:function(){var e=this;this.realizing=!0,this.realizePromise.done(function(){e.realizing=!1});var t=++this.realizeId;r.join([this.realizePromise,this.animateSignal.promise]).done(function(){t===e.realizeId&&(e.view._completeUpdateTree(),e.view._listView._writeProfilerMark("RealizingAnimatingState_to_UnrealizingState"),e.view._setState(A))})},stop:function(e){this.realizePromise.cancel(),this.view._cancelRealize(),e&&(this.animatePromise.cancel(),this.view._setState(k))},realizePage:function(){if(!this.modifiedElements){var e=this;this.realizePromise=this.view._executeScrollToFunctor().then(function(){return r._cancelBlocker(e.view._realizePageImpl())}),this._waitForRealize()}},rebuildTree:function(){this.stop(!0),this.view._setState(x)},relayout:function(){this.stop(!0),this.modifiedElements&&(this.view._updateTreeImpl(this.count,this.delta,this.modifiedElements),this.modifiedElements=null),this.view._setState(S)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){if(this.animating){var i=this.modifiedElements;return this.count=e,this.delta=t,this.modifiedElements=n,i?r.cancel:this.animatePromise}return this.view._updateTreeImpl(e,t,n)},setLoadingState:function(e){this.view._listView._setViewState(e)}}),O=n.Class.derive(k,function(e){this.view=e},{name:"CompletedState",enter:function(){this._stopped=!1,this.view._setupDeferredActions(),this.view._realizationLevel=w._realizationLevel.normal,this.view._listView._raiseViewComplete(),this.view._state===this&&this.view._relayoutInComplete&&!this._stopped&&this.view._setState(D)},stop:function(){this._stopped=!0,k.prototype.stop.call(this)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._setState(D)},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n,!0)}}),D=n.Class.derive(k,function(e){this.view=e},{name:"LayingoutNewContainersState",enter:function(){var e=this;this.promise=r.join([this.view.deferTimeout,this.view._layoutWork]),this.promise.then(function(){e.view._relayoutInComplete=!1,e.relayout(k)})},stop:function(){this.promise.cancel(),this.view._cancelRealize()},realizePage:function(e){this.stop(),this.view._setState(S,e)},layoutNewContainers:function(){this.view._createLayoutSignal()}});return w})})}),i("require-style!less/desktop/controls",[],function(){}),i("require-style!less/phone/controls",[],function(){}),i("WinJS/Controls/ListView",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Animations/_TransitionAnimation","../BindingList","../Promise","../Scheduler","../_Signal","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_ItemsManager","../Utilities/_SafeHtml","../Utilities/_TabContainer","../Utilities/_UI","../Utilities/_VersionManager","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler","./ListView/_BrowseMode","./ListView/_ErrorMessages","./ListView/_GroupFocusCache","./ListView/_GroupsContainer","./ListView/_Helpers","./ListView/_ItemsContainer","./ListView/_Layouts","./ListView/_SelectionManager","./ListView/_VirtualizeContentsView","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C,x,S,I,E,k,T,P,A,M,O){"use strict";function D(){var e=z;z=[],e=e.filter(function(e){return e._isZombie()?(e._dispose(),!1):!0}),z=z.concat(e)}function L(e){z.push(e),B&&B.cancel(),B=c.timeout(F).then(D)}function R(e){return e.offsetParent?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:0}var B,N=n._browserStyleEquivalents.transform,F=1e3,z=[],H=f._uniqueID,W=T._ListViewAnimationHelper,V={get notCompatibleWithSemanticZoom(){return"ListView can only be used with SemanticZoom if randomAccess loading behavior is specified."},get listViewInvalidItem(){return"Item must provide index, key or description of corresponding item."},get listViewViewportAriaLabel(){return o._getWinJSString("ui/listViewViewportAriaLabel").value}},j=n.requireSupportedForProcessing,U={entrance:"entrance",contentTransition:"contentTransition"};t.Namespace.define("WinJS.UI",{ListViewAnimationType:U,ListView:t.Namespace._lazy(function(){var o=t.Class.define(function(){this.clear()},{add:function(e,t){if(e._lastKnownSizeOfData=t,this._range){this._range.start=Math.min(this._range.start,e.start);var n=this._range._lastKnownSizeOfData-this._range.end,i=e._lastKnownSizeOfData-e.end,r=Math.min(n,i);this._range._lastKnownSizeOfData=e._lastKnownSizeOfData,this._range.end=this._range._lastKnownSizeOfData-r}else this._range=e},addAll:function(){this.add({start:0,end:Number.MAX_VALUE},Number.MAX_VALUE)},clear:function(){this._range=null},get:function(){return this._range}}),_=t.Class.define(function(e){this._listView=e},{getPanAxis:function(){return this._listView._getPanAxis()},configureForZoom:function(e,t,n,i){this._listView._configureForZoom(e,t,n,i)},setCurrentItem:function(e,t){this._listView._setCurrentItem(e,t)},getCurrentItem:function(){return this._listView._getCurrentItem()},beginZoom:function(){return this._listView._beginZoom()},positionItem:function(e,t){return this._listView._positionItem(e,t)},endZoom:function(e){this._listView._endZoom(e)},pinching:{get:function(){return this._listView._pinching},set:function(e){this._listView._pinching=e}}}),P=t.Class.define(function(t,n){if(t=t||e.document.createElement("div"),f._supportsTouchActionCrossSlide&&t.classList.add(C._listViewSupportsCrossSlideClass),this._id=t.id||"",this._writeProfilerMark("constructor,StartTM"),n=n||{},t.winControl=this,f.addClass(t,"win-disposable"),this._affectedRange=new o,this._mutationObserver=new f._MutationObserver(this._itemPropertyChange.bind(this)),this._versionManager=null,this._insertedItems={},this._element=t,this._startProperty=null,this._scrollProperty=null,this._scrollLength=null,this._scrolling=!1,this._zooming=!1,this._pinching=!1,this._itemsManager=null,this._canvas=null,this._cachedCount=C._UNINITIALIZED,this._loadingState=this._LoadingState.complete,this._firstTimeDisplayed=!0,this._currentScrollPosition=0,this._lastScrollPosition=0,this._notificationHandlers=[],this._itemsBlockExtent=-1,this._viewportWidth=C._UNINITIALIZED,this._viewportHeight=C._UNINITIALIZED,this._manipulationState=f._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED,this._maxDeferredItemCleanup=Number.MAX_VALUE,this._groupsToRemove={},this._setupInternalTree(),this._isCurrentZoomView=!0,this._dragSource=!1,this._reorderable=!1,this._groupFocusCache=new E._UnsupportedGroupFocusCache,this._viewChange=C._ViewChange.rebuild,this._scrollToFunctor=null,this._setScrollbarPosition=!1,this._view=new O._VirtualizeContentsView(this),this._selection=new M._SelectionManager(this),this._createTemplates(),this._groupHeaderRenderer=g._trivialHtmlRenderer,this._itemRenderer=g._trivialHtmlRenderer,this._groupHeaderRelease=null,this._itemRelease=null,n.itemDataSource)this._dataSource=n.itemDataSource;else{var i=new u.List;this._dataSource=i.dataSource}this._selectionMode=b.SelectionMode.multi,this._tap=b.TapBehavior.invokeOnly,this._groupHeaderTap=b.GroupHeaderTapBehavior.invoke,this._swipeBehavior=b.SwipeBehavior.select,this._mode=new S._SelectionMode(this),this._setSwipeClass(),this._groups=new k._NoGroups(this),this._updateItemsAriaRoles(),this._updateGroupHeadersAriaRoles(),this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._element.tabIndex=-1,this._tabManager.tabIndex=this._tabIndex,"absolute"!==this._element.style.position&&"relative"!==this._element.style.position&&(this._element.style.position="relative"),this._updateItemsManager(),n.layout||this._updateLayout(new A.GridLayout),this._attachEvents(),this._runningInit=!0,p.setOptions(this,n),this._runningInit=!1,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},layout:{get:function(){return this._layoutImpl},set:function(e){this._updateLayout(e),this._runningInit||(this._view.reset(),this._updateItemsManager(),this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0,!0))}},pagesToLoad:{get:function(){return 2*O._VirtualizeContentsView._pagesToPrefetch+1},set:function(){f._deprecated(I.pagesToLoadIsDeprecated)}},pagesToLoadThreshold:{get:function(){return 0},set:function(){f._deprecated(I.pagesToLoadThresholdIsDeprecated)}},groupDataSource:{get:function(){return this._groupDataSource},set:function(e){function t(e){e.detail===b.DataSourceStatus.failure&&(n.itemDataSource=null,n.groupDataSource=null)}this._writeProfilerMark("set_groupDataSource,info");var n=this;this._groupDataSource&&this._groupDataSource.removeEventListener&&this._groupDataSource.removeEventListener("statuschanged",t,!1),this._groupDataSource=e,this._groupFocusCache=e&&this._supportsGroupHeaderKeyboarding?new E._GroupFocusCache(this):new E._UnsupportedGroupFocusCache,this._groupDataSource&&this._groupDataSource.addEventListener&&this._groupDataSource.addEventListener("statuschanged",t,!1),this._createGroupsContainer(),this._runningInit?(this._updateGroupWork(),this._resetLayout()):(this._view.reset(),this._pendingLayoutReset=!0,this._pendingGroupWork=!0,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0,!0))}},_updateGroupWork:function(){this._pendingGroupWork=!1,this._groupDataSource?f.addClass(this._element,C._groupsClass):f.removeClass(this._element,C._groupsClass),this._resetLayout()},automaticallyLoadPages:{get:function(){return!1},set:function(){f._deprecated(I.automaticallyLoadPagesIsDeprecated)}},loadingBehavior:{get:function(){return"randomAccess"},set:function(){f._deprecated(I.loadingBehaviorIsDeprecated)}},selectionMode:{get:function(){return this._selectionMode},set:function(e){if("string"==typeof e&&e.match(/^(none|single|multi)$/)){if(n.isPhone&&e===b.SelectionMode.single)return;return this._selectionMode=e,this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._updateItemsAriaRoles(),this._setSwipeClass(),void this._configureSelectionMode()}throw new i("WinJS.UI.ListView.ModeIsInvalid",I.modeIsInvalid)}},tapBehavior:{get:function(){return this._tap},set:function(e){n.isPhone&&e===b.TapBehavior.directSelect||(this._tap=e,this._updateItemsAriaRoles(),this._configureSelectionMode())}},groupHeaderTapBehavior:{get:function(){return this._groupHeaderTap},set:function(e){this._groupHeaderTap=e,this._updateGroupHeadersAriaRoles()}},swipeBehavior:{get:function(){return this._swipeBehavior},set:function(e){this._swipeBehavior=e,this._setSwipeClass()}},itemDataSource:{get:function(){return this._itemsManager.dataSource},set:function(e){this._writeProfilerMark("set_itemDataSource,info"),this._dataSource=e||(new u.List).dataSource,this._groupFocusCache.clear(),this._runningInit||(this._selection._reset(),this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0,!0))}},itemTemplate:{get:function(){return this._itemRenderer},set:function(e){this._setRenderer(e,!1),this._runningInit||(this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0,!0))}},resetItem:{get:function(){return this._itemRelease},set:function(e){f._deprecated(I.resetItemIsDeprecated),this._itemRelease=e}},groupHeaderTemplate:{get:function(){return this._groupHeaderRenderer},set:function(e){this._setRenderer(e,!0),this._runningInit||(this._cancelAsyncViewWork(!0),this._pendingLayoutReset=!0,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.medium,0,!0))}},resetGroupHeader:{get:function(){return this._groupHeaderRelease},set:function(e){f._deprecated(I.resetGroupHeaderIsDeprecated),this._groupHeaderRelease=e}},loadingState:{get:function(){return this._loadingState}},selection:{get:function(){return this._selection}},indexOfFirstVisible:{get:function(){return this._view.firstIndexDisplayed},set:function(e){if(!(0>e)){this._writeProfilerMark("set_indexOfFirstVisible("+e+"),info"),this._raiseViewLoading(!0);var t=this;this._batchViewUpdates(C._ViewChange.realize,C._ScrollToPriority.high,function(){var n;return t._entityInRange({type:b.ObjectType.item,index:e}).then(function(e){return e.inRange?t._getItemOffset({type:b.ObjectType.item,index:e.index}).then(function(e){return n=e,t._ensureFirstColumnRange(b.ObjectType.item)}).then(function(){return n=t._correctRangeInFirstColumn(n,b.ObjectType.item),n=t._convertFromCanvasCoordinates(n),t._view.waitForValidScrollPosition(n.begin)}).then(function(e){var n=e<t._lastScrollPosition?"left":"right",i=t._viewport[t._scrollLength]-t._getViewportLength();return e=f._clamp(e,0,i),{position:e,direction:n}}):{position:0,direction:"left"}})},!0)}}},indexOfLastVisible:{get:function(){return this._view.lastIndexDisplayed}},currentItem:{get:function(){var e=this._selection._getFocused(),t={index:e.index,type:e.type,key:null,hasFocus:!!this._hasKeyboardFocus,showFocus:!1};if(e.type===b.ObjectType.groupHeader){var n=this._groups.group(e.index);n&&(t.key=n.key,t.showFocus=!(!n.header||!f.hasClass(n.header,C._itemFocusClass)))}else{var i=this._view.items.itemAt(e.index);if(i){var r=this._itemsManager._recordFromElement(i);t.key=r.item&&r.item.key,t.showFocus=!!i.parentNode.querySelector("."+C._itemFocusOutlineClass)}}return t},set:function(e){function t(t,i,r){var s=!!e.showFocus&&n._hasKeyboardFocus;n._unsetFocusOnItem(i),n._selection._setFocused(r,s),n._hasKeyboardFocus?(n._keyboardFocusInbound=s,n._setFocusOnItem(r)):n._tabManager.childFocus=i?t:null,r.type!==b.ObjectType.groupHeader&&(n._updateFocusCache(r.index),n._updater&&(n._updater.newSelectionPivot=r.index,n._updater.oldSelectionPivot=-1),n._selection._pivot=r.index)}this._hasKeyboardFocus=e.hasFocus||this._hasKeyboardFocus;var n=this;if(e.key&&(e.type!==b.ObjectType.groupHeader&&this._dataSource.itemFromKey||e.type===b.ObjectType.groupHeader&&this._groupDataSource&&this._groupDataSource.itemFromKey)){this.oldCurrentItemKeyFetch&&this.oldCurrentItemKeyFetch.cancel();var i=e.type===b.ObjectType.groupHeader?this._groupDataSource:this._dataSource;this.oldCurrentItemKeyFetch=i.itemFromKey(e.key).then(function(i){if(n.oldCurrentItemKeyFetch=null,i){var r=e.type===b.ObjectType.groupHeader?n._groups.group(i.index).header:n._view.items.itemAt(i.index);t(r,!!r,{type:e.type||b.ObjectType.item,index:i.index})}})}else if(void 0!==e.index){var r;if(e.type===b.ObjectType.groupHeader){var s=n._groups.group(e.index);r=s&&s.header}else r=n._view.items.itemAt(e.index);t(r,!!r,{type:e.type||b.ObjectType.item,index:e.index})}}},zoomableView:{get:function(){return this._zoomableView||(this._zoomableView=new _(this)),this._zoomableView}},itemsDraggable:{get:function(){return this._dragSource},set:function(e){n.isPhone||this._dragSource!==e&&(this._dragSource=e,this._setSwipeClass())}},itemsReorderable:{get:function(){return this._reorderable},set:function(e){n.isPhone||this._reorderable!==e&&(this._reorderable=e,this._setSwipeClass())}},maxDeferredItemCleanup:{get:function(){return this._maxDeferredItemCleanup},set:function(e){this._maxDeferredItemCleanup=Math.max(0,+e||0)}},dispose:function(){this._dispose()},elementFromIndex:function(e){return this._view.items.itemAt(e)},indexOfElement:function(e){return this._view.items.index(e)},ensureVisible:function(e){var t=b.ObjectType.item,n=e;if(+e!==e&&(t=e.type,n=e.index),this._writeProfilerMark("ensureVisible("+t+": "+n+"),info"),!(0>n)){this._raiseViewLoading(!0);var i=this;this._batchViewUpdates(C._ViewChange.realize,C._ScrollToPriority.high,function(){var e;return i._entityInRange({type:t,index:n}).then(function(n){return n.inRange?i._getItemOffset({type:t,index:n.index}).then(function(n){return e=n,i._ensureFirstColumnRange(t)}).then(function(){e=i._correctRangeInFirstColumn(e,t);var r=i._getViewportLength(),s=i._viewportScrollPosition,o=s+r,a=i._viewportScrollPosition,l=e.end-e.begin;e=i._convertFromCanvasCoordinates(e);var u=!1;if(t===b.ObjectType.groupHeader&&s<=e.begin){var c=i._groups.group(n.index).header;if(c){var h,d=A._getMargins(c);if(i._horizontalLayout){var p=i._rtl(),m=p?R(c)-d.right:c.offsetLeft-d.left;h=m+c.offsetWidth+(p?d.left:d.right)}else h=c.offsetTop+c.offsetHeight+d.top;u=o>=h}}u||(l>=o-s?a=e.begin:e.begin<s?a=e.begin:e.end>o&&(a=e.end-r));var _=a<i._lastScrollPosition?"left":"right",g=i._viewport[i._scrollLength]-r;return a=f._clamp(a,0,g),{position:a,direction:_}}):{position:0,direction:"left"}})},!0)}},loadMorePages:function(){f._deprecated(I.loadMorePagesIsDeprecated)},recalculateItemPosition:function(){this._writeProfilerMark("recalculateItemPosition,info"),this._forceLayoutImpl(C._ViewChange.relayout)},forceLayout:function(){this._writeProfilerMark("forceLayout,info"),this._forceLayoutImpl(C._ViewChange.remeasure)},_entityInRange:function(e){if(e.type===b.ObjectType.item)return this._itemsCount().then(function(t){var n=f._clamp(e.index,0,t-1);return{inRange:n>=0&&t>n,index:n}});var t=f._clamp(e.index,0,this._groups.length()-1);return c.wrap({inRange:t>=0&&t<this._groups.length(),index:t})},_forceLayoutImpl:function(e){var t=this;this._versionManager.unlocked.then(function(){t._writeProfilerMark("_forceLayoutImpl viewChange("+e+"),info"),t._cancelAsyncViewWork(),t._pendingLayoutReset=!0,t._resizeViewport(),t._batchViewUpdates(e,C._ScrollToPriority.low,function(){return{position:t._lastScrollPosition,direction:"right"}},!0,!0)})},_configureSelectionMode:function(){n.isPhone&&(this.tapBehavior===b.TapBehavior.toggleSelect&&this.selectionMode===b.SelectionMode.multi?f.addClass(this._canvas,C._selectionModeClass):f.removeClass(this._canvas,C._selectionModeClass))},_lastScrollPosition:{get:function(){return this._lastScrollPositionValue},set:function(e){if(0===e)this._lastDirection="right",this._direction="right",this._lastScrollPositionValue=0;else{var t=e<this._lastScrollPositionValue?"left":"right";this._direction=this._scrollDirection(e),this._lastDirection=t,this._lastScrollPositionValue=e}}},_supportsGroupHeaderKeyboarding:{get:function(){return this._groupDataSource}},_viewportScrollPosition:{get:function(){return this._currentScrollPosition=f.getScrollPosition(this._viewport)[this._scrollProperty],this._currentScrollPosition},set:function(e){var t={};t[this._scrollProperty]=e,f.setScrollPosition(this._viewport,t),this._currentScrollPosition=e}},_canvasStart:{get:function(){return this._canvasStartValue||0},set:function(e){var t=this._horizontal()?this._rtl()?-e:e:0,n=this._horizontal()?0:e;this._canvas.style[N.scriptName]=0!==e?"translate( "+t+"px, "+n+"px)":"",this._canvasStartValue=e}},scrollPosition:{get:function(){return this._viewportScrollPosition},set:function(e){var t=this;this._batchViewUpdates(C._ViewChange.realize,C._ScrollToPriority.high,function(){return t._view.waitForValidScrollPosition(e).then(function(){var n=t._viewport[t._scrollLength]-t._getViewportLength();
e=f._clamp(e,0,n);var i=e<t._lastScrollPosition?"left":"right";return{position:e,direction:i}})},!0)}},_setRenderer:function(e,t){var r;if(e){if("function"==typeof e)r=e;else if("object"==typeof e){if(n.validation&&!e.renderItem)throw new i("WinJS.UI.ListView.invalidTemplate",I.invalidTemplate);r=e.renderItem}}else{if(n.validation)throw new i("WinJS.UI.ListView.invalidTemplate",I.invalidTemplate);r=g.trivialHtmlRenderer}r&&(t?this._groupHeaderRenderer=r:this._itemRenderer=r)},_renderWithoutReuse:function(e,t){t&&m._disposeElement(t);var n=this._itemRenderer(e);if(n.then)return n.then(function(e){return e.tabIndex=0,e});var i=n.element||n;return i.tabIndex=0,n},_isInsertedItem:function(e){return!!this._insertedItems[e.handle]},_clearInsertedItems:function(){for(var e=Object.keys(this._insertedItems),t=0,n=e.length;n>t;t++)this._insertedItems[e[t]].release();this._insertedItems={},this._modifiedElements=[],this._countDifference=0},_cancelAsyncViewWork:function(e){this._view.stopWork(e)},_updateView:function(){function e(){n._itemsBlockExtent=-1,n._firstItemRange=null,n._firstHeaderRange=null,n._itemMargins=null,n._headerMargins=null,n._canvasMargins=null,n._cachedRTL=null,n._rtl()}function t(){n._scrollToPriority=C._ScrollToPriority.uninitialized;var e=n._setScrollbarPosition;n._setScrollbarPosition=!1;var t="number"==typeof n._scrollToFunctor?{position:n._scrollToFunctor}:n._scrollToFunctor();return c.as(t).then(function(t){return t=t||{},e&&+t.position===t.position&&(n._lastScrollPosition=t.position,n._viewportScrollPosition=t.position),t},function(t){return n._setScrollbarPosition|=e,c.wrapError(t)})}if(!this._isZombie()){var n=this,i=this._viewChange;this._viewChange=C._ViewChange.realize,i===C._ViewChange.rebuild?(this._pendingGroupWork&&this._updateGroupWork(),this._pendingLayoutReset&&this._resetLayout(),e(),this._firstTimeDisplayed||this._view.reset(),this._view.reload(t,!0),this._setFocusOnItem(this._selection._getFocused())):i===C._ViewChange.remeasure?(this._view.resetItems(!0),this._resetLayout(),e(),this._view.refresh(t),this._setFocusOnItem(this._selection._getFocused())):i===C._ViewChange.relayout?(this._pendingLayoutReset&&(this._resetLayout(),e()),this._view.refresh(t)):this._view.onScroll(t)}},_batchViewUpdates:function(e,t,n,i,r){if(this._viewChange=Math.min(this._viewChange,e),(null===this._scrollToFunctor||t>=this._scrollToPriority)&&(this._scrollToPriority=t,this._scrollToFunctor=n),this._setScrollbarPosition|=!!i,!this._batchingViewUpdates){this._raiseViewLoading();var s=this;this._batchingViewUpdatesSignal=new d,this._batchingViewUpdates=c.any([this._batchingViewUpdatesSignal.promise,h.schedulePromiseHigh(null,"WinJS.UI.ListView._updateView")]).then(function(){return s._isZombie()?void 0:s._viewChange!==C._ViewChange.rebuild||s._firstTimeDisplayed||0===Object.keys(s._view.items._itemData).length||r?void 0:s._fadeOutViewport()}).then(function(){s._batchingViewUpdates=null,s._batchingViewUpdatesSignal=null,s._updateView(),s._firstTimeDisplayed=!1},function(){s._batchingViewUpdates=null,s._batchingViewUpdatesSignal=null})}return this._batchingViewUpdatesSignal},_resetCanvas:function(){if(!this._disposed){var t=e.document.createElement("div");t.className=this._canvas.className,this._viewport.replaceChild(t,this._canvas),this._canvas=t,this._groupsToRemove={},this._canvas.appendChild(this._canvasProxy)}},_setupInternalTree:function(){f.addClass(this._element,C._listViewClass),f[this._rtl()?"addClass":"removeClass"](this._element,C._rtlListViewClass),this._element.innerHTML='<div tabIndex="-1" role="group" class="'+C._viewportClass+" "+C._horizontalClass+'"><div class="'+C._scrollableClass+'"><div class="'+C._proxyClass+'"></div></div><div></div></div><div aria-hidden="true" style="position:absolute;left:50%;top:50%;width:0px;height:0px;" tabindex="-1"></div>',this._viewport=this._element.firstElementChild,this._canvas=this._viewport.firstElementChild,this._canvasProxy=this._canvas.firstElementChild,this._deleteWrapper=this._canvas.nextElementSibling,this._keyboardEventsHelper=this._viewport.nextElementSibling,this._tabIndex=f.getTabIndex(this._element),this._tabIndex<0&&(this._tabIndex=0),this._tabManager=new y.TabContainer(this._viewport),this._tabManager.tabIndex=this._tabIndex,this._progressBar=e.document.createElement("progress"),f.addClass(this._progressBar,C._progressClass),this._progressBar.style.position="absolute",this._progressBar.max=100},_unsetFocusOnItem:function(t){this._tabManager.childFocus&&this._clearFocusRectangle(this._tabManager.childFocus),this._isZombie()||(t||(this._tabManager.childFocus&&(this._tabManager.childFocus=null),this._keyboardEventsHelper._shouldHaveFocus=!1,e.document.activeElement!==this._viewport&&this._hasKeyboardFocus&&(this._keyboardEventsHelper._shouldHaveFocus=!0,f._setActive(this._keyboardEventsHelper))),this._itemFocused=!1)},_setFocusOnItem:function(e){if(this._writeProfilerMark("_setFocusOnItem,info"),this._focusRequest&&this._focusRequest.cancel(),!this._isZombie()){var t=this,n=function(n){t._isZombie()||(t._tabManager.childFocus!==n&&(t._tabManager.childFocus=n),t._focusRequest=null,t._hasKeyboardFocus&&!t._itemFocused&&(t._selection._keyboardFocused()&&t._drawFocusRectangle(n),t._view.updateAriaForAnnouncement(n,e.type===b.ObjectType.groupHeader?t._groups.length():t._cachedCount),t._itemFocused=!0,f._setActive(n)))};this._focusRequest=e.type!==b.ObjectType.groupHeader?this._view.items.requestItem(e.index):this._groups.requestHeader(e.index),this._focusRequest.then(n)}},_attachEvents:function(){function e(e,t,n){return{name:t?e:e.toLowerCase(),handler:function(t){i["_on"+e](t)},capture:n}}function t(e,t,n){return{capture:n,name:t?e:e.toLowerCase(),handler:function(t){var n=i._mode,r="on"+e;!i._disposed&&n[r]&&n[r](t)}}}function n(e,t){return{handler:function(t){i["_on"+e](t)},filter:t}}var i=this,r=[n("PropertyChange",["dir","style","tabindex"])];this._cachedStyleDir=this._element.style.direction,r.forEach(function(e){new f._MutationObserver(e.handler).observe(i._element,{attributes:!0,attributeFilter:e.filter})});var s=[t("PointerDown"),t("click",!1),t("PointerUp"),t("LostPointerCapture"),t("MSHoldVisual",!0),t("PointerCancel",!0),t("DragStart"),t("DragOver"),t("DragEnter"),t("DragLeave"),t("Drop"),t("ContextMenu"),t("MSManipulationStateChanged",!0,!0)];s.forEach(function(e){f._addEventListener(i._viewport,e.name,e.handler,!!e.capture)});var o=[e("FocusIn",!1,!1),e("FocusOut",!1,!1),t("KeyDown"),t("KeyUp"),e("MSElementResize",!1,!1)];o.forEach(function(e){f._addEventListener(i._element,e.name,e.handler,!!e.capture)}),this._onMSElementResizeBound=this._onMSElementResize.bind(this),f._resizeNotifier.subscribe(this._element,this._onMSElementResizeBound);var a=[e("MSManipulationStateChanged",!0),e("Scroll")];a.forEach(function(e){i._viewport.addEventListener(e.name,e.handler,!1)}),this._viewport.addEventListener("onTabEnter",this._onTabEnter.bind(this)),this._viewport.addEventListener("onTabExit",this._onTabExit.bind(this)),this._viewport.addEventListener("onTabEntered",function(e){i._mode.onTabEntered(e)}),this._viewport.addEventListener("onTabExiting",function(e){i._mode.onTabExiting(e)})},_updateItemsManager:function(){function e(e){e.detail===b.DataSourceStatus.failure&&(t.itemDataSource=null,t.groupDataSource=null)}var t=this,n={beginNotifications:function(){},changed:function(e,n){if(!t._ifZombieDispose()){t._createUpdater();var i=t._updater.elements[H(n)];if(i){var r=t.selection._isIncluded(i.index);if(r&&(t._updater.updateDrag=!0),n!==e){if((t._tabManager.childFocus===n||t._updater.newFocusedItem===n)&&(t._updater.newFocusedItem=e,t._tabManager.childFocus=null),i.itemBox){f.addClass(e,C._itemClass),t._setupAriaSelectionObserver(e);var s=n.nextElementSibling;i.itemBox.removeChild(n),i.itemBox.insertBefore(e,s)}t._setAriaSelected(e,r),t._view.items.setItemAt(i.newIndex,{element:e,itemBox:i.itemBox,container:i.container,itemsManagerRecord:i.itemsManagerRecord}),delete t._updater.elements[H(n)],m._disposeElement(n),t._updater.elements[H(e)]={item:e,container:i.container,itemBox:i.itemBox,index:i.index,newIndex:i.newIndex,itemsManagerRecord:i.itemsManagerRecord}}else i.itemBox&&i.container&&(x._ItemEventsHandler.renderSelection(i.itemBox,e,r,!0),f[r?"addClass":"removeClass"](i.container,C._selectedClass));t._updater.changed=!0}for(var o=0,a=t._notificationHandlers.length;a>o;o++)t._notificationHandlers[o].changed(e,n);t._writeProfilerMark("changed,info")}},removed:function(e,n,i){function r(e){t._updater.updateDrag=!0,t._currentMode()._dragging&&t._currentMode()._draggingUnselectedItem&&t._currentMode()._dragInfo._isIncluded(e)&&(t._updater.newDragInfo=new M._Selection(t,[]));var n=t._updater.selectionFirst[e],i=t._updater.selectionLast[e],r=n||i;r&&(delete t._updater.selectionFirst[r.oldFirstIndex],delete t._updater.selectionLast[r.oldLastIndex],t._updater.selectionChanged=!0)}if(!t._ifZombieDispose()){t._createUpdater();var s=t._insertedItems[i];s&&delete t._insertedItems[i];var o;if(e){var a=t._updater.elements[H(e)],l=t._itemsManager.itemObject(e);if(l&&t._groupFocusCache.deleteItem(l.key),a){o=a.index,a.itemBox&&t._updater.removed.push({index:o,itemBox:a.itemBox}),t._updater.deletesCount++;var u=t._view.items.itemDataAt(o);u.removed=!0,delete t._updater.elements[H(e)]}else o=l&&l.index;t._updater.oldFocus.type!==b.ObjectType.groupHeader&&t._updater.oldFocus.index===o&&(t._updater.newFocus.index=o,t._updater.focusedItemRemoved=!0),r(o)}else o=t._updater.selectionHandles[i],o===+o&&r(o);t._writeProfilerMark("removed("+o+"),info"),t._updater.changed=!0}},updateAffectedRange:function(e){t._itemsCount().then(function(n){var i=t._view.containers?t._view.containers.length:0;e.start=Math.min(e.start,i),t._affectedRange.add(e,n)}),t._createUpdater(),t._updater.changed=!0},indexChanged:function(e,n,i){if(!t._ifZombieDispose()){if(t._createUpdater(),e){var r=t._itemsManager.itemObject(e);r&&t._groupFocusCache.updateItemIndex(r.key,n);var s=t._updater.elements[H(e)];s&&(s.newIndex=n,t._updater.changed=!0),t._updater.itemsMoved=!0}t._currentMode()._dragging&&t._currentMode()._draggingUnselectedItem&&t._currentMode()._dragInfo._isIncluded(i)&&(t._updater.newDragInfo=new M._Selection(t,[{firstIndex:n,lastIndex:n}]),t._updater.updateDrag=!0),t._updater.oldFocus.type!==b.ObjectType.groupHeader&&t._updater.oldFocus.index===i&&(t._updater.newFocus.index=n,t._updater.changed=!0),t._updater.oldSelectionPivot===i&&(t._updater.newSelectionPivot=n,t._updater.changed=!0);var o=t._updater.selectionFirst[i];o&&(o.newFirstIndex=n,t._updater.changed=!0,t._updater.updateDrag=!0),o=t._updater.selectionLast[i],o&&(o.newLastIndex=n,t._updater.changed=!0,t._updater.updateDrag=!0)}},endNotifications:function(){t._update()},inserted:function(e){t._ifZombieDispose()||(t._writeProfilerMark("inserted,info"),t._createUpdater(),t._updater.changed=!0,e.retain(),t._updater.insertsCount++,t._insertedItems[e.handle]=e)},moved:function(e,n,i,r){if(!t._ifZombieDispose()){if(t._createUpdater(),t._updater.movesCount++,e){t._updater.itemsMoved=!0;var s=t._updater.elements[H(e)];s&&(s.moved=!0)}var o=t._updater.selectionHandles[r.handle];if(o===+o){t._updater.updateDrag=!0;var a=t._updater.selectionFirst[o],l=t._updater.selectionLast[o],u=a||l;u&&u.oldFirstIndex!==u.oldLastIndex&&(delete t._updater.selectionFirst[u.oldFirstIndex],delete t._updater.selectionLast[u.oldLastIndex],t._updater.selectionChanged=!0,t._updater.changed=!0)}t._writeProfilerMark("moved("+o+"),info")}},countChanged:function(e,n){t._ifZombieDispose()||(t._writeProfilerMark("countChanged("+e+"),info"),t._cachedCount=e,t._createUpdater(),t._view.lastIndexDisplayed+1===n&&(t._updater.changed=!0),t._updater.countDifference+=e-n)},reload:function(){t._ifZombieDispose()||(t._writeProfilerMark("reload,info"),t._processReload())}};this._versionManager&&this._versionManager._dispose(),this._versionManager=new w._VersionManager,this._updater=null;var i=this._selection.getRanges();this._selection._selected.clear(),this._itemsManager&&(this._itemsManager.dataSource&&this._itemsManager.dataSource.removeEventListener&&this._itemsManager.dataSource.removeEventListener("statuschanged",e,!1),this._clearInsertedItems(),this._itemsManager.release()),this._itemsCountPromise&&(this._itemsCountPromise.cancel(),this._itemsCountPromise=null),this._cachedCount=C._UNINITIALIZED,this._itemsManager=g._createItemsManager(this._dataSource,this._renderWithoutReuse.bind(this),n,{ownerElement:this._element,versionManager:this._versionManager,indexInView:function(e){return e>=t.indexOfFirstVisible&&e<=t.indexOfLastVisible},viewCallsReady:!0,profilerId:this._id}),this._dataSource.addEventListener&&this._dataSource.addEventListener("statuschanged",e,!1),this._selection._selected.set(i)},_processReload:function(){this._affectedRange.addAll(),this._cancelAsyncViewWork(!0),this._currentMode()._dragging&&this._currentMode()._clearDragProperties(),this._groupFocusCache.clear(),this._selection._reset(),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.low,this.scrollPosition)},_createUpdater:function(){if(!this._updater){this.itemDataSource._isVirtualizedDataSource&&this._affectedRange.addAll(),this._versionManager.beginUpdating(),this._cancelAsyncViewWork();var e={changed:!1,elements:{},selectionFirst:{},selectionLast:{},selectionHandles:{},oldSelectionPivot:{type:b.ObjectType.item,index:C._INVALID_INDEX},newSelectionPivot:{type:b.ObjectType.item,index:C._INVALID_INDEX},removed:[],selectionChanged:!1,oldFocus:{type:b.ObjectType.item,index:C._INVALID_INDEX},newFocus:{type:b.ObjectType.item,index:C._INVALID_INDEX},hadKeyboardFocus:this._hasKeyboardFocus,itemsMoved:!1,lastVisible:this.indexOfLastVisible,updateDrag:!1,movesCount:0,insertsCount:0,deletesCount:0,countDifference:0};this._view.items.each(function(t,n,i){e.elements[H(n)]={item:n,container:i.container,itemBox:i.itemBox,index:t,newIndex:t,itemsManagerRecord:i.itemsManagerRecord,detached:i.detached}});for(var t=this._selection._selected._ranges,n=0,i=t.length;i>n;n++){var r=t[n],s={newFirstIndex:t[n].firstIndex,oldFirstIndex:t[n].firstIndex,newLastIndex:t[n].lastIndex,oldLastIndex:t[n].lastIndex};e.selectionFirst[s.oldFirstIndex]=s,e.selectionLast[s.oldLastIndex]=s,e.selectionHandles[r.firstPromise.handle]=s.oldFirstIndex,e.selectionHandles[r.lastPromise.handle]=s.oldLastIndex}e.oldSelectionPivot=this._selection._pivot,e.newSelectionPivot=e.oldSelectionPivot,e.oldFocus=this._selection._getFocused(),e.newFocus=this._selection._getFocused(),this._updater=e}},_synchronize:function(){var e=this._updater;if(this._updater=null,this._groupsChanged=!1,this._countDifference=this._countDifference||0,e&&e.changed){e.itemsMoved&&this._layout.itemsMoved&&this._layout.itemsMoved(),e.removed.length&&this._layout.itemsRemoved&&this._layout.itemsRemoved(e.removed.map(function(e){return e.itemBox})),(e.itemsMoved||e.removed.length||Object.keys(this._insertedItems).length)&&this._layout.setupAnimations&&this._layout.setupAnimations(),this._currentMode().onDataChanged&&this._currentMode().onDataChanged();var t=[];for(var n in e.selectionFirst)if(e.selectionFirst.hasOwnProperty(n)){var i=e.selectionFirst[n];e.selectionChanged=e.selectionChanged||i.newLastIndex-i.newFirstIndex!==i.oldLastIndex-i.oldFirstIndex,i.newFirstIndex<=i.newLastIndex&&t.push({firstIndex:i.newFirstIndex,lastIndex:i.newLastIndex})}if(e.selectionChanged){var r=new M._Selection(this,t);this._selection._fireSelectionChanging(r),this._selection._selected.set(t),this._selection._fireSelectionChanged(),r.clear()}else this._selection._selected.set(t);this._selection._updateCount(this._cachedCount),e.newSelectionPivot=Math.min(this._cachedCount-1,e.newSelectionPivot),this._selection._pivot=e.newSelectionPivot>=0?e.newSelectionPivot:C._INVALID_INDEX,e.newFocus.type!==b.ObjectType.groupHeader&&(e.newFocus.index=Math.max(0,Math.min(this._cachedCount-1,e.newFocus.index))),this._selection._setFocused(e.newFocus,this._selection._keyboardFocused());var s=this._modifiedElements||[],o={};for(this._modifiedElements=[],this._countDifference+=e.countDifference,n=0;n<s.length;n++){var a=s[n];-1===a.newIndex?this._modifiedElements.push(a):o[a.newIndex]=a}for(n=0;n<e.removed.length;n++){var l=e.removed[n],a=o[l.index];a?delete o[l.index]:a={oldIndex:l.index},a.newIndex=-1,a._removalHandled||(a._itemBox=l.itemBox),this._modifiedElements.push(a)}var u=Object.keys(this._insertedItems);for(n=0;n<u.length;n++)this._modifiedElements.push({oldIndex:-1,newIndex:this._insertedItems[u[n]].index});this._writeProfilerMark("_synchronize:update_modifiedElements,StartTM");var c={};for(n in e.elements)if(e.elements.hasOwnProperty(n)){var h=e.elements[n];c[h.newIndex]={element:h.item,container:h.container,itemBox:h.itemBox,itemsManagerRecord:h.itemsManagerRecord,detached:h.detached};var a=o[h.index];a?(delete o[h.index],a.newIndex=h.newIndex):a={oldIndex:h.index,newIndex:h.newIndex},a.moved=h.moved,this._modifiedElements.push(a)}this._writeProfilerMark("_synchronize:update_modifiedElements,StopTM");var d=Object.keys(o);for(n=0;n<d.length;n++){var p=d[n],a=o[p];-1!==a.oldIndex&&this._modifiedElements.push(a)}this._view.items._itemData=c,e.updateDrag&&this._currentMode()._dragging&&(this._currentMode()._draggingUnselectedItem?e.newDragInfo&&(this._currentMode()._dragInfo=e.newDragInfo):this._currentMode()._dragInfo=this._selection,this._currentMode().fireDragUpdateEvent()),e.focusedItemRemoved||this._focusRequest&&e.oldFocus.index!==e.newFocus.index||e.oldFocus.type!==e.newFocus.type?(this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused())):e.newFocusedItem&&(this._hasKeyboardFocus=e.hadKeyboardFocus,this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused()));var m=this;return this._groups.synchronizeGroups().then(function(){return e.newFocus.type===b.ObjectType.groupHeader&&(e.newFocus.index=Math.min(m._groups.length()-1,e.newFocus.index),e.newFocus.index<0&&(e.newFocus={type:b.ObjectType.item,index:0}),m._selection._setFocused(e.newFocus,m._selection._keyboardFocused())),m._versionManager.endUpdating(),e.deletesCount>0&&m._updateDeleteWrapperSize(),m._view.updateTree(m._cachedCount,m._countDifference,m._modifiedElements)}).then(function(){return m._lastScrollPosition})}this._countDifference+=e?e.countDifference:0;var m=this;return this._groups.synchronizeGroups().then(function(){return e&&m._versionManager.endUpdating(),m._view.updateTree(m._cachedCount,m._countDifference,m._modifiedElements)}).then(function(){return m.scrollPosition})},_updateDeleteWrapperSize:function(e){var t=this._horizontal()?"width":"height";this._deleteWrapper.style["min-"+t]=(e?0:this.scrollPosition+this._getViewportSize()[t])+"px"},_verifyRealizationNeededForChange:function(){var e=!1,t=(this._view.lastIndexDisplayed||0)-(this._view.firstIndexDisplayed||0),n=this._updater&&0===this._updater.movesCount&&0===this._updater.insertsCount&&this._updater.deletesCount>0&&this._updater.deletesCount===Math.abs(this._updater.countDifference);if(n&&this._updater.elements)for(var i=Object.keys(this._updater.elements),r=0,s=i.length;s>r;r++){var o=this._updater.elements[i[r]],a=o.index-o.newIndex;if(0>a||a>this._updater.deletesCount){n=!1;break}}this._view.deletesWithoutRealize=this._view.deletesWithoutRealize||0,n&&this._view.lastIndexDisplayed<this._view.end-t&&this._updater.deletesCount+this._view.deletesWithoutRealize<t?(e=!0,this._view.deletesWithoutRealize+=Math.abs(this._updater.countDifference),this._writeProfilerMark("skipping realization on delete,info")):this._view.deletesWithoutRealize=0,this._view._setSkipRealizationForChange(e)},_update:function(){if(this._writeProfilerMark("update,StartTM"),!this._ifZombieDispose()){this._updateJob=null;var e=this;this._versionManager.noOutstandingNotifications&&(this._updater||this._groupsChanged?(this._cancelAsyncViewWork(),this._verifyRealizationNeededForChange(),this._synchronize().then(function(t){e._writeProfilerMark("update,StopTM"),e._batchViewUpdates(C._ViewChange.relayout,C._ScrollToPriority.low,t).complete()})):this._batchViewUpdates(C._ViewChange.relayout,C._ScrollToPriority.low,this._lastScrollPosition).complete())}},_scheduleUpdate:function(){if(!this._updateJob){var e=this;this._updateJob=h.schedulePromiseHigh(null,"WinJS.UI.ListView._update").then(function(){e._updateJob&&e._update()}),this._raiseViewLoading()}},_createGroupsContainer:function(){this._groups&&this._groups.cleanUp(),this._groups=this._groupDataSource?new k._UnvirtualizedGroupsContainer(this,this._groupDataSource):new k._NoGroups(this)},_createLayoutSite:function(){var t=this;return Object.create({invalidateLayout:function(){t._pendingLayoutReset=!0;var e="horizontal"===t._layout.orientation!==t._horizontalLayout;t._affectedRange.addAll(),t._batchViewUpdates(C._ViewChange.rebuild,C._ScrollToPriority.low,e?0:t.scrollPosition,!1,!0)},itemFromIndex:function(e){return t._itemsManager._itemPromiseAtIndex(e)},groupFromIndex:function(e){return t._groupsEnabled()?e<t._groups.length()?t._groups.group(e).userData:null:{key:"-1"}},groupIndexFromItemIndex:function(e){return e=Math.max(0,e),t._groups.groupFromItem(e)},renderItem:function(n){return c._cancelBlocker(t._itemsManager._itemFromItemPromise(n)).then(function(n){if(n){var i=t._itemsManager._recordFromElement(n);i.pendingReady&&i.pendingReady(),n=n.cloneNode(!0),f.addClass(n,C._itemClass);var r=e.document.createElement("div");f.addClass(r,C._itemBoxClass),r.appendChild(n);var s=e.document.createElement("div");return f.addClass(s,C._containerClass),s.appendChild(r),s}return c.cancel})},renderHeader:function(n){var i=g._normalizeRendererReturn(t.groupHeaderTemplate(c.wrap(n)));return i.then(function(t){f.addClass(t.element,C._headerClass);var n=e.document.createElement("div");return f.addClass(n,C._headerContainerClass),n.appendChild(t.element),n})},readyToMeasure:function(){t._getViewportLength(),t._getCanvasMargins()},_isZombie:function(){return t._isZombie()},_writeProfilerMark:function(e){t._writeProfilerMark(e)}},{_itemsManager:{enumerable:!0,get:function(){return t._itemsManager}},rtl:{enumerable:!0,get:function(){return t._rtl()}},surface:{enumerable:!0,get:function(){return t._canvas}},viewport:{enumerable:!0,get:function(){return t._viewport}},scrollbarPos:{enumerable:!0,get:function(){return t.scrollPosition}},viewportSize:{enumerable:!0,get:function(){return t._getViewportSize()}},loadingBehavior:{enumerable:!0,get:function(){return t.loadingBehavior}},animationsDisabled:{enumerable:!0,get:function(){return t._animationsDisabled()}},tree:{enumerable:!0,get:function(){return t._view.tree}},realizedRange:{enumerable:!0,get:function(){return{firstPixel:Math.max(0,t.scrollPosition-2*t._getViewportLength()),lastPixel:t.scrollPosition+3*t._getViewportLength()-1}}},visibleRange:{enumerable:!0,get:function(){return{firstPixel:t.scrollPosition,lastPixel:t.scrollPosition+t._getViewportLength()-1}}},itemCount:{enumerable:!0,get:function(){return t._itemsCount()}},groupCount:{enumerable:!0,get:function(){return t._groups.length()}}})},_initializeLayout:function(){this._affectedRange.addAll();var e=this._createLayoutSite();return this._layout.initialize(e,this._groupsEnabled()),"horizontal"===this._layout.orientation},_resetLayoutOrientation:function(e){this._horizontalLayout?(this._startProperty="left",this._scrollProperty="scrollLeft",this._scrollLength="scrollWidth",this._deleteWrapper.style.minHeight="",f.addClass(this._viewport,C._horizontalClass),f.removeClass(this._viewport,C._verticalClass),e&&(this._viewport.scrollTop=0)):(this._startProperty="top",this._scrollProperty="scrollTop",this._scrollLength="scrollHeight",this._deleteWrapper.style.minWidth="",f.addClass(this._viewport,C._verticalClass),f.removeClass(this._viewport,C._horizontalClass),e&&f.setScrollPosition(this._viewport,{scrollLeft:0}))},_resetLayout:function(){this._pendingLayoutReset=!1,this._affectedRange.addAll(),this._layout&&(this._layout.uninitialize(),this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation())},_updateLayout:function(e){var t=!1;this._layout&&(this._cancelAsyncViewWork(!0),this._layout.uninitialize(),t=!0);var n;if(e&&"function"==typeof e.type){var i=j(e.type);n=new i(e)}else n=e&&e.initialize?e:new A.GridLayout(e);t&&this._resetCanvas(),this._layoutImpl=n,this._layout=new A._LayoutWrapper(n),t&&this._unsetFocusOnItem(),this._setFocusOnItem({type:b.ObjectType.item,index:0}),this._selection._setFocused({type:b.ObjectType.item,index:0}),this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation(t),t&&(this._canvas.style.width=this._canvas.style.height="")},_currentMode:function(){return this._mode},_setSwipeClass:function(){!n.isPhone&&(this._currentMode()instanceof S._SelectionMode&&this._selectionAllowed()&&this._swipeBehavior===b.SwipeBehavior.select||this._dragSource||this._reorderable)?(this._swipeable=!0,f.addClass(this._element,C._swipeableClass)):(this._swipeable=!1,f.removeClass(this._element,C._swipeableClass));var e=this.itemsDraggable||this.itemsReorderable,t=this._selectionAllowed()&&this._swipeBehavior===b.SwipeBehavior.select,i=this._swipeable;this._view.items.each(function(r,s,o){if(o.itemBox){var a=f.hasClass(s,C._nonDraggableClass),l=f.hasClass(s,C._nonSelectableClass),u=f.hasClass(o.itemBox,C._nonSwipeableClass);if(o.itemBox.draggable=e&&!a,!i&&u)f.removeClass(o.itemBox,C._nonSwipeableClass);else if(i){var c=e&&!t&&a||t&&!e&&l||a&&l;c&&!u?f.addClass(o.itemBox,C._nonSwipeableClass):!c&&u&&f.removeClass(o.itemBox,C._nonSwipeableClass)}var h=n.isPhone&&l;f[h?"addClass":"removeClass"](o.itemBox,C._nonSelectableClass)}})},_resizeViewport:function(){this._viewportWidth=C._UNINITIALIZED,this._viewportHeight=C._UNINITIALIZED},_onMSElementResize:function(){this._writeProfilerMark("_onMSElementResize,info"),h.schedule(function(){if(!this._isZombie()&&this._viewportWidth!==C._UNINITIALIZED&&this._viewportHeight!==C._UNINITIALIZED){var e=this._element.offsetWidth,t=this._element.offsetHeight;if(this._previousWidth!==e||this._previousHeight!==t){this._writeProfilerMark("resize ("+this._previousWidth+"x"+this._previousHeight+") => ("+e+"x"+t+"),info"),this._previousWidth=e,this._previousHeight=t,this._resizeViewport();var n=this;this._affectedRange.addAll(),this._batchViewUpdates(C._ViewChange.relayout,C._ScrollToPriority.low,function(){return{position:n.scrollPosition,direction:"right"}})}}},h.Priority.max,this,"WinJS.UI.ListView._onMSElementResize")},_onFocusIn:function(e){function t(e){n._changeFocus(n._selection._getFocused(),!0,!1,!1,e)}this._hasKeyboardFocus=!0;var n=this;if(e.target===this._keyboardEventsHelper)!this._keyboardEventsHelper._shouldHaveFocus&&this._keyboardFocusInbound?t(!0):this._keyboardEventsHelper._shouldHaveFocus=!1;else if(e.target===this._element)t();else{if(this._mode.inboundFocusHandled)return void(this._mode.inboundFocusHandled=!1);var i=this._view.items,r={},s=this._groups.headerFrom(e.target),o=null;if(s?(r.type=b.ObjectType.groupHeader,r.index=this._groups.index(s)):(r.index=i.index(e.target),r.type=b.ObjectType.item,s=i.itemBoxAt(r.index),o=i.itemAt(r.index)),r.index!==C._INVALID_INDEX&&((this._keyboardFocusInbound||this._selection._keyboardFocused())&&(r.type===b.ObjectType.groupHeader&&e.target===s||r.type===b.ObjectType.item&&e.target.parentNode===s)&&this._drawFocusRectangle(s),this._tabManager.childFocus!==s&&this._tabManager.childFocus!==o&&(this._selection._setFocused(r,this._keyboardFocusInbound||this._selection._keyboardFocused()),this._keyboardFocusInbound=!1,s=r.type===b.ObjectType.groupHeader?s:i.itemAt(r.index),this._tabManager.childFocus=s,n._updater))){var a=n._updater.elements[H(s)],l=r.index;a&&a.newIndex&&(l=a.newIndex),n._updater.oldFocus={type:r.type,index:l},n._updater.newFocus={type:r.type,index:l}}}},_onFocusOut:function(e){if(!this._disposed){this._hasKeyboardFocus=!1,this._itemFocused=!1;var t=this._view.items.itemBoxFrom(e.target)||this._groups.headerFrom(e.target);t&&this._clearFocusRectangle(t)}},_onMSManipulationStateChanged:function(e){function t(){n._manipulationEndSignal=null}var n=this;this._manipulationState=e.currentState,n._writeProfilerMark("_onMSManipulationStateChanged state("+e.currentState+"),info"),this._manipulationState===f._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED||this._manipulationEndSignal||(this._manipulationEndSignal=new d,this._manipulationEndSignal.promise.done(t,t)),this._manipulationState===f._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED&&this._manipulationEndSignal.complete()},_pendingScroll:!1,_onScroll:function(){this._zooming||this._pendingScroll||this._checkScroller()},_checkScroller:function(){if(!this._isZombie()){var e=this._viewportScrollPosition;if(e!==this._lastScrollPosition){this._pendingScroll=n._requestAnimationFrame(this._checkScroller.bind(this)),e=Math.max(0,e);var t=this._scrollDirection(e);this._lastScrollPosition=e,this._raiseViewLoading(!0);var i=this;this._view.onScroll(function(){return{position:i._lastScrollPosition,direction:t}},this._manipulationEndSignal?this._manipulationEndSignal.promise:c.timeout(C._DEFERRED_SCROLL_END))}else this._pendingScroll=null}},_scrollDirection:function(e){var t=e<this._lastScrollPosition?"left":"right";return t===this._lastDirection?t:this._direction},_onTabEnter:function(){this._keyboardFocusInbound=!0},_onTabExit:function(){this._keyboardFocusInbound=!1},_onPropertyChange:function(e){var t=this;e.forEach(function(e){var n=!1;if("dir"===e.attributeName?n=!0:"style"===e.attributeName&&(n=t._cachedStyleDir!==e.target.style.direction),n&&(t._cachedStyleDir=e.target.style.direction,t._cachedRTL=null,f[t._rtl()?"addClass":"removeClass"](t._element,C._rtlListViewClass),t._lastScrollPosition=0,t._viewportScrollPosition=0,t.forceLayout()),"tabIndex"===e.attributeName){var i=t._element.tabIndex;i>=0&&(t._view.items.each(function(e,t){t.tabIndex=i}),t._tabIndex=i,t._tabManager.tabIndex=i,t._element.tabIndex=-1)}})},_getCanvasMargins:function(){return this._canvasMargins||(this._canvasMargins=A._getMargins(this._canvas)),this._canvasMargins},_convertCoordinatesByCanvasMargins:function(e,t){function n(n,i){void 0!==e[n]&&(e[n]=t(e[n],i))}var i;return this._horizontal()?(i=this._getCanvasMargins()[this._rtl()?"right":"left"],n("left",i)):(i=this._getCanvasMargins().top,n("top",i)),n("begin",i),n("end",i),e},_convertFromCanvasCoordinates:function(e){return this._convertCoordinatesByCanvasMargins(e,function(e,t){return e+t})},_convertToCanvasCoordinates:function(e){return this._convertCoordinatesByCanvasMargins(e,function(e,t){return e-t})},_getViewportSize:function(){return(this._viewportWidth===C._UNINITIALIZED||this._viewportHeight===C._UNINITIALIZED)&&(this._viewportWidth=Math.max(0,f.getContentWidth(this._element)),this._viewportHeight=Math.max(0,f.getContentHeight(this._element)),this._writeProfilerMark("viewportSizeDetected width:"+this._viewportWidth+" height:"+this._viewportHeight),this._previousWidth=this._element.offsetWidth,this._previousHeight=this._element.offsetHeight),{width:this._viewportWidth,height:this._viewportHeight}},_itemsCount:function(){function e(){t._itemsCountPromise=null}var t=this;if(this._cachedCount!==C._UNINITIALIZED)return c.wrap(this._cachedCount);var n;return this._itemsCountPromise?n=this._itemsCountPromise:(n=this._itemsCountPromise=this._itemsManager.dataSource.getCount().then(function(e){return e===b.CountResult.unknown&&(e=0),t._cachedCount=e,t._selection._updateCount(t._cachedCount),e},function(){return c.cancel}),this._itemsCountPromise.then(e,e)),n},_isSelected:function(e){return this._selection._isIncluded(e)},_LoadingState:{itemsLoading:"itemsLoading",viewPortLoaded:"viewPortLoaded",itemsLoaded:"itemsLoaded",complete:"complete"},_raiseViewLoading:function(e){this._loadingState!==this._LoadingState.itemsLoading&&(this._scrolling=!!e),this._setViewState(this._LoadingState.itemsLoading)},_raiseViewComplete:function(){this._disposed||this._view.animating||this._setViewState(this._LoadingState.complete)
},_setViewState:function(t){if(t!==this._loadingState){var n=null;switch(t){case this._LoadingState.viewPortLoaded:this._scheduledForDispose||(L(this),this._scheduledForDispose=!0),this._setViewState(this._LoadingState.itemsLoading);break;case this._LoadingState.itemsLoaded:n={scrolling:this._scrolling},this._setViewState(this._LoadingState.viewPortLoaded);break;case this._LoadingState.complete:this._setViewState(this._LoadingState.itemsLoaded),this._updateDeleteWrapperSize(!0)}this._writeProfilerMark("loadingStateChanged:"+t+",info"),this._loadingState=t;var i=e.document.createEvent("CustomEvent");i.initCustomEvent("loadingstatechanged",!0,!1,n),this._element.dispatchEvent(i)}},_createTemplates:function(){function t(t,n){var i=e.document.createElement("div");return i.className=t,n||i.setAttribute("aria-hidden",!0),i}this._itemBoxTemplate=t(C._itemBoxClass,!0)},_updateSelection:function(){var e=this._selection.getIndices(),t=this._selection.isEverything(),n={};if(!t)for(var i=0,r=e.length;r>i;i++){var s=e[i];n[s]=!0}this._view.items.each(function(e,i,r){if(r.itemBox&&!f.hasClass(r.itemBox,C._swipeClass)){var s=t||!!n[e];x._ItemEventsHandler.renderSelection(r.itemBox,i,s,!0),r.container&&f[s?"addClass":"removeClass"](r.container,C._selectedClass)}})},_getViewportLength:function(){return this._getViewportSize()[this._horizontal()?"width":"height"]},_horizontal:function(){return this._horizontalLayout},_rtl:function(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===e.getComputedStyle(this._element,null).direction),this._cachedRTL},_showProgressBar:function(e,t,n){var i=this._progressBar,r=i.style;if(!i.parentNode){this._fadingProgressBar=!1,this._progressIndicatorDelayTimer&&this._progressIndicatorDelayTimer.cancel();var s=this;this._progressIndicatorDelayTimer=c.timeout(C._LISTVIEW_PROGRESS_DELAY).then(function(){s._isZombie()||(e.appendChild(i),W.fadeInElement(i),s._progressIndicatorDelayTimer=null)})}r[this._rtl()?"right":"left"]=t,r.top=n},_hideProgressBar:function(){this._progressIndicatorDelayTimer&&(this._progressIndicatorDelayTimer.cancel(),this._progressIndicatorDelayTimer=null);var e=this._progressBar;if(e.parentNode&&!this._fadingProgressBar){this._fadingProgressBar=!0;var t=this;W.fadeOutElement(e).then(function(){e.parentNode&&e.parentNode.removeChild(e),t._fadingProgressBar=!1})}},_getPanAxis:function(){return this._horizontal()?"horizontal":"vertical"},_configureForZoom:function(e,t,r){if(n.validation&&(!this._view.realizePage||"number"!=typeof this._view.begin))throw new i("WinJS.UI.ListView.NotCompatibleWithSemanticZoom",V.notCompatibleWithSemanticZoom);this._isZoomedOut=e,this._disableEntranceAnimation=!t,this._isCurrentZoomView=t,this._triggerZoom=r},_setCurrentItem:function(e,t){this._rtl()&&(e=this._viewportWidth-e),this._horizontal()?e+=this.scrollPosition:t+=this.scrollPosition;var n=this._view.hitTest(e,t),i={type:n.type?n.type:b.ObjectType.item,index:n.index};i.index>=0&&(this._hasKeyboardFocus?this._changeFocus(i,!0,!1,!0):this._changeFocusPassively(i))},_getCurrentItem:function(){var e=this._selection._getFocused();e.type===b.ObjectType.groupHeader&&(e={type:b.ObjectType.item,index:this._groups.group(e.index).startIndex}),"number"!=typeof e.index&&(this._setCurrentItem(.5*this._viewportWidth,.5*this._viewportHeight),e=this._selection._getFocused());var t=this,n=this._getItemOffsetPosition(e.index).then(function(e){var n=t._canvasStart;return e[t._startProperty]+=n,e});return c.join({item:this._dataSource.itemFromIndex(e.index),position:n})},_animateItemsForPhoneZoom:function(){function e(e,t,n){return function(i){return(t[i]-e)*n}}function t(){for(var e=0,t=n.length;t>e;e++)n[e].style[N.scriptName]=""}for(var n=[],i=[],r=[],s=Number.MAX_VALUE,o=this,a=this._view.firstIndexDisplayed,u=Math.min(this._cachedCount,this._view.lastIndexDisplayed+1);u>a;a++)r.push(this._view.waitForEntityPosition({type:b.ObjectType.item,index:a}).then(function(){n.push(o._view.items.containerAt(a));var e=0;if(o.layout._getItemPosition){var t=o.layout._getItemPosition(a);t.row&&(e=t.row)}i.push(e),s=Math.min(e,s)}));return c.join(r).then(function(){return(0===n.length?c.wrap():l.executeTransition(n,{property:N.cssName,delay:e(s,i,30),duration:100,timing:"ease-in-out",from:o._isCurrentZoomView?"rotateX(0deg)":"rotateX(-90deg)",to:o._isCurrentZoomView?"rotateX(90deg)":"rotateX(0deg)"})).then(t,t)}).then(t,t)},_beginZoom:function(){this._zooming=!0;var e=null;if(n.isPhone){if(this._isZoomedOut)if(this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),this._isCurrentZoomView){var t=this,i=function(){t._zoomAnimationPromise=null};this._zoomAnimationPromise=e=this._animateItemsForPhoneZoom().then(i,i)}else this._zoomAnimationPromise=new d,e=this._zoomAnimationPromise.promise}else{var r=this._horizontal(),s=-this.scrollPosition;f.addClass(this._viewport,r?C._zoomingXClass:C._zoomingYClass),this._canvasStart=s,f.addClass(this._viewport,r?C._zoomingYClass:C._zoomingXClass)}return e},_positionItem:function(e,t){function r(e){return s._getItemOffsetPosition(e).then(function(i){var r,o=s._horizontal(),a=s._viewport[o?"scrollWidth":"scrollHeight"],l=o?s._viewportWidth:s._viewportHeight,u=o?"headerContainerWidth":"headerContainerHeight",c=s.layout._sizes,h=0;c&&c[u]&&(h=c[u]);var d=n.isPhone?h:t[s._startProperty],p=l-(o?i.width:i.height);d=Math.max(0,Math.min(p,d)),r=i[s._startProperty]-d;var m=Math.max(0,Math.min(a-l,r)),f=m-r;r=m;var _={type:b.ObjectType.item,index:e};if(s._hasKeyboardFocus?s._changeFocus(_,!0):s._changeFocusPassively(_),s._raiseViewLoading(!0),n.isPhone)s._viewportScrollPosition=r;else{var g=-r;s._canvasStart=g}if(s._view.realizePage(r,!0),n.isPhone&&s._isZoomedOut){var v=function(){s._zoomAnimationPromise&&s._zoomAnimationPromise.complete&&s._zoomAnimationPromise.complete(),s._zoomAnimationPromise=null};s._animateItemsForPhoneZoom().then(v,v)}return o?{x:f,y:0}:{x:0,y:f}})}var s=this,o=0;if(e&&(o=this._isZoomedOut?e.groupIndexHint:e.firstItemIndexHint),"number"==typeof o)return r(o);var a,l=this._isZoomedOut?e.groupKey:e.firstItemKey;if("string"==typeof l&&this._dataSource.itemFromKey)a=this._dataSource.itemFromKey(l,this._isZoomedOut?{groupMemberKey:e.key,groupMemberIndex:e.index}:null);else{var u=this._isZoomedOut?e.groupDescription:e.firstItemDescription;if(n.validation&&void 0===u)throw new i("WinJS.UI.ListView.InvalidItem",V.listViewInvalidItem);a=this._dataSource.itemFromDescription(u)}return a.then(function(e){return r(e.index)})},_endZoom:function(e){if(!this._isZombie()){if(!n.isPhone){var t=this._canvasStart;f.removeClass(this._viewport,C._zoomingYClass),f.removeClass(this._viewport,C._zoomingXClass),this._canvasStart=0,this._viewportScrollPosition=-t}this._disableEntranceAnimation=!e,this._isCurrentZoomView=e,this._zooming=!1,this._view.realizePage(this.scrollPosition,!1)}},_getItemOffsetPosition:function(e){var t=this;return this._getItemOffset({type:b.ObjectType.item,index:e}).then(function(e){return t._ensureFirstColumnRange(b.ObjectType.item).then(function(){return e=t._correctRangeInFirstColumn(e,b.ObjectType.item),e=t._convertFromCanvasCoordinates(e),t._horizontal()?(e.left=e.begin,e.width=e.end-e.begin,e.height=e.totalHeight):(e.top=e.begin,e.height=e.end-e.begin,e.width=e.totalWidth),e})})},_groupRemoved:function(e){this._groupFocusCache.deleteGroup(e)},_updateFocusCache:function(e){this._updateFocusCacheItemRequest&&this._updateFocusCacheItemRequest.cancel();var t=this;this._updateFocusCacheItemRequest=this._view.items.requestItem(e).then(function(){t._updateFocusCacheItemRequest=null;var n=t._view.items.itemDataAt(e),i=t._groups.groupFromItem(e),r=t._groups.group(i).key;n.itemsManagerRecord.item&&t._groupFocusCache.updateCache(r,n.itemsManagerRecord.item.key,e)})},_changeFocus:function(e,t,n,i,r){if(!this._isZombie()){var s;if(e.type!==b.ObjectType.groupHeader)s=this._view.items.itemAt(e.index),!t&&s&&f.hasClass(s,C._nonSelectableClass)&&(t=!0),this._updateFocusCache(e.index);else{var o=this._groups.group(e.index);s=o&&o.header}this._unsetFocusOnItem(!!s),this._hasKeyboardFocus=!0,this._selection._setFocused(e,r),i||this.ensureVisible(e),!t&&this._selectFocused(n)&&this._selection.set(e.index),this._setFocusOnItem(e)}},_changeFocusPassively:function(e){var t;if(e.type!==b.ObjectType.groupHeader)t=this._view.items.itemAt(e.index),this._updateFocusCache(e.index);else{var n=this._groups.group(e.index);t=n&&n.header}this._unsetFocusOnItem(!!t),this._selection._setFocused(e),this._setFocusOnItem(e)},_drawFocusRectangle:function(t){if(f.hasClass(t,C._headerClass))f.addClass(t,C._itemFocusClass);else{var n=this._view.items.itemBoxFrom(t);if(n.querySelector("."+C._itemFocusOutlineClass))return;f.addClass(n,C._itemFocusClass);var i=e.document.createElement("div");i.className=C._itemFocusOutlineClass,n.appendChild(i)}},_clearFocusRectangle:function(e){if(e&&!this._isZombie()){var t=this._view.items.itemBoxFrom(e);if(t){f.removeClass(t,C._itemFocusClass);var n=t.querySelector("."+C._itemFocusOutlineClass);n&&n.parentNode.removeChild(n)}else{var i=this._groups.headerFrom(e);i&&f.removeClass(i,C._itemFocusClass)}}},_defaultInvoke:function(e){(this._isZoomedOut||n.isPhone&&this._triggerZoom&&e.type===b.ObjectType.groupHeader)&&(this._changeFocusPassively(e),this._triggerZoom())},_selectionAllowed:function(e){var t=void 0!==e?this.elementFromIndex(e):null,n=!(t&&f.hasClass(t,C._nonSelectableClass));return n&&this._selectionMode!==b.SelectionMode.none},_multiSelection:function(){return this._selectionMode===b.SelectionMode.multi},_selectOnTap:function(){return this._tap===b.TapBehavior.toggleSelect||this._tap===b.TapBehavior.directSelect},_selectFocused:function(e){return this._tap===b.TapBehavior.directSelect&&this._selectionMode===b.SelectionMode.multi&&!e},_dispose:function(){if(!this._disposed){this._disposed=!0;var e=function(e){e&&(e.textContent="")};f._resizeNotifier.unsubscribe(this._element,this._onMSElementResizeBound),this._batchingViewUpdates&&this._batchingViewUpdates.cancel(),this._view&&this._view._dispose&&this._view._dispose(),this._mode&&this._mode._dispose&&this._mode._dispose(),this._groups&&this._groups._dispose&&this._groups._dispose(),this._selection&&this._selection._dispose&&this._selection._dispose(),this._layout&&this._layout.uninitialize&&this._layout.uninitialize(),this._itemsCountPromise&&this._itemsCountPromise.cancel(),this._versionManager&&this._versionManager._dispose(),this._clearInsertedItems(),this._itemsManager&&this._itemsManager.release(),this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),e(this._viewport),e(this._canvas),e(this._canvasProxy),this._versionManager=null,this._view=null,this._mode=null,this._element=null,this._viewport=null,this._itemsManager=null,this._canvas=null,this._canvasProxy=null,this._itemsCountPromise=null,this._scrollToFunctor=null;var t=z.indexOf(this);t>=0&&z.splice(t,1)}},_isZombie:function(){return this._disposed||!(this.element.firstElementChild&&e.document.body.contains(this.element))},_ifZombieDispose:function(){var e=this._isZombie();return e&&!this._disposed&&L(this),e},_animationsDisabled:function(){return 0===this._viewportWidth||0===this._viewportHeight?!0:!l.isAnimationEnabled()},_fadeOutViewport:function(){var e=this;return new c(function(t){if(e._animationsDisabled())return void t();if(!e._fadingViewportOut){e._waitingEntranceAnimationPromise&&(e._waitingEntranceAnimationPromise.cancel(),e._waitingEntranceAnimationPromise=null);var i=e._fireAnimationEvent(U.contentTransition);e._firedAnimationEvent=!0;var r=n._browserStyleEquivalents["overflow-style"],s=r?e._viewport:e._canvas;i.prevented?(e._disableEntranceAnimation=!0,s.style.opacity=1,t()):(e._fadingViewportOut=!0,r&&(s.style[r.scriptName]="none"),W.fadeOutElement(s).then(function(){e._isZombie()||(e._fadingViewportOut=!1,s.style.opacity=1,t())}))}})},_animateListEntrance:function(e){function t(){r._canvas.style.opacity=1,s&&(o.style[s.scriptName]="")}var i={prevented:!1,animationPromise:c.wrap()},r=this,s=n._browserStyleEquivalents["overflow-style"],o=s?this._viewport:this._canvas;return this._disableEntranceAnimation||this._animationsDisabled()?(t(),this._waitingEntranceAnimationPromise&&(this._waitingEntranceAnimationPromise.cancel(),this._waitingEntranceAnimationPromise=null),c.wrap()):(this._firedAnimationEvent?this._firedAnimationEvent=!1:i=this._fireAnimationEvent(U.entrance),i.prevented||n.isPhone?(t(),c.wrap()):(this._waitingEntranceAnimationPromise&&this._waitingEntranceAnimationPromise.cancel(),this._canvas.style.opacity=0,s&&(o.style[s.scriptName]="none"),this._waitingEntranceAnimationPromise=i.animationPromise.then(function(){return r._isZombie()?void 0:(r._canvas.style.opacity=1,W.animateEntrance(o,e).then(function(){r._isZombie()||(s&&(o.style[s.scriptName]=""),r._waitingEntranceAnimationPromise=null)}))}),this._waitingEntranceAnimationPromise))},_fireAnimationEvent:function(t){var n=e.document.createEvent("CustomEvent"),i=c.wrap();n.initCustomEvent("contentanimating",!0,!0,{type:t}),t===U.entrance&&(n.detail.setPromise=function(e){i=e});var r=!this._element.dispatchEvent(n);return{prevented:r,animationPromise:i}},_createAriaMarkers:function(){this._viewport.getAttribute("aria-label")||this._viewport.setAttribute("aria-label",V.listViewViewportAriaLabel),this._ariaStartMarker||(this._ariaStartMarker=e.document.createElement("div"),this._ariaStartMarker.id=H(this._ariaStartMarker),this._viewport.insertBefore(this._ariaStartMarker,this._viewport.firstElementChild)),this._ariaEndMarker||(this._ariaEndMarker=e.document.createElement("div"),this._ariaEndMarker.id=H(this._ariaEndMarker),this._viewport.appendChild(this._ariaEndMarker))},_updateItemsAriaRoles:function(){var e,t,n=this,i=this._element.getAttribute("role");this._currentMode().staticMode()?(e="list",t="listitem"):(e="listbox",t="option"),(i!==e||this._itemRole!==t)&&(this._element.setAttribute("role",e),this._itemRole=t,this._view.items.each(function(e,t){t.setAttribute("role",n._itemRole)}))},_updateGroupHeadersAriaRoles:function(){var e=this.groupHeaderTapBehavior===b.GroupHeaderTapBehavior.none?"separator":"link";if(this._headerRole!==e){this._headerRole=e;for(var t=0,n=this._groups.length();n>t;t++){var i=this._groups.group(t).header;i&&i.setAttribute("role",this._headerRole)}}},_setAriaSelected:function(e,t){var n="true"===e.getAttribute("aria-selected");t!==n&&e.setAttribute("aria-selected",t)},_setupAriaSelectionObserver:function(e){e._mutationObserver||(this._mutationObserver.observe(e,{attributes:!0,attributeFilter:["aria-selected"]}),e._mutationObserver=!0)},_itemPropertyChange:function(e){function t(e){e.forEach(function(e){e.item.setAttribute("aria-selected",!e.selected)})}if(!this._isZombie()){for(var n=this,i=n._selectionMode===b.SelectionMode.single,r=[],s=[],o=0,a=e.length;a>o;o++){var l=e[o].target,u=n._view.items.itemBoxFrom(l),c="true"===l.getAttribute("aria-selected");if(u&&c!==f._isSelectionRendered(u)){var h=n._view.items.index(u),p={index:h,item:l,selected:c};(n._selectionAllowed(h)?r:s).push(p)}}if(r.length>0){var m=new d;n.selection._synchronize(m).then(function(){var e=n.selection._cloneSelection();return r.forEach(function(t){t.selected?e[i?"set":"add"](t.index):e.remove(t.index)}),n.selection._set(e)}).then(function(e){n._isZombie()||e||t(r),m.complete()})}t(s)}},_groupsEnabled:function(){return!!this._groups.groupDataSource},_getItemPosition:function(e,t){var n=this;return this._view.waitForEntityPosition(e).then(function(){var i=e.type===b.ObjectType.groupHeader?n._view._getHeaderContainer(e.index):n._view.getContainer(e.index);if(i){n._writeProfilerMark("WinJS.UI.ListView:getItemPosition,info");var r,s;n._view._expandedRange?(r=n._view._expandedRange.first.index,s=n._view._expandedRange.last.index):t=!1,e.type===b.ObjectType.item?(t=!!t,t&=n._view._ensureContainerInDOM(e.index)):t=!1;var o=n._getItemMargins(e.type),a={left:n._rtl()?R(i)-o.right:i.offsetLeft-o.left,top:i.offsetTop-o.top,totalWidth:f.getTotalWidth(i),totalHeight:f.getTotalHeight(i),contentWidth:f.getContentWidth(i),contentHeight:f.getContentHeight(i)};return t&&n._view._forceItemsBlocksInDOM(r,s+1),n._zooming&&0!==n._canvasStart?a:n._convertToCanvasCoordinates(a)}return c.cancel})},_getItemOffset:function(e,t){var n=this;return this._getItemPosition(e,t).then(function(t){var i=n._getItemMargins(e.type);if(n._horizontal()){var r=n._rtl();t.begin=t.left-i[r?"left":"right"],t.end=t.left+t.totalWidth+i[r?"right":"left"]}else t.begin=t.top-i.bottom,t.end=t.top+t.totalHeight+i.top;return t})},_getItemMargins:function(t){t=t||b.ObjectType.item;var n=this,i=function(t){var i,r=n._canvas.querySelector("."+t);r||(r=e.document.createElement("div"),f.addClass(r,t),n._viewport.appendChild(r),i=!0);var s=A._getMargins(r);return i&&n._viewport.removeChild(r),s};return t!==b.ObjectType.groupHeader?this._itemMargins?this._itemMargins:this._itemMargins=i(C._containerClass):this._headerMargins?this._headerMargins:this._headerMargins=i(C._headerContainerClass)},_fireAccessibilityAnnotationCompleteEvent:function(t,n,i,r){var s={firstIndex:t,lastIndex:n,firstHeaderIndex:+i||-1,lastHeaderIndex:+r||-1},o=e.document.createEvent("CustomEvent");o.initCustomEvent("accessibilityannotationcomplete",!0,!1,s),this._element.dispatchEvent(o)},_ensureFirstColumnRange:function(e){var t=e===b.ObjectType.item?"_firstItemRange":"_firstHeaderRange";if(this[t])return c.wrap();var n=this;return this._getItemOffset({type:e,index:0},!0).then(function(e){n[t]=e})},_correctRangeInFirstColumn:function(e,t){var n=t===b.ObjectType.groupHeader?this._firstHeaderRange:this._firstItemRange;return n.begin===e.begin&&(e.begin=this._horizontal()?-this._getCanvasMargins()[this._rtl()?"right":"left"]:-this._getCanvasMargins().top),e},_updateContainers:function(t,n,i,r){function s(){var t=e.document.createElement("div");return t.className=C._containerClass,t}function o(t,n,i){n+i>p&&(i=p-n);var r,s,o=t.itemsContainer,a=o.itemsBlocks,l=a.length?a[a.length-1]:null,u=a.length?(a.length-1)*d._view._blockSize+l.items.length:0,c=i-u;if(c>0){if(l&&l.items.length<d._view._blockSize){var h=Math.min(c,d._view._blockSize-l.items.length);v.insertAdjacentHTMLUnsafe(l.element,"beforeend",T._repeat("<div class='win-container win-backdrop'></div>",h)),r=l.items.length,s=l.element.children;for(var m=0;h>m;m++)l.items.push(s[r+m]);c-=h}var f=Math.floor(c/d._view._blockSize),_=c%d._view._blockSize,b="<div class='win-itemsblock'>"+T._repeat("<div class='win-container win-backdrop'></div>",d._view._blockSize)+"</div>",w=T._repeat(b,f);_&&(w+="<div class='win-itemsblock'>"+T._repeat("<div class='win-container win-backdrop'></div>",_)+"</div>",f++);var C=e.document.createElement("div");v.setInnerHTMLUnsafe(C,w);for(var s=C.children,m=0;f>m;m++){var x=s[m],S={element:x,items:T._nodeListToArray(x.children)};o.itemsBlocks.push(S)}}else if(0>c)for(var I=c;0>I;I++){var E=l.items.pop();!d._view._requireFocusRestore&&E.contains(e.document.activeElement)&&(d._view._requireFocusRestore=e.document.activeElement,d._unsetFocusOnItem()),l.element.removeChild(E),y.push(E),l.items.length||(o.element===l.element.parentNode&&o.element.removeChild(l.element),a.pop(),l=a[a.length-1])}for(var m=0,k=a.length;k>m;m++)for(var x=a[m],I=0;I<x.items.length;I++)g.push(x.items[I])}function a(e,t,n){for(var i=r.filter(function(e){return-1===e.oldIndex&&e.newIndex>=t&&e.newIndex<t+n}).sort(function(e,t){return e.newIndex-t.newIndex}),o=e.itemsContainer,a=0,l=i.length;l>a;a++){var u=i[a],c=u.newIndex-t,h=s(),d=c<o.items.length?o.items[c]:null;o.items.splice(c,0,h),o.element.insertBefore(h,d)}}function l(e,t,n){t+n>p&&(n=p-t);var i=e.itemsContainer,r=n-i.items.length;if(r>0){var s=i.element.children,o=s.length;v.insertAdjacentHTMLUnsafe(i.element,"beforeend",T._repeat("<div class='win-container win-backdrop'></div>",r));for(var a=0;r>a;a++){var l=s[o+a];i.items.push(l)}}for(var a=r;0>a;a++){var l=i.items.pop();i.element.removeChild(l),y.push(l)}for(var a=0,u=i.items.length;u>a;a++)g.push(i.items[a])}function u(e,t){var n=d._view._createHeaderContainer(O),i={header:n,itemsContainer:{element:d._view._createItemsContainer(n)}};return i.itemsContainer[d._view._blockSize?"itemsBlocks":"items"]=[],d._view._blockSize?o(i,t,e.size):l(i,t,e.size),i}function c(e,t,i,s){for(var o,a,l=i+s-1,u=0,c=r.length;c>u;u++){var h=r[u];h.newIndex>=i&&h.newIndex<=l&&-1!==h.oldIndex&&(o!==+o||h.newIndex<o)&&(o=h.newIndex,a=h.newIndex-h.oldIndex)}if(o===+o){var p=0;for(u=0,c=r.length;c>u;u++){var h=r[u];h.newIndex>=i&&h.newIndex<o&&-1===h.oldIndex&&p++}var m=0,f=o-a;for(u=0,c=r.length;c>u;u++){var h=r[u];h.oldIndex>=t&&h.oldIndex<f&&-1===h.newIndex&&m++}a+=m,a-=p,a-=i-t;var _=e.itemsContainer;if(a>0){var g=_.element.children;v.insertAdjacentHTMLUnsafe(_.element,"afterBegin",T._repeat("<div class='win-container win-backdrop'></div>",a));for(var y=0;a>y;y++){var b=g[y];_.items.splice(y,0,b)}}for(var y=a;0>y;y++){var b=_.items.shift();_.element.removeChild(b)}a&&d._affectedRange.add({start:i,end:i+s},n)}}function h(e){for(var t=0,n=0,i=d._view.tree.length;i>n;n++){var r=d._view.tree[n],s=r.itemsContainer.items.length,o=t+s-1;if(e>=t&&o>=e)return{group:n,item:e-t};t+=s}}var d=this,p=this._view.containers.length+(i>0?i:0),m=[],_={},g=[],y=[],b=[],w=0;if(!d._view._blockSize)for(var x=0,S=this._view.tree.length;S>x;x++)b.push(w),w+=this._view.tree[x].itemsContainer.items.length;if(!d._view._blockSize)for(var I=r.filter(function(e){return-1===e.newIndex&&!e._removalHandled}).sort(function(e,t){return t.oldIndex-e.oldIndex}),x=0,S=I.length;S>x;x++){var E=I[x];E._removalHandled=!0;var k=E._itemBox;E._itemBox=null;var P=h(E.oldIndex),A=this._view.tree[P.group],M=A.itemsContainer.items[P.item];M.parentNode.removeChild(M),f.hasClass(k,C._selectedClass)&&f.addClass(M,C._selectedClass),A.itemsContainer.items.splice(P.item,1),E.element=M}this._view._modifiedGroups=[];var O=this._canvasProxy;w=0;for(var x=0,S=t.length;S>x&&(!this._groupsEnabled()||p>w);x++){var D=t[x],L=this._view.keyToGroupIndex[D.key],R=this._view.tree[L];if(R)d._view._blockSize?o(R,w,D.size):(c(R,b[L],w,D.size),a(R,w,D.size),l(R,w,D.size)),m.push(R),_[D.key]=m.length-1,delete this._view.keyToGroupIndex[D.key],O=R.itemsContainer.element,this._view._modifiedGroups.push({oldIndex:L,newIndex:m.length-1,element:R.header});else{var B=u(D,w);m.push(B),_[D.key]=m.length-1,this._view._modifiedGroups.push({oldIndex:-1,newIndex:m.length-1,element:B.header}),O=B.itemsContainer.element}w+=D.size}for(var N=[],F=[],z=this._view.keyToGroupIndex?Object.keys(this._view.keyToGroupIndex):[],x=0,S=z.length;S>x;x++){var P=this._view.keyToGroupIndex[z[x]],H=this._view.tree[P];if(F.push(H.header),N.push(H.itemsContainer.element),this._view._blockSize)for(var W=0;W<H.itemsContainer.itemsBlocks.length;W++)for(var V=H.itemsContainer.itemsBlocks[W],j=0;j<V.items.length;j++)y.push(V.items[j]);else for(var j=0;j<H.itemsContainer.items.length;j++)y.push(H.itemsContainer.items[j]);this._view._modifiedGroups.push({oldIndex:P,newIndex:-1,element:H.header})}for(var x=0,S=r.length;S>x;x++)if(-1===r[x].newIndex&&!r[x]._removalHandled){r[x]._removalHandled=!0;var k=r[x]._itemBox;r[x]._itemBox=null;var M;y.length?(M=y.pop(),f.empty(M)):M=s(),f.hasClass(k,C._selectedClass)&&f.addClass(M,C._selectedClass),M.appendChild(k),r[x].element=M}return this._view.tree=m,this._view.keyToGroupIndex=_,this._view.containers=g,{removedHeaders:F,removedItemsContainers:N}},_writeProfilerMark:function(e){var t="WinJS.UI.ListView:"+this._id+":"+e;a(t),s.log&&s.log(t,null,"listviewprofiler")}},{triggerDispose:function(){D()}});return t.Class.mix(P,r.createEventProperties("iteminvoked","groupheaderinvoked","selectionchanging","selectionchanged","loadingstatechanged","keyboardnavigating","contentanimating","itemdragstart","itemdragenter","itemdragend","itemdragbetween","itemdragleave","itemdragchanged","itemdragdrop","accessibilityannotationcomplete")),t.Class.mix(P,p.DOMEventMixin),P})})}),i("WinJS/Controls/FlipView/_Constants",[],function(){"use strict";var e={};return e.datasourceCountChangedEvent="datasourcecountchanged",e.pageVisibilityChangedEvent="pagevisibilitychanged",e.pageSelectedEvent="pageselected",e.pageCompletedEvent="pagecompleted",e}),i("WinJS/Controls/FlipView/_PageManager",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Log","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations","../../Promise","../../_Signal","../../Scheduler","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_TabContainer","./_Constants"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_FlipPageManager:n.Namespace._lazy(function(){function e(e){var t=e.winControl;return t&&t._isFlipView?!0:!1}function o(e){e.forEach(function(e){var n=e.target;n.winControl&&n.tabIndex>=0&&(n.winControl._pageManager._updateTabIndex(n.tabIndex),n.tabIndex=-1);var i=n.winControl;if(i&&i._isFlipView){var r=!1;"dir"===e.attributeName?r=!0:"style"===e.attributeName&&(r=i._cachedStyleDir!==n.style.direction),r&&(i._cachedStyleDir=n.style.direction,i._pageManager._rtl="rtl"===t.getComputedStyle(i._pageManager._flipperDiv,null).direction,i._pageManager.resized())}})}var _=p._uniqueID,g=i._browserStyleEquivalents,v=50,y=250,b={get badCurrentPage(){return"Invalid argument: currentPage must be a number greater than or equal to zero and be within the bounds of the datasource"}},w=n.Class.define(function(e,n,r,s,a,l,u){this._visibleElements=[],this._flipperDiv=e,this._panningDiv=n,this._panningDivContainer=r,this._buttonVisibilityHandler=u,this._currentPage=null,this._rtl="rtl"===t.getComputedStyle(this._flipperDiv,null).direction,this._itemsManager=s,this._itemSpacing=a,this._tabIndex=p.getTabIndex(e),this._tabIndex<0&&(this._tabIndex=0),n.tabIndex=-1,e.tabIndex=-1,this._tabManager=new m.TabContainer(this._panningDivContainer),this._tabManager.tabIndex=this._tabIndex,this._lastSelectedPage=null,this._lastSelectedElement=null,this._bufferSize=w.flipPageBufferCount,this._cachedSize=-1,this._environmentSupportsTouch=l;var c=this;this._panningDiv.addEventListener("keydown",function(e){c._blockTabs&&e.keyCode===p.Key.tab&&(e.stopImmediatePropagation(),e.preventDefault())},!0),p._addEventListener(this._flipperDiv,"focusin",function(e){e.target===c._flipperDiv&&c._currentPage.element&&p._setActive(c._currentPage.element)},!1),new p._MutationObserver(o).observe(this._flipperDiv,{attributes:!0,attributeFilter:["dir","style","tabindex"]}),this._cachedStyleDir=this._flipperDiv.style.direction,this._handleManipulationStateChangedBound=this._handleManipulationStateChanged.bind(this),this._environmentSupportsTouch&&this._panningDivContainer.addEventListener(i._browserEventEquivalents.manipulationStateChanged,this._handleManipulationStateChangedBound,!0)},{initialize:function(e,n){var i=null;if(this._panningDivContainerOffsetWidth=this._panningDivContainer.offsetWidth,this._panningDivContainerOffsetHeight=this._panningDivContainer.offsetHeight,this._isHorizontal=n,!this._currentPage){this._bufferAriaStartMarker=t.document.createElement("div"),this._bufferAriaStartMarker.id=_(this._bufferAriaStartMarker),this._panningDiv.appendChild(this._bufferAriaStartMarker),this._currentPage=this._createFlipPage(null,this),i=this._currentPage,this._panningDiv.appendChild(i.pageRoot);for(var r=2*this._bufferSize,s=0;r>s;s++)i=this._createFlipPage(i,this),this._panningDiv.appendChild(i.pageRoot);this._bufferAriaEndMarker=t.document.createElement("div"),this._bufferAriaEndMarker.id=_(this._bufferAriaEndMarker),this._panningDiv.appendChild(this._bufferAriaEndMarker)}this._prevMarker=this._currentPage.prev.prev,this._itemsManager&&this.setNewItemsManager(this._itemsManager,e)},dispose:function(){var e=this._currentPage,t=e;do d._disposeElement(t.element),t=t.next;while(t!==e)},setOrientation:function(e){if(this._notificationsEndedSignal){var t=this;return void this._notificationsEndedSignal.promise.done(function(){t._notificationsEndedSignal=null,t.setOrientation(e)})}if(e!==this._isHorizontal){this._isOrientationChanging=!0,this._isHorizontal?p.setScrollPosition(this._panningDivContainer,{scrollLeft:this._getItemStart(this._currentPage),scrollTop:0}):p.setScrollPosition(this._panningDivContainer,{scrollLeft:0,scrollTop:this._getItemStart(this._currentPage)}),this._isHorizontal=e;var n=this._panningDivContainer.style;n.overflowX="hidden",n.overflowY="hidden";var t=this;i._requestAnimationFrame(function(){t._isOrientationChanging=!1,t._forEachPage(function(e){var t=e.pageRoot.style;t.left="0px",t.top="0px"}),n.overflowX=t._isHorizontal&&t._environmentSupportsTouch?"scroll":"hidden",n.overflowY=t._isHorizontal||!t._environmentSupportsTouch?"hidden":"scroll",t._ensureCentered()})}},resetState:function(e){if(this._writeProfilerMark("WinJS.UI.FlipView:resetState,info"),0!==e){var t=this.jumpToIndex(e,!0);if(!t&&i.validation)throw new r("WinJS.UI.FlipView.BadCurrentPage",b.badCurrentPage);return t}d.disposeSubTree(this._flipperDiv),this._resetBuffer(null,!0);var n=this,s=u.wrap(!0);return this._itemsManager&&(s=n._itemsManager._firstItem().then(function(e){return n._currentPage.setElement(e),n._fetchPreviousItems(!0).then(function(){return n._fetchNextItems()}).then(function(){n._setButtonStates()})})),s.then(function(){n._tabManager.childFocus=n._currentPage.element,n._ensureCentered(),n._itemSettledOn()})},setNewItemsManager:function(e,t){this._itemsManager=e;var n=this;return this.resetState(t).then(function(){0!==t&&(n._tabManager.childFocus=n._currentPage.element,n._ensureCentered(),n._itemSettledOn())})},currentIndex:function(){if(!this._itemsManager)return 0;var e=0,t=this._navigationAnimationRecord?this._navigationAnimationRecord.newCurrentElement:this._currentPage.element;return t&&(e=this._getElementIndex(t)),e},resetScrollPos:function(){this._ensureCentered()},scrollPosChanged:function(){if(this._hasFocus&&(this._hadFocus=!0),this._itemsManager&&this._currentPage.element&&!this._isOrientationChanging){var e=this._getViewportStart(),t=this._lastScrollPos>e?this._getTailOfBuffer():this._getHeadOfBuffer();if(e!==this._lastScrollPos){for(;this._currentPage.element&&this._getItemStart(this._currentPage)>e&&this._currentPage.prev.element;)this._currentPage=this._currentPage.prev,this._fetchOnePrevious(t.prev),t=t.prev;for(;this._currentPage.element&&this._itemEnd(this._currentPage)<=e&&this._currentPage.next.element;)this._currentPage=this._currentPage.next,this._fetchOneNext(t.next),t=t.next;this._setButtonStates(),this._checkElementVisibility(!1),this._blockTabs=!0,this._lastScrollPos=e,this._currentPage.element&&(this._tabManager.childFocus=this._currentPage.element),this._setListEnds(),!this._manipulationState&&this._viewportOnItemStart()&&(this._currentPage.element.setAttribute("aria-setsize",this._cachedSize),this._currentPage.element.setAttribute("aria-posinset",this.currentIndex()+1),this._timeoutPageSelection())}}},itemRetrieved:function(e,t){var n=this;if(this._forEachPage(function(i){return i.element===t?(i===n._currentPage||i===n._currentPage.next?n._changeFlipPage(i,t,e):i.setElement(e,!0),!0):void 0}),this._navigationAnimationRecord&&this._navigationAnimationRecord.elementContainers)for(var i=this._navigationAnimationRecord.elementContainers,r=0,s=i.length;s>r;r++)i[r].element===t&&(n._changeFlipPage(i[r],t,e),i[r].element=e);this._checkElementVisibility(!1)},resized:function(){this._panningDivContainerOffsetWidth=this._panningDivContainer.offsetWidth,this._panningDivContainerOffsetHeight=this._panningDivContainer.offsetHeight;var e=this;this._forEachPage(function(t){t.pageRoot.style.width=e._panningDivContainerOffsetWidth+"px",t.pageRoot.style.height=e._panningDivContainerOffsetHeight+"px"}),this._ensureCentered(),this._writeProfilerMark("WinJS.UI.FlipView:resize,StopTM")},jumpToIndex:function(e,t){if(!t){if(!this._itemsManager||!this._currentPage.element||0>e)return u.wrap(!1);
var n=this._getElementIndex(this._currentPage.element),i=Math.abs(e-n);if(0===i)return u.wrap(!1)}var r=u.wrap(!0),s=this;return r=r.then(function(){var n=s._itemsManager._itemPromiseAtIndex(e);return u.join({element:s._itemsManager._itemFromItemPromise(n),item:n}).then(function(e){var n=e.element;return s._resetBuffer(n,t),n?(s._currentPage.setElement(n),s._fetchNextItems().then(function(){return s._fetchPreviousItems(!0)}).then(function(){return!0})):!1})}),r=r.then(function(e){return s._setButtonStates(),e})},startAnimatedNavigation:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:startAnimatedNavigation,info"),this._currentPage.element){var i=this._currentPage,r=e?this._currentPage.next:this._currentPage.prev;if(r.element){this._hasFocus&&p._setActive(this._panningDiv),this._navigationAnimationRecord={},this._navigationAnimationRecord.goForward=e,this._navigationAnimationRecord.cancelAnimationCallback=t,this._navigationAnimationRecord.completionCallback=n,this._navigationAnimationRecord.oldCurrentPage=i,this._navigationAnimationRecord.newCurrentPage=r;var s=i.element,o=r.element;this._navigationAnimationRecord.newCurrentElement=o,i.setElement(null,!0),i.elementUniqueID=_(s),r.setElement(null,!0),r.elementUniqueID=_(o);var a=this._createDiscardablePage(s),l=this._createDiscardablePage(o);return a.pageRoot.itemIndex=this._getElementIndex(s),l.pageRoot.itemIndex=a.pageRoot.itemIndex+(e?1:-1),a.pageRoot.style.position="absolute",l.pageRoot.style.position="absolute",a.pageRoot.style.zIndex=1,l.pageRoot.style.zIndex=2,this._setItemStart(a,0),this._setItemStart(l,0),this._blockTabs=!0,this._visibleElements.push(o),this._announceElementVisible(o),this._navigationAnimationRecord.elementContainers=[a,l],{outgoing:a,incoming:l}}}return null},endAnimatedNavigation:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:endAnimatedNavigation,info"),this._navigationAnimationRecord&&this._navigationAnimationRecord.oldCurrentPage&&this._navigationAnimationRecord.newCurrentPage){var i=this._restoreAnimatedElement(this._navigationAnimationRecord.oldCurrentPage,t);this._restoreAnimatedElement(this._navigationAnimationRecord.newCurrentPage,n),i||this._setViewportStart(this._getItemStart(e?this._currentPage.next:this._currentPage.prev)),this._navigationAnimationRecord=null,this._itemSettledOn()}},startAnimatedJump:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:startAnimatedJump,info"),this._hasFocus&&(this._hadFocus=!0),this._currentPage.element){var i=this._currentPage.element,r=this._getElementIndex(i),s=this;return s.jumpToIndex(e).then(function(o){if(!o)return null;if(s._navigationAnimationRecord={},s._navigationAnimationRecord.cancelAnimationCallback=t,s._navigationAnimationRecord.completionCallback=n,s._navigationAnimationRecord.oldCurrentPage=null,s._forEachPage(function(e){return e.element===i?(s._navigationAnimationRecord.oldCurrentPage=e,!0):void 0}),s._navigationAnimationRecord.newCurrentPage=s._currentPage,s._navigationAnimationRecord.newCurrentPage===s._navigationAnimationRecord.oldCurrentPage)return null;var a=s._currentPage.element;s._navigationAnimationRecord.newCurrentElement=a,s._currentPage.setElement(null,!0),s._currentPage.elementUniqueID=_(a),s._navigationAnimationRecord.oldCurrentPage&&s._navigationAnimationRecord.oldCurrentPage.setElement(null,!0);var l=s._createDiscardablePage(i),u=s._createDiscardablePage(a);return l.pageRoot.itemIndex=r,u.pageRoot.itemIndex=e,l.pageRoot.style.position="absolute",u.pageRoot.style.position="absolute",l.pageRoot.style.zIndex=1,u.pageRoot.style.zIndex=2,s._setItemStart(l,0),s._setItemStart(u,s._itemSize(s._currentPage)),s._visibleElements.push(a),s._announceElementVisible(a),s._navigationAnimationRecord.elementContainers=[l,u],s._blockTabs=!0,{oldPage:l,newPage:u}})}return u.wrap(null)},simulateMouseWheelScroll:function(e){if(!this._environmentSupportsTouch&&!this._waitingForMouseScroll){var n;n="number"==typeof e.deltaY?(e.deltaX||e.deltaY)>0:e.wheelDelta<0;var i=n?this._currentPage.next:this._currentPage.prev;if(i.element){var r={contentX:0,contentY:0,viewportX:0,viewportY:0};r[this._isHorizontal?"contentX":"contentY"]=this._getItemStart(i),p._zoomTo(this._panningDivContainer,r),this._waitingForMouseScroll=!0,t.setTimeout(function(){this._waitingForMouseScroll=!1}.bind(this),p._zoomToDuration+100)}}},endAnimatedJump:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:endAnimatedJump,info"),this._navigationAnimationRecord.oldCurrentPage?this._navigationAnimationRecord.oldCurrentPage.setElement(e.element,!0):e.element.parentNode&&e.element.parentNode.removeChild(e.element),this._navigationAnimationRecord.newCurrentPage.setElement(t.element,!0),this._navigationAnimationRecord=null,this._ensureCentered(),this._itemSettledOn()},inserted:function(e,t,n,i){this._writeProfilerMark("WinJS.UI.FlipView:inserted,info");var r=this._prevMarker,s=!1,o=!1;if(i&&(this._createAnimationRecord(_(e),null),this._getAnimationRecord(e).inserted=!0),t){do{if(r===this._currentPage&&(s=!0),r.elementUniqueID===_(t)){o=!0;var a,l=r,u=e,c=_(e);if(s)for(;l.next!==this._prevMarker;)a=l.next.element,c=l.next.elementUniqueID,l.next.setElement(u,!0),!u&&c&&(l.next.elementUniqueID=c),u=a,l=l.next;else for(r.elementUniqueID===r.next.elementUniqueID&&r.elementUniqueID&&(l=r.next);l.next!==this._prevMarker;)a=l.element,c=l.elementUniqueID,l.setElement(u,!0),!u&&c&&(l.elementUniqueID=c),u=a,l=l.prev;if(u){var h=!1;this._forEachPage(function(e){return _(u)===e.elementUniqueID?(h=!0,!0):void 0}),h||this._releaseElementIfNotAnimated(u)}break}r=r.next}while(r!==this._prevMarker)}else if(n){for(;r.next!==this._prevMarker&&r.elementUniqueID!==_(n);)r===this._currentPage&&(s=!0),r=r.next;r.elementUniqueID===_(n)&&r!==this._prevMarker?(r.prev.setElement(e),o=!0):this._releaseElementIfNotAnimated(e)}else this._currentPage.setElement(e);this._getAnimationRecord(e).successfullyMoved=o,this._setButtonStates()},changed:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:changed,info");var n=this;if(this._forEachPage(function(i){if(i.elementUniqueID===_(t)){var r=n._animationRecords[i.elementUniqueID];return r.changed=!0,r.oldElement=t,r.newElement=e,i.element=e,i.elementUniqueID=_(e),n._animationRecords[_(e)]=r,!0}}),this._navigationAnimationRecord&&this._navigationAnimationRecord.elementContainers){for(var i=0,r=this._navigationAnimationRecord.elementContainers.length;r>i;i++){var s=this._navigationAnimationRecord.elementContainers[i];s&&s.elementUniqueID===_(t)&&(s.element=e,s.elementUniqueID=_(e))}var o=this._navigationAnimationRecord.newCurrentElement;o&&_(o)===_(t)&&(this._navigationAnimationRecord.newCurrentElement=e)}},moved:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:moved,info");var i=this._getAnimationRecord(e);i||(i=this._createAnimationRecord(_(e))),i.moved=!0,this.removed(e,!1,!1),t||n?this.inserted(e,t,n,!1):i.successfullyMoved=!1},removed:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:removed,info");var i=this,r=this._prevMarker,s=u.wrap();if(t){var o=!1;return this._forEachPage(function(t){(t.elementUniqueID===_(e)||o)&&(t.setElement(null,!0),o=!0)}),void this._setButtonStates()}if(n){var a=this._getAnimationRecord(e);a&&(a.removed=!0)}if(this._currentPage.elementUniqueID===_(e))this._currentPage.next.elementUniqueID?(this._shiftLeft(this._currentPage),this._ensureCentered()):this._currentPage.prev.elementUniqueID?this._shiftRight(this._currentPage):this._currentPage.setElement(null,!0);else if(r.elementUniqueID===_(e))r.next.element?s=this._itemsManager._previousItem(r.next.element).then(function(t){return t===e&&(t=i._itemsManager._previousItem(t)),t}).then(function(e){r.setElement(e,!0)}):r.setElement(null,!0);else if(r.prev.elementUniqueID===_(e))r.prev.prev&&r.prev.prev.element?s=this._itemsManager._nextItem(r.prev.prev.element).then(function(t){return t===e&&(t=i._itemsManager._nextItem(t)),t}).then(function(e){r.prev.setElement(e,!0)}):r.prev.setElement(null,!0);else{for(var l=this._currentPage.prev,c=!1;l!==r&&!c;)l.elementUniqueID===_(e)&&(this._shiftRight(l),c=!0),l=l.prev;for(l=this._currentPage.next;l!==r&&!c;)l.elementUniqueID===_(e)&&(this._shiftLeft(l),c=!0),l=l.next}return s.then(function(){i._setButtonStates()})},reload:function(){this._writeProfilerMark("WinJS.UI.FlipView:reload,info"),this.resetState(0)},getItemSpacing:function(){return this._itemSpacing},setItemSpacing:function(e){this._itemSpacing=e,this._ensureCentered()},notificationsStarted:function(){this._writeProfilerMark("WinJS.UI.FlipView:changeNotifications,StartTM"),this._logBuffer(),this._notificationsStarted=this._notificationsStarted||0,this._notificationsStarted++,this._notificationsEndedSignal=new c,this._temporaryKeys=[],this._animationRecords={};var e=this;this._forEachPage(function(t){e._createAnimationRecord(t.elementUniqueID,t)}),this._animationRecords.currentPage=this._currentPage.element,this._animationRecords.nextPage=this._currentPage.next.element},notificationsEnded:function(){var e=this;this._endNotificationsWork&&this._endNotificationsWork.cancel(),this._endNotificationsWork=this._ensureBufferConsistency().then(function(){function t(t){var n=null;return e._forEachPage(function(e){return e.element===t?(n=e,!0):void 0}),n}function n(t,n){e._writeProfilerMark("WinJS.UI.FlipView:_animateOldViewportItemRemoved,info");var i=e._createDiscardablePage(n);e._setItemStart(i,t.originalLocation),s.push(e._deleteFlipPage(i))}function i(n,i){e._writeProfilerMark("WinJS.UI.FlipView:_animateOldViewportItemMoved,info");var r,o=n.originalLocation;if(n.successfullyMoved)r=t(i),o=n.newLocation;else{r=e._createDiscardablePage(i);var a=e._getElementIndex(i),l=e._currentPage.element?e._getElementIndex(e._currentPage.element):0;o+=l>a?-100*e._bufferSize:100*e._bufferSize}r&&(e._setItemStart(r,n.originalLocation),s.push(e._moveFlipPage(r,function(){e._setItemStart(r,o)})))}function r(){return 0===s.length&&s.push(u.wrap()),u.join(s)}var s=[];e._forEachPage(function(t){var n=e._getAnimationRecord(t.element);n&&(n.changed&&(n.oldElement.removedFromChange=!0,s.push(e._changeFlipPage(t,n.oldElement,n.newElement))),n.newLocation=t.location,e._setItemStart(t,n.originalLocation),n.inserted&&(t.elementRoot.style.opacity=0))});var o=e._animationRecords.currentPage,a=e._getAnimationRecord(o),l=e._animationRecords.nextPage,c=e._getAnimationRecord(l);a&&a.changed&&(o=a.newElement),c&&c.changed&&(l=c.newElement),(o!==e._currentPage.element||l!==e._currentPage.next.element)&&(a&&a.removed&&n(a,o),c&&c.removed&&n(c,l)),e._blockTabs=!0,r().then(function(){s=[],a&&a.moved&&i(a,o),c&&c.moved&&i(c,l);var t=e._getAnimationRecord(e._currentPage.element),n=e._getAnimationRecord(e._currentPage.next.element);e._forEachPage(function(i){var r=e._getAnimationRecord(i.element);r&&(r.inserted?r!==t&&r!==n&&(i.elementRoot.style.opacity=1):r.originalLocation!==r.newLocation&&(r!==a&&r!==c||r===a&&!a.moved||r===c&&!c.moved)&&s.push(e._moveFlipPage(i,function(){e._setItemStart(i,r.newLocation)})))}),r().then(function(){s=[],t&&t.inserted&&s.push(e._insertFlipPage(e._currentPage)),n&&n.inserted&&s.push(e._insertFlipPage(e._currentPage.next)),r().then(function(){e._checkElementVisibility(!1),e._itemSettledOn(),e._setListEnds(),e._notificationsStarted--,0===e._notificationsStarted&&e._notificationsEndedSignal.complete(),e._writeProfilerMark("WinJS.UI.FlipView:changeNotifications,StopTM"),e._logBuffer(),e._endNotificationsWork=null})})})})},disableTouchFeatures:function(){this._environmentSupportsTouch=!1;var e=this._panningDivContainer.style;this._panningDivContainer.removeEventListener(i._browserEventEquivalents.manipulationStateChanged,this._handleManipulationStateChangedBound,!0),e.overflowX="hidden",e.overflowY="hidden";var t=["scroll-snap-type","scroll-snap-points-x","scroll-snap-points-y","scroll-limit-x-min","scroll-limit-x-max","scroll-limit-y-min","scroll-limit-y-max"];t.forEach(function(t){var n=g[t];n&&(e[n.scriptName]="")})},_hasFocus:{get:function(){return this._flipperDiv.contains(t.document.activeElement)}},_timeoutPageSelection:function(){var e=this;this._lastTimeoutRequest&&this._lastTimeoutRequest.cancel(),this._lastTimeoutRequest=u.timeout(y).then(function(){e._itemSettledOn()})},_updateTabIndex:function(e){this._forEachPage(function(t){t.element&&(t.element.tabIndex=e)}),this._tabIndex=e,this._tabManager.tabIndex=e},_releaseElementIfNotAnimated:function(e){var t=this._getAnimationRecord(e);t&&(t.changed||t.inserted||t.moved||t.removed)||this._itemsManager.releaseItem(e)},_getAnimationRecord:function(e){return e?this._animationRecords[_(e)]:null},_createAnimationRecord:function(e,t){if(e){var n=this._animationRecords[e]={removed:!1,changed:!1,inserted:!1};return t&&(n.originalLocation=t.location),n}},_writeProfilerMark:function(e){a(e),this._flipperDiv.winControl.constructor._enabledDebug&&s.log&&s.log(e,null,"flipviewdebug")},_getElementIndex:function(e){var t=0;try{t=this._itemsManager.itemObject(e).index}catch(n){}return t},_resetBuffer:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:_resetBuffer,info");var n=this._currentPage,i=n;do i.element&&i.element===e||t?i.setElement(null,!0):i.setElement(null),i=i.next;while(i!==n)},_getHeadOfBuffer:function(){return this._prevMarker.prev},_getTailOfBuffer:function(){return this._prevMarker},_insertNewFlipPage:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_insertNewFlipPage,info");var t=this._createFlipPage(e,this);return this._panningDiv.appendChild(t.pageRoot),t},_fetchNextItems:function(){this._writeProfilerMark("WinJS.UI.FlipView:_fetchNextItems,info");for(var e=u.wrap(this._currentPage),t=this,n=0;n<this._bufferSize;n++)e=e.then(function(e){return e.next===t._prevMarker&&t._insertNewFlipPage(e),e.element?t._itemsManager._nextItem(e.element).then(function(t){return e.next.setElement(t),e.next}):(e.next.setElement(null),e.next)});return e},_fetchOneNext:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchOneNext,info");var t=e.prev.element;if(this._prevMarker===e&&(this._prevMarker=this._prevMarker.next),!t)return void e.setElement(null);var n=this;return this._itemsManager._nextItem(t).then(function(t){e.setElement(t),n._movePageAhead(e.prev,e)})},_fetchPreviousItems:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchPreviousItems,info");for(var t=this,n=u.wrap(this._currentPage),i=0;i<this._bufferSize;i++)n=n.then(function(e){return e.element?t._itemsManager._previousItem(e.element).then(function(t){return e.prev.setElement(t),e.prev}):(e.prev.setElement(null),e.prev)});return n.then(function(n){e&&(t._prevMarker=n)})},_fetchOnePrevious:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchOnePrevious,info");var t=e.next.element;if(this._prevMarker===e.next&&(this._prevMarker=this._prevMarker.prev),!t)return e.setElement(null),u.wrap();var n=this;return this._itemsManager._previousItem(t).then(function(t){e.setElement(t),n._movePageBehind(e.next,e)})},_setButtonStates:function(){this._currentPage.prev.element?this._buttonVisibilityHandler.showPreviousButton():this._buttonVisibilityHandler.hidePreviousButton(),this._currentPage.next.element?this._buttonVisibilityHandler.showNextButton():this._buttonVisibilityHandler.hideNextButton()},_ensureCentered:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_ensureCentered,info"),this._setItemStart(this._currentPage,v*this._viewportSize());for(var t=this._currentPage;t!==this._prevMarker;)this._movePageBehind(t,t.prev),t=t.prev;for(t=this._currentPage;t.next!==this._prevMarker;)this._movePageAhead(t,t.next),t=t.next;var n=!1;this._lastScrollPos&&!e&&(this._setListEnds(),n=!0),this._lastScrollPos=this._getItemStart(this._currentPage),this._setViewportStart(this._lastScrollPos),this._checkElementVisibility(!0),this._setupSnapPoints(),n||this._setListEnds()},_ensureBufferConsistency:function(){var e=this,t=this._currentPage.element;if(!t)return u.wrap();var n=!1,i={},r={};this._forEachPage(function(e){if(e&&e.elementUniqueID){if(i[e.elementUniqueID])return n=!0,!0;if(i[e.elementUniqueID]=!0,e.location>0){if(r[e.location])return n=!0,!0;r[e.location]=!0}}});var s=Object.keys(this._animationRecords);return s.forEach(function(t){var i=e._animationRecords[t];i&&(i.changed||i.inserted||i.moved||i.removed)&&(n=!0)}),n?(this._resetBuffer(null,!0),this._currentPage.setElement(t),this._fetchNextItems().then(function(){return e._fetchPreviousItems(!0)}).then(function(){e._ensureCentered()})):u.wrap()},_shiftLeft:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_shiftLeft,info");for(var t=e,n=null;t!==this._prevMarker&&t.next!==this._prevMarker;)n=t.next.element,!n&&t.next.elementUniqueID&&(t.elementUniqueID=t.next.elementUniqueID),t.next.setElement(null,!0),t.setElement(n,!0),t=t.next;if(t!==this._prevMarker&&t.prev.element){var i=this;return this._itemsManager._nextItem(t.prev.element).then(function(e){t.setElement(e),i._createAnimationRecord(t.elementUniqueID,t)})}},_logBuffer:function(){if(this._flipperDiv.winControl.constructor._enabledDebug){s.log&&s.log(this._currentPage.next.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.next.location+(this._currentPage.next.next.next.element?"	"+this._currentPage.next.next.next.element.textContent:""),null,"flipviewdebug"),s.log&&s.log(this._currentPage.next.next.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.next.next.location+(this._currentPage.next.next.next.next.element?"	"+this._currentPage.next.next.next.next.element.textContent:""),null,"flipviewdebug"),s.log&&s.log("> "+this._currentPage.elementUniqueID+"	@:"+this._currentPage.location+(this._currentPage.element?"	"+this._currentPage.element.textContent:""),null,"flipviewdebug"),s.log&&s.log(this._currentPage.next.elementUniqueID+"	@:"+this._currentPage.next.location+(this._currentPage.next.element?"	"+this._currentPage.next.element.textContent:""),null,"flipviewdebug"),s.log&&s.log(this._currentPage.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.location+(this._currentPage.next.next.element?"	"+this._currentPage.next.next.element.textContent:""),null,"flipviewdebug");var e=Object.keys(this._itemsManager._elementMap),t=[];this._forEachPage(function(e){e&&e.elementUniqueID&&t.push(e.elementUniqueID)}),s.log&&s.log("itemsmanager  = ["+e.join(" ")+"] flipview ["+t.join(" ")+"]",null,"flipviewdebug")}},_shiftRight:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_shiftRight,info");for(var t=e,n=null;t!==this._prevMarker;)n=t.prev.element,!n&&t.prev.elementUniqueID&&(t.elementUniqueID=t.prev.elementUniqueID),t.prev.setElement(null,!0),t.setElement(n,!0),t=t.prev;if(t.next.element){var i=this;return this._itemsManager._previousItem(t.next.element).then(function(e){t.setElement(e),i._createAnimationRecord(t.elementUniqueID,t)})}},_checkElementVisibility:function(e){var t,n;if(e){var i=this._currentPage.element;for(t=0,n=this._visibleElements.length;n>t;t++)this._visibleElements[t]!==i&&this._announceElementInvisible(this._visibleElements[t]);this._visibleElements=[],i&&(this._visibleElements.push(i),this._announceElementVisible(i))}else{for(t=0,n=this._visibleElements.length;n>t;t++)(!this._visibleElements[t].parentNode||this._visibleElements[t].removedFromChange)&&this._announceElementInvisible(this._visibleElements[t]);this._visibleElements=[];var r=this;this._forEachPage(function(e){var t=e.element;t&&(r._itemInView(e)?(r._visibleElements.push(t),r._announceElementVisible(t)):r._announceElementInvisible(t))})}},_announceElementVisible:function(e){if(e&&!e.visible){e.visible=!0;var n=t.document.createEvent("CustomEvent");this._writeProfilerMark("WinJS.UI.FlipView:pageVisibilityChangedEvent(visible:true),info"),n.initCustomEvent(f.pageVisibilityChangedEvent,!0,!1,{source:this._flipperDiv,visible:!0}),e.dispatchEvent(n)}},_announceElementInvisible:function(e){if(e&&e.visible){e.visible=!1;var n=!1;e.parentNode||(n=!0,this._panningDivContainer.appendChild(e));var i=t.document.createEvent("CustomEvent");this._writeProfilerMark("WinJS.UI.FlipView:pageVisibilityChangedEvent(visible:false),info"),i.initCustomEvent(f.pageVisibilityChangedEvent,!0,!1,{source:this._flipperDiv,visible:!1}),e.dispatchEvent(i),n&&this._panningDivContainer.removeChild(e)}},_createDiscardablePage:function(e){var t=this._createPageContainer(),n={pageRoot:t.root,elementRoot:t.elementContainer,discardable:!0,element:e,elementUniqueID:_(e),discard:function(){n.pageRoot.parentNode&&n.pageRoot.parentNode.removeChild(n.pageRoot),n.element.parentNode&&n.element.parentNode.removeChild(n.element)}};return n.pageRoot.style.top="0px",n.elementRoot.appendChild(e),this._panningDiv.appendChild(n.pageRoot),n},_createPageContainer:function(){var e=this._panningDivContainerOffsetWidth,n=this._panningDivContainerOffsetHeight,i=t.document.createElement("div"),r=i.style,s=t.document.createElement("div");return s.className="win-item",r.position="absolute",r.overflow="hidden",r.width=e+"px",r.height=n+"px",i.appendChild(s),{root:i,elementContainer:s}},_createFlipPage:function(t,n){var i={};i.element=null,i.elementUniqueID=null,t?(i.prev=t,i.next=t.next,i.next.prev=i,t.next=i):(i.next=i,i.prev=i);var r=this._createPageContainer();return i.elementRoot=r.elementContainer,i.elementRoot.style.msOverflowStyle="auto",i.pageRoot=r.root,i.setElement=function(t,r){if(void 0===t&&(t=null),t===i.element)return void(t||(i.elementUniqueID=null));if(i.element&&(r||(n._itemsManager.releaseItem(i.element),d._disposeElement(i.element))),i.element=t,i.elementUniqueID=t?_(t):null,p.empty(i.elementRoot),i.element){if(i===n._currentPage&&(n._tabManager.childFocus=t),!e(i.element)){i.element.tabIndex=n._tabIndex,i.element.setAttribute("role","option"),i.element.setAttribute("aria-selected",!1),i.element.id||(i.element.id=_(i.element));var s=function(e,t,n){e.setAttribute(n,t.id)},o=!i.next.element||i===n._prevMarker.prev;o&&(s(i.element,n._bufferAriaEndMarker,"aria-flowto"),s(n._bufferAriaEndMarker,i.element,"x-ms-aria-flowfrom")),i!==n._prevMarker&&i.prev.element&&(s(i.prev.element,i.element,"aria-flowto"),s(i.element,i.prev.element,"x-ms-aria-flowfrom")),i.next!==n._prevMarker&&i.next.element&&(s(i.element,i.next.element,"aria-flowto"),s(i.next.element,i.element,"x-ms-aria-flowfrom")),i.prev.element||s(i.element,n._bufferAriaStartMarker,"x-ms-aria-flowfrom")}i.elementRoot.appendChild(i.element)}},i},_itemInView:function(e){return this._itemEnd(e)>this._getViewportStart()&&this._getItemStart(e)<this._viewportEnd()},_getViewportStart:function(){return this._panningDivContainer.parentNode?this._isHorizontal?p.getScrollPosition(this._panningDivContainer).scrollLeft:p.getScrollPosition(this._panningDivContainer).scrollTop:void 0},_setViewportStart:function(e){this._panningDivContainer.parentNode&&(this._isHorizontal?p.setScrollPosition(this._panningDivContainer,{scrollLeft:e}):p.setScrollPosition(this._panningDivContainer,{scrollTop:e}))},_viewportEnd:function(){var e=this._panningDivContainer;return this._isHorizontal?this._rtl?this._getViewportStart()+this._panningDivContainerOffsetWidth:p.getScrollPosition(e).scrollLeft+this._panningDivContainerOffsetWidth:e.scrollTop+this._panningDivContainerOffsetHeight},_viewportSize:function(){return this._isHorizontal?this._panningDivContainerOffsetWidth:this._panningDivContainerOffsetHeight},_getItemStart:function(e){return e.location},_setItemStart:function(e,t){this._isHorizontal?e.pageRoot.style.left=(this._rtl?-t:t)+"px":e.pageRoot.style.top=t+"px",e.location=t},_itemEnd:function(e){return(this._isHorizontal?e.location+this._panningDivContainerOffsetWidth:e.location+this._panningDivContainerOffsetHeight)+this._itemSpacing},_itemSize:function(){return this._isHorizontal?this._panningDivContainerOffsetWidth:this._panningDivContainerOffsetHeight},_movePageAhead:function(e,t){var n=this._itemSize(e)+this._itemSpacing;this._setItemStart(t,this._getItemStart(e)+n)},_movePageBehind:function(e,t){var n=this._itemSize(e)+this._itemSpacing;this._setItemStart(t,this._getItemStart(e)-n)},_setupSnapPoints:function(){if(this._environmentSupportsTouch){var e=this._panningDivContainer.style;e[g["scroll-snap-type"].scriptName]="mandatory";var t=this._viewportSize(),n=t+this._itemSpacing,i="scroll-snap-points",r=0,s=this._getItemStart(this._currentPage);r=s%(t+this._itemSpacing),e[g[this._isHorizontal?i+"-x":i+"-y"].scriptName]="snapInterval("+r+"px, "+n+"px)"}},_setListEnds:function(){if(this._environmentSupportsTouch&&this._currentPage.element){for(var e=this._panningDivContainer.style,t=0,n=0,i=this._getTailOfBuffer(),r=this._getHeadOfBuffer(),s=g["scroll-limit-"+(this._isHorizontal?"x-min":"y-min")].scriptName,o=g["scroll-limit-"+(this._isHorizontal?"x-max":"y-max")].scriptName;!r.element&&(r=r.prev,r!==this._prevMarker.prev););for(;!i.element&&(i=i.next,i!==this._prevMarker););n=this._getItemStart(r),t=this._getItemStart(i),e[s]=t+"px",e[o]=n+"px"}},_viewportOnItemStart:function(){return this._getItemStart(this._currentPage)===this._getViewportStart()},_restoreAnimatedElement:function(e,t){var n=!0;return e.elementUniqueID!==_(t.element)||e.element?this._forEachPage(function(e){e.elementUniqueID!==t.elementUniqueID||e.element||(e.setElement(t.element,!0),n=!1)}):(e.setElement(t.element,!0),n=!1),n},_itemSettledOn:function(){this._lastTimeoutRequest&&(this._lastTimeoutRequest.cancel(),this._lastTimeoutRequest=null);var n=this;i._setImmediate(function(){n._viewportOnItemStart()&&(n._blockTabs=!1,n._currentPage.element&&n._lastSelectedElement!==n._currentPage.element&&(n._lastSelectedPage&&n._lastSelectedPage.element&&!e(n._lastSelectedPage.element)&&n._lastSelectedPage.element.setAttribute("aria-selected",!1),n._lastSelectedPage=n._currentPage,n._lastSelectedElement=n._currentPage.element,e(n._currentPage.element)||n._currentPage.element.setAttribute("aria-selected",!0),h.schedule(function(){if(n._currentPage.element){(n._hasFocus||n._hadFocus)&&(n._hadFocus=!1,p._setActive(n._currentPage.element),n._tabManager.childFocus=n._currentPage.element);var e=t.document.createEvent("CustomEvent");e.initCustomEvent(f.pageSelectedEvent,!0,!1,{source:n._flipperDiv}),n._writeProfilerMark("WinJS.UI.FlipView:pageSelectedEvent,info"),n._currentPage.element.dispatchEvent(e);var i=n._currentPage.element;if(i){var r=n._itemsManager._recordFromElement(i,!0);r&&r.renderComplete.then(function(){i===n._currentPage.element&&(n._currentPage.element.setAttribute("aria-setsize",n._cachedSize),n._currentPage.element.setAttribute("aria-posinset",n.currentIndex()+1),n._bufferAriaStartMarker.setAttribute("aria-flowto",n._currentPage.element.id),e=t.document.createEvent("CustomEvent"),e.initCustomEvent(f.pageCompletedEvent,!0,!1,{source:n._flipperDiv}),n._writeProfilerMark("WinJS.UI.FlipView:pageCompletedEvent,info"),n._currentPage.element.dispatchEvent(e))})}}},h.Priority.normal,null,"WinJS.UI.FlipView._dispatchPageSelectedEvent")))})},_forEachPage:function(e){var t=this._prevMarker;do{if(e(t))break;t=t.next}while(t!==this._prevMarker)},_changeFlipPage:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:_changeFlipPage,info"),e.element=null,e.setElement?e.setElement(n,!0):(t.parentNode.removeChild(t),e.elementRoot.appendChild(n));var i=t.style;return i.position="absolute",i.left="0px",i.top="0px",i.opacity=1,e.pageRoot.appendChild(t),t.style.left=Math.max(0,(e.pageRoot.offsetWidth-t.offsetWidth)/2)+"px",t.style.top=Math.max(0,(e.pageRoot.offsetHeight-t.offsetHeight)/2)+"px",l.fadeOut(t).then(function(){t.parentNode&&t.parentNode.removeChild(t)})},_deleteFlipPage:function(e){a("WinJS.UI.FlipView:_deleteFlipPage,info"),e.elementRoot.style.opacity=0;var t=l.createDeleteFromListAnimation([e.elementRoot]),n=this;return t.execute().then(function(){e.discardable&&(e.discard(),n._itemsManager.releaseItem(e.element))})},_insertFlipPage:function(e){a("WinJS.UI.FlipView:_insertFlipPage,info"),e.elementRoot.style.opacity=1;var t=l.createAddToListAnimation([e.elementRoot]);return t.execute().then(function(){e.discardable&&e.discard()})},_moveFlipPage:function(e,t){a("WinJS.UI.FlipView:_moveFlipPage,info");var n=l.createRepositionAnimation(e.pageRoot);t();var i=this;return n.execute().then(function(){if(e.discardable){e.discard();var t=i._getAnimationRecord(e.element);t&&!t.successfullyMoved&&i._itemsManager.releaseItem(e.element)}})},_handleManipulationStateChanged:function(e){this._manipulationState=e.currentState,0===e.currentState&&e.target===this._panningDivContainer&&(this._itemSettledOn(),this._ensureCentered())}},{supportedForProcessing:!1});return w.flipPageBufferCount=2,w})})}),i("WinJS/Controls/FlipView",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../BindingList","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_ItemsManager","../Utilities/_UI","./FlipView/_Constants","./FlipView/_PageManager","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y){"use strict";t.Namespace.define("WinJS.UI",{FlipView:t.Namespace._lazy(function(){function f(t){var n=t[0].target.winControl;n&&n instanceof N&&t.some(function(e){return"dir"===e.attributeName?!0:"style"===e.attributeName?n._cachedStyleDir!==e.target.style.direction:!1})&&(n._cachedStyleDir=n._flipviewDiv.style.direction,n._rtl="rtl"===e.getComputedStyle(n._flipviewDiv,null).direction,n._setupOrientation())}function b(e){var t=e.target&&e.target.winControl;t&&t instanceof N&&(o("WinJS.UI.FlipView:resize,StartTM"),t._resize())}var w="win-navbutton",C="win-flipview",x="win-navleft",S="win-navright",I="win-navtop",E="win-navbottom",k="Previous",T="Next",P=3e3,A=500,M="&#57570;",O="&#57571;",D="&#57572;",L="&#57573;",R=40,B={get badAxis(){return"Invalid argument: orientation must be a string, either 'horizontal' or 'vertical'"},get badCurrentPage(){return"Invalid argument: currentPage must be a number greater than or equal to zero and be within the bounds of the datasource"},get noitemsManagerForCount(){return"Invalid operation: can't get count if no dataSource has been set"},get badItemSpacingAmount(){return"Invalid argument: itemSpacing must be a number greater than or equal to zero"},get navigationDuringStateChange(){return"Error: After changing itemDataSource or itemTemplate, any navigation in the FlipView control should be delayed until the pageselected event is fired."},get panningContainerAriaLabel(){return s._getWinJSString("ui/flipViewPanningContainerAriaLabel").value}},N=t.Class.define(function(t,n){o("WinJS.UI.FlipView:constructor,StartTM"),this._disposed=!1,t=t||e.document.createElement("div");var i=!0,r=null,s=_._trivialHtmlRenderer,a=0,l=0;if(n){if(n.orientation&&"string"==typeof n.orientation)switch(n.orientation.toLowerCase()){case"horizontal":i=!0;break;case"vertical":i=!1}n.currentPage&&(a=n.currentPage>>0,a=0>a?0:a),n.itemDataSource&&(r=n.itemDataSource),n.itemTemplate&&(s=this._getItemRenderer(n.itemTemplate)),n.itemSpacing&&(l=n.itemSpacing>>0,l=0>l?0:l)}if(!r){var c=new u.List;r=c.dataSource}m.empty(t),this._flipviewDiv=t,t.winControl=this,d._setOptions(this,n,!0),this._initializeFlipView(t,i,r,s,a,l),m.addClass(t,"win-disposable"),this._avoidTrappingTime=0,this._windowWheelHandlerBound=this._windowWheelHandler.bind(this),m._globalListener.addEventListener(t,"wheel",this._windowWheelHandlerBound),m._globalListener.addEventListener(t,"mousewheel",this._windowWheelHandlerBound),o("WinJS.UI.FlipView:constructor,StopTM")},{dispose:function(){o("WinJS.UI.FlipView:dispose,StopTM"),this._disposed||(m._globalListener.removeEventListener(this._flipviewDiv,"wheel",this._windowWheelHandlerBound),m._globalListener.removeEventListener(this._flipviewDiv,"mousewheel",this._windowWheelHandlerBound),m._resizeNotifier.unsubscribe(this._flipviewDiv,b),this._disposed=!0,this._pageManager.dispose(),this._itemsManager.release(),this.itemDataSource=null)
},next:function(){o("WinJS.UI.FlipView:next,info");var e=this._nextAnimation?null:this._cancelDefaultAnimation;return this._navigate(!0,e)},previous:function(){o("WinJS.UI.FlipView:prev,info");var e=this._prevAnimation?null:this._cancelDefaultAnimation;return this._navigate(!1,e)},element:{get:function(){return this._flipviewDiv}},currentPage:{get:function(){return this._getCurrentIndex()},set:function(e){if(o("WinJS.UI.FlipView:set_currentPage,info"),this._pageManager._notificationsEndedSignal){var t=this;return void this._pageManager._notificationsEndedSignal.promise.done(function(){t._pageManager._notificationsEndedSignal=null,t.currentPage=e})}if(!this._animating||this._cancelAnimation())if(e>>=0,e=0>e?0:e,this._refreshTimer)this._indexAfterRefresh=e;else{this._pageManager._cachedSize>0?e=Math.min(this._pageManager._cachedSize-1,e):0===this._pageManager._cachedSize&&(e=0);var t=this;if(this._jumpingToIndex===e)return;var n=function(){t._jumpingToIndex=null};this._jumpingToIndex=e;var i=this._jumpAnimation?this._jumpAnimation:this._defaultAnimation.bind(this),r=this._jumpAnimation?null:this._cancelDefaultAnimation,s=function(){t._completeJump()};this._pageManager.startAnimatedJump(e,r,s).then(function(e){if(e){t._animationsStarted();var r=e.oldPage.pageRoot,a=e.newPage.pageRoot;t._contentDiv.appendChild(r),t._contentDiv.appendChild(a),t._completeJumpPending=!0,i(r,a).then(function(){t._completeJumpPending&&(s(),o("WinJS.UI.FlipView:set_currentPage.animationComplete,info"))}).done(n,n)}else n()},n)}}},orientation:{get:function(){return this._axisAsString()},set:function(e){o("WinJS.UI.FlipView:set_orientation,info");var t="horizontal"===e;t!==this._isHorizontal&&(this._isHorizontal=t,this._setupOrientation(),this._pageManager.setOrientation(this._isHorizontal))}},itemDataSource:{get:function(){return this._dataSource},set:function(e){o("WinJS.UI.FlipView:set_itemDataSource,info"),this._dataSourceAfterRefresh=e||(new u.List).dataSource,this._refresh()}},itemTemplate:{get:function(){return this._itemRenderer},set:function(e){o("WinJS.UI.FlipView:set_itemTemplate,info"),this._itemRendererAfterRefresh=this._getItemRenderer(e),this._refresh()}},itemSpacing:{get:function(){return this._pageManager.getItemSpacing()},set:function(e){o("WinJS.UI.FlipView:set_itemSpacing,info"),e>>=0,e=0>e?0:e,this._pageManager.setItemSpacing(e)}},count:function(){o("WinJS.UI.FlipView:count,info");var e=this;return new c(function(t,n){e._itemsManager?e._pageManager._cachedSize===g.CountResult.unknown||e._pageManager._cachedSize>=0?t(e._pageManager._cachedSize):e._dataSource.getCount().then(function(n){e._pageManager._cachedSize=n,t(n)}):n(N.noitemsManagerForCount)})},setCustomAnimations:function(e){o("WinJS.UI.FlipView:setCustomAnimations,info"),void 0!==e.next&&(this._nextAnimation=e.next),void 0!==e.previous&&(this._prevAnimation=e.previous),void 0!==e.jump&&(this._jumpAnimation=e.jump)},forceLayout:function(){o("WinJS.UI.FlipView:forceLayout,info"),this._pageManager.resized()},_initializeFlipView:function(t,i,r,s,o,a){function l(e){e.setAttribute("aria-hidden",!0),e.style.visibility="hidden",e.style.opacity=0,e.tabIndex=-1,e.style.zIndex=1e3}function u(e){if(e.pointerType!==P){if(d._touchInteraction=!1,e.screenX===d._lastMouseX&&e.screenY===d._lastMouseY)return;d._lastMouseX=e.screenX,d._lastMouseY=e.screenY,d._mouseInViewport=!0,d._fadeInButton("prev"),d._fadeInButton("next"),d._fadeOutButtons()}}function c(e){e.pointerType===P?(d._mouseInViewport=!1,d._touchInteraction=!0,d._fadeOutButtons(!0)):(d._touchInteraction=!1,d._isInteractive(e.target)||0!==(4&e.buttons)&&(e.stopPropagation(),e.preventDefault()))}function h(e){e.pointerType!==P&&(d._touchInteraction=!1)}var d=this,p=!1;this._flipviewDiv=t,m.addClass(this._flipviewDiv,C),this._contentDiv=e.document.createElement("div"),this._panningDivContainer=e.document.createElement("div"),this._panningDivContainer.className="win-surface",this._panningDiv=e.document.createElement("div"),this._prevButton=e.document.createElement("button"),this._nextButton=e.document.createElement("button"),this._isHorizontal=i,this._dataSource=r,this._itemRenderer=s,this._itemsManager=null,this._pageManager=null;for(var v=["scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","overflow-style"],w=!0,x=n._browserStyleEquivalents,S=0,I=v.length;I>S;S++)w=w&&!!x[v[S]];w=w&&!!n._browserEventEquivalents.manipulationStateChanged,w=w&&m._supportsSnapPoints,this._environmentSupportsTouch=w;var E=this._flipviewDiv.getAttribute("aria-label");E||this._flipviewDiv.setAttribute("aria-label",""),this._flipviewDiv.setAttribute("role","listbox"),this._flipviewDiv.style.overflow||(this._flipviewDiv.style.overflow="hidden"),this._contentDiv.style.position="relative",this._contentDiv.style.zIndex=0,this._contentDiv.style.width="100%",this._contentDiv.style.height="100%",this._panningDiv.style.position="relative",this._panningDivContainer.style.position="relative",this._panningDivContainer.style.width="100%",this._panningDivContainer.style.height="100%",this._panningDivContainer.setAttribute("role","group"),this._panningDivContainer.setAttribute("aria-label",B.panningContainerAriaLabel),this._contentDiv.appendChild(this._panningDivContainer),this._flipviewDiv.appendChild(this._contentDiv),this._panningDiv.style.width="100%",this._panningDiv.style.height="100%",this._setupOrientation(),l(this._prevButton),l(this._nextButton),this._prevButton.setAttribute("aria-label",k),this._nextButton.setAttribute("aria-label",T),this._prevButton.setAttribute("type","button"),this._nextButton.setAttribute("type","button"),this._panningDivContainer.appendChild(this._panningDiv),this._contentDiv.appendChild(this._prevButton),this._contentDiv.appendChild(this._nextButton),this._itemsManagerCallback={inserted:function(e,t,n){d._itemsManager._itemFromPromise(e).then(function(e){var i=d._itemsManager._elementFromHandle(t),r=d._itemsManager._elementFromHandle(n);d._pageManager.inserted(e,i,r,!0)})},countChanged:function(e,t){d._pageManager._cachedSize=e,t!==g.CountResult.unknown&&d._fireDatasourceCountChangedEvent()},changed:function(e,t){d._pageManager.changed(e,t)},moved:function(e,t,n,i){var r=function(e){d._pageManager.moved(e,t,n)};e?r(e):d._itemsManager._itemFromPromise(i).then(r)},removed:function(e,t){e&&d._pageManager.removed(e,t,!0)},knownUpdatesComplete:function(){},beginNotifications:function(){d._cancelAnimation(),d._pageManager.notificationsStarted()},endNotifications:function(){d._pageManager.notificationsEnded()},itemAvailable:function(e,t){d._pageManager.itemRetrieved(e,t)},reload:function(){d._pageManager.reload()}},this._dataSource&&(this._itemsManager=_._createItemsManager(this._dataSource,this._itemRenderer,this._itemsManagerCallback,{ownerElement:this._flipviewDiv})),this._pageManager=new y._FlipPageManager(this._flipviewDiv,this._panningDiv,this._panningDivContainer,this._itemsManager,a,this._environmentSupportsTouch,{hidePreviousButton:function(){d._hasPrevContent=!1,d._fadeOutButton("prev"),d._prevButton.setAttribute("aria-hidden",!0)},showPreviousButton:function(){d._hasPrevContent=!0,d._fadeInButton("prev"),d._prevButton.setAttribute("aria-hidden",!1)},hideNextButton:function(){d._hasNextContent=!1,d._fadeOutButton("next"),d._nextButton.setAttribute("aria-hidden",!0)},showNextButton:function(){d._hasNextContent=!0,d._fadeInButton("next"),d._nextButton.setAttribute("aria-hidden",!1)}}),this._pageManager.initialize(o,this._isHorizontal),this._dataSource.getCount().then(function(e){d._pageManager._cachedSize=e}),this._prevButton.addEventListener("click",function(){d.previous()},!1),this._nextButton.addEventListener("click",function(){d.next()},!1),new m._MutationObserver(f).observe(this._flipviewDiv,{attributes:!0,attributeFilter:["dir","style"]}),this._cachedStyleDir=this._flipviewDiv.style.direction,this._flipviewDiv.addEventListener("mselementresize",b),m._resizeNotifier.subscribe(this._flipviewDiv,b),this._contentDiv.addEventListener("mouseleave",function(){d._mouseInViewport=!1},!1);var P=m._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch";this._environmentSupportsTouch&&(m._addEventListener(this._contentDiv,"pointerdown",c,!1),m._addEventListener(this._contentDiv,"pointermove",u,!1),m._addEventListener(this._contentDiv,"pointerup",h,!1)),this._panningDivContainer.addEventListener("scroll",function(){d._scrollPosChanged()},!1),this._panningDiv.addEventListener("blur",function(){d._touchInteraction||d._fadeOutButtons()},!0);var A=e.document.body.contains(this._flipviewDiv);m._addInsertedNotifier(this._flipviewDiv),this._flipviewDiv.addEventListener("WinJSNodeInserted",function(){return A?void(A=!1):void d._pageManager.resized()},!1),this._flipviewDiv.addEventListener("keydown",function(e){var t=!0;if(!d._isInteractive(e.target)){var n=m.Key,i=!1;if(d._isHorizontal)switch(e.keyCode){case n.leftArrow:d._rtl?d.next():d.previous(),i=!0;break;case n.pageUp:d.previous(),i=!0;break;case n.rightArrow:d._rtl?d.previous():d.next(),i=!0;break;case n.pageDown:d.next(),i=!0;break;case n.upArrow:case n.downArrow:i=!0,t=!1}else switch(e.keyCode){case n.upArrow:case n.pageUp:d.previous(),i=!0;break;case n.downArrow:case n.pageDown:d.next(),i=!0;break;case n.space:i=!0}switch(e.keyCode){case n.home:d.currentPage=0,i=!0;break;case n.end:d._pageManager._cachedSize>0&&(d.currentPage=d._pageManager._cachedSize-1),i=!0}if(i)return e.preventDefault(),t&&e.stopPropagation(),!0}},!1),p=!0},_windowWheelHandler:function(e){e=e.detail.originalEvent;var t=e.target&&(this._flipviewDiv.contains(e.target)||this._flipviewDiv===e.target),i=this,r=n._now(),s=this._avoidTrappingTime>r;(!t||s)&&(this._avoidTrappingTime=r+A),t&&s?(this._panningDivContainer.style.overflowX="hidden",this._panningDivContainer.style.overflowY="hidden",n._yieldForDomModification(function(){i._pageManager._ensureCentered(),i._isHorizontal?(i._panningDivContainer.style.overflowX=i._environmentSupportsTouch?"scroll":"hidden",i._panningDivContainer.style.overflowY="hidden"):(i._panningDivContainer.style.overflowY=i._environmentSupportsTouch?"scroll":"hidden",i._panningDivContainer.style.overflowX="hidden")})):t&&this._pageManager.simulateMouseWheelScroll(e)},_isInteractive:function(e){if(e.parentNode)for(var t=e.parentNode.querySelectorAll(".win-interactive, .win-interactive *"),n=0,i=t.length;i>n;n++)if(t[n]===e)return!0;return!1},_refreshHandler:function(){var e=this._dataSourceAfterRefresh||this._dataSource,t=this._itemRendererAfterRefresh||this._itemRenderer,n=this._indexAfterRefresh||0;this._setDatasource(e,t,n),this._dataSourceAfterRefresh=null,this._itemRendererAfterRefresh=null,this._indexAfterRefresh=0,this._refreshTimer=!1},_refresh:function(){if(!this._refreshTimer){var e=this;this._refreshTimer=!0,h.schedule(function(){e._refreshTimer&&!e._disposed&&e._refreshHandler()},h.Priority.high,null,"WinJS.UI.FlipView._refreshHandler")}},_getItemRenderer:function(t){var n=null;if("function"==typeof t){var i=new c(function(){}),r=t(i);n=r.element?"object"==typeof r.element&&"function"==typeof r.element.then?function(n){var i=e.document.createElement("div");return i.className="win-template",p.markDisposable(i),{element:i,renderComplete:t(n).element.then(function(e){i.appendChild(e)})}}:t:function(n){var i=e.document.createElement("div");return i.className="win-template",p.markDisposable(i),{element:i,renderComplete:n.then(function(){return c.as(t(n)).then(function(e){i.appendChild(e)})})}}}else"object"==typeof t&&(n=t.renderItem);return n},_navigate:function(e,t){if(n.validation&&this._refreshTimer)throw new i("WinJS.UI.FlipView.NavigationDuringStateChange",B.navigationDuringStateChange);if(this._animating||(this._animatingForward=e),this._goForward=e,this._animating&&!this._cancelAnimation())return!1;var r=this,s=e?this._nextAnimation:this._prevAnimation,o=s?s:this._defaultAnimation.bind(this),a=function(e){r._completeNavigation(e)},l=this._pageManager.startAnimatedNavigation(e,t,a);if(l){this._animationsStarted();var u=l.outgoing.pageRoot,c=l.incoming.pageRoot;return this._contentDiv.appendChild(u),this._contentDiv.appendChild(c),this._completeNavigationPending=!0,o(u,c).then(function(){r._completeNavigationPending&&a(r._goForward)}).done(),!0}return!1},_cancelDefaultAnimation:function(e,t){e.style.opacity=0,t.style.animationName="",t.style.opacity=1},_cancelAnimation:function(){if(this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.completionCallback){var e=this._pageManager._navigationAnimationRecord.cancelAnimationCallback;if(e&&(e=e.bind(this)),this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var t=this._pageManager._navigationAnimationRecord.elementContainers[0],n=this._pageManager._navigationAnimationRecord.elementContainers[1],i=t.pageRoot,r=n.pageRoot;return e&&e(i,r),this._pageManager._navigationAnimationRecord.completionCallback(this._animatingForward),!0}}return!1},_completeNavigation:function(e){if(!this._disposed){if(this._pageManager._resizing=!1,this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var t=this._pageManager._navigationAnimationRecord.elementContainers[0],n=this._pageManager._navigationAnimationRecord.elementContainers[1],i=t.pageRoot,r=n.pageRoot;i.parentNode&&i.parentNode.removeChild(i),r.parentNode&&r.parentNode.removeChild(r),this._pageManager.endAnimatedNavigation(e,t,n),this._fadeOutButtons(),this._scrollPosChanged(),this._pageManager._ensureCentered(!0),this._animationsFinished()}this._completeNavigationPending=!1}},_completeJump:function(){if(!this._disposed){if(this._pageManager._resizing=!1,this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var e=this._pageManager._navigationAnimationRecord.elementContainers[0],t=this._pageManager._navigationAnimationRecord.elementContainers[1],n=e.pageRoot,i=t.pageRoot;n.parentNode&&n.parentNode.removeChild(n),i.parentNode&&i.parentNode.removeChild(i),this._pageManager.endAnimatedJump(e,t),this._animationsFinished()}this._completeJumpPending=!1}},_resize:function(){this._pageManager.resized()},_setCurrentIndex:function(e){return this._pageManager.jumpToIndex(e)},_getCurrentIndex:function(){return this._pageManager.currentIndex()},_setDatasource:function(e,t,n){this._animating&&this._cancelAnimation();var i=0;void 0!==n&&(i=n),this._dataSource=e,this._itemRenderer=t;var r=this._itemsManager;this._itemsManager=_._createItemsManager(this._dataSource,this._itemRenderer,this._itemsManagerCallback,{ownerElement:this._flipviewDiv}),this._dataSource=this._itemsManager.dataSource;var s=this;this._dataSource.getCount().then(function(e){s._pageManager._cachedSize=e}),this._pageManager.setNewItemsManager(this._itemsManager,i),r&&r.release()},_fireDatasourceCountChangedEvent:function(){var t=this;h.schedule(function(){var n=e.document.createEvent("Event");n.initEvent(N.datasourceCountChangedEvent,!0,!0),o("WinJS.UI.FlipView:dataSourceCountChangedEvent,info"),t._flipviewDiv.dispatchEvent(n)},h.Priority.normal,null,"WinJS.UI.FlipView._dispatchDataSourceCountChangedEvent")},_scrollPosChanged:function(){this._pageManager.scrollPosChanged()},_axisAsString:function(){return this._isHorizontal?"horizontal":"vertical"},_setupOrientation:function(){if(this._isHorizontal){this._panningDivContainer.style.overflowX=this._environmentSupportsTouch?"scroll":"hidden",this._panningDivContainer.style.overflowY="hidden";var t="rtl"===e.getComputedStyle(this._flipviewDiv,null).direction;this._rtl=t,t?(this._prevButton.className=w+" "+S,this._nextButton.className=w+" "+x):(this._prevButton.className=w+" "+x,this._nextButton.className=w+" "+S),this._prevButton.innerHTML=t?O:M,this._nextButton.innerHTML=t?M:O}else this._panningDivContainer.style.overflowY=this._environmentSupportsTouch?"scroll":"hidden",this._panningDivContainer.style.overflowX="hidden",this._prevButton.className=w+" "+I,this._nextButton.className=w+" "+E,this._prevButton.innerHTML=D,this._nextButton.innerHTML=L;this._panningDivContainer.style.msOverflowStyle="none"},_fadeInButton:function(e,t){(this._mouseInViewport||t||!this._environmentSupportsTouch)&&("next"===e&&this._hasNextContent?(this._nextButtonAnimation&&(this._nextButtonAnimation.cancel(),this._nextButtonAnimation=null),this._nextButton.style.visibility="visible",this._nextButtonAnimation=this._fadeInFromCurrentValue(this._nextButton)):"prev"===e&&this._hasPrevContent&&(this._prevButtonAnimation&&(this._prevButtonAnimation.cancel(),this._prevButtonAnimation=null),this._prevButton.style.visibility="visible",this._prevButtonAnimation=this._fadeInFromCurrentValue(this._prevButton)))},_fadeOutButton:function(e){var t=this;return"next"===e?(this._nextButtonAnimation&&(this._nextButtonAnimation.cancel(),this._nextButtonAnimation=null),this._nextButtonAnimation=a.fadeOut(this._nextButton).then(function(){t._nextButton.style.visibility="hidden"}),this._nextButtonAnimation):(this._prevButtonAnimation&&(this._prevButtonAnimation.cancel(),this._prevButtonAnimation=null),this._prevButtonAnimation=a.fadeOut(this._prevButton).then(function(){t._prevButton.style.visibility="hidden"}),this._prevButtonAnimation)},_fadeOutButtons:function(e){if(this._environmentSupportsTouch){this._buttonFadePromise&&(this._buttonFadePromise.cancel(),this._buttonFadePromise=null);var t=this;this._buttonFadePromise=(e?c.wrap():c.timeout(l._animationTimeAdjustment(P))).then(function(){t._fadeOutButton("prev"),t._fadeOutButton("next"),t._buttonFadePromise=null})}},_animationsStarted:function(){this._animating=!0},_animationsFinished:function(){this._animating=!1},_defaultAnimation:function(e,t){var n={};t.style.left="0px",t.style.top="0px",t.style.opacity=0;var i=e.itemIndex>t.itemIndex?-R:R;n.left=(this._isHorizontal?this._rtl?-i:i:0)+"px",n.top=(this._isHorizontal?0:i)+"px";var r=a.fadeOut(e),s=a.enterContent(t,[n],{mechanism:"transition"});return c.join([r,s])},_fadeInFromCurrentValue:function(e){return l.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:1})}},v);return t.Class.mix(N,r.createEventProperties(N.datasourceCountChangedEvent,N.pageVisibilityChangedEvent,N.pageSelectedEvent,N.pageCompletedEvent)),t.Class.mix(N,d.DOMEventMixin),N})})}),i("WinJS/Controls/ItemContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","../Utilities/_UI","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v){"use strict";var y=s._createEventProperty,b={invoked:"invoked",selectionchanging:"selectionchanging",selectionchanged:"selectionchanged"};n.Namespace._moduleDefine(e,"WinJS.UI",{ItemContainer:n.Namespace._lazy(function(){var s={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},a=n.Class.define(function(n,i){function o(e,t,n){return{name:t?e:e.toLowerCase(),handler:function(t){l["_on"+e](t)},capture:n}}if(n=n||t.document.createElement("DIV"),this._id=n.id||p._uniqueID(n),this._writeProfilerMark("constructor,StartTM"),i=i||{},n.winControl)throw new r("WinJS.UI.ItemContainer.DuplicateConstruction",s.duplicateConstruction);n.winControl=this,this._element=n,p.addClass(n,"win-disposable"),this._selectionMode=_.SelectionMode.single,this._draggable=!1,this._pressedEntity={type:_.ObjectType.item,index:g._INVALID_INDEX},this.tapBehavior=_.TapBehavior.invokeOnly,this.swipeOrientation=_.Orientation.vertical,this.swipeBehavior=_.SwipeBehavior.select,p.addClass(this.element,a._ClassName.itemContainer+" "+g._containerClass),this._setupInternalTree(),this._selection=new e._SingleItemSelectionManager(n,this._itemBox),this._setTabIndex(),h.setOptions(this,i),this._mutationObserver=new p._MutationObserver(this._itemPropertyChange.bind(this)),this._mutationObserver.observe(n,{attributes:!0,attributeFilter:["aria-selected"]}),this._setAriaRole();var l=this;this.selectionDisabled||c.schedule(function(){l._setDirectionClass()},c.Priority.normal,null,"WinJS.UI.ItemContainer_async_initialize"),this._itemEventsHandler=new v._ItemEventsHandler(Object.create({containerFromElement:function(){return l.element},indexForItemElement:function(){return 1},indexForHeaderElement:function(){return g._INVALID_INDEX},itemBoxAtIndex:function(){return l._itemBox},itemAtIndex:function(){return l.element},headerAtIndex:function(){return null},containerAtIndex:function(){return l.element},isZombie:function(){return this._disposed},getItemPosition:function(){return l._getItemPosition()},rtl:function(){return l._rtl()},fireInvokeEvent:function(){l._fireInvokeEvent()},verifySelectionAllowed:function(){return l._verifySelectionAllowed()},changeFocus:function(){},selectRange:function(e,t){return l._selection.set({firstIndex:e,lastIndex:t})}},{pressedEntity:{get:function(){return l._pressedEntity},set:function(e){l._pressedEntity=e}},pressedElement:{enumerable:!0,set:function(e){l._pressedElement=e}},eventHandlerRoot:{enumerable:!0,get:function(){return l.element}},swipeBehavior:{enumerable:!0,get:function(){return l._swipeBehavior}},selectionMode:{enumerable:!0,get:function(){return l._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return g._containerClass}},canvasProxy:{enumerable:!0,get:function(){return l._captureProxy}},tapBehavior:{enumerable:!0,get:function(){return l._tapBehavior}},draggable:{enumerable:!0,get:function(){return l._draggable}},selection:{enumerable:!0,get:function(){return l._selection}},horizontal:{enumerable:!0,get:function(){return l._swipeOrientation===_.Orientation.vertical}},customFootprintParent:{enumerable:!0,get:function(){return null}},skipPreventDefaultOnPointerDown:{enumerable:!0,get:function(){return!0}}}));var u=[o("MSManipulationStateChanged",!0,!0),o("PointerDown"),o("Click"),o("PointerUp"),o("PointerCancel"),o("LostPointerCapture"),o("ContextMenu"),o("MSHoldVisual",!0),o("FocusIn"),o("FocusOut"),o("DragStart"),o("DragEnd"),o("KeyDown")];u.forEach(function(e){p._addEventListener(l.element,e.name,e.handler,!!e.capture)}),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},draggable:{get:function(){return this._draggable},set:function(e){i.isPhone||this._draggable!==e&&(this._draggable=e,this._updateDraggableAttribute())}},selected:{get:function(){return this._selection.selected},set:function(e){this._selection.selected!==e&&(this._selection.selected=e)}},swipeOrientation:{get:function(){return this._swipeOrientation},set:function(e){e===_.Orientation.vertical?(p.removeClass(this.element,a._ClassName.horizontal),p.addClass(this.element,a._ClassName.vertical)):(e=_.Orientation.horizontal,p.removeClass(this.element,a._ClassName.vertical),p.addClass(this.element,a._ClassName.horizontal)),this._swipeOrientation=e}},tapBehavior:{get:function(){return this._tapBehavior},set:function(e){i.isPhone&&e===_.TapBehavior.directSelect||(this._tapBehavior=e,this._setAriaRole())}},swipeBehavior:{get:function(){return this._swipeBehavior},set:function(e){this._swipeBehavior=e,this._setSwipeClass()}},selectionDisabled:{get:function(){return this._selectionMode===_.SelectionMode.none},set:function(e){e?this._selectionMode=_.SelectionMode.none:(this._setDirectionClass(),this._selectionMode=_.SelectionMode.single),this._setSwipeClass(),this._setAriaRole()}},oninvoked:y(b.invoked),onselectionchanging:y(b.selectionchanging),onselectionchanged:y(b.selectionchanged),forceLayout:function(){this._forceLayout()},dispose:function(){this._disposed||(this._disposed=!0,this._itemEventsHandler.dispose(),d.disposeSubTree(this.element))},_onMSManipulationStateChanged:function(e){this._itemEventsHandler.onMSManipulationStateChanged(e)},_onPointerDown:function(e){this._itemEventsHandler.onPointerDown(e)},_onClick:function(e){this._itemEventsHandler.onClick(e)},_onPointerUp:function(e){p.hasClass(this._itemBox,g._itemFocusClass)&&this._onFocusOut(e),this._itemEventsHandler.onPointerUp(e)},_onPointerCancel:function(e){this._itemEventsHandler.onPointerCancel(e)},_onLostPointerCapture:function(e){this._itemEventsHandler.onLostPointerCapture(e)},_onContextMenu:function(e){this._itemEventsHandler.onContextMenu(e)},_onMSHoldVisual:function(e){this._itemEventsHandler.onMSHoldVisual(e)},_onFocusIn:function(){if(!this._itemBox.querySelector("."+g._itemFocusOutlineClass)&&f._keyboardSeenLast){p.addClass(this._itemBox,g._itemFocusClass);var e=t.document.createElement("div");e.className=g._itemFocusOutlineClass,this._itemBox.appendChild(e)}},_onFocusOut:function(){p.removeClass(this._itemBox,g._itemFocusClass);var e=this._itemBox.querySelector("."+g._itemFocusOutlineClass);e&&e.parentNode.removeChild(e)},_onDragStart:function(e){if(this._pressedElement&&this._itemEventsHandler._isInteractive(this._pressedElement))e.preventDefault();else{this._dragging=!0;var t=this;if(e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage){var n=this.element.getBoundingClientRect();e.dataTransfer.setDragImage(this.element,e.clientX-n.left,e.clientY-n.top)}i._yieldForDomModification(function(){t._dragging&&p.addClass(t._itemBox,g._dragSourceClass)})}},_onDragEnd:function(){this._dragging=!1,p.removeClass(this._itemBox,g._dragSourceClass),this._itemEventsHandler.resetPointerDownState()},_onKeyDown:function(e){if(!this._itemEventsHandler._isInteractive(e.target)){var t=p.Key,n=e.keyCode,i=this._swipeBehavior===_.SwipeBehavior.select,r=!1;if(e.ctrlKey||n!==t.enter)e.ctrlKey&&n===t.enter||i&&e.shiftKey&&n===t.F10||i&&n===t.menu||n===t.space?this.selectionDisabled||(this.selected=!this.selected,r=p._setActive(this.element)):n===t.escape&&this.selected&&(this.selected=!1,r=!0);else{var s=this._verifySelectionAllowed();s.canTapSelect&&(this.selected=!this.selected),this._fireInvokeEvent(),r=!0}r&&(e.stopPropagation(),e.preventDefault())}},_setTabIndex:function(){var e=this.element.getAttribute("tabindex");e||this.element.setAttribute("tabindex","0")},_rtl:function(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===t.getComputedStyle(this.element,null).direction),this._cachedRTL},_setDirectionClass:function(){p[this._rtl()?"addClass":"removeClass"](this.element,g._rtlListViewClass)},_forceLayout:function(){this._cachedRTL="rtl"===t.getComputedStyle(this.element,null).direction,this._setDirectionClass()},_getItemPosition:function(){var e=this.element;return e?u.wrap({left:this._rtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft,top:e.offsetTop,totalWidth:p.getTotalWidth(e),totalHeight:p.getTotalHeight(e),contentWidth:p.getContentWidth(e),contentHeight:p.getContentHeight(e)}):u.cancel},_itemPropertyChange:function(e){if(!this._disposed){var t=e[0].target,n="true"===t.getAttribute("aria-selected");n!==p._isSelectionRendered(this._itemBox)&&(this.selectionDisabled?p._setAttribute(t,"aria-selected",!n):(this.selected=n,n!==this.selected&&p._setAttribute(t,"aria-selected",!n)))}},_setSwipeClass:function(){i.isPhone||(this._swipeBehavior===_.SwipeBehavior.select&&this._selectionMode!==_.SelectionMode.none||this._draggable?p.addClass(this._element,g._swipeableClass):p.removeClass(this._element,g._swipeableClass))},_updateDraggableAttribute:function(){this._setSwipeClass(),this._itemBox.setAttribute("draggable",this._draggable)},_verifySelectionAllowed:function(){if(this._selectionMode===_.SelectionMode.none||this._tapBehavior!==_.TapBehavior.toggleSelect&&this._swipeBehavior!==_.SwipeBehavior.select)return{canSelect:!1,canTapSelect:!1};var e=this._selection.fireSelectionChanging();return{canSelect:e,canTapSelect:e&&this._tapBehavior===_.TapBehavior.toggleSelect}},_setupInternalTree:function(){var e=t.document.createElement("div");e.className=g._itemClass,this._captureProxy=t.document.createElement("div"),this._itemBox=t.document.createElement("div"),this._itemBox.className=g._itemBoxClass;for(var n=this.element.firstChild;n;){var i=n.nextSibling;e.appendChild(n),n=i}this.element.appendChild(this._itemBox),this._itemBox.appendChild(e),this.element.appendChild(this._captureProxy)},_fireInvokeEvent:function(){if(this.tapBehavior!==_.TapBehavior.none){var e=t.document.createEvent("CustomEvent");e.initCustomEvent(b.invoked,!0,!1,{}),this.element.dispatchEvent(e)}},_setAriaRole:function(){if(!this.element.getAttribute("role")||this._usingDefaultItemRole){this._usingDefaultItemRole=!0;var e;e=this.tapBehavior===_.TapBehavior.none&&this.selectionDisabled?"listitem":"option",p._setAttribute(this.element,"role",e)}},_writeProfilerMark:function(e){var t="WinJS.UI.ItemContainer:"+this._id+":"+e;l(t),o.log&&o.log(t,null,"itemcontainerprofiler")}},{_ClassName:{itemContainer:"win-itemcontainer",vertical:"win-vertical",horizontal:"win-horizontal"}});return n.Class.mix(a,h.DOMEventMixin),a}),_SingleItemSelectionManager:n.Namespace._lazy(function(){return n.Class.define(function(e,t){this._selected=!1,this._element=e,this._itemBox=t},{selected:{get:function(){return this._selected},set:function(e){e=!!e,this._selected!==e&&this.fireSelectionChanging()&&(this._selected=e,v._ItemEventsHandler.renderSelection(this._itemBox,this._element,e,!0,this._element),this.fireSelectionChanged())}},count:function(){return this._selected?1:0},getIndices:function(){},getItems:function(){},getRanges:function(){},isEverything:function(){return!1},set:function(){this.selected=!0},clear:function(){this.selected=!1},add:function(){this.selected=!0},remove:function(){this.selected=!1},selectAll:function(){},fireSelectionChanging:function(){var e=t.document.createEvent("CustomEvent");return e.initCustomEvent(b.selectionchanging,!0,!0,{}),this._element.dispatchEvent(e)},fireSelectionChanged:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent(b.selectionchanged,!0,!1,{}),this._element.dispatchEvent(e)},_isIncluded:function(){return this._selected},_getFocused:function(){return{type:_.ObjectType.item,index:g._INVALID_INDEX}}})})})}),i("WinJS/Controls/Repeater",["exports","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../BindingList","../BindingTemplate","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{Repeater:n.Namespace._lazy(function(){function e(e){var n=t.document.createElement("div");return n.textContent=JSON.stringify(e),n}var s="itemsloaded",p="itemchanging",m="itemchanged",f="iteminserting",_="iteminserted",g="itemmoving",v="itemmoved",y="itemremoving",b="itemremoved",w="itemsreloading",C="itemsreloaded",x=r._createEventProperty,S={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get asynchronousRender(){return"Top level items must render synchronously"},get repeaterReentrancy(){return"Cannot modify Repeater data until Repeater has commited previous modification."}},I=n.Class.define(function(e,n){if(e&&e.winControl)throw new i("WinJS.UI.Repeater.DuplicateConstruction",S.duplicateConstruction);this._element=e||t.document.createElement("div"),this._id=this._element.id||d._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),n=n||{},d.addClass(this._element,"win-repeater win-disposable"),this._render=null,this._modifying=!1,this._disposed=!1,this._element.winControl=this,this._dataListeners={itemchanged:this._dataItemChangedHandler.bind(this),iteminserted:this._dataItemInsertedHandler.bind(this),itemmoved:this._dataItemMovedHandler.bind(this),itemremoved:this._dataItemRemovedHandler.bind(this),reload:this._dataReloadHandler.bind(this)};
var r=this._extractInlineTemplate();this._initializing=!0,this.template=n.template||r,this.data=n.data,this._initializing=!1,c._setOptions(this,n,!0),this._repeatedDOM=[],this._renderAllItems(),this.dispatchEvent(s,{}),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},data:{get:function(){return this._data},set:function(e){this._writeProfilerMark("data.set,StartTM"),this._data&&this._removeDataListeners(),this._data=e||new a.List,this._addDataListeners(),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent(s,{})),this._writeProfilerMark("data.set,StopTM")}},template:{get:function(){return this._template},set:function(t){this._writeProfilerMark("template.set,StartTM"),this._template=t||e,this._render=d._syncRenderer(this._template,this.element.tagName),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent(s,{})),this._writeProfilerMark("template.set,StopTM")}},length:{get:function(){return this._repeatedDOM.length}},elementFromIndex:function(e){return this._repeatedDOM[e]},dispose:function(){if(!this._disposed){this._disposed=!0,this._removeDataListeners(),this._data=null,this._template=null;for(var e=0,t=this._repeatedDOM.length;t>e;e++)h._disposeElement(this._repeatedDOM[e])}},onitemsloaded:x(s),onitemchanging:x(p),onitemchanged:x(m),oniteminserting:x(f),oniteminserted:x(_),onitemmoving:x(g),onitemmoved:x(v),onitemremoving:x(y),onitemremoved:x(b),onitemsreloading:x(w),onitemsreloaded:x(C),_extractInlineTemplate:function(){if(this._element.firstElementChild){for(var e=t.document.createElement(this._element.tagName);this._element.firstElementChild;)e.appendChild(this._element.firstElementChild);return new l.Template(e,{extractChild:!0})}},_renderAllItems:function(){for(var e=t.document.createDocumentFragment(),n=0,r=this._data.length;r>n;n++){var s=this._render(this._data.getAt(n));if(!s)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);e.appendChild(s),this._repeatedDOM.push(s)}this._element.appendChild(e)},_reloadRepeater:function(e){this._unloadRepeatedDOM(e),this._repeatedDOM=[],this._renderAllItems()},_unloadRepeatedDOM:function(e){for(var t=0,n=this._repeatedDOM.length;n>t;t++){var i=this._repeatedDOM[t];e&&h._disposeElement(i),i.parentElement===this._element&&this._element.removeChild(i)}},_addDataListeners:function(){Object.keys(this._dataListeners).forEach(function(e){this._data.addEventListener(e,this._dataListeners[e],!1)}.bind(this))},_beginModification:function(){if(this._modifying)throw new i("WinJS.UI.Repeater.RepeaterModificationReentrancy",S.repeaterReentrancy);this._modifying=!0},_endModification:function(){this._modifying=!1},_removeDataListeners:function(){Object.keys(this._dataListeners).forEach(function(e){this._data.removeEventListener(e,this._dataListeners[e],!1)}.bind(this))},_dataItemChangedHandler:function(e){this._beginModification();var t,n=this._element,r=e.detail.index,s=this._render(e.detail.newValue);if(!s)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);this._repeatedDOM[r]&&(e.detail.oldElement=this._repeatedDOM[r]),e.detail.newElement=s,e.detail.setPromise=function(e){t=e},this._writeProfilerMark(p+",info"),this.dispatchEvent(p,e.detail);var o=null;r<this._repeatedDOM.length?(o=this._repeatedDOM[r],n.replaceChild(s,o),this._repeatedDOM[r]=s):(n.appendChild(s),this._repeatedDOM.push(s)),this._endModification(),this._writeProfilerMark(m+",info"),this.dispatchEvent(m,e.detail),o&&u.as(t).done(function(){h._disposeElement(o)}.bind(this))},_dataItemInsertedHandler:function(e){this._beginModification();var t=e.detail.index,n=this._render(e.detail.value);if(!n)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);var r=this._element;if(e.detail.affectedElement=n,this._writeProfilerMark(f+",info"),this.dispatchEvent(f,e.detail),t<this._repeatedDOM.length){var s=this._repeatedDOM[t];r.insertBefore(n,s)}else r.appendChild(n);this._repeatedDOM.splice(t,0,n),this._endModification(),this._writeProfilerMark(_+",info"),this.dispatchEvent(_,e.detail)},_dataItemMovedHandler:function(e){this._beginModification();var t=this._repeatedDOM[e.detail.oldIndex];if(e.detail.affectedElement=t,this._writeProfilerMark(g+",info"),this.dispatchEvent(g,e.detail),this._repeatedDOM.splice(e.detail.oldIndex,1)[0],t.parentNode.removeChild(t),e.detail.newIndex<this._data.length-1){var n=this._repeatedDOM[e.detail.newIndex];this._element.insertBefore(t,n),this._repeatedDOM.splice(e.detail.newIndex,0,t)}else this._repeatedDOM.push(t),this._element.appendChild(t);this._endModification(),this._writeProfilerMark(v+",info"),this.dispatchEvent(v,e.detail)},_dataItemRemovedHandler:function(e){this._beginModification();var t,n=this._repeatedDOM[e.detail.index],i={affectedElement:n,index:e.detail.index,item:e.detail.item};i.setPromise=function(e){t=e},this._writeProfilerMark(y+",info"),this.dispatchEvent(y,i),n.parentNode.removeChild(n),this._repeatedDOM.splice(e.detail.index,1),this._endModification(),this._writeProfilerMark(b+",info"),this.dispatchEvent(b,i),u.as(t).done(function(){h._disposeElement(n)}.bind(this))},_dataReloadHandler:function(){this._beginModification();var e,t=this._repeatedDOM.slice(0),n={affectedElements:t};n.setPromise=function(t){e=t},this._writeProfilerMark(w+",info"),this.dispatchEvent(w,n),this._reloadRepeater(!1);var i=this._repeatedDOM.slice(0);this._endModification(),this._writeProfilerMark(C+",info"),this.dispatchEvent(C,{affectedElements:i}),u.as(e).done(function(){for(var e=0,n=t.length;n>e;e++)h._disposeElement(t[e])}.bind(this))},_writeProfilerMark:function(e){o("WinJS.UI.Repeater:"+this._id+":"+e)}},{isDeclarativeControlContainer:!0});return n.Class.mix(I,c.DOMEventMixin),I})})}),i("WinJS/Controls/DatePicker",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_Select","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u){"use strict";n.Namespace.define("WinJS.UI",{DatePicker:n.Namespace._lazy(function(){function i(e,n,i){var r=t.Windows.Globalization.DateTimeFormatting;e=e?e:i;var s=new r.DateTimeFormatter(e);return n?new r.DateTimeFormatter(e,s.languages,s.geographicRegion,n,s.clock):s}function l(e,t,n){var r=y[e];r||(r=y[e]={});var s=r[t];s||(s=r[t]={});var o=s[n];return o||(o=s[n]={},o.formatter=i(e,t,n),o.years={}),o}function c(e,t,n,i,r,s){var o=l(e,t,n),a=o.years[s.year+"-"+s.era];return a||(a=o.formatter.format(s.getDateTime()),o.years[s.year+"-"+s.era]=a),a}function h(e,t,n,i){var r=l(e,t,n);return r.formatter.format(i.getDateTime())}function d(e,t,n,i){var r=l(e,t,n);return r.formatter.format(i.getDateTime())}function p(e){var n=t.Windows.Globalization,i=new n.Calendar;return e?new n.Calendar(i.languages,e,i.getClock()):i}function m(e,t){var n=0;if(e.era===t.era)n=t.year-e.year;else for(;e.era!==t.era||e.year!==t.year;)n++,e.addYears(1);return n}var f="day",_="{month.full}",g="year.full",v={get ariaLabel(){return s._getWinJSString("ui/datePicker").value},get selectDay(){return s._getWinJSString("ui/selectDay").value},get selectMonth(){return s._getWinJSString("ui/selectMonth").value},get selectYear(){return s._getWinJSString("ui/selectYear").value}},y={},b=n.Class.define(function(t,n){this._currentDate=new Date,this._minYear=this._currentDate.getFullYear()-100,this._maxYear=this._currentDate.getFullYear()+100,this._datePatterns={date:null,month:null,year:null},t=t||e.document.createElement("div"),a.addClass(t,"win-disposable"),t.winControl=this;var i=t.getAttribute("aria-label");i||t.setAttribute("aria-label",v.ariaLabel),this._init(t),o.setOptions(this,n)},{_information:null,_currentDate:null,_calendar:null,_disabled:!1,_dateElement:null,_dateControl:null,_monthElement:null,_monthControl:null,_minYear:null,_maxYear:null,_yearElement:null,_yearControl:null,_datePatterns:{date:null,month:null,year:null},_addAccessibilityAttributes:function(){this._domElement.setAttribute("role","group"),this._dateElement.setAttribute("aria-label",v.selectDay),this._monthElement.setAttribute("aria-label",v.selectMonth),this._yearElement.setAttribute("aria-label",v.selectYear)},_addControlsInOrder:function(){var e=this._domElement,t=this,n=0;t._information.order.forEach(function(i){switch(i){case"month":e.appendChild(t._monthElement),a.addClass(t._monthElement,"win-order"+n++);break;case"date":e.appendChild(t._dateElement),a.addClass(t._dateElement,"win-order"+n++);break;case"year":e.appendChild(t._yearElement),a.addClass(t._yearElement,"win-order"+n++)}})},_createControlElements:function(){this._monthElement=e.document.createElement("select"),this._monthElement.className="win-datepicker-month",this._dateElement=e.document.createElement("select"),this._dateElement.className="win-datepicker-date",this._yearElement=e.document.createElement("select"),this._yearElement.className="win-datepicker-year"},_createControls:function(){var e=this._information,t=e.getIndex(this.current);e.forceLanguage&&(this._domElement.setAttribute("lang",e.forceLanguage),this._domElement.setAttribute("dir",e.isRTL?"rtl":"ltr")),this._yearControl=new u._Select(this._yearElement,{dataSource:this._information.years,disabled:this.disabled,index:t.year}),this._monthControl=new u._Select(this._monthElement,{dataSource:this._information.months(t.year),disabled:this.disabled,index:t.month}),this._dateControl=new u._Select(this._dateElement,{dataSource:this._information.dates(t.year,t.month),disabled:this.disabled,index:t.date}),this._wireupEvents()},dispose:function(){},calendar:{get:function(){return this._calendar},set:function(e){this._calendar=e,this._setElement(this._domElement)}},current:{get:function(){var e=this._currentDate,t=e.getFullYear();return new Date(Math.max(Math.min(this.maxYear,t),this.minYear),e.getMonth(),e.getDate(),12,0,0,0)},set:function(e){var t;"string"==typeof e?(t=new Date(Date.parse(e)),t.setHours(12,0,0,0)):t=e;var n=this._currentDate;n!==t&&(this._currentDate=t,this._updateDisplay())}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled!==e&&(this._disabled=e,this._yearControl&&(this._monthControl.setDisabled(e),this._dateControl.setDisabled(e),this._yearControl.setDisabled(e)))}},datePattern:{get:function(){return this._datePatterns.date},set:function(e){this._datePatterns.date!==e&&(this._datePatterns.date=e,this._init())}},element:{get:function(){return this._domElement}},_setElement:function(e){this._domElement=this._domElement||e,this._domElement&&(a.empty(this._domElement),a.addClass(this._domElement,"win-datepicker"),this._updateInformation(),this._createControlElements(),this._addControlsInOrder(),this._createControls(),this._addAccessibilityAttributes())},minYear:{get:function(){return this._information.getDate({year:0,month:0,date:0}).getFullYear()},set:function(e){this._minYear!==e&&(this._minYear=e,e>this._maxYear&&(this._maxYear=e),this._updateInformation(),this._yearControl&&(this._yearControl.dataSource=this._information.years),this._updateDisplay())}},maxYear:{get:function(){var e={year:this._information.years.getLength()-1};return e.month=this._information.months(e.year).getLength()-1,e.date=this._information.dates(e.year,e.month).getLength()-1,this._information.getDate(e).getFullYear()},set:function(e){this._maxYear!==e&&(this._maxYear=e,e<this._minYear&&(this._minYear=e),this._updateInformation(),this._yearControl&&(this._yearControl.dataSource=this._information.years),this._updateDisplay())}},monthPattern:{get:function(){return this._datePatterns.month},set:function(e){this._datePatterns.month!==e&&(this._datePatterns.month=e,this._init())}},_updateInformation:function(){var e=new Date(this._minYear,0,1,12,0,0),t=new Date(this._maxYear,11,31,12,0,0);e.setFullYear(this._minYear),t.setFullYear(this._maxYear),this._information=b.getInformation(e,t,this._calendar,this._datePatterns)},_init:function(e){this._setElement(e)},_updateDisplay:function(){if(this._domElement&&this._yearControl){var e=this._information.getIndex(this.current);this._yearControl.index=e.year,this._monthControl.dataSource=this._information.months(e.year),this._monthControl.index=e.month,this._dateControl.dataSource=this._information.dates(e.year,e.month),this._dateControl.index=e.date}},_wireupEvents:function(){function e(){t._currentDate=t._information.getDate({year:t._yearControl.index,month:t._monthControl.index,date:t._dateControl.index},t._currentDate);var e=t._information.getIndex(t._currentDate);t._monthControl.dataSource=t._information.months(e.year),t._monthControl.index=e.month,t._dateControl.dataSource=t._information.dates(e.year,e.month),t._dateControl.index=e.date}var t=this;this._dateElement.addEventListener("change",e,!1),this._monthElement.addEventListener("change",e,!1),this._yearElement.addEventListener("change",e,!1)},yearPattern:{get:function(){return this._datePatterns.year},set:function(e){this._datePatterns.year!==e&&(this._datePatterns.year=e,this._init())}}},{_getInformationWinRT:function(e,t,n,i){function r(e){return new Date(Math.min(new Date(Math.max(u,e)),v))}i=i||{date:f,month:_,year:g};var s=p(n),o=p(n),a=p(n);s.setToMin();var u=s.getDateTime();s.setToMax();var v=s.getDateTime();s.hour=12,e=r(e),t=r(t),s.setDateTime(t);var y={year:s.year,era:s.era};s.setDateTime(e);var b=0;b=m(s,y)+1;var w=l("day month.full year",n).formatter,C=w.patterns[0],x=8207===C.charCodeAt(0),S=["date","month","year"],I={month:C.indexOf("{month"),date:C.indexOf("{day"),year:C.indexOf("{year")};S.sort(function(e,t){return I[e]<I[t]?-1:I[e]>I[t]?1:0});var E=function(){return{getLength:function(){return b},getValue:function(t){return s.setDateTime(e),s.addYears(t),c(i.year,n,g,i,S,s)}}}(),k=function(t){return o.setDateTime(e),o.addYears(t),{getLength:function(){return o.numberOfMonthsInThisYear},getValue:function(e){return o.month=o.firstMonthInThisYear,o.addMonths(e),h(i.month,n,_,o)}}},T=function(t,r){return a.setDateTime(e),a.addYears(t),a.month=a.firstMonthInThisYear,a.addMonths(r),a.day=a.firstDayInThisMonth,{getLength:function(){return a.numberOfDaysInThisMonth},getValue:function(e){return a.day=a.firstDayInThisMonth,a.addDays(e),d(i.date,n,f,a)}}};return{isRTL:x,forceLanguage:w.resolvedLanguage,order:S,getDate:function(t,n){var i;n&&(s.setDateTime(n),i={year:s.year,month:s.month,day:s.day});var r=s;r.setDateTime(e),r.addYears(t.year);var o;r.firstMonthInThisYear>r.lastMonthInThisYear?(o=t.month+r.firstMonthInThisYear>r.numberOfMonthsInThisYear?t.month+r.firstMonthInThisYear-r.numberOfMonthsInThisYear:t.month+r.firstMonthInThisYear,i&&i.year!==r.year&&(o=Math.max(Math.min(i.month,r.numberOfMonthsInThisYear),1))):o=i&&i.year!==r.year?Math.max(Math.min(i.month,r.firstMonthInThisYear+r.numberOfMonthsInThisYear-1),r.firstMonthInThisYear):Math.max(Math.min(t.month+r.firstMonthInThisYear,r.firstMonthInThisYear+r.numberOfMonthsInThisYear-1),r.firstMonthInThisYear),r.month=o;var a=Math.max(Math.min(t.date+r.firstDayInThisMonth,r.firstDayInThisMonth+r.numberOfDaysInThisMonth-1),r.firstDayInThisMonth);return!i||i.year===r.year&&i.month===r.month||(a=Math.max(Math.min(i.day,r.firstDayInThisMonth+r.numberOfDaysInThisMonth-1),r.firstDayInThisMonth)),r.day=r.firstDayInThisMonth,r.addDays(a-r.firstDayInThisMonth),r.getDateTime()},getIndex:function(t){var n=r(t);s.setDateTime(n);var i={year:s.year,era:s.era},o=0;s.setDateTime(e),s.month=1,o=m(s,i),s.setDateTime(n);var a=s.month-s.firstMonthInThisYear;0>a&&(a=s.month-s.firstMonthInThisYear+s.numberOfMonthsInThisYear);var l=s.day-s.firstDayInThisMonth,u={year:o,month:a,date:l};return u},years:E,months:k,dates:T}},_getInformationJS:function(e,t){var n=e.getFullYear(),i=t.getFullYear(),r={getLength:function(){return Math.max(0,i-n+1)},getValue:function(e){return n+e}},s=["January","February","March","April","May","June","July","August","September","October","November","December"],o=function(){return{getLength:function(){return s.length},getValue:function(e){return s[e]},getMonthNumber:function(e){return Math.min(e,s.length-1)}}},a=function(e,t){var n=new Date,i=r.getValue(e),s=t+1;n.setFullYear(i,s,0);var o=n.getDate();return{getLength:function(){return o},getValue:function(e){return""+(e+1)},getDateNumber:function(e){return Math.min(e+1,o)}}};return{order:["month","date","year"],getDate:function(e){return new Date(r.getValue(e.year),o(e.year).getMonthNumber(e.month),a(e.year,e.month).getDateNumber(e.date),12,0)},getIndex:function(e){var t=0,i=e.getFullYear();t=n>i?0:i>this.maxYear?r.getLength()-1:e.getFullYear()-n;var s=Math.min(e.getMonth(),o(t).getLength()),l=Math.min(e.getDate()-1,a(t,s).getLength());return{year:t,month:s,date:l}},years:r,months:o,dates:a}}});return b.getInformation=t.Windows.Globalization.Calendar&&t.Windows.Globalization.DateTimeFormatting?b._getInformationWinRT:b._getInformationJS,n.Class.mix(b,r.createEventProperties("change")),n.Class.mix(b,o.DOMEventMixin),b})})}),i("WinJS/Controls/TimePicker",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_Select","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u){"use strict";n.Namespace.define("WinJS.UI",{TimePicker:n.Namespace._lazy(function(){var i="{minute.integer(2)}",l="{hour.integer(1)}",c="{period.abbreviated(2)}",h={get ariaLabel(){return s._getWinJSString("ui/timePicker").value},get selectHour(){return s._getWinJSString("ui/selectHour").value},get selectMinute(){return s._getWinJSString("ui/selectMinute").value},get selectAMPM(){return s._getWinJSString("ui/selectAMPM").value}},d=function(e,t){return e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()},p=n.Class.define(function(t,n){this._currentTime=p._sentinelDate(),t=t||e.document.createElement("div"),a.addClass(t,"win-disposable"),t.winControl=this;var i=t.getAttribute("aria-label");i||t.setAttribute("aria-label",h.ariaLabel),this._timePatterns={minute:null,hour:null,period:null},this._init(t),o.setOptions(this,n)},{_currentTime:null,_clock:null,_disabled:!1,_hourElement:null,_hourControl:null,_minuteElement:null,_minuteControl:null,_ampmElement:null,_ampmControl:null,_minuteIncrement:1,_timePatterns:{minute:null,hour:null,period:null},_information:null,_addAccessibilityAttributes:function(){this._domElement.setAttribute("role","group"),this._hourElement.setAttribute("aria-label",h.selectHour),this._minuteElement.setAttribute("aria-label",h.selectMinute),this._ampmElement&&this._ampmElement.setAttribute("aria-label",h.selectAMPM)},_addControlsInOrder:function(e){var t=this;e.order.forEach(function(e,n){switch(e){case"hour":t._domElement.appendChild(t._hourElement),a.addClass(t._hourElement,"win-order"+n);break;case"minute":t._domElement.appendChild(t._minuteElement),a.addClass(t._minuteElement,"win-order"+n);break;case"period":t._ampmElement&&(t._domElement.appendChild(t._ampmElement),a.addClass(t._ampmElement,"win-order"+n))}})},dispose:function(){},clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._init())}},current:{get:function(){var e=this._currentTime;if(e){var t=p._sentinelDate();return t.setHours(e.getHours()),t.setMinutes(this._getMinutesIndex(e)*this.minuteIncrement),t.setSeconds(0),t.setMilliseconds(0),t}return e},set:function(e){var t;"string"==typeof e?(t=p._sentinelDate(),t.setTime(Date.parse(t.toDateString()+" "+e))):(t=p._sentinelDate(),t.setHours(e.getHours()),t.setMinutes(e.getMinutes()));var n=this._currentTime;d(n,t)||(this._currentTime=t,this._updateDisplay())}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled!==e&&(this._disabled=e,this._hourControl&&(this._hourControl.setDisabled(e),this._minuteControl.setDisabled(e)),this._ampmControl&&this._ampmControl.setDisabled(e))}},element:{get:function(){return this._domElement}},_init:function(e){this._setElement(e),this._updateDisplay()},hourPattern:{get:function(){return this._timePatterns.hour.pattern},set:function(e){this._timePatterns.hour!==e&&(this._timePatterns.hour=e,this._init())}},_getHoursAmpm:function(e){var t=e.getHours();return this._ampmElement?0===t?{hours:12,ampm:0}:12>t?{hours:t,ampm:0}:{hours:t-12,ampm:1}:{hours:t}},_getHoursIndex:function(e){return this._ampmElement&&12===e?0:e},_getMinutesIndex:function(e){return parseInt(e.getMinutes()/this.minuteIncrement)},minuteIncrement:{get:function(){return Math.max(1,Math.abs(0|this._minuteIncrement)%60)},set:function(e){this._minuteIncrement!==e&&(this._minuteIncrement=e,this._init())}},minutePattern:{get:function(){return this._timePatterns.minute.pattern},set:function(e){this._timePatterns.minute!==e&&(this._timePatterns.minute=e,this._init())}},periodPattern:{get:function(){return this._timePatterns.period.pattern},set:function(e){this._timePatterns.period!==e&&(this._timePatterns.period=e,this._init())}},_setElement:function(t){if(this._domElement=this._domElement||t,this._domElement){var n=p.getInformation(this.clock,this.minuteIncrement,this._timePatterns);this._information=n,n.forceLanguage&&(this._domElement.setAttribute("lang",n.forceLanguage),this._domElement.setAttribute("dir",n.isRTL?"rtl":"ltr")),a.empty(this._domElement),a.addClass(this._domElement,"win-timepicker"),this._hourElement=e.document.createElement("select"),a.addClass(this._hourElement,"win-timepicker-hour"),this._minuteElement=e.document.createElement("select"),a.addClass(this._minuteElement,"win-timepicker-minute"),this._ampmElement=null,"12HourClock"===n.clock&&(this._ampmElement=e.document.createElement("select"),a.addClass(this._ampmElement,"win-timepicker-period")),this._addControlsInOrder(n);var i=this._getHoursAmpm(this.current);this._hourControl=new u._Select(this._hourElement,{dataSource:this._getInfoHours(),disabled:this.disabled,index:this._getHoursIndex(i.hours)}),this._minuteControl=new u._Select(this._minuteElement,{dataSource:n.minutes,disabled:this.disabled,index:this._getMinutesIndex(this.current)}),this._ampmControl=null,this._ampmElement&&(this._ampmControl=new u._Select(this._ampmElement,{dataSource:n.periods,disabled:this.disabled,index:i.ampm})),this._wireupEvents(),this._updateValues(),this._addAccessibilityAttributes()}},_getInfoHours:function(){return this._information.hours},_updateLayout:function(){this._domElement&&this._updateValues()},_updateValues:function(){if(this._hourControl){var e=this._getHoursAmpm(this.current);this._ampmControl&&(this._ampmControl.index=e.ampm),this._hourControl.index=this._getHoursIndex(e.hours),this._minuteControl.index=this._getMinutesIndex(this.current)}},_updateDisplay:function(){var e=this._getHoursAmpm(this.current);this._ampmControl&&(this._ampmControl.index=e.ampm),this._hourControl&&(this._hourControl.index=this._getHoursIndex(e.hours),this._minuteControl.index=this._getMinutesIndex(this.current))},_wireupEvents:function(){var e=this,t=function(){var t=e._hourControl.index;return e._ampmElement&&1===e._ampmControl.index&&12!==t&&(t+=12),t},n=function(){var n=t();e._currentTime.setHours(n),e._currentTime.setMinutes(e._minuteControl.index*e.minuteIncrement)};this._hourElement.addEventListener("change",n,!1),this._minuteElement.addEventListener("change",n,!1),this._ampmElement&&this._ampmElement.addEventListener("change",n,!1)}},{_sentinelDate:function(){var e=new Date;return new Date(2011,6,15,e.getHours(),e.getMinutes())},_getInformationWinRT:function(e,n,r){var s=function(n,i){var r=t.Windows.Globalization.DateTimeFormatting;n=n?n:i;var s=new r.DateTimeFormatter(n);return e&&(s=r.DateTimeFormatter(n,s.languages,s.geographicRegion,s.calendar,e)),s},o=t.Windows.Globalization,a=new o.Calendar;e&&(a=new o.Calendar(a.languages,a.getCalendarSystem(),e)),a.setDateTime(p._sentinelDate());var u=a.getClock(),h=24;h=a.numberOfHoursInThisPeriod;var d=function(){var e=s(r.period,c);return{getLength:function(){return 2},getValue:function(t){var n=p._sentinelDate();if(0===t){n.setHours(1);var i=e.format(n);return i}if(1===t){n.setHours(13);var r=e.format(n);return r}return null}}}(),m=function(){var e=s(r.minute,i),t=p._sentinelDate();return{getLength:function(){return 60/n},getValue:function(i){var r=i*n;return t.setMinutes(r),e.format(t)}}}(),f=function(){var e=s(r.hour,l),t=p._sentinelDate();return{getLength:function(){return h},getValue:function(n){return t.setHours(n),e.format(t)}}}(),_=s("hour minute"),g=_.patterns[0],v=["hour","minute"],y={period:g.indexOf("{period"),hour:g.indexOf("{hour"),minute:g.indexOf("{minute")};y.period>-1&&v.push("period");var b=t.Windows.Globalization.DateTimeFormatting.DateTimeFormatter,w=new b("month.full",t.Windows.Globalization.ApplicationLanguages.languages,"ZZ","GregorianCalendar","24HourClock"),C=w.patterns[0],x=8207===C.charCodeAt(0);if(x){var S=y.hour;y.hour=y.minute,y.minute=S}return v.sort(function(e,t){return y[e]<y[t]?-1:y[e]>y[t]?1:0}),{minutes:m,hours:f,clock:u,periods:d,order:v,forceLanguage:_.resolvedLanguage,isRTL:x}},_getInformationJS:function(e,t){var n=[12,1,2,3,4,5,6,7,8,9,10,11],i={};i.getLength=function(){return 60/t},i.getValue=function(e){var n=e*t;return 10>n?"0"+n.toString():n.toString()};var r=["hour","minute","period"];return"24HourClock"===e&&(n=["00","01","02","03","04","05","06","07","08","09",10,11,12,13,14,15,16,17,18,19,20,21,22,23],r=["hour","minute"]),{minutes:i,hours:n,clock:e||"12HourClock",periods:["AM","PM"],order:r}}});return p.getInformation=t.Windows.Globalization.DateTimeFormatting&&t.Windows.Globalization.Calendar&&t.Windows.Globalization.ApplicationLanguages?p._getInformationWinRT:p._getInformationJS,n.Class.mix(p,r.createEventProperties("change")),n.Class.mix(p,o.DOMEventMixin),p})})}),i("WinJS/Controls/BackButton",["../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources","../Navigation","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o){"use strict";var a=o.Key,l="win-navigation-backbutton",u="win-back",c=3,h=function(){function t(){e.addEventListener("keyup",i,!1),o._addEventListener(e,"pointerup",s,!1)}function n(){e.removeEventListener("keyup",i,!1),o._removeEventListener(e,"pointerup",s,!1)}function i(e){(e.keyCode===a.leftArrow&&e.altKey&&!e.shiftKey&&!e.ctrlKey||e.keyCode===a.browserBack)&&r.back()}function s(e){e.button===c&&r.back()}var l=0;return{addRef:function(){0===l&&t(),l++},release:function(){l>0&&(l--,0===l&&n())},getCount:function(){return l}}}();t.Namespace.define("WinJS.UI",{BackButton:t.Namespace._lazy(function(){var a={get ariaLabel(){return i._getWinJSString("ui/backbuttonarialabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"}},c=t.Class.define(function(t,i){if(t&&t.winControl)throw new n("WinJS.UI.BackButton.DuplicateConstruction",a.duplicateConstruction);this._element=t||e.document.createElement("button"),i=i||{},this._initializeButton(),this._disposed=!1,this._element.winControl=this,s.setOptions(this,i),this._buttonClickHandler=this._handleBackButtonClick.bind(this),this._element.addEventListener("click",this._buttonClickHandler,!1),this._navigatedHandler=this._handleNavigatedEvent.bind(this),r.addEventListener("navigated",this._navigatedHandler,!1),h.addRef()},{element:{get:function(){return this._element}},dispose:function(){this._disposed||(this._disposed=!0,r.removeEventListener("navigated",this._navigatedHandler,!1),h.release())},refresh:function(){this._element.disabled=r.canGoBack?!1:!0},_initializeButton:function(){if("BUTTON"!==this._element.tagName)throw new n("WinJS.UI.BackButton.BadButtonElement",a.badButtonElement);o.addClass(this._element,l),o.addClass(this._element,"win-disposable"),this._element.innerHTML='<span class="'+u+'"></span>',this.refresh(),this._element.setAttribute("aria-label",a.ariaLabel),this._element.setAttribute("title",a.ariaLabel),this._element.setAttribute("type","button")},_handleNavigatedEvent:function(){this.refresh()},_handleBackButtonClick:function(){r.back()}});return c._getReferenceCount=function(){return h.getCount()},t.Class.mix(c,s.DOMEventMixin),c})})}),i("WinJS/Controls/Tooltip",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Animations","../Animations/_TransitionAnimation","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{Tooltip:i.Namespace._lazy(function(){function e(e,t){return"pointerdown"===e?t===O:e in D}function h(e,t){return"pointerdown"===e?t!==O:e in R}var d=0,p=c.Key,m="top",f=a._animationTimeAdjustment(400),_=a._animationTimeAdjustment(1200),g=a._animationTimeAdjustment(400),v=a._animationTimeAdjustment(5e3),y=a._animationTimeAdjustment(0),b=a._animationTimeAdjustment(600),w=a._animationTimeAdjustment(400),C=a._animationTimeAdjustment(600),x=a._animationTimeAdjustment(200),S=a._animationTimeAdjustment(3e5),I=12,E=20,k=45,T=20,P=12,A=1,M=c._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",O=c._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",D={keyup:"",pointerover:"",pointerdown:""},L={pointermove:""},R={pointerdown:"",keydown:"",focusout:"",pointerout:"",pointercancel:"",pointerup:""},B={pointerover:"",pointerout:""},N="win-tooltip",F="win-tooltip-phantom",z=g,H=2*z,W=2.5*z,V=v,j=!1,U=!1,q=s._createEventProperty;return i.Class.define(function(e,i){e=e||t.document.createElement("div");var r=c.data(e).tooltip;if(r)return r;if(!U&&n.Windows.UI.ViewManagement.UISettings){var s=new n.Windows.UI.ViewManagement.UISettings;z=a._animationTimeAdjustment(s.mouseHoverTime),H=2*z,W=2.5*z,V=a._animationTimeAdjustment(1e3*s.messageDuration);var o=s.handPreference;j=o===n.Windows.UI.ViewManagement.HandPreference.leftHanded}U=!0,this._disposed=!1,this._placement=m,this._infotip=!1,this._innerHTML=null,this._contentElement=null,this._extraClass=null,this._lastContentType="html",this._anchorElement=e,this._domElement=null,this._phantomDiv=null,this._triggerByOpen=!1,this._eventListenerRemoveStack=[],this._lastKeyOrBlurEvent=null,this._currentKeyOrBlurEvent=null,e.winControl=this,c.addClass(e,"win-disposable"),e.title&&(this._innerHTML=this._anchorElement.title,this._anchorElement.removeAttribute("title")),l.setOptions(this,i),this._events(),c.data(e).tooltip=this},{innerHTML:{get:function(){return this._innerHTML},set:function(e){if(this._innerHTML=e,this._domElement){if(!this._innerHTML||""===this._innerHTML)return void this._onDismiss();this._domElement.innerHTML=e,this._position()}this._lastContentType="html"}},element:{get:function(){return this._anchorElement}},contentElement:{get:function(){return this._contentElement},set:function(e){if(this._contentElement=e,this._domElement){if(!this._contentElement)return void this._onDismiss();this._domElement.innerHTML="",this._domElement.appendChild(this._contentElement),this._position()}this._lastContentType="element"}},placement:{get:function(){return this._placement},set:function(e){"top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e&&(e=m),this._placement=e,this._domElement&&this._position()}},infotip:{get:function(){return this._infotip},set:function(e){this._infotip=!!e}},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass=e}},onbeforeopen:q("beforeopen"),onopened:q("opened"),onbeforeclose:q("beforeclose"),onclosed:q("closed"),dispose:function(){if(!this._disposed){this._disposed=!0,u.disposeSubTree(this.element);for(var e=0,t=this._eventListenerRemoveStack.length;t>e;e++)this._eventListenerRemoveStack[e]();
this._onDismiss();var n=c.data(this._anchorElement);n&&delete n.tooltip}},addEventListener:function(e,t,n){if(this._anchorElement){this._anchorElement.addEventListener(e,t,n);var i=this;this._eventListenerRemoveStack.push(function(){i._anchorElement.removeEventListener(e,t,n)})}},removeEventListener:function(e,t,n){this._anchorElement&&this._anchorElement.removeEventListener(e,t,n)},open:function(e){switch(this._triggerByOpen=!0,"touch"!==e&&"mouseover"!==e&&"mousedown"!==e&&"keyboard"!==e&&(e="default"),e){case"touch":this._onInvoke("touch","never");break;case"mouseover":this._onInvoke("mouse","auto");break;case"keyboard":this._onInvoke("keyboard","auto");break;case"mousedown":case"default":this._onInvoke("nodelay","never")}},close:function(){this._onDismiss()},_cleanUpDOM:function(){this._domElement&&(u.disposeSubTree(this._domElement),t.document.body.removeChild(this._domElement),this._domElement=null,t.document.body.removeChild(this._phantomDiv),this._phantomDiv=null)},_createTooltipDOM:function(){this._cleanUpDOM(),this._domElement=t.document.createElement("div");var e=c._uniqueID(this._domElement);this._domElement.setAttribute("id",e);var n=t.document.defaultView.getComputedStyle(this._anchorElement,null),i=this._domElement.style;i.direction=n.direction,i.writingMode=n["writing-mode"],this._domElement.setAttribute("tabindex",-1),this._domElement.setAttribute("role","tooltip"),this._anchorElement.setAttribute("aria-describedby",e),"element"===this._lastContentType?this._domElement.appendChild(this._contentElement):this._domElement.innerHTML=this._innerHTML,t.document.body.appendChild(this._domElement),c.addClass(this._domElement,N),this._extraClass&&c.addClass(this._domElement,this._extraClass),this._phantomDiv=t.document.createElement("div"),this._phantomDiv.setAttribute("tabindex",-1),t.document.body.appendChild(this._phantomDiv),c.addClass(this._phantomDiv,F);var r=t.document.defaultView.getComputedStyle(this._domElement,null).zIndex+1;this._phantomDiv.style.zIndex=r},_raiseEvent:function(e,n){if(this._anchorElement){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!1,!1,n),this._anchorElement.dispatchEvent(i)}},_captureLastKeyBlurOrPointerOverEvent:function(e){switch(this._lastKeyOrBlurEvent=this._currentKeyOrBlurEvent,e.type){case"keyup":this._currentKeyOrBlurEvent=e.keyCode===p.shift?null:"keyboard";break;case"focusout":this._currentKeyOrBlurEvent=null}},_registerEventToListener:function(e,t){var n=this,i=function(e){n._captureLastKeyBlurOrPointerOverEvent(e),n._handleEvent(e)};c._addEventListener(e,t,i,!1),this._eventListenerRemoveStack.push(function(){c._removeEventListener(e,t,i,!1)})},_events:function(){for(var e in D)this._registerEventToListener(this._anchorElement,e);for(var e in L)this._registerEventToListener(this._anchorElement,e);for(e in R)this._registerEventToListener(this._anchorElement,e);this._registerEventToListener(this._anchorElement,"contextmenu"),this._registerEventToListener(this._anchorElement,"MSHoldVisual")},_handleEvent:function(t){var n=t._normalizedType||t.type;if(!this._triggerByOpen){if(n in B&&c.eventWithinElement(this._anchorElement,t))return;if(e(n,t.pointerType))if(t.pointerType===O)this._isShown||(this._showTrigger="touch"),this._onInvoke("touch","never",t);else{if(this._skipMouseOver&&t.pointerType===M&&"pointerover"===n)return void(this._skipMouseOver=!1);var i="key"===n.substring(0,3)?"keyboard":"mouse";this._isShown||(this._showTrigger=i),this._onInvoke(i,"auto",t)}else if(n in L)this._contactPoint={x:t.clientX,y:t.clientY};else if(h(n,t.pointerType)){var s;if(t.pointerType===O){if("pointerup"===n){this._skipMouseOver=!0;var o=this;r._yieldForEvents(function(){o._skipMouseOver=!1})}s="touch"}else s="key"===n.substring(0,3)?"keyboard":"mouse";if("focusout"!==n&&s!==this._showTrigger)return;this._onDismiss()}else("contextmenu"===n||"MSHoldVisual"===n)&&t.preventDefault()}},_onShowAnimationEnd:function(){if(!this._shouldDismiss&&!this._disposed&&(this._raiseEvent("opened"),this._domElement&&"never"!==this._hideDelay)){var e=this,t=this._infotip?Math.min(3*V,S):V;this._hideDelayTimer=this._setTimeout(function(){e._onDismiss()},t)}},_onHideAnimationEnd:function(){t.document.body.removeEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._cleanUpDOM(),this._anchorElement&&this._anchorElement.removeAttribute("aria-describedby"),d=(new Date).getTime(),this._triggerByOpen=!1,this._disposed||this._raiseEvent("closed")},_decideOnDelay:function(e){var t;if(this._useAnimation=!0,"nodelay"===e)t=0,this._useAnimation=!1;else{var n=(new Date).getTime();x>=n-d?(t="touch"===e?this._infotip?w:y:this._infotip?C:b,this._useAnimation=!1):t="touch"===e?this._infotip?_:f:this._infotip?W:H}return t},_getAnchorPositionFromElementWindowCoord:function(){var e=this._anchorElement.getBoundingClientRect();return{x:e.left,y:e.top,width:e.width,height:e.height}},_getAnchorPositionFromPointerWindowCoord:function(e){return{x:e.x,y:e.y,width:1,height:1}},_canPositionOnSide:function(e,t,n,i){var r=0,s=0;switch(e){case"top":r=i.width+this._offset,s=n.y;break;case"bottom":r=i.width+this._offset,s=t.height-n.y-n.height;break;case"left":r=n.x,s=i.height+this._offset;break;case"right":r=t.width-n.x-n.width,s=i.height+this._offset}return r>=i.width+this._offset&&s>=i.height+this._offset},_positionOnSide:function(e,t,n,i){var r=0,s=0;switch(e){case"top":case"bottom":r=n.x+n.width/2-i.width/2,r=Math.min(Math.max(r,0),t.width-i.width-A),s="top"===e?n.y-i.height-this._offset:n.y+n.height+this._offset;break;case"left":case"right":s=n.y+n.height/2-i.height/2,s=Math.min(Math.max(s,0),t.height-i.height-A),r="left"===e?n.x-i.width-this._offset:n.x+n.width+this._offset}this._domElement.style.left=r+"px",this._domElement.style.top=s+"px",this._phantomDiv.style.left=r+"px",this._phantomDiv.style.top=s+"px",this._phantomDiv.style.width=i.width+"px",this._phantomDiv.style.height=i.height+"px"},_position:function(e){var n={width:0,height:0},i={x:0,y:0,width:0,height:0},r={width:0,height:0};n.width=t.document.documentElement.clientWidth,n.height=t.document.documentElement.clientHeight,"tb-rl"===t.document.defaultView.getComputedStyle(t.document.body,null)["writing-mode"]&&(n.width=t.document.documentElement.clientHeight,n.height=t.document.documentElement.clientWidth),i=!this._contactPoint||"touch"!==e&&"mouse"!==e?this._getAnchorPositionFromElementWindowCoord():this._getAnchorPositionFromPointerWindowCoord(this._contactPoint),r.width=this._domElement.offsetWidth,r.height=this._domElement.offsetHeight;var s={top:["top","bottom","left","right"],bottom:["bottom","top","left","right"],left:["left","right","top","bottom"],right:["right","left","top","bottom"]};j&&(s.top[2]="right",s.top[3]="left",s.bottom[2]="right",s.bottom[3]="left");for(var o=s[this._placement],a=o.length,l=0;a>l;l++)if(l===a-1||this._canPositionOnSide(o[l],n,i,r)){this._positionOnSide(o[l],n,i,r);break}return o[l]},_showTooltip:function(e){if(!this._shouldDismiss&&(this._isShown=!0,this._raiseEvent("beforeopen"),t.document.body.contains(this._anchorElement)&&!this._shouldDismiss)){if("element"===this._lastContentType){if(!this._contentElement)return void(this._isShown=!1)}else if(!this._innerHTML||""===this._innerHTML)return void(this._isShown=!1);var n=this;this._removeTooltip=function(e){for(var i=n._anchorElement;i;){if(e.target===i){t.document.body.removeEventListener("DOMNodeRemoved",n._removeTooltip,!1),n._cleanUpDOM();break}i=i.parentNode}},t.document.body.addEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._createTooltipDOM(),this._position(e),this._useAnimation?o.fadeIn(this._domElement).then(this._onShowAnimationEnd.bind(this)):this._onShowAnimationEnd()}},_onInvoke:function(e,t,n){if(this._shouldDismiss=!1,!this._isShown&&(!n||"keyup"!==n.type||"keyboard"!==this._lastKeyOrBlurEvent&&(this._lastKeyOrBlurEvent||n.keyCode===p.tab))){this._hideDelay=t,this._contactPoint=null,n?(this._contactPoint={x:n.clientX,y:n.clientY},this._offset="touch"===e?k:"keyboard"===e?I:E):this._offset="touch"===e?T:P,this._clearTimeout(this._delayTimer),this._clearTimeout(this._hideDelayTimer);var i=this._decideOnDelay(e);if(i>0){var r=this;this._delayTimer=this._setTimeout(function(){r._showTooltip(e)},i)}else this._showTooltip(e)}},_onDismiss:function(){this._shouldDismiss=!0,this._isShown&&(this._isShown=!1,this._showTrigger="mouse",this._domElement?(this._raiseEvent("beforeclose"),this._useAnimation?o.fadeOut(this._domElement).then(this._onHideAnimationEnd.bind(this)):this._onHideAnimationEnd()):(this._raiseEvent("beforeclose"),this._raiseEvent("closed")))},_setTimeout:function(e,n){return t.setTimeout(e,n)},_clearTimeout:function(e){t.clearTimeout(e)}},{_DELAY_INITIAL_TOUCH_SHORT:{get:function(){return f}},_DELAY_INITIAL_TOUCH_LONG:{get:function(){return _}},_DEFAULT_MOUSE_HOVER_TIME:{get:function(){return g}},_DEFAULT_MESSAGE_DURATION:{get:function(){return v}},_DELAY_RESHOW_NONINFOTIP_TOUCH:{get:function(){return y}},_DELAY_RESHOW_NONINFOTIP_NONTOUCH:{get:function(){return b}},_DELAY_RESHOW_INFOTIP_TOUCH:{get:function(){return w}},_DELAY_RESHOW_INFOTIP_NONTOUCH:{get:function(){return C}},_RESHOW_THRESHOLD:{get:function(){return x}},_HIDE_DELAY_MAX:{get:function(){return S}}})})})}),i("WinJS/Controls/Rating",["../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_SafeHtml","./Tooltip","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u){"use strict";t.Namespace.define("WinJS.UI",{Rating:t.Namespace._lazy(function(){var a=i._createEventProperty,c={get averageRating(){return r._getWinJSString("ui/averageRating").value},get clearYourRating(){return r._getWinJSString("ui/clearYourRating").value},get tentativeRating(){return r._getWinJSString("ui/tentativeRating").value},get tooltipStringsIsInvalid(){return"Invalid argument: tooltipStrings must be null or an array of strings."},get unrated(){return r._getWinJSString("ui/unrated").value},get userRating(){return r._getWinJSString("ui/userRating").value}},h=5,d=!1,p="cancel",m="change",f="previewchange",_=0,g=o._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",v=o._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",y=o._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",b="padding-left: 0px; padding-right: 0px; border-left: 0px; border-right: 0px; -ms-flex: none; -webkit-flex: none; flex: none; display: none",w="win-rating",C="win-star win-empty",x="win-star win-average win-empty",S="win-star win-average win-full",I="win-star win-user win-empty",E="win-star win-user win-full",k="win-star win-tentative win-empty",T="win-star win-tentative win-full",P="win-disabled",A="win-average",M="win-user";return t.Class.define(function(t,n){this._disposed=!1,t=t||e.document.createElement("div"),n=n||{},this._element=t,o.addClass(this._element,"win-disposable"),this._userRating=0,this._averageRating=0,this._disabled=d,this._enableClear=!0,this._tooltipStrings=[],this._controlUpdateNeeded=!1,this._setControlSize(n.maxRating),n.tooltipStrings||this._updateTooltips(null),s.setOptions(this,n),this._controlUpdateNeeded=!0,this._forceLayout(),o._addInsertedNotifier(this._element),t.winControl=this,this._events()},{maxRating:{get:function(){return this._maxRating},set:function(e){this._setControlSize(e),this._forceLayout()}},userRating:{get:function(){return this._userRating},set:function(e){this._userRating=Math.max(0,Math.min(Number(e)>>0,this._maxRating)),this._updateControl()}},averageRating:{get:function(){return this._averageRating},set:function(e){this._averageRating=Number(e)<1?0:Math.min(Number(e)||0,this._maxRating),this._averageRatingElement&&this._ensureAverageMSStarRating(),this._updateControl()}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled=!!e,this._disabled&&this._clearTooltips(),this._updateTabIndex(),this._updateControl()}},enableClear:{get:function(){return this._enableClear},set:function(e){this._enableClear=!!e,this._setAriaValueMin(),this._updateControl()}},tooltipStrings:{get:function(){return this._tooltipStrings},set:function(e){if("object"!=typeof e)throw new n("WinJS.UI.Rating.TooltipStringsIsInvalid",c.tooltipStringsIsInvalid);this._updateTooltips(e),this._updateAccessibilityRestState()}},element:{get:function(){return this._element}},oncancel:a(p),onchange:a(m),onpreviewchange:a(f),dispose:function(){if(!this._disposed){this._disposed=!0;for(var e=0;e<this._toolTips.length;e++)this._toolTips[e].dispose();this._toolTips=null}},addEventListener:function(e,t,n){this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_forceLayout:function(){if(this._controlUpdateNeeded){var e=!1;this._updateControl=function(){e=!0},this.userRating=this._userRating,this.averageRating=this._averageRating,this._lastEventWasChange=!1,this._lastEventWasCancel=!1,this._tentativeRating=-1,this._captured=!1,this._pointerDownFocus=!1,this._elements=[],this._toolTips=[],this._clearElement=null,this._averageRatingElement=null,this._elementWidth=null,this._elementPadding=null,this._elementBorder=null,this._floatingValue=0,this._createControl(),this._setAccessibilityProperties(),delete this._updateControl,e&&this._updateControl()}},_hideAverageRating:function(){this._averageRatingHidden||(this._averageRatingHidden=!0,this._averageRatingElement.style.cssText=b)},_createControl:function(){o.addClass(this._element,w);var e="";this._averageRatingHidden=!0;for(var t=0;t<=this._maxRating;t++)e=t===this._maxRating?e+"<div class='"+S+"' style='"+b+"'></div>":e+"<div class='"+I+"'></div>";l.setInnerHTMLUnsafe(this._element,e);for(var n=this._element.firstElementChild,t=0;n;)this._elements[t]=n,t<this._maxRating&&(o.data(n).msStarRating=t+1),n=n.nextElementSibling,t++;this._averageRatingElement=this._elements[this._maxRating],this._ensureAverageMSStarRating(),this._updateTabIndex()},_setAriaValueMin:function(){this._element.setAttribute("aria-valuemin",this._enableClear?0:1)},_setAccessibilityProperties:function(){this._element.setAttribute("role","slider"),this._element.setAttribute("aria-valuemax",this._maxRating),this._setAriaValueMin(),this._updateAccessibilityRestState()},_getText:function(t){var n=this._tooltipStrings[t];if(n){var i=e.document.createElement("div");return i.innerHTML=n,i.textContent}return t===this._maxRating?c.clearYourRating:t+1},_updateAccessibilityRestState:function(){var e=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),e.setAttribute("aria-readOnly",this._disabled),0!==this._userRating?(e.setAttribute("aria-valuenow",this._userRating),e.setAttribute("aria-label",c.userRating),e.setAttribute("aria-valuetext",this._getText(this._userRating-1))):0!==this._averageRating?(e.setAttribute("aria-valuenow",this._averageRating),e.setAttribute("aria-label",c.averageRating),e.setAttribute("aria-valuetext",this._averageRating)):(e.setAttribute("aria-valuenow",c.unrated),e.setAttribute("aria-label",c.userRating),e.setAttribute("aria-valuetext",c.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_updateAccessibilityHoverState:function(){var e=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),e.setAttribute("aria-readOnly",this._disabled),this._tentativeRating>0?(e.setAttribute("aria-label",c.tentativeRating),e.setAttribute("aria-valuenow",this._tentativeRating),e.setAttribute("aria-valuetext",this._getText(this._tentativeRating-1))):0===this._tentativeRating?(e.setAttribute("aria-valuenow",c.unrated),e.setAttribute("aria-label",c.tentativeRating),e.setAttribute("aria-valuetext",this._getText(this._maxRating))):(e.setAttribute("aria-valuenow",c.unrated),e.setAttribute("aria-label",c.tentativeRating),e.setAttribute("aria-valuetext",c.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_ensureTooltips:function(){if(!this.disabled&&0===this._toolTips.length)for(var e=0;e<this._maxRating;e++)this._toolTips[e]=new u.Tooltip(this._elements[e])},_decrementRating:function(){this._closeTooltip();var e=!0;0===this._tentativeRating||-1===this._tentativeRating&&0===this._userRating?e=!1:(this._tentativeRating>0?this._tentativeRating--:-1===this._tentativeRating&&(this._tentativeRating=0!==this._userRating&&this._userRating>0?this._userRating-1:0),0!==this._tentativeRating||this._enableClear||(this._tentativeRating=1,e=!1)),this._showTentativeRating(e,"keyboard")},_events:function(){function e(e){return{name:e,lowerCaseName:e.toLowerCase(),handler:function(t){var i=n["_on"+e];i&&i.apply(n,[t])}}}var t,n=this,i=[e("KeyDown"),e("FocusOut"),e("FocusIn"),e("PointerCancel"),e("PointerDown"),e("PointerMove"),e("PointerOver"),e("PointerUp"),e("PointerOut")],r=[e("WinJSNodeInserted")];for(t=0;t<i.length;++t)o._addEventListener(this._element,i[t].lowerCaseName,i[t].handler,!1);for(t=0;t<r.length;++t)this._element.addEventListener(r[t].name,r[t].handler,!1);this._ariaValueNowMutationObserver=new o._MutationObserver(this._ariaValueNowChanged.bind(this)),this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_onWinJSNodeInserted:function(){this._recalculateStarProperties(),this._updateControl()},_recalculateStarProperties:function(){var t=0;1===this._averageRating&&(t=1);var n=e.getComputedStyle(this._elements[t]);this._elementWidth=n.width,"rtl"===e.getComputedStyle(this._element).direction?(this._elementPadding=n.paddingRight,this._elementBorder=n.borderRight):(this._elementPadding=n.paddingLeft,this._elementBorder=n.borderLeft)},_hideAverageStar:function(){0!==this._averageRating&&this._resetAverageStar(!1)},_incrementRating:function(){this._closeTooltip();var e=!0;(this._tentativeRating===this._maxRating||-1===this._tentativeRating&&this._userRating===this._maxRating)&&(e=!1),-1!==this._tentativeRating?this._tentativeRating<this._maxRating&&this._tentativeRating++:this._tentativeRating=0!==this._userRating?this._userRating<this._maxRating?this._userRating+1:this._maxRating:1,this._showTentativeRating(e,"keyboard")},_ariaValueNowChanged:function(){if(!this._disabled){var e=this._element.getAttributeNode("aria-valuenow");if(null!==e){var t=Number(e.nodeValue);this.userRating!==t&&(this.userRating=t,this._tentativeRating=this._userRating,this._raiseEvent(m,this._userRating))}}},_onPointerCancel:function(){this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null),this._captured=!1},_onPointerDown:function(e){(e.pointerType!==y||e.button===_)&&(this._captured||(this._pointerDownAt={x:e.clientX,y:e.clientY},this._pointerDownFocus=!0,this._disabled||(o._setPointerCapture(this._element,e.pointerId),this._captured=!0,e.pointerType===g?(this._tentativeRating=o.data(e.target).msStarRating||0,this._setStarClasses(T,this._tentativeRating,k),this._hideAverageStar(),this._updateAccessibilityHoverState(),this._openTooltip("touch"),this._raiseEvent(f,this._tentativeRating)):this._openTooltip("mousedown"))))},_onCapturedPointerMove:function(t,n){var i,r=this._pointerDownAt||{x:t.clientX,y:t.clientY},s=o._elementsFromPoint(t.clientX,r.y);if(s)for(var a=0,l=s.length;l>a;a++){var u=s[a];if("tooltip"===u.getAttribute("role"))return;if(o.hasClass(u,"win-star")){i=u;break}}var c;if(i&&i.parentElement===this._element)c=o.data(i).msStarRating||0;else{var h=0,d=this.maxRating;"rtl"===e.getComputedStyle(this._element).direction&&(h=d,d=0),c=t.clientX<r.x?h:d}var p=!1,m=Math.min(Math.ceil(c),this._maxRating);0!==m||this._enableClear||(m=1),m!==this._tentativeRating&&(this._closeTooltip(),p=!0),this._tentativeRating=m,this._showTentativeRating(p,n),t.preventDefault()},_onPointerMove:function(e){this._captured&&(e.pointerType===g?this._onCapturedPointerMove(e,"touch"):this._onCapturedPointerMove(e,"mousedown"))},_onPointerOver:function(e){this._disabled||e.pointerType!==v&&e.pointerType!==y||this._onCapturedPointerMove(e,"mouseover")},_onPointerUp:function(e){this._captured&&(o._releasePointerCapture(this._element,e.pointerId),this._captured=!1,this._onUserRatingChanged()),this._pointerDownAt=null},_onFocusOut:function(){this._captured||(this._onUserRatingChanged(),this._lastEventWasChange||this._lastEventWasCancel||this._raiseEvent(p,null))},_onFocusIn:function(){if(!this._pointerDownFocus){if(!this._disabled){if(0===this._userRating)for(var e=0;e<this._maxRating;e++)this._elements[e].className=k;this._hideAverageStar()}0!==this._userRating?this._raiseEvent(f,this._userRating):this._raiseEvent(f,0),this._tentativeRating=this._userRating}this._pointerDownFocus=!1},_onKeyDown:function(t){var n=o.Key,i=t.keyCode,r=e.getComputedStyle(this._element).direction,s=!0;switch(i){case n.enter:this._onUserRatingChanged();break;case n.tab:this._onUserRatingChanged(),s=!1;break;case n.escape:this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null);break;case n.leftArrow:"rtl"===r?this._incrementRating():this._decrementRating();break;case n.upArrow:this._incrementRating();break;case n.rightArrow:"rtl"===r?this._decrementRating():this._incrementRating();break;case n.downArrow:this._decrementRating();break;default:var a=0;if(i>=n.num0&&i<=n.num9?a=n.num0:i>=n.numPad0&&i<=n.numPad9&&(a=n.numPad0),a>0){var l=!1,u=Math.min(i-a,this._maxRating);0!==u||this._enableClear||(u=1),u!==this._tentativeRating&&(this._closeTooltip(),l=!0),this._tentativeRating=u,this._showTentativeRating(l,"keyboard")}else s=!1}s&&(t.stopPropagation(),t.preventDefault())},_onPointerOut:function(e){this._captured||o.eventWithinElement(this._element,e)||(this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null))},_onUserRatingChanged:function(){this._disabled||(this._closeTooltip(),this._userRating===this._tentativeRating||this._lastEventWasCancel||this._lastEventWasChange?this._updateControl():(this.userRating=this._tentativeRating,this._raiseEvent(m,this._userRating)))},_raiseEvent:function(t,n){if(!this._disabled&&(this._lastEventWasChange=t===m,this._lastEventWasCancel=t===p,e.document.createEvent)){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(t,!1,!1,{tentativeRating:n}),this._element.dispatchEvent(i)}},_resetNextElement:function(t){if(null!==this._averageRatingElement.nextSibling){o._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1,shrink:1});var n=this._averageRatingElement.nextSibling.style,i=e.getComputedStyle(this._element).direction;t&&(i="rtl"===i?"ltr":"rtl"),"rtl"===i?(n.paddingRight=this._elementPadding,n.borderRight=this._elementBorder,n.direction="rtl"):(n.paddingLeft=this._elementPadding,n.borderLeft=this._elementBorder,n.direction="ltr"),n.backgroundPosition="left",n.backgroundSize="100% 100%",n.width=this._resizeStringValue(this._elementWidth,1,n.width)}},_resetAverageStar:function(e){this._resetNextElement(e),this._hideAverageRating()},_resizeStringValue:function(e,t,n){var i=parseFloat(e);if(isNaN(i))return null!==n?n:e;var r=e.substring(i.toString(10).length);return i*=t,i+r},_setControlSize:function(e){var t=(Number(e)||h)>>0;this._maxRating=t>0?t:h},_updateTooltips:function(e){var t,n=0;if(null!==e)for(n=e.length<=this._maxRating+1?e.length:this._maxRating+1,t=0;n>t;t++)this._tooltipStrings[t]=e[t];else{for(t=0;t<this._maxRating;t++)this._tooltipStrings[t]=t+1;this._tooltipStrings[this._maxRating]=c.clearYourRating}},_updateTabIndex:function(){this._element.tabIndex=this._disabled?"-1":"0"},_setStarClasses:function(e,t,n){for(var i=0;i<this._maxRating;i++)this._elements[i].className=t>i?e:n},_updateAverageStar:function(){var t=this._averageRatingElement.style,n=this._averageRatingElement.nextSibling.style;"rtl"===e.getComputedStyle(this._element).direction?(t.backgroundPosition="right",t.paddingRight=this._elementPadding,t.borderRight=this._elementBorder,n.paddingRight="0px",n.borderRight="0px",n.direction="ltr"):(t.backgroundPosition="left",n.backgroundPosition="right",t.paddingLeft=this._elementPadding,t.borderLeft=this._elementBorder,n.paddingLeft="0px",n.borderLeft="0px",n.direction="rtl"),o._setFlexStyle(this._averageRatingElement,{grow:this._floatingValue,shrink:this._floatingValue}),t.width=this._resizeStringValue(this._elementWidth,this._floatingValue,t.width),t.backgroundSize=100/this._floatingValue+"% 100%",t.display=e.getComputedStyle(this._averageRatingElement.nextSibling).display,this._averageRatingHidden=!1,o._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1-this._floatingValue,shrink:1-this._floatingValue}),n.width=this._resizeStringValue(this._elementWidth,1-this._floatingValue,n.width),n.backgroundSize=100/(1-this._floatingValue)+"% 100%"},_showCurrentRating:function(){this._closeTooltip(),this._tentativeRating=-1,this._disabled||this._updateControl(),this._updateAccessibilityRestState()},_showTentativeRating:function(e,t){!this._disabled&&this._tentativeRating>=0&&(this._setStarClasses(T,this._tentativeRating,k),this._hideAverageStar()),this._updateAccessibilityHoverState(),e&&(this._openTooltip(t),this._raiseEvent(f,this._tentativeRating))},_openTooltip:function(t){if(!this.disabled)if(this._ensureTooltips(),this._tentativeRating>0)this._toolTips[this._tentativeRating-1].innerHTML=this._tooltipStrings[this._tentativeRating-1],this._toolTips[this._tentativeRating-1].open(t);else if(0===this._tentativeRating){this._clearElement=e.document.createElement("div");var n=this._elements[0].offsetWidth+parseInt(this._elementPadding,10);"ltr"===e.getComputedStyle(this._element).direction&&(n*=-1),this._clearElement.style.cssText="visiblity:hidden; position:absolute; width:0px; height:100%; left:"+n+"px; top:0px;",this._elements[0].appendChild(this._clearElement),this._toolTips[this._maxRating]=new u.Tooltip(this._clearElement),this._toolTips[this._maxRating].innerHTML=this._tooltipStrings[this._maxRating],this._toolTips[this._maxRating].open(t)}},_closeTooltip:function(){0!==this._toolTips.length&&(this._tentativeRating>0?this._toolTips[this._tentativeRating-1].close():0===this._tentativeRating&&null!==this._clearElement&&(this._toolTips[this._maxRating].close(),this._elements[0].removeChild(this._clearElement),this._clearElement=null))},_clearTooltips:function(){if(this._toolTips&&0!==this._toolTips.length)for(var e=0;e<this._maxRating;e++)this._toolTips[e].innerHTML=null},_appendClass:function(e){for(var t=0;t<=this._maxRating;t++)o.addClass(this._elements[t],e)},_setClasses:function(e,t,n){for(var i=0;i<this._maxRating;i++)this._elements[i].className=t>i?e:n},_ensureAverageMSStarRating:function(){o.data(this._averageRatingElement).msStarRating=Math.ceil(this._averageRating)},_updateControl:function(){if(this._controlUpdateNeeded){if(0!==this._averageRating&&0===this._userRating&&this._averageRating>=1&&this._averageRating<=this._maxRating){this._setClasses(S,this._averageRating-1,x),this._averageRatingElement.className=S;for(var t=0;t<this._maxRating;t++)if(t<this._averageRating&&t+1>=this._averageRating){this._resetNextElement(!1),this._element.insertBefore(this._averageRatingElement,this._elements[t]),this._floatingValue=this._averageRating-t;var n=e.getComputedStyle(this._elements[t]);this._elementWidth=n.width,"rtl"===e.getComputedStyle(this._element).direction?(this._elementPadding=n.paddingRight,this._elementBorder=n.borderRight):(this._elementPadding=n.paddingLeft,this._elementBorder=n.borderLeft),this._updateAverageStar()}}0!==this._userRating&&this._userRating>=1&&this._userRating<=this._maxRating&&(this._setClasses(E,this._userRating,I),this._resetAverageStar(!1)),0===this._userRating&&0===this._averageRating&&(this._setClasses(C,this._maxRating),this._resetAverageStar(!1)),this.disabled&&this._appendClass(P),this._appendClass(0!==this._averageRating&&0===this._userRating?A:M),this._updateAccessibilityRestState()}}})})})}),i("WinJS/Controls/ToggleSwitch",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o){"use strict";t.Namespace.define("WinJS.UI",{ToggleSwitch:t.Namespace._lazy(function(){var n="win-toggleswitch",a="win-toggleswitch-header",l="win-toggleswitch-clickregion",u="win-toggleswitch-track",c="win-toggleswitch-fill",h="win-toggleswitch-fill-lower",d="win-toggleswitch-fill-upper",p="win-toggleswitch-thumb",m="win-toggleswitch-values",f="win-toggleswitch-value",_="win-toggleswitch-value-on",g="win-toggleswitch-value-off",v="win-toggleswitch-description",y="win-toggleswitch-on",b="win-toggleswitch-off",w="win-toggleswitch-disabled",C="win-toggleswitch-enabled",x="win-toggleswitch-dragging",S="win-toggleswitch-pressed",I={get on(){return r._getWinJSString("ui/on").value},get off(){return r._getWinJSString("ui/off").value}},E=t.Class.define(function(t,i){t=t||e.document.createElement("div"),this._domElement=t,o.addClass(this._domElement,n),this._domElement.innerHTML=['<div class="'+a+'"></div>','<div class="'+m+'">','   <div class="'+f+" "+_+'"></div>','   <div class="'+f+" "+g+'"></div>',"</div>",'<div class="'+l+'">','   <div class="'+u+'">','       <div class="'+c+" "+h+'"></div>','       <div class="'+p+'"></div>','       <div class="'+c+" "+d+'"></div>',"   </div>","</div>",'<div class="'+v+'"></div>'].join("\n"),this._headerElement=this._domElement.firstElementChild,this._labelsElement=this._headerElement.nextElementSibling,this._labelOnElement=this._labelsElement.firstElementChild,this._labelOffElement=this._labelOnElement.nextElementSibling,this._clickElement=this._labelsElement.nextElementSibling,this._trackElement=this._clickElement.firstElementChild,this._fillLowerElement=this._trackElement.firstElementChild,this._thumbElement=this._fillLowerElement.nextElementSibling,this._fillUpperElement=this._thumbElement.nextElementSibling,this._descriptionElement=this._clickElement.nextElementSibling,this._headerElement.setAttribute("aria-hidden",!0),this._labelsElement.setAttribute("aria-hidden",!0),this._headerElement.setAttribute("id",o._uniqueID(this._headerElement)),this._domElement.setAttribute("aria-labelledby",this._headerElement.id),this._domElement.setAttribute("role","checkbox"),this._domElement.winControl=this,o.addClass(this._domElement,"win-disposable"),this._domElement.addEventListener("keydown",this._keyDownHandler.bind(this)),o._addEventListener(this._clickElement,"pointerdown",this._pointerDownHandler.bind(this)),o._globalListener.addEventListener(this._domElement,"pointermove",this._pointerMoveHandler.bind(this)),o._globalListener.addEventListener(this._domElement,"pointerup",this._pointerUpHandler.bind(this)),this._mutationObserver=new o._MutationObserver(this._ariaChangedHandler.bind(this)),this._mutationObserver.observe(this._domElement,{attributes:!0,attributeFilter:["aria-checked"]}),this._dragX=0,this._dragging=!1,this.checked=!1,this.disabled=!1,this.labelOn=I.on,this.labelOff=I.off,s.setOptions(this,i)},{element:{get:function(){return this._domElement}},checked:{get:function(){return this._checked},set:function(e){e=!!e,e!==this.checked&&(this._checked=e,this._domElement.setAttribute("aria-checked",e),e?(o.addClass(this._domElement,y),o.removeClass(this._domElement,b)):(o.addClass(this._domElement,b),o.removeClass(this._domElement,y)),this.dispatchEvent("change"))}},disabled:{get:function(){return this._disabled},set:function(e){e=!!e,e!==this._disabled&&(e?(o.addClass(this._domElement,w),o.removeClass(this._domElement,C)):(o.removeClass(this._domElement,w),o.addClass(this._domElement,C)),this._disabled=e,this._domElement.setAttribute("aria-disabled",e),this._domElement.setAttribute("tabIndex",e?-1:0))}},labelOn:{get:function(){return this._labelOnElement.innerHTML},set:function(e){this._labelOnElement.innerHTML=e
}},labelOff:{get:function(){return this._labelOffElement.innerHTML},set:function(e){this._labelOffElement.innerHTML=e}},title:{get:function(){return this._headerElement.innerHTML},set:function(e){this._headerElement.innerHTML=e}},onchange:i._createEventProperty("change"),dispose:function(){this._disposed||(this._disposed=!0)},_ariaChangedHandler:function(){var e=this._domElement.getAttribute("aria-checked");e="true"===e?!0:!1,this.checked=e},_keyDownHandler:function(e){this.disabled||(e.keyCode===o.Key.space&&(this.checked=!this.checked),(e.keyCode===o.Key.rightArrow||e.keyCode===o.Key.upArrow)&&(this.checked=!0),(e.keyCode===o.Key.leftArrow||e.keyCode===o.Key.downArrow)&&(this.checked=!1))},_pointerDownHandler:function(e){this.disabled||(e.preventDefault(),this._mousedown=!0,this._dragXStart=e.pageX-this._trackElement.offsetLeft-this._thumbElement.offsetWidth/2,this._dragX=this._dragXStart,this._dragging=!1,o.addClass(this._domElement,S))},_pointerUpHandler:function(t){if(!this.disabled&&this._mousedown){t=t.detail.originalEvent,t.preventDefault();var n="rtl"===e.getComputedStyle(this._domElement).direction;if(this._dragging){var i=this._trackElement.offsetWidth-this._thumbElement.offsetWidth;this.checked=n?this._dragX<i/2:this._dragX>=i/2,this._dragging=!1,o.removeClass(this._domElement,x)}else this.checked=!this.checked;this._mousedown=!1,this._thumbElement.style.left="",this._fillLowerElement.style.width="",this._fillUpperElement.style.width="",o.removeClass(this._domElement,S)}},_pointerMoveHandler:function(e){if(!this.disabled&&this._mousedown){e=e.detail.originalEvent,e.preventDefault();var t=e.pageX-this._trackElement.offsetLeft-this._thumbElement.offsetWidth/2,n=this._trackElement.offsetWidth-this._thumbElement.offsetWidth,i=this._fillLowerElement.offsetLeft+this._trackElement.clientLeft;this._dragX=Math.min(n,t),this._dragX=Math.max(0,this._dragX),!this._dragging&&Math.abs(this._dragX-this._dragXStart)>3&&(this._dragging=!0,o.addClass(this._domElement,x)),this._thumbElement.style.left=this._dragX+"px",this._fillLowerElement.style.width=this._dragX-i+"px",this._fillUpperElement.style.width=n-this._dragX-i+"px"}}});return t.Class.mix(E,s.DOMEventMixin),E})})}),i("WinJS/Controls/SemanticZoom",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";t.Namespace.define("WinJS.UI",{SemanticZoom:t.Namespace._lazy(function(){function s(e){return e}function _(e,t,n){return e+" "+l._animationTimeAdjustment(t)+"s "+n+" "+l._libraryDelay+"ms"}function g(){return _($.cssName,V,"ease-in-out")+", "+_("opacity",H,"ease-in-out")}function v(){return _($.cssName,j,"ease-in-out")+", "+_("opacity",W,"ease-in-out")}function y(){return _($.cssName,K,G)}function b(){return _($.cssName,J,G)}function w(e,t){return p.convertToPixels(e,t)}function C(e,t){l.isAnimationEnabled()&&(e.style[$.scriptName]="scale("+t+")")}function x(e){var t=e.target&&e.target.winControl;t&&!t._resizing&&t._onResize()}function S(e){var t=e[0].target&&e[0].target.winControl;t&&t instanceof at&&t._onPropertyChanged()}var I=n._browserStyleEquivalents,E={get invalidZoomFactor(){return"Invalid zoomFactor"}},k="win-semanticzoom-button",T="win-semanticzoom-button-location",P=3e3,A=8,M="win-semanticzoom",O="win-semanticzoom-zoomedinview",D="win-semanticzoom-zoomedoutview",L="zoomchanged",R=1.05,B=.65,N=.8,F=.2,z=4096,H=.333,W=.333,V=.333,j=.333,U=1e3*H,q=50,K=.333,J=.333,G="cubic-bezier(0.1,0.9,0.2,1)",$=I.transform,Y=I.transition.scriptName,Z=2,X=.2,Q=.45,et=1e3,tt=50,nt={none:0,zoomedIn:1,zoomedOut:2},it=p._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",rt=p._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",st=p._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",ot={x:0,y:0},at=t.Class.define(function(t,r){this._disposed=!1;var s=this,o=n.isPhone;this._element=t,this._element.winControl=this,p.addClass(this._element,"win-disposable"),p.addClass(this._element,M),this._element.setAttribute("role","ms-semanticzoomcontainer");var a=this._element.getAttribute("aria-label");if(a||this._element.setAttribute("aria-label",""),r=r||{},this._zoomedOut=!!r.zoomedOut||!!r.initiallyZoomedOut||!1,this._enableButton=!o,o||void 0===r.enableButton||(this._enableButton=!!r.enableButton),this._element.setAttribute("aria-checked",this._zoomedOut.toString()),this._zoomFactor=p._clamp(r.zoomFactor,F,N,B),this.zoomedInItem=r.zoomedInItem,this.zoomedOutItem=r.zoomedOutItem,n.validation&&r._zoomFactor&&r._zoomFactor!==this._zoomFactor)throw new i("WinJS.UI.SemanticZoom.InvalidZoomFactor",E.invalidZoomFactor);this._locked=!!r.locked,this._zoomInProgress=!1,this._isBouncingIn=!1,this._isBouncing=!1,this._zooming=!1,this._aligning=!1,this._gesturing=!1,this._gestureEnding=!1,this._buttonShown=!1,this._shouldFakeTouchCancel="TouchEvent"in e,this._initialize(),this._configure(),this._element.addEventListener("mselementresize",x),p._resizeNotifier.subscribe(this._element,x),new p._MutationObserver(S).observe(this._element,{attributes:!0,attributeFilter:["aria-checked"]}),o||(this._element.addEventListener("wheel",this._onWheel.bind(this),!0),this._element.addEventListener("mousewheel",this._onMouseWheel.bind(this),!0),this._element.addEventListener("keydown",this._onKeyDown.bind(this),!0),p._addEventListener(this._element,"pointerdown",this._onPointerDown.bind(this),!0),p._addEventListener(this._element,"pointermove",this._onPointerMove.bind(this),!0),p._addEventListener(this._element,"pointerout",this._onPointerOut.bind(this),!0),p._addEventListener(this._element,"pointercancel",this._onPointerCancel.bind(this),!0),p._addEventListener(this._element,"pointerup",this._onPointerUp.bind(this),!1),this._hiddenElement.addEventListener("gotpointercapture",this._onGotPointerCapture.bind(this),!1),this._hiddenElement.addEventListener("lostpointercapture",this._onLostPointerCapture.bind(this),!1),this._element.addEventListener("click",this._onClick.bind(this),!0),this._canvasIn.addEventListener(n._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._canvasOut.addEventListener(n._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._element.addEventListener("MSContentZoom",this._onMSContentZoom.bind(this),!0),this._resetPointerRecords()),this._onResizeImpl(),h._setOptions(this,r,!0),s._setVisibility()},{element:{get:function(){return this._element}},enableButton:{get:function(){return this._enableButton},set:function(e){var t=!!e;this._enableButton===t||n.isPhone||(this._enableButton=t,t?this._createSemanticZoomButton():this._removeSemanticZoomButton())}},zoomedOut:{get:function(){return this._zoomedOut},set:function(e){this._zoom(!!e,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1,!1,this._zoomedOut&&n.isPhone)}},zoomFactor:{get:function(){return this._zoomFactor},set:function(e){var t=this._zoomFactor,n=p._clamp(e,F,N,B);t!==n&&(this._zoomFactor=n,this._onResize())}},locked:{get:function(){return this._locked},set:function(e){this._locked=!!e,e?this._hideSemanticZoomButton():this._displayButton()}},zoomedInItem:{get:function(){return this._zoomedInItem},set:function(e){this._zoomedInItem=e||s}},zoomedOutItem:{get:function(){return this._zoomedOutItem},set:function(e){this._zoomedOutItem=e||s}},dispose:function(){this._disposed||(this._disposed=!0,p._resizeNotifier.unsubscribe(this._element,x),d._disposeElement(this._elementIn),d._disposeElement(this._elementOut),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer))},forceLayout:function(){this._onResizeImpl()},_initialize:function(){var t=m.children(this._element);this._elementIn=t[0],this._elementOut=t[1],this._elementIn.style.height=this._elementOut.style.height=this._element.offsetHeight+"px",u.processAll(this._elementIn),u.processAll(this._elementOut),this._viewIn=this._elementIn.winControl.zoomableView,this._viewOut=this._elementOut.winControl.zoomableView,this._element.removeChild(this._elementOut),this._element.removeChild(this._elementIn),this._element.innerHTML="",this._cropViewport=e.document.createElement("div"),this._element.appendChild(this._cropViewport),this._viewportIn=e.document.createElement("div"),this._opticalViewportIn=e.document.createElement("div"),this._viewportOut=e.document.createElement("div"),this._opticalViewportOut=e.document.createElement("div"),this._opticalViewportIn.appendChild(this._viewportIn),this._opticalViewportOut.appendChild(this._viewportOut),this._cropViewport.appendChild(this._opticalViewportIn),this._cropViewport.appendChild(this._opticalViewportOut),this._canvasIn=e.document.createElement("div"),this._canvasOut=e.document.createElement("div"),this._viewportIn.appendChild(this._canvasIn),this._viewportOut.appendChild(this._canvasOut),this._canvasIn.appendChild(this._elementIn),this._canvasOut.appendChild(this._elementOut),this._enableButton&&this._createSemanticZoomButton(),this._hiddenElement=e.document.createElement("div"),this._hiddenElement.tabIndex=-1,this._hiddenElement.visibility="hidden",this._hiddenElement.setAttribute("aria-hidden","true"),this._element.appendChild(this._hiddenElement),p.addClass(this._elementIn,O),p.addClass(this._elementOut,D),this._setLayout(this._element,"relative","hidden"),this._setLayout(this._cropViewport,"absolute","hidden"),this._setLayout(this._opticalViewportIn,"absolute","auto"),this._setLayout(this._opticalViewportOut,"absolute","auto"),this._setLayout(this._viewportIn,"absolute","hidden"),this._setLayout(this._viewportOut,"absolute","hidden"),this._setLayout(this._canvasIn,"absolute","hidden"),this._setLayout(this._canvasOut,"absolute","hidden"),this._setupOpticalViewport(this._opticalViewportIn),this._setupOpticalViewport(this._opticalViewportOut),this._viewportIn.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._viewportOut.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._elementIn.style.position="absolute",this._elementOut.style.position="absolute"},_createSemanticZoomButton:function(){this._sezoButton=e.document.createElement("button"),this._sezoButton.className=k+" "+T,this._sezoButton.tabIndex=-1,this._sezoButton.style.visibility="hidden",this._sezoButton.setAttribute("aria-hidden",!0),this._element.appendChild(this._sezoButton),this._sezoButton.addEventListener("click",this._onSeZoButtonZoomOutClick.bind(this),!1),this._element.addEventListener("scroll",this._onSeZoChildrenScroll.bind(this),!0),p._addEventListener(this._element,"pointermove",this._onPenHover.bind(this),!1)},_removeSemanticZoomButton:function(){this._sezoButton&&(this._element.removeChild(this._sezoButton),this._sezoButton=null)},_configure:function(){var e=this._viewIn.getPanAxis(),t=this._viewOut.getPanAxis(),i=n.isPhone;if(this._pansHorizontallyIn="horizontal"===e||"both"===e,this._pansVerticallyIn="vertical"===e||"both"===e,this._pansHorizontallyOut="horizontal"===t||"both"===t,this._pansVerticallyOut="vertical"===t||"both"===t,!this._zoomInProgress){var r=1/this._zoomFactor-1,s=R-1;this._setLayout(this._elementIn,"absolute","visible"),this._setLayout(this._elementOut,"absolute","visible"),this._viewIn.configureForZoom(!1,!this._zoomedOut,this._zoomFromCurrent.bind(this,!0),r),this._viewOut.configureForZoom(!0,this._zoomedOut,this._zoomFromCurrent.bind(this,!1),s),this._pinching=!1,this._pinchGesture=0,this._canvasLeftIn=0,this._canvasTopIn=0,this._canvasLeftOut=0,this._canvasTopOut=0,i||(this._zoomedOut?C(this._canvasIn,this._zoomFactor):C(this._canvasOut,1/this._zoomFactor));var o=this._opticalViewportIn.style,a=this._opticalViewportOut.style,u=this._canvasIn.style,c=this._canvasOut.style;u.opacity=this._zoomedOut&&!i?0:1,c.opacity=this._zoomedOut?1:0,i&&(u.zIndex=1,c.zIndex=2),l.isAnimationEnabled()&&!i&&(o[I["transition-property"].scriptName]=$.cssName,o[I["transition-duration"].scriptName]="0s",o[I["transition-timing-function"].scriptName]="linear",a[I["transition-property"].scriptName]=$.cssName,a[I["transition-duration"].scriptName]="0s",a[I["transition-timing-function"].scriptName]="linear")}},_onPropertyChanged:function(){var e=this._element.getAttribute("aria-checked"),t="true"===e;this._zoomedOut!==t&&(this.zoomedOut=t)},_onResizeImpl:function(){this._resizing=this._resizing||0,this._resizing++;try{var t=function(e,t,n,i,r){var s=e.style;s.left=t+"px",s.top=n+"px",s.width=i+"px",s.height=r+"px"},n=e.getComputedStyle(this._element,null),i=parseFloat(n.width),r=parseFloat(n.height),s=w(this._element,n.paddingLeft),o=w(this._element,n.paddingRight),a=w(this._element,n.paddingTop),l=w(this._element,n.paddingBottom),u=i-s-o,c=r-a-l,h=1/this._zoomFactor;if(this._viewportWidth===u&&this._viewportHeight===c)return;this._sezoClientHeight=r,this._sezoClientWidth=i,this._viewportWidth=u,this._viewportHeight=c,this._configure();var d=2*h-1,p=Math.min(z,(this._pansHorizontallyIn?d:1)*u),m=Math.min(z,(this._pansVerticallyIn?d:1)*c);this._canvasLeftIn=.5*(p-u),this._canvasTopIn=.5*(m-c),t(this._cropViewport,s,a,u,c),t(this._viewportIn,0,0,u,c),t(this._opticalViewportIn,0,0,u,c),t(this._canvasIn,-this._canvasLeftIn,-this._canvasTopIn,p,m),t(this._elementIn,this._canvasLeftIn,this._canvasTopIn,u,c);var f=2*R-1,_=(this._pansHorizontallyOut?f:1)*u,g=(this._pansVerticallyOut?f:1)*c;this._canvasLeftOut=.5*(_-u),this._canvasTopOut=.5*(g-c),t(this._viewportOut,0,0,u,c),t(this._opticalViewportOut,0,0,u,c),t(this._canvasOut,-this._canvasLeftOut,-this._canvasTopOut,_,g),t(this._elementOut,this._canvasLeftOut,this._canvasTopOut,u,c)}finally{this._resizing--}},_onResize:function(){this._onResizeImpl()},_onMouseMove:function(e){return this._zooming||!this._lastMouseX&&!this._lastMouseY||e.screenX===this._lastMouseX&&e.screenY===this._lastMouseY?(this._lastMouseX=e.screenX,void(this._lastMouseY=e.screenY)):void(Math.abs(e.screenX-this._lastMouseX)<=A&&Math.abs(e.screenY-this._lastMouseY)<=A||(this._lastMouseX=e.screenX,this._lastMouseY=e.screenY,this._displayButton()))},_displayButton:function(){if(f.isHoverable){e.clearTimeout(this._dismissButtonTimer),this._showSemanticZoomButton();var t=this;this._dismissButtonTimer=e.setTimeout(function(){t._hideSemanticZoomButton()},l._animationTimeAdjustment(P))}},_showSemanticZoomButton:function(){this._disposed||this._buttonShown||!this._sezoButton||this._zoomedOut||this._locked||(a.fadeIn(this._sezoButton),this._sezoButton.style.visibility="visible",this._buttonShown=!0)},_hideSemanticZoomButton:function(e){if(!this._disposed&&this._buttonShown&&this._sezoButton){if(e)this._sezoButton.style.visibility="hidden";else{var t=this;a.fadeOut(this._sezoButton).then(function(){t._sezoButton.style.visibility="hidden"})}this._buttonShown=!1}},_onSeZoChildrenScroll:function(e){e.target!==this.element&&this._hideSemanticZoomButton(!0)},_onWheel:function(e){e.ctrlKey&&(this._zoom(e.deltaY>0,this._getPointerLocation(e)),e.stopPropagation(),e.preventDefault())},_onMouseWheel:function(e){e.ctrlKey&&(this._zoom(e.wheelDelta<0,this._getPointerLocation(e)),e.stopPropagation(),e.preventDefault())},_onPenHover:function(e){e.pointerType===rt&&0===e.buttons&&this._displayButton()},_onSeZoButtonZoomOutClick:function(){this._hideSemanticZoomButton(),this._zoom(!0,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1)},_onKeyDown:function(e){var t=!1;if(e.ctrlKey){var n=p.Key;switch(e.keyCode){case n.add:case n.equal:case 61:this._zoom(!1),t=!0;break;case n.subtract:case n.dash:case 173:this._zoom(!0),t=!0}}t&&(e.stopPropagation(),e.preventDefault())},_createPointerRecord:function(e,t){var n=this._getPointerLocation(e),i={};return i.startX=i.currentX=n.x,i.startY=i.currentY=n.y,i.fireCancelOnPinch=t,this._pointerRecords[e.pointerId]=i,this._pointerCount=Object.keys(this._pointerRecords).length,i},_deletePointerRecord:function(e){var t=this._pointerRecords[e];return delete this._pointerRecords[e],this._pointerCount=Object.keys(this._pointerRecords).length,2!==this._pointerCount&&(this._pinching=!1),t},_fakeCancelOnPointer:function(t){var n=e.document.createEvent("UIEvent");n.initUIEvent("touchcancel",!0,!0,e,0),n.touches=t.touches,n.targetTouches=t.targetTouches,n.changedTouches=[t._currentTouch],n._fakedBySemanticZoom=!0,t.target.dispatchEvent(n)},_handlePointerDown:function(e){this._createPointerRecord(e,!1);for(var t=Object.keys(this._pointerRecords),n=0,i=t.length;i>n;n++)try{p._setPointerCapture(this._hiddenElement,t[n]||0)}catch(r){return void this._resetPointerRecords()}e.stopImmediatePropagation(),e.preventDefault()},_handleFirstPointerDown:function(e){this._resetPointerRecords(),this._createPointerRecord(e,this._shouldFakeTouchCancel),this._startedZoomedOut=this._zoomedOut},_onClick:function(e){e.target!==this._element&&this._isBouncing&&e.stopImmediatePropagation()},_onPointerDown:function(e){e.pointerType===it&&(0===this._pointerCount?this._handleFirstPointerDown(e):this._handlePointerDown(e))},_onPointerMove:function(e){function t(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}function n(e,t){return{x:.5*(e.currentX+t.currentX)|0,y:.5*(e.currentY+t.currentY)|0}}if(e.pointerType===st||e.pointerType===rt)return void this._onMouseMove(e);if(e.pointerType===it){var i=this._pointerRecords[e.pointerId],r=this._getPointerLocation(e);if(i){if(i.currentX=r.x,i.currentY=r.y,2===this._pointerCount){this._pinching=!0;var s=Object.keys(this._pointerRecords),a=this._pointerRecords[s[0]],l=this._pointerRecords[s[1]];this._currentMidPoint=n(a,l);var u=t(a.currentX,a.currentY,l.currentX,l.currentY),c=this,h=function(e){var t=e?nt.zoomedOut:nt.zoomedIn,i=e?c._pinchedDirection===nt.zoomedIn&&!c._zoomingOut:c._pinchedDirection===nt.zoomedOut&&c._zoomingOut,r=e?!c._zoomedOut:c._zoomedOut;if(c._pinchedDirection===nt.none)r?(c._isBouncingIn=!1,c._zoom(e,n(a,l),!0),c._pinchedDirection=t):c._isBouncingIn||c._playBounce(!0,n(a,l));else if(i){var s=c._lastPinchDistance/c._lastPinchStartDistance,o=c._lastLastPinchDistance/c._lastPinchDistance;(e&&s>X||!e&&o>Q)&&(c._zoom(e,n(a,l),!0),c._pinchedDirection=t)}};this._updatePinchDistanceRecords(u),this._pinchDistanceCount>=Z&&(this._zooming||this._isBouncing||(o("WinJS.UI.SemanticZoom:EndPinchDetection,info"),h(this._lastPinchDirection===nt.zoomedOut)))}else this._pointerCount>2&&this._resetPinchDistanceRecords();this._pointerCount>=2&&(i.fireCancelOnPinch&&(this._fakeCancelOnPointer(e,i),i.fireCancelOnPinch=!1),e.stopImmediatePropagation(),e.preventDefault()),2!==this._pointerCount&&this._isBouncingIn&&this._playBounce(!1)}}},_onPointerOut:function(e){e.pointerType===it&&e.target===this._element&&this._completePointerUp(e,!1)},_onPointerUp:function(e){this._releasePointerCapture(e),this._completePointerUp(e,!0),this._completeZoomingIfTimeout()},_onPointerCancel:function(e){e._fakedBySemanticZoom||(this._releasePointerCapture(e),this._completePointerUp(e,!1),this._completeZoomingIfTimeout())},_onGotPointerCapture:function(e){var t=this._pointerRecords[e.pointerId];t&&(t.dirty=!1)},_onLostPointerCapture:function(e){var t=this._pointerRecords[e.pointerId];if(t){t.dirty=!0;var n=this;c.timeout(tt).then(function(){t.dirty&&n._completePointerUp(e,!1)})}},_onMSContentZoom:function(e){var t=e.target;if(t===this._opticalViewportIn||t===this._opticalViewportOut){var n=t.msContentZoomFactor<.995,i=t.msContentZoomFactor>1.005;!n||this._zoomedOut||this._zoomingOut?i&&(this._zoomedOut||this._zoomingOut)&&(this.zoomedOut=!1):this.zoomedOut=!0}},_updatePinchDistanceRecords:function(e){function t(t){n._lastPinchDirection===t?n._pinchDistanceCount++:(n._pinchGesture++,n._pinchDistanceCount=0,n._lastPinchStartDistance=e),n._lastPinchDirection=t,n._lastPinchDistance=e,n._lastLastPinchDistance=n._lastPinchDistance}var n=this;-1===this._lastPinchDistance?(o("WinJS.UI.SemanticZoom:StartPinchDetection,info"),this._lastPinchDistance=e):this._lastPinchDistance!==e&&t(this._lastPinchDistance>e?nt.zoomedOut:nt.zoomedIn)},_zoomFromCurrent:function(e){this._zoom(e,null,!1,!0)},_zoom:function(e,t,i,r,s){if(o("WinJS.UI.SemanticZoom:StartZoom(zoomOut="+e+"),info"),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._hideSemanticZoomButton(),this._resetPinchDistanceRecords(),!this._locked&&!this._gestureEnding)if(this._zoomInProgress){if(this._gesturing===!i)return;e!==this._zoomingOut&&this._startAnimations(e)}else if(e!==this._zoomedOut){this._zooming=!0,this._aligning=!0,this._gesturing=!!i,t&&(e?this._viewIn:this._viewOut).setCurrentItem(t.x,t.y),this._zoomInProgress=!0,(e?this._opticalViewportOut:this._opticalViewportIn).style.visibility="visible",e&&n.isPhone&&(this._canvasOut.style.opacity=1);var a=this._viewIn.beginZoom(),l=this._viewOut.beginZoom(),u=null;if((a||l)&&n.isPhone&&(u=c.join([a,l])),r&&!s){var h=this;(e?this._viewIn:this._viewOut).getCurrentItem().then(function(t){var n=t.position;h._prepareForZoom(e,{x:h._rtl()?h._sezoClientWidth-n.left-.5*n.width:n.left+.5*n.width,y:n.top+.5*n.height},c.wrap(t),u)})}else this._prepareForZoom(e,t||{},null,u,s)}},_prepareForZoom:function(t,n,i,r,s){function a(e,t){l._canvasIn.style[I["transform-origin"].scriptName]=l._canvasLeftIn+u-e.x+"px "+(l._canvasTopIn+c-e.y)+"px",l._canvasOut.style[I["transform-origin"].scriptName]=l._canvasLeftOut+u-t.x+"px "+(l._canvasTopOut+c-t.y)+"px"}o("WinJS.UI.SemanticZoom:prepareForZoom,StartTM");var l=this,u=n.x,c=n.y;"number"==typeof u&&this._pansHorizontallyIn&&this._pansHorizontallyOut||(u=.5*this._sezoClientWidth),"number"==typeof c&&this._pansVerticallyIn&&this._pansVerticallyOut||(c=.5*this._sezoClientHeight),a(ot,ot),s?this._aligning=!1:this._alignViewsPromise=this._alignViews(t,u,c,i).then(function(){l._aligning=!1,l._gestureEnding=!1,l._alignViewsPromise=null,l._zooming||l._gesturing||l._completeZoom()}),this._zoomingOut=t,e.getComputedStyle(this._canvasIn).opacity,e.getComputedStyle(this._canvasOut).opacity,o("WinJS.UI.SemanticZoom:prepareForZoom,StopTM"),this._startAnimations(t,r)},_alignViews:function(e,t,n,i){var r=1-this._zoomFactor,s=this._rtl(),o=r*(s?this._viewportWidth-t:t),a=r*n,l=this;if(e){var u=i||this._viewIn.getCurrentItem();if(u)return u.then(function(e){var t=e.position,n={left:t.left*l._zoomFactor+o,top:t.top*l._zoomFactor+a,width:t.width*l._zoomFactor,height:t.height*l._zoomFactor};return l._viewOut.positionItem(l._zoomedOutItem(e.item),n)})}else{var h=i||this._viewOut.getCurrentItem();if(h)return h.then(function(e){var t=e.position,n={left:(t.left-o)/l._zoomFactor,top:(t.top-a)/l._zoomFactor,width:t.width/l._zoomFactor,height:t.height/l._zoomFactor};return l._viewIn.positionItem(l._zoomedInItem(e.item),n)})}return new c(function(e){e({x:0,y:0})})},_startAnimations:function(e,t){this._zoomingOut=e;var i=n.isPhone;if(l.isAnimationEnabled()&&!i&&(o("WinJS.UI.SemanticZoom:ZoomAnimation,StartTM"),this._canvasIn.style[Y]=e?g():v(),this._canvasOut.style[Y]=e?v():g()),i||(C(this._canvasIn,e?this._zoomFactor:1),C(this._canvasOut,e?1:1/this._zoomFactor)),this._canvasIn.style.opacity=e&&!i?0:1,(!i||e)&&(this._canvasOut.style.opacity=e?1:0),l.isAnimationEnabled())if(t){var r=this,s=function(){r._canvasIn.style[$.scriptName]="",r._canvasOut.style[$.scriptName]="",r._onZoomAnimationComplete()};t.then(s,s)}else this.setTimeoutAfterTTFF(this._onZoomAnimationComplete.bind(this),l._animationTimeAdjustment(U));else this._zooming=!1,this._canvasIn.style[$.scriptName]="",this._canvasOut.style[$.scriptName]="",this._completeZoom()},_onBounceAnimationComplete:function(){this._isBouncingIn||this._disposed||this._completeZoom()},_onZoomAnimationComplete:function(){o("WinJS.UI.SemanticZoom:ZoomAnimation,StopTM"),this._disposed||(this._zooming=!1,this._aligning||this._gesturing||this._gestureEnding||this._completeZoom())},_onCanvasTransitionEnd:function(e){return this._disposed?void 0:e.target!==this._canvasOut&&e.target!==this._canvasIn||!this._isBouncing?void(e.target===this._canvasIn&&e.propertyName===$.cssName&&this._onZoomAnimationComplete()):void this._onBounceAnimationComplete()},_clearTimeout:function(t){t&&e.clearTimeout(t)},_completePointerUp:function(e,t){if(!this._disposed){var n=e.pointerId,i=this._pointerRecords[n];if(i&&(this._deletePointerRecord(n),this._isBouncingIn&&this._playBounce(!1),t&&this._pinchedDirection!==nt.none&&e.stopImmediatePropagation(),0===this._pointerCount)){if(1===this._pinchGesture&&!this._zooming&&this._lastPinchDirection!==nt.none&&this._pinchDistanceCount<Z)return this._zoom(this._lastPinchDirection===nt.zoomedOut,this._currentMidPoint,!1),this._pinchGesture=0,void this._attemptRecordReset();this._pinchedDirection!==nt.none&&(this._gesturing=!1,this._aligning||this._zooming||this._completeZoom()),this._pinchGesture=0,this._attemptRecordReset()}}},setTimeoutAfterTTFF:function(t,n){var i=this;i._TTFFTimer=e.setTimeout(function(){this._disposed||(i._TTFFTimer=e.setTimeout(t,n))},q)},_completeZoomingIfTimeout:function(){if(0===this._pointerCount){var t=this;(this._zoomInProgress||this._isBouncing)&&(t._completeZoomTimer=e.setTimeout(function(){t._completeZoom()},l._animationTimeAdjustment(et)))}},_completeZoom:function(){if(!this._disposed){if(this._isBouncing)return this._zoomedOut?this._viewOut.endZoom(!0):this._viewIn.endZoom(!0),void(this._isBouncing=!1);if(this._zoomInProgress){o("WinJS.UI.SemanticZoom:CompleteZoom,info"),this._aligning=!1,this._alignViewsPromise&&this._alignViewsPromise.cancel(),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._gestureEnding=!1,this[this._zoomingOut?"_opticalViewportOut":"_opticalViewportIn"].msContentZoomFactor=1,this._viewIn.endZoom(!this._zoomingOut),this._viewOut.endZoom(this._zoomingOut),this._canvasIn.style.opacity=this._zoomingOut&&!n.isPhone?0:1,this._canvasOut.style.opacity=this._zoomingOut?1:0,this._zoomInProgress=!1;var t=!1;if(this._zoomingOut!==this._zoomedOut&&(this._zoomedOut=!!this._zoomingOut,this._element.setAttribute("aria-checked",this._zoomedOut.toString()),t=!0),this._setVisibility(),t){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(L,!0,!0,this._zoomedOut),this._element.dispatchEvent(i),this._isActive&&p._setActive(this._zoomedOut?this._elementOut:this._elementIn)}o("WinJS.UI.SemanticZoom:CompleteZoom_Custom,info")}}},_isActive:function(){var t=e.document.activeElement;return this._element===t||this._element.contains(t)},_setLayout:function(e,t,n){var i=e.style;i.position=t,i.overflow=n},_setupOpticalViewport:function(e){e.style["-ms-overflow-style"]="none",n.isPhone||(e.style["-ms-content-zooming"]="zoom",e.style["-ms-content-zoom-limit-min"]="99%",e.style["-ms-content-zoom-limit-max"]="101%",e.style["-ms-content-zoom-snap-points"]="snapList(100%)",e.style["-ms-content-zoom-snap-type"]="mandatory")},_setVisibility:function(){function e(e,t){e.style.visibility=t?"visible":"hidden",e.style.zIndex=t?"1":"0"}e(this._opticalViewportIn,!this._zoomedOut||n.isPhone),e(this._opticalViewportOut,this._zoomedOut),this._opticalViewportIn.setAttribute("aria-hidden",!!this._zoomedOut),this._opticalViewportOut.setAttribute("aria-hidden",!this._zoomedOut)},_resetPointerRecords:function(){this._pinchedDirection=nt.none,this._pointerCount=0,this._pointerRecords={},this._resetPinchDistanceRecords()},_releasePointerCapture:function(e){var t=e.pointerId;try{p._releasePointerCapture(this._hiddenElement,t)}catch(n){}},_attemptRecordReset:function(){this._recordResetPromise&&this._recordResetPromise.cancel();var e=this;this._recordResetPromise=c.timeout(tt).then(function(){0===e._pointerCount&&(e._resetPointerRecords(),e._recordResetPromise=null)})},_resetPinchDistanceRecords:function(){this._lastPinchDirection=nt.none,this._lastPinchDistance=-1,this._lastLastPinchDistance=-1,this._pinchDistanceCount=0,this._currentMidPoint=null},_getPointerLocation:function(t){var n={left:0,top:0};try{n=this._element.getBoundingClientRect()}catch(i){}var r=e.getComputedStyle(this._element,null),s=w(this._element,r.paddingLeft),o=w(this._element,r.paddingTop),a=w(this._element,r.borderLeftWidth);return{x:+t.clientX===t.clientX?t.clientX-n.left-s-a:0,y:+t.clientY===t.clientY?t.clientY-n.top-o-o:0}},_playBounce:function(e,t){if(l.isAnimationEnabled()&&this._isBouncingIn!==e){this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._isBouncing=!0,this._isBouncingIn=e,e?this._bounceCenter=t:this._aligned=!0;var n=this._zoomedOut?this._canvasOut:this._canvasIn,i=this._zoomedOut?this._canvasLeftOut:this._canvasLeftIn,r=this._zoomedOut?this._canvasTopOut:this._canvasTopIn;n.style[I["transform-origin"].scriptName]=i+this._bounceCenter.x+"px "+(r+this._bounceCenter.y)+"px",n.style[Y]=e?y():b(),this._zoomedOut?this._viewOut.beginZoom():this._viewIn.beginZoom();var s=e?this._zoomedOut?2-R:R:1;C(n,s),this.setTimeoutAfterTTFF(this._onBounceAnimationComplete.bind(this),l._animationTimeAdjustment(U))}},_rtl:function(){return"rtl"===e.getComputedStyle(this._element,null).direction},_pinching:{set:function(e){this._viewIn.pinching=e,this._viewOut.pinching=e}}});return t.Class.mix(at,r.createEventProperties("zoomchanged")),t.Class.mix(at,h.DOMEventMixin),at})})}),i("WinJS/Controls/Pivot/_Constants",[],function(){"use strict";var e={_ClassName:{pivot:"win-pivot",pivotLocked:"win-pivot-locked",pivotTitle:"win-pivot-title",pivotHeaders:"win-pivot-headers",pivotHeader:"win-pivot-header",pivotHeaderSelected:"win-pivot-header-selected",pivotViewport:"win-pivot-viewport",pivotSurface:"win-pivot-surface",pivotNoSnap:"win-pivot-nosnap",pivotNavButton:"win-pivot-navbutton",pivotNavButtonPrev:"win-pivot-navbutton-prev",pivotNavButtonNext:"win-pivot-navbutton-next",pivotShowNavButtons:"win-pivot-shownavbuttons",pivotInputTypeMouse:"win-pivot-mouse",pivotInputTypeTouch:"win-pivot-touch"}};return e}),i("WinJS/Controls/Pivot/_Item",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../ControlProcessor","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","./_Constants"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{PivotItem:n.Namespace._lazy(function(){var e={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},s=n.Class.define(function(n,i){if(n=n||t.document.createElement("DIV"),i=i||{},n.winControl)throw new r("WinJS.UI.PivotItem.DuplicateConstruction",e.duplicateConstruction);n.winControl=this,this._element=n,h.addClass(this.element,s._ClassName.pivotItem),h.addClass(this.element,"win-disposable"),this._element.setAttribute("role","tabpanel"),this._contentElement=t.document.createElement("DIV"),this._contentElement.className=s._ClassName.pivotItemContent,n.appendChild(this._contentElement);for(var a=this.element.firstChild;a!==this._contentElement;){var l=a.nextSibling;this._contentElement.appendChild(a),a=l}this._processors=[o.processAll],u.setOptions(this,i)},{element:{get:function(){return this._element}},contentElement:{get:function(){return this._contentElement}},header:{get:function(){return this._header},set:function(e){this._header=e,this._parentPivot&&this._parentPivot._renderHeaders()}},_parentPivot:{get:function(){for(var e=this._element;e&&!h.hasClass(e,d._ClassName.pivot);)e=e.parentNode;return e&&e.winControl}},_process:function(){var e=this;return this._processors&&this._processors.push(function(){return l.schedulePromiseAboveNormal()}),this._processed=(this._processors||[]).reduce(function(t,n){return t.then(function(){return n(e.contentElement)})},this._processed||a.as()),this._processors=null,this._processed},dispose:function(){this._disposed||(this._disposed=!0,this._processors=null,c.disposeSubTree(this.contentElement))
}},{_ClassName:{pivotItem:"win-pivot-item",pivotItemContent:"win-pivot-item-content"},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){t!==o.processAll&&(e._processors=e._processors||[],e._processors.push(t),e._processed&&e._process())})});return s})})}),i("WinJS/Controls/Pivot",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../BindingList","../ControlProcessor","../Promise","../Scheduler","../_Signal","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_TabContainer","../Utilities/_KeyboardBehavior","./Pivot/_Constants","./Pivot/_Item","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w){"use strict";t.Namespace.define("WinJS.UI",{Pivot:t.Namespace._lazy(function(){function v(t){var n=e.document.createTextNode("object"==typeof t.header?JSON.stringify(t.header):""+t.header);return n}var C=g._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",x=g._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",S=g.Key,I=r._createEventProperty,E={selectionChanged:"selectionchanged",itemAnimationStart:"itemanimationstart",itemAnimationEnd:"itemanimationend"},k=g._MSManipulationEvent,T=!(!g._supportsSnapPoints||!e.HTMLElement.prototype.msZoomTo),P=t.Class.define(function(t,r){if(t=t||e.document.createElement("DIV"),r=r||{},t.winControl)throw new i("WinJS.UI.Pivot.DuplicateConstruction",A.duplicateConstruction);this._handleItemChangedBound=this._handleItemChanged.bind(this),this._handleItemInsertedBound=this._handleItemInserted.bind(this),this._handleItemMovedBound=this._handleItemMoved.bind(this),this._handleItemRemovedBound=this._handleItemRemoved.bind(this),this._handleItemReloadBound=this._handleItemReload.bind(this),this._id=t.id||g._uniqueID(t),this._writeProfilerMark("constructor,StartTM"),t.winControl=this,this._element=t,this._element.setAttribute("role","tablist"),this._element.getAttribute("aria-label")||this._element.setAttribute("aria-label",A.pivotAriaLabel),T||g.addClass(this.element,P._ClassName.pivotNoSnap),g.addClass(this.element,P._ClassName.pivot),g.addClass(this.element,"win-disposable"),g._addEventListener(this.element,"pointerenter",this._updatePointerType.bind(this)),g._addEventListener(this.element,"pointerout",this._updatePointerType.bind(this)),this._pointerType=C,this._titleElement=e.document.createElement("DIV"),this._titleElement.style.display="none",g.addClass(this._titleElement,P._ClassName.pivotTitle),this._element.appendChild(this._titleElement),this._headersContainerElement=e.document.createElement("DIV"),g.addClass(this._headersContainerElement,P._ClassName.pivotHeaders),this._headersContainerElement.addEventListener("keydown",this._headersKeyDown.bind(this)),this._element.appendChild(this._headersContainerElement),this._element.addEventListener("click",this._elementClickedHandler.bind(this)),g._addEventListener(this._headersContainerElement,"pointerenter",this._showNavButtons.bind(this)),g._addEventListener(this._headersContainerElement,"pointerout",this._hideNavButtons.bind(this)),g._addEventListener(this._headersContainerElement,"pointerdown",this._headersPointerDownHandler.bind(this)),g._addEventListener(this._headersContainerElement,"pointerup",this._headersPointerUpHandler.bind(this)),this._winKeyboard=new b._WinKeyboard(this._headersContainerElement),this._tabContainer=new y.TabContainer(this._headersContainerElement),this._viewportElement=e.document.createElement("DIV"),this._viewportElement.className=P._ClassName.pivotViewport,this._element.appendChild(this._viewportElement),this._viewportElement.setAttribute("role","group"),this._viewportElement.setAttribute("aria-label",A.pivotViewportAriaLabel),this._resizeHandlerBound=this._resizeHandler.bind(this),this.element.addEventListener("mselementresize",this._resizeHandlerBound),g._resizeNotifier.subscribe(this.element,this._resizeHandlerBound),this._viewportWidth=null,this._viewportElement.addEventListener("scroll",this._scrollHandler.bind(this)),this._viewportElement.addEventListener("MSManipulationStateChanged",this._MSManipulationStateChangedHandler.bind(this)),g._addEventListener(this._viewportElement,"pointerdown",this._pointerDownHandler.bind(this)),this._surfaceElement=e.document.createElement("DIV"),this._surfaceElement.className=P._ClassName.pivotSurface,this._viewportElement.appendChild(this._surfaceElement),this._offsetFromCenter=0,this._currentIndexOnScreen=0,this._loadId=0,this._navMode=P._NavigationModes.none,this._currentManipulationState=k.MS_MANIPULATION_STATE_STOPPED,this._parse(),r=n._shallowCopy(r),r.items&&(this.items=r.items,delete r.items),f.setOptions(this,r),this._refresh(),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},locked:{get:function(){return g.hasClass(this.element,P._ClassName.pivotLocked)},set:function(e){g[e?"addClass":"removeClass"](this.element,P._ClassName.pivotLocked),e&&this._hideNavButtons()}},items:{get:function(){return this._pendingItems?this._pendingItems:this._items},set:function(e){var t=!this._pendingItems;this._pendingItems=e,this._refresh(),t&&(this._pendingIndexOnScreen=0)}},title:{get:function(){return this._titleElement.textContent},set:function(e){e?(this._titleElement.style.display="block",this._titleElement.textContent=e):(this._titleElement.style.display="none",this._titleElement.textContent="")}},selectedIndex:{get:function(){return 0===this.items.length?-1:+this._pendingIndexOnScreen===this._pendingIndexOnScreen?this._pendingIndexOnScreen:this._currentIndexOnScreen},set:function(e){e>=0&&e<this.items.length&&(this._pendingRefresh?this._pendingIndexOnScreen=e:(this._navMode=this._navMode||P._NavigationModes.api,this._loadItem(e)))}},selectedItem:{get:function(){return this.items.getAt(this.selectedIndex)},set:function(e){var t=this.items.indexOf(e);-1!==t&&(this.selectedIndex=t)}},dispose:function(){if(!this._disposed){this._disposed=!0,this._updateEvents(this._items),g._resizeNotifier.unsubscribe(this.element,this._resizeHandlerBound),_._disposeElement(this._headersContainerElement);for(var e=0,t=this.items.length;t>e;e++)this.items.getAt(e).dispose()}},onselectionchanged:I(E.selectionChanged),onitemanimationstart:I(E.itemAnimationStart),onitemanimationend:I(E.itemAnimationEnd),_currentScrollTargetLocation:{get:function(){return this._viewportWidth===P._invalidViewportWidth?0:(50+this._offsetFromCenter)*Math.ceil(this._viewportWidth)}},_pointerType:{get:function(){return this._pointerTypeValue},set:function(e){this._pointerTypeValue!==e&&(this._pointerTypeValue=e,e===x?(g.removeClass(this.element,P._ClassName.pivotInputTypeMouse),g.addClass(this.element,P._ClassName.pivotInputTypeTouch),this._hideNavButtons()):(g.removeClass(this.element,P._ClassName.pivotInputTypeTouch),g.addClass(this.element,P._ClassName.pivotInputTypeMouse)))}},_rtl:{get:function(){return this._cachedRTL}},_viewportWidth:{get:function(){return this._viewportElWidth||(this._viewportElWidth=parseFloat(e.getComputedStyle(this._viewportElement).width),T&&(this._viewportElement.style[n._browserStyleEquivalents["scroll-snap-points-x"].scriptName]="snapInterval(0%, "+Math.ceil(this._viewportElWidth)+"px)")),this._viewportElWidth||P._invalidViewportWidth},set:function(e){this._viewportElWidth=e}},_applyProperties:function(){if(!this._disposed){if(this._pendingItems){for(this._updateEvents(this._items,this._pendingItems),this._items=this._pendingItems,this._pendingItems=null;this.element.firstElementChild!==this._titleElement;){var e=this.element.firstElementChild;e.parentNode.removeChild(e)}g.empty(this._surfaceElement)}this._attachItems();var t=this._pendingIndexOnScreen;this._pendingIndexOnScreen=null,this._currentIndexOnScreen=0,this._skipHeaderSlide=!0,this._pendingRefresh=!1,this.selectedIndex=Math.min(t,this.items.length-1),this._skipHeaderSlide=!1,this._recenterUI()}},_attachItems:function(){this._measured=!1;for(var e=0,t=this.items.length;t>e;e++){var n=this._items.getAt(e);if(n.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Pivot.DuplicateItem",A.duplicateItem);n.element.style.visibility="hidden",n.element.style.opacity=0,this._surfaceElement.appendChild(n.element)}},_parse:function(){for(var e=[],t=this.element.firstElementChild;t!==this._titleElement;){h.processAll(t);var n=t.winControl;if(!n)throw new i("WinJS.UI.Pivot.InvalidContent",A.invalidContent);e.push(n);var r=t.nextElementSibling;t=r}this.items=new c.List(e)},_refresh:function(){this._pendingRefresh||(this._pendingRefresh=!0,p.schedule(this._applyProperties.bind(this),p.Priority.high))},_renderHeaders:function(t){function i(t){function n(){h._disposed||h._headersContainerElement.contains(r)&&t!==h.selectedIndex&&"true"===r.getAttribute("aria-selected")&&(h.selectedIndex=t)}var i=h._items.getAt(t),r=e.document.createElement("BUTTON");r.style.maxWidth=.8*c+"px",t===h.selectedIndex?(g.addClass(r,P._ClassName.pivotHeaderSelected),r.setAttribute("aria-selected",!0)):r.setAttribute("aria-selected",!1),g.addClass(r,P._ClassName.pivotHeader),r._item=i,s(i,r),r.setAttribute("role","tab"),h._headersContainerElement.appendChild(r),new g._MutationObserver(n).observe(r,{attributes:!0,attributeFilter:["aria-selected"]})}if(!this._pendingRefresh&&this._items){var r=this._headersContainerElement.contains(e.document.activeElement),s=g._syncRenderer(v);_._disposeElement(this._headersContainerElement),g.empty(this._headersContainerElement);var o=e.getComputedStyle(this._headersContainerElement),a=parseFloat(o.marginLeft);a=a>0?0:a;var l=parseFloat(o.marginRight);l=l>0?0:l;var c=parseFloat(o.width)+a+l,h=this;if(1===this._items.length)i(0),this._viewportElement.style.overflow="hidden",this._headersContainerElement.style.marginLeft="0px",this._headersContainerElement.style.marginRight="0px";else if(this._items.length>1){var d=this._items.length+(t?2:1),p=this.selectedIndex-1;this._viewportElement.style.overflow&&(this._viewportElement.style.overflow="");for(var m=0;d>m;m++)-1===p?p=this._items.length-1:p===this._items.length&&(p=0),i(p),p++;if(!this._skipHeaderSlide){var f,y;t?(f="",y="0"):(f="0",y="");var b=this._headersContainerElement.children[d-1];b.style.opacity=f;var w=.167;b.style[n._browserStyleEquivalents.transition.scriptName]="opacity "+u._animationTimeAdjustment(w)+"s",e.getComputedStyle(b).opacity,b.style.opacity=y}this._headersContainerElement.children[0].setAttribute("aria-hidden","true"),this._headersContainerElement.style.marginLeft="0px",this._headersContainerElement.style.marginRight="0px";var C=this._rtl?"marginRight":"marginLeft",x=this._rtl?"paddingLeft":"paddingRight",S=this._headersContainerElement.children[0],I=S.offsetWidth+parseFloat(e.getComputedStyle(S)[C])-parseFloat(e.getComputedStyle(S)[x]);if(S!==this._headersContainerElement.children[0])return;this._headersContainerElement.style[C]=-1*I+"px",this._prevButton=e.document.createElement("button"),g.addClass(this._prevButton,P._ClassName.pivotNavButton),g.addClass(this._prevButton,P._ClassName.pivotNavButtonPrev),this._prevButton.addEventListener("click",function(){h.locked||(h._rtl?h._goNext():h._goPrevious())}),this._headersContainerElement.appendChild(this._prevButton),this._prevButton.style.left=this._rtl?"0px":I+"px",this._nextButton=e.document.createElement("button"),g.addClass(this._nextButton,P._ClassName.pivotNavButton),g.addClass(this._nextButton,P._ClassName.pivotNavButtonNext),this._nextButton.addEventListener("click",function(){h.locked||(h._rtl?h._goPrevious():h._goNext())}),this._headersContainerElement.appendChild(this._nextButton),this._nextButton.style.right=this._rtl?I+"px":"0px"}var E=this._headersContainerElement.children.length>1?1:0;this._tabContainer.childFocus=this._headersContainerElement.children[E],r&&this._headersContainerElement.children[E].focus()}},_resizeHandler:function(){if(!this._disposed){var e=this._viewportWidth;this._viewportWidth=null,e!==this._viewportWidth?(s.log&&s.log("_resizeHandler from:"+e+" to: "+this._viewportWidth),this._hidePivotItemAnimation&&this._hidePivotItemAnimation.cancel(),this._showPivotItemAnimation&&this._showPivotItemAnimation.cancel(),this._slideHeadersAnimation&&this._slideHeadersAnimation.cancel(),this._recenterUI(),this._renderHeaders()):s.log&&s.log("_resizeHandler worthless resize")}},_activateHeader:function(e){if(!this.locked){var t=this._items.indexOf(e._item);if(t!==this.selectedIndex){if(!e.previousSibling)return;this.selectedIndex=t}else g._setActiveFirstFocusableElement(this.selectedItem.element)}},_goNext:function(){this.selectedIndex<this._items.length-1?this.selectedIndex++:this.selectedIndex=0},_goPrevious:function(){this._animateToPrevious=!0,this.selectedIndex>0?this.selectedIndex--:this.selectedIndex=this._items.length-1,this._animateToPrevious=!1},_loadItem:function(t){var n=this._animateToPrevious;this._cachedRTL="rtl"===e.getComputedStyle(this._element,null).direction,this._loadId++;var i=this._loadId;this._hidePivotItemAnimation&&this._hidePivotItemAnimation.cancel(),this._showPivotItemAnimation&&this._showPivotItemAnimation.cancel(),this._slideHeadersAnimation&&this._slideHeadersAnimation.cancel(),this._currentItem&&this._hidePivotItem(this._currentItem.element,n);var r=this._currentIndexOnScreen;if(this._currentIndexOnScreen=t,this._slideHeaders(n,t,r),!(0>t)){var o=this._items.getAt(t);this._currentItem=o,n?this._offsetFromCenter--:t!==r&&this._offsetFromCenter++;var a=!1;T&&this._currentManipulationState!==k.MS_MANIPULATION_STATE_INERTIA&&(this._skipHeaderSlide?(s.log&&s.log("_skipHeaderSlide index:"+this.selectedIndex+" offset: "+this._offsetFromCenter+" scrollLeft: "+this._currentScrollTargetLocation,"winjs pivot","log"),g.setScrollPosition(this._viewportElement,{scrollLeft:this._currentScrollTargetLocation})):(s.log&&s.log("zoomTo index:"+this.selectedIndex+" offset: "+this._offsetFromCenter+" scrollLeft: "+this._currentScrollTargetLocation,"winjs pivot","log"),this._viewportElement.msZoomTo({contentX:this._currentScrollTargetLocation,contentY:0,viewportX:0,viewportY:0}),a=0!==this._offsetFromCenter&&this.items.length>1));var l=this,u={index:t,direction:n?"backwards":"forward",item:o};this._writeProfilerMark("selectionChanged,info"),this._fireEvent(P._EventName.selectionChanged,!0,!1,u),o._process().then(function(){if(!l._disposed&&i===l._loadId){T?(o.element.style[l._getDirectionAccessor()]=l._currentScrollTargetLocation+"px",l._showPivotItem(o.element,n)):l._hidePivotItemAnimation?l._showPivotItemAnimation=l._hidePivotItemAnimation.then(function(){return l._disposed||i!==l._loadId?void 0:l._showPivotItem(o.element,n)}):l._showPivotItem(o.element,n);var e;a?(l._stoppedAndRecenteredSignal||(l._stoppedAndRecenteredSignal=new m),e=l._stoppedAndRecenteredSignal.promise):e=d.wrap(),d.join([l._slideHeadersAnimation,l._showPivotItemAnimation,l._hidePivotItemAnimation]).then(function(){e.then(function(){d.timeout(50).then(function(){l._disposed||i!==l._loadId||(l._navMode=P._NavigationModes.none,l._writeProfilerMark("itemAnimationStop,info"),l._fireEvent(P._EventName.itemAnimationEnd,!0))})})})}})}},_MSManipulationStateChangedHandler:function(e){if(this._currentManipulationState=e.currentState,T&&e.target===this._viewportElement)if(this._currentManipulationState===k.MS_MANIPULATION_STATE_STOPPED?s.log&&s.log("MSManipulation: Stopped","winjs pivot","log"):this._currentManipulationState===k.MS_MANIPULATION_STATE_INERTIA?s.log&&s.log("MSManipulation: Inertia","winjs pivot","log"):s.log&&s.log("MSManipulation: Active","winjs pivot","log"),this._stoppedAndRecenteredSignal||(this._stoppedAndRecenteredSignal=new m),this._manipulationRecenterPromise&&this._manipulationRecenterPromise.cancel(),this._currentManipulationState===k.MS_MANIPULATION_STATE_STOPPED){this._navMode===P._NavigationModes.scroll&&this._scrollHandler(),this._navMode=P._NavigationModes.none;var t=this;this._manipulationRecenterPromise=d._cancelBlocker(d.join([p.schedulePromiseNormal(null,"WinJS.UI.Pivot._MSManipulationStateChangedHandler_animationPlaceholder"),this._hidePivotItemAnimation,this._showPivotItemAnimation,this._slideHeadersAnimation])).then(function(){t._disposed||(t._currentManipulationState===k.MS_MANIPULATION_STATE_STOPPED?(s.log&&s.log("Still in Stopped state: calling _recenterUI","winjs pivot","log"),t._recenterUI()):(this._stoppedAndRecenteredSignal.complete(),this._stoppedAndRecenteredSignal=null))})}else if(this._currentManipulationState===k.MS_MANIPULATION_STATE_INERTIA){var n=e.inertiaDestinationX;if(+n===n){s.log&&s.log("MSManipulation: inertiaDestinationX: "+n);var i=n-this._currentScrollTargetLocation;i>0?(s.log&&s.log("MSManipulation: Inertia diff > 1","winjs pivot","log"),this._navMode=P._NavigationModes.inertia,this._goNext()):0>i&&(s.log&&s.log("MSManipulation: Stopped diff < -1","winjs pivot","log"),this._navMode=P._NavigationModes.inertia,this._goPrevious())}}},_scrollHandler:function(){if(T&&!this._disposed){if(this._recentering&&this._stoppedAndRecenteredSignal)return this._stoppedAndRecenteredSignal.complete(),this._stoppedAndRecenteredSignal=null,void(this._recentering=!1);if((this._navMode===P._NavigationModes.none||this._navMode===P._NavigationModes.scroll)&&(this._navMode=P._NavigationModes.scroll,this._currentManipulationState===k.MS_MANIPULATION_STATE_STOPPED)){s.log&&s.log("_scrollHandler ScrollPosition: "+g.getScrollPosition(this._viewportElement).scrollLeft,"winjs pivot","log");var t=g.getScrollPosition(this._viewportElement).scrollLeft-this._currentScrollTargetLocation;this._cachedRTL="rtl"===e.getComputedStyle(this._element,null).direction,t>0?(s.log&&s.log("_scrollHandler diff > 1: "+t,"winjs pivot","log"),this._goNext()):0>t&&(s.log&&s.log("_scrollHandler diff < -1: "+t,"winjs pivot","log"),this._goPrevious())}}},_recenterUI:function(){T&&(this._offsetFromCenter=0,g.getScrollPosition(this._viewportElement).scrollLeft!==this._currentScrollTargetLocation?(this._recentering=!0,this._stoppedAndRecenteredSignal=this._stoppedAndRecenteredSignal||new m):this._stoppedAndRecenteredSignal&&(this._stoppedAndRecenteredSignal.complete(),this._stoppedAndRecenteredSignal=null),this.selectedItem&&(this.selectedItem.element.style[this._getDirectionAccessor()]=this._currentScrollTargetLocation+"px"),s.log&&s.log("_recenterUI index:"+this.selectedIndex+" offset: "+this._offsetFromCenter+" scrollLeft: "+this._currentScrollTargetLocation),g.setScrollPosition(this._viewportElement,{scrollLeft:this._currentScrollTargetLocation}))},_hidePivotItem:function(e,t){function n(){i._disposed||(i._hidePivotItemAnimation=null,e.style.visibility="hidden",e.style.opacity=0)}var i=this,r=this._rtl&&!t||t&&!this._rtl;this._hidePivotItemAnimation=u.isAnimationEnabled()?l[r?"slideRightOut":"slideLeftOut"](e):p.schedulePromiseNormal(null,"WinJS.UI.Pivot._hidePivotItem_animationPlaceholder"),this._hidePivotItemAnimation.then(n,n)},_showPivotItem:function(e,t){function n(e){var t=e.getBoundingClientRect();return t.top<a.bottom&&t.bottom>a.top}function i(){h._disposed||(h._showPivotItemAnimation=null)}if(this._writeProfilerMark("itemAnimationStart,info"),this._fireEvent(P._EventName.itemAnimationStart,!0),!u.isAnimationEnabled())return e.style.visibility="",e.style.opacity="",void(this._showPivotItemAnimation=null);var r=e.querySelectorAll(".win-pivot-slide1"),s=e.querySelectorAll(".win-pivot-slide2"),o=e.querySelectorAll(".win-pivot-slide3"),a=this._viewportElement.getBoundingClientRect();r=Array.prototype.filter.call(r,n),s=Array.prototype.filter.call(s,n),o=Array.prototype.filter.call(o,n);var c=this._rtl&&!t||t&&!this._rtl;e.style.visibility="",this._showPivotItemAnimation=l[c?"slideRightIn":"slideLeftIn"](e,r,s,o);var h=this;return this._showPivotItemAnimation.then(i,i),this._showPivotItemAnimation},_slideHeaders:function(e,t,i){function r(e){return a?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}function s(){h._disposed||(h._renderHeaders(e),h._slideHeadersAnimation=null)}if(0>t||this._skipHeaderSlide)return void this._renderHeaders(e);var o;if(e?o=this._headersContainerElement.children[0]:(i>t&&(t+=this._items.length),o=this._headersContainerElement.children[1+t-i]),!o)return void this._renderHeaders(e);g.removeClass(this._headersContainerElement.children[1],P._ClassName.pivotHeaderSelected),g.addClass(o,P._ClassName.pivotHeaderSelected);var a=this._rtl,l=r(this._headersContainerElement.children[1])-r(o);a&&(l*=-1);var c,h=this;c=u.isAnimationEnabled()?u.executeTransition(this._headersContainerElement.querySelectorAll("."+P._ClassName.pivotHeader),{property:n._browserStyleEquivalents.transform.cssName,delay:0,duration:P._headerSlideAnimationDuration,timing:"ease-out",to:"translateX("+l+"px)"}):d.wrap(),this._slideHeadersAnimation=c.then(s,s)},_elementClickedHandler:function(e){if(this.locked||this._navigationHandled)return void(this._navigationHandled=!1);var t,n=e.target;if(g.hasClass(n,P._ClassName.pivotHeader))t=n;else{var i=!1,r=g._elementsFromPoint(e.clientX,e.clientY);if(r&&r[0]===this._viewportElement)for(var s=0,o=r.length;o>s;s++)r[s]===n&&(i=!0),g.hasClass(r[s],P._ClassName.pivotHeader)&&(t=r[s]);i||(t=null)}t&&this._activateHeader(t)},_headersKeyDown:function(e){this.locked||(e.keyCode===S.leftArrow||e.keyCode===S.pageUp?this._rtl?this._goNext():this._goPrevious():(e.keyCode===S.rightArrow||e.keyCode===S.pageDown)&&(this._rtl?this._goPrevious():this._goNext()))},_headersPointerDownHandler:function(e){e.preventDefault(),this._headersPointerDownPoint={x:e.clientX,y:e.clientY,type:e.pointerType||"mouse"}},_headersPointerUpHandler:function(e){if(!this._headersPointerDownPoint||this.locked)return void(this._headersPointerDownPoint=null);var t=e.clientX-this._headersPointerDownPoint.x;if(t=this._rtl?-t:t,this._navigationHandled=!1,(!g._supportsTouchDetection||this._headersPointerDownPoint.type===e.pointerType&&e.pointerType===x)&&(t<-P._headerSwipeTriggerDistance?(this._goNext(),this._navigationHandled=!0):t>P._headerSwipeTriggerDistance&&(this._goPrevious(),this._navigationHandled=!0)),!this._navigationHandled){for(var n=e.target;null!==n&&!g.hasClass(n,P._ClassName.pivotHeader);)n=n.parentElement;null!==n&&(this._activateHeader(n),this._navigationHandled=!0)}this._headersPointerDownPoint=null},_hideNavButtons:function(e){e&&this._headersContainerElement.contains(e.relatedTarget)||g.removeClass(this._headersContainerElement,P._ClassName.pivotShowNavButtons)},_pointerDownHandler:function(){s.log&&s.log("_pointerDown","winjs pivot","log"),this._manipulationRecenterPromise&&this._manipulationRecenterPromise.cancel(),this._slideHeadersAnimation&&this._slideHeadersAnimation.cancel(),this._hidePivotItemAnimation&&this._hidePivotItemAnimation.cancel()},_showNavButtons:function(e){this.locked||e&&e.pointerType===x||g.addClass(this._headersContainerElement,P._ClassName.pivotShowNavButtons)},_handleItemChanged:function(e){if(!this._pendingItems){var t=e.detail.index,n=e.detail.newValue,r=e.detail.oldValue;if(n.element!==r.element){if(n.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Pivot.DuplicateItem",A.duplicateItem);n.element.style.visibility="hidden",n.element.style.opacity=0,this._surfaceElement.insertBefore(n.element,r.element),this._surfaceElement.removeChild(r.element),t===this._currentIndexOnScreen&&(this.selectedIndex=this._currentIndexOnScreen)}this._renderHeaders()}},_handleItemInserted:function(e){if(!this._pendingItems){var t=e.detail.index,n=e.detail.value;if(n.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Pivot.DuplicateItem",A.duplicateItem);n.element.style.visibility="hidden",n.element.style.opacity=0,t<this.items.length-1?this._surfaceElement.insertBefore(n.element,this.items.getAt(t+1).element):this._surfaceElement.appendChild(n.element),t<=this._currentIndexOnScreen&&this._currentIndexOnScreen++,1===this._items.length&&(this.selectedIndex=0),this._renderHeaders()}},_handleItemMoved:function(e){if(!this._pendingItems){var t=e.detail.oldIndex,n=e.detail.newIndex,i=e.detail.value;n<this.items.length-1?this._surfaceElement.insertBefore(i.element,this.items.getAt(n+1).element):this._surfaceElement.appendChild(i.element),t<this._currentIndexOnScreen&&n>=this._currentIndexOnScreen?this._currentIndexOnScreen--:n>this._currentIndexOnScreen&&t<=this._currentIndexOnScreen?this._currentIndexOnScreen++:t===this._currentIndexOnScreen&&(this.selectedIndex=n),this._renderHeaders()}},_handleItemReload:function(){this.items=this.items},_handleItemRemoved:function(e){if(!this._pendingItems){var t=e.detail.value,n=e.detail.index;this._surfaceElement.removeChild(t.element),n<this._currentIndexOnScreen?this._currentIndexOnScreen--:n===this._currentIndexOnScreen&&(this.selectedIndex=Math.min(this.items.length-1,this._currentIndexOnScreen)),this._renderHeaders()}},_fireEvent:function(t,n,i,r){var s=e.document.createEvent("CustomEvent");return s.initCustomEvent(t,!!n,!!i,r),this.element.dispatchEvent(s)},_getDirectionAccessor:function(){return this._rtl?"right":"left"},_updateEvents:function(e,t){e&&(e.removeEventListener("itemchanged",this._handleItemChangedBound),e.removeEventListener("iteminserted",this._handleItemInsertedBound),e.removeEventListener("itemmoved",this._handleItemMovedBound),e.removeEventListener("itemremoved",this._handleItemRemovedBound),e.removeEventListener("reload",this._handleItemReloadBound)),t&&(t.addEventListener("itemchanged",this._handleItemChangedBound),t.addEventListener("iteminserted",this._handleItemInsertedBound),t.addEventListener("itemmoved",this._handleItemMovedBound),t.addEventListener("itemremoved",this._handleItemRemovedBound),t.addEventListener("reload",this._handleItemReloadBound))},_updatePointerType:function(e){this._pointerType=e.pointerType||C},_writeProfilerMark:function(e){var t="WinJS.UI.Pivot:"+this._id+":"+e;a(t),s.log&&s.log(t,null,"pivotprofiler")}},{_invalidViewportWidth:-1,_headerSlideAnimationDuration:250,_headerSwipeTriggerDistance:50,_ClassName:w._ClassName,_EventName:{selectionChanged:E.selectionChanged,itemAnimationStart:E.itemAnimationStart,itemAnimationEnd:E.itemAnimationEnd},_NavigationModes:{api:"api",inertia:"inertia",none:"",scroll:"scroll"}});t.Class.mix(P,f.DOMEventMixin);var A={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get duplicateItem(){return o._getWinJSString("ui/duplicateItem").value},get invalidContent(){return"Invalid content: Pivot content must be made up of PivotItems."},get pivotAriaLabel(){return o._getWinJSString("ui/pivotAriaLabel").value},get pivotViewportAriaLabel(){return o._getWinJSString("ui/pivotViewportAriaLabel").value}};return P})})}),i("WinJS/Controls/Hub/_Section",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../ControlProcessor","../../Promise","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardBehavior"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{HubSection:n.Namespace._lazy(function(){var e={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},s=n.Class.define(function(n,i){if(n=n||t.document.createElement("DIV"),i=i||{},n.winControl)throw new r("WinJS.UI.HubSection.DuplicateConstruction",e.duplicateConstruction);n.winControl=this,this._element=n,c.addClass(this.element,s._ClassName.hubSection),c.addClass(this.element,"win-disposable"),this._headerElement=t.document.createElement("DIV"),this._headerElement.className=s._ClassName.hubSectionHeader,this._headerElement.innerHTML='<button type="button" role="link" class="'+s._ClassName.hubSectionInteractive+" "+s._ClassName.hubSectionHeaderTabStop+'"><div class="'+s._ClassName.hubSectionHeaderWrapper+'" tabindex="-1"><h2 class="'+s._ClassName.hubSectionHeaderContent+" "+s._Constants.ellipsisTypeClassName+" "+s._Constants.xLargeTypeClassName+'"></h2><span class="'+s._ClassName.hubSectionHeaderChevron+" "+s._Constants.ellipsisTypeClassName+" "+s._Constants.xLargeTypeClassName+'"></span></div></button>',this._headerTabStopElement=this._headerElement.firstElementChild,this._headerWrapperElement=this._headerTabStopElement.firstElementChild,this._headerContentElement=this._headerWrapperElement.firstElementChild,this._headerChevronElement=this._headerWrapperElement.lastElementChild,n.appendChild(this._headerElement),this._winKeyboard=new h._WinKeyboard(this._headerElement),this._contentElement=t.document.createElement("DIV"),this._contentElement.className=s._ClassName.hubSectionContent,this._contentElement.style.visibility="hidden",n.appendChild(this._contentElement);for(var a=this.element.firstChild;a!==this._headerElement;){var u=a.nextSibling;this._contentElement.appendChild(a),a=u}this._processors=[o.processAll],l.setOptions(this,i)},{element:{get:function(){return this._element}},isHeaderStatic:{get:function(){return this._isHeaderStatic},set:function(e){this._isHeaderStatic=e,this._isHeaderStatic?(this._headerTabStopElement.setAttribute("role","heading"),c.removeClass(this._headerTabStopElement,s._ClassName.hubSectionInteractive)):(this._headerTabStopElement.setAttribute("role","link"),c.addClass(this._headerTabStopElement,s._ClassName.hubSectionInteractive))}},contentElement:{get:function(){return this._contentElement}},header:{get:function(){return this._header},set:function(e){this._header=e,this._renderHeader()}},_setHeaderTemplate:function(e){this._template=c._syncRenderer(e),this._renderHeader()},_renderHeader:function(){this._template&&(u._disposeElement(this._headerContentElement),c.empty(this._headerContentElement),this._template(this,this._headerContentElement))},_process:function(){var e=this;return this._processed=(this._processors||[]).reduce(function(t,n){return t.then(function(){return n(e.contentElement)})},this._processed||a.as()),this._processors=null,this._processed},dispose:function(){this._disposed||(this._disposed=!0,this._processors=null,u._disposeElement(this._headerContentElement),u.disposeSubTree(this.contentElement))}},{_ClassName:{hubSection:"win-hub-section",hubSectionHeader:"win-hub-section-header",hubSectionHeaderTabStop:"win-hub-section-header-tabstop",hubSectionHeaderWrapper:"win-hub-section-header-wrapper",hubSectionInteractive:"win-hub-section-header-interactive",hubSectionHeaderContent:"win-hub-section-header-content",hubSectionHeaderChevron:"win-hub-section-header-chevron",hubSectionContent:"win-hub-section-content"},_Constants:{ellipsisTypeClassName:"win-type-ellipsis",xLargeTypeClassName:"win-type-x-large"},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){t!==o.processAll&&(e._processors=e._processors||[],e._processors.push(t),e._processed&&e._process())})});return s})})}),i("WinJS/Controls/Hub",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../BindingList","../ControlProcessor","../Promise","../_Signal","../Scheduler","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_UI","./Hub/_Section","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y){"use strict";t.Namespace.define("WinJS.UI",{Hub:t.Namespace._lazy(function(){function g(t){var n=e.document.createTextNode("object"==typeof t.header?JSON.stringify(t.header):""+t.header);return n}var b=_.Key,w=r._createEventProperty,C={contentAnimating:"contentanimating",headerInvoked:"headerinvoked",loadingStateChanged:"loadingstatechanged"},x=500,S={scrollPos:"scrollTop",scrollSize:"scrollHeight",offsetPos:"offsetTop",offsetSize:"offsetHeight",oppositeOffsetSize:"offsetWidth",marginStart:"marginTop",marginEnd:"marginBottom",borderStart:"borderTopWidth",borderEnd:"borderBottomWidth",paddingStart:"paddingTop",paddingEnd:"paddingBottom"},I={scrollPos:"scrollLeft",scrollSize:"scrollWidth",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oppositeOffsetSize:"offsetHeight",marginStart:"marginRight",marginEnd:"marginLeft",borderStart:"borderRightWidth",borderEnd:"borderLeftWidth",paddingStart:"paddingRight",paddingEnd:"paddingLeft"},E={scrollPos:"scrollLeft",scrollSize:"scrollWidth",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oppositeOffsetSize:"offsetHeight",marginStart:"marginLeft",marginEnd:"marginRight",borderStart:"borderLeftWidth",borderEnd:"borderRightWidth",paddingStart:"paddingLeft",paddingEnd:"paddingRight"},k=t.Class.define(function(t,n){if(t=t||e.document.createElement("DIV"),n=n||{},t.winControl)throw new i("WinJS.UI.Hub.DuplicateConstruction",P.duplicateConstruction);
this._id=t.id||_._uniqueID(t),this._writeProfilerMark("constructor,StartTM"),this._windowKeyDownHandlerBound=this._windowKeyDownHandler.bind(this),e.addEventListener("keydown",this._windowKeyDownHandlerBound),t.winControl=this,this._element=t,_.addClass(this.element,k._ClassName.hub),_.addClass(this.element,"win-disposable"),this._viewportElement=e.document.createElement("DIV"),this._viewportElement.className=k._ClassName.hubViewport,this._element.appendChild(this._viewportElement),this._viewportElement.setAttribute("role","group"),this._viewportElement.setAttribute("aria-label",P.hubViewportAriaLabel),this._surfaceElement=e.document.createElement("DIV"),this._surfaceElement.className=k._ClassName.hubSurface,this._viewportElement.appendChild(this._surfaceElement),this._visible=!1,this._viewportElement.style.opacity=0,n.orientation||(this._orientation=v.Orientation.horizontal,_.addClass(this.element,k._ClassName.hubHorizontal)),this._fireEntrance=!0,this._animateEntrance=!0,this._loadId=0,this.runningAnimations=new d.wrap,this._currentIndexForSezo=0,this._parse(),f.setOptions(this,n),_._addEventListener(this.element,"focusin",this._focusin.bind(this),!1),this.element.addEventListener("keydown",this._keyDownHandler.bind(this)),this.element.addEventListener("click",this._clickHandler.bind(this)),this._resizeHandlerBound=this._resizeHandler.bind(this),this.element.addEventListener("mselementresize",this._resizeHandlerBound),_._resizeNotifier.subscribe(this.element,this._resizeHandlerBound),this._viewportElement.addEventListener("scroll",this._scrollHandler.bind(this)),this._surfaceElement.addEventListener("mselementresize",this._contentResizeHandler.bind(this)),this._handleSectionChangedBind=this._handleSectionChanged.bind(this),this._handleSectionInsertedBind=this._handleSectionInserted.bind(this),this._handleSectionMovedBind=this._handleSectionMoved.bind(this),this._handleSectionRemovedBind=this._handleSectionRemoved.bind(this),this._handleSectionReloadBind=this._handleSectionReload.bind(this),this._refresh(),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},orientation:{get:function(){return this._orientation},set:function(e){if(e!==this._orientation){if(this._measured=!1,this._names){var t={};t[this._names.scrollPos]=0,_.setScrollPosition(this._viewportElement,t)}e===v.Orientation.vertical?(_.removeClass(this.element,k._ClassName.hubHorizontal),_.addClass(this.element,k._ClassName.hubVertical)):(e=v.Orientation.horizontal,_.removeClass(this.element,k._ClassName.hubVertical),_.addClass(this.element,k._ClassName.hubHorizontal)),this._orientation=e,m.schedule(this._updateSnapList.bind(this),m.Priority.idle)}}},sections:{get:function(){return this._pendingSections?this._pendingSections:this._sections},set:function(e){var t=!this._pendingSections;this._pendingSections=e,this._refresh(),t&&(this.scrollPosition=0)}},headerTemplate:{get:function(){return this._pendingHeaderTemplate?this._pendingHeaderTemplate:(this._headerTemplate||(this._headerTemplate=g),this._headerTemplate)},set:function(e){this._pendingHeaderTemplate=e||g,this._refresh()}},scrollPosition:{get:function(){return+this._pendingScrollLocation===this._pendingScrollLocation?this._pendingScrollLocation:(this._measure(),this._scrollPosition)},set:function(e){if(e=Math.max(0,e),this._pendingRefresh)this._pendingScrollLocation=e,this._pendingSectionOnScreen=null;else{this._measure();var t=Math.max(0,Math.min(this._scrollLength-this._viewportSize,e));this._scrollPosition=t;var n={};n[this._names.scrollPos]=t,_.setScrollPosition(this._viewportElement,n)}}},sectionOnScreen:{get:function(){if(+this._pendingSectionOnScreen===this._pendingSectionOnScreen)return this._pendingSectionOnScreen;this._measure();for(var e=0;e<this._sectionSizes.length;e++){var t=this._sectionSizes[e];if(t.offset+t.size-t.borderEnd-t.paddingEnd>this._scrollPosition+this._startSpacer+t.borderStart+t.paddingStart)return e}return-1},set:function(e){e=Math.max(0,e),this._pendingRefresh?(this._pendingSectionOnScreen=e,this._pendingScrollLocation=null):(this._measure(),e>=0&&e<this._sectionSizes.length&&this._scrollToSection(e))}},indexOfFirstVisible:{get:function(){this._measure();for(var e=0;e<this._sectionSizes.length;e++){var t=this._sectionSizes[e];if(t.offset+t.size-t.borderEnd-t.paddingEnd>this._scrollPosition)return e}return-1}},indexOfLastVisible:{get:function(){this._measure();for(var e=this._sectionSizes.length-1;e>=0;e--){var t=this._sectionSizes[e];if(t.offset+t.paddingStart+t.borderStart<this._scrollPosition+this._viewportSize)return e}return-1}},onheaderinvoked:w(C.headerInvoked),onloadingstatechanged:w(C.loadingStateChanged),oncontentanimating:w(C.contentAnimating),_refresh:function(){this._pendingRefresh||(this._loadId++,this._setState(k.LoadingState.loading),this._pendingRefresh=!0,m.schedule(this._refreshImpl.bind(this),m.Priority.high))},_refreshImpl:function(){if(!this._disposed){var e=d.wrap();if(this._pendingSections&&(this._animateEntrance=!0,this._fireEntrance=!this._visible,!this._fireEntrance&&(this._visible=!1,this._viewportElement.style.opacity=0,u.isAnimationEnabled()))){var t=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.contentTransition});t&&(this._viewportElement.style["-ms-overflow-style"]="none",e=l.fadeOut(this._viewportElement).then(function(){this._viewportElement.style["-ms-overflow-style"]=""}.bind(this))),this._animateEntrance=t}e.done(this._applyProperties.bind(this))}},_applyProperties:function(){if(!this._disposed){this._pendingRefresh=!1;var e=!1;if(this._pendingSections){for(e=!0,this._updateEvents(this._sections,this._pendingSections),this._sections=this._pendingSections,this._pendingSections=null;this.element.firstElementChild!==this._viewportElement;){var t=this.element.firstElementChild;t.parentNode.removeChild(t)}_.empty(this._surfaceElement)}this._pendingHeaderTemplate&&(this._headerTemplate=this._pendingHeaderTemplate,this._pendingHeaderTemplate=null),this._assignHeaderTemplate(),e&&this._attachSections(),+this._pendingSectionOnScreen===this._pendingSectionOnScreen?this.sectionOnScreen=this._pendingSectionOnScreen:this.scrollPosition=+this._pendingScrollLocation===this._pendingScrollLocation?this._pendingScrollLocation:0,this._pendingSectionOnScreen=null,this._pendingScrollLocation=null,this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionChanged:function(e){if(!this._pendingSections){var t=e.detail.newValue,n=e.detail.oldValue;if(t._setHeaderTemplate(this.headerTemplate),t.element!==n.element){if(t.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",P.duplicateSection);this._surfaceElement.insertBefore(t.element,n.element),this._surfaceElement.removeChild(n.element),this._measured=!1,this._setState(k.LoadingState.loading),this._loadSections()}}},_handleSectionInserted:function(e){if(!this._pendingSections){var t=e.detail.index,n=e.detail.value;n._animation&&n._animation.cancel();var r,s=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.insert,index:t,section:n});if(s){for(var o=[],a=t+1;a<this.sections.length;a++)o.push(this.sections.getAt(a).element);r=new l._createUpdateListAnimation([n.element],[],o)}if(n.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",P.duplicateSection);if(n._setHeaderTemplate(this.headerTemplate),t<this.sections.length-1?this._surfaceElement.insertBefore(n.element,this.sections.getAt(t+1).element):this._surfaceElement.appendChild(n.element),this._measured=!1,r){var u=r.execute();this.runningAnimations=d.join([this.runningAnimations,u])}this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionMoved:function(e){if(!this._pendingSections){var t=e.detail.newIndex,n=e.detail.value;t<this.sections.length-1?this._surfaceElement.insertBefore(n.element,this.sections.getAt(t+1).element):this._surfaceElement.appendChild(n.element),this._measured=!1,this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionRemoved:function(e){if(!this._pendingSections){var t=e.detail.value,n=e.detail.index,i=d.wrap(),r=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.remove,index:n,section:t});if(r){for(var s=[],o=n;o<this.sections.length;o++)s.push(this.sections.getAt(o).element);var a=new l._createUpdateListAnimation([],[t.element],s);this._measure();var u=t.element.offsetTop,c=t.element.offsetLeft;t.element.style.position="absolute",t.element.style.top=u,t.element.style.left=c,t.element.style.opacity=0,this._measured=!1,i=a.execute().then(function(){t.element.style.position="",t.element.style.top="",t.element.style.left="",t.element.style.opacity=1}.bind(this))}i.done(function(){this._disposed||(this._surfaceElement.removeChild(t.element),this._measured=!1)}.bind(this)),t._animation=i,this.runningAnimations=d.join([this.runningAnimations,i]),this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionReload:function(){this.sections=this.sections},_updateEvents:function(e,t){e&&(e.removeEventListener("itemchanged",this._handleSectionChangedBind),e.removeEventListener("iteminserted",this._handleSectionInsertedBind),e.removeEventListener("itemmoved",this._handleSectionMovedBind),e.removeEventListener("itemremoved",this._handleSectionRemovedBind),e.removeEventListener("reload",this._handleSectionReloadBind)),t&&(t.addEventListener("itemchanged",this._handleSectionChangedBind),t.addEventListener("iteminserted",this._handleSectionInsertedBind),t.addEventListener("itemmoved",this._handleSectionMovedBind),t.addEventListener("itemremoved",this._handleSectionRemovedBind),t.addEventListener("reload",this._handleSectionReloadBind))},_attachSections:function(){this._measured=!1;for(var e=0;e<this.sections.length;e++){var t=this._sections.getAt(e);if(t._animation&&t._animation.cancel(),t.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",P.duplicateSection);this._surfaceElement.appendChild(t.element)}},_assignHeaderTemplate:function(){this._measured=!1;for(var e=0;e<this.sections.length;e++){var t=this._sections.getAt(e);t._setHeaderTemplate(this.headerTemplate)}},_loadSection:function(e){var t=this._sections.getAt(e);return t._process().then(function(){var e=t.contentElement.style;""!==e.visibility&&(e.visibility="")})},_loadSections:function(){function t(e){e.then(function(){m.schedule(n,m.Priority.idle)})}function n(){if(i===r._loadId&&!r._disposed)if(o.length){var e=o.shift(),n=r._loadSection(e);t(n)}else c.complete()}this._loadId++;var i=this._loadId,r=this,s=d.wrap(),o=[],a=d.wrap();if(this._showProgressPromise||(this._showProgressPromise=d.timeout(x).then(function(){this._disposed||(this._progressBar||(this._progressBar=e.document.createElement("progress"),_.addClass(this._progressBar,k._ClassName.hubProgress),this._progressBar.max=100),this._progressBar.parentNode||this.element.insertBefore(this._progressBar,this._viewportElement),this._showProgressPromise=null)}.bind(this),function(){this._showProgressPromise=null}.bind(this))),this.sections.length){var c=new p;a=c.promise;for(var h=[],f=Math.max(0,this.indexOfFirstVisible),g=Math.max(0,this.indexOfLastVisible),v=f;g>=v;v++)h.push(this._loadSection(v));for(f--,g++;f>=0||g<this.sections.length;)g<this.sections.length&&(o.push(g),g++),f>=0&&(o.push(f),f--);var y=d.join(h);y.done(function(){i!==this._loadId||r._disposed||(this._showProgressPromise&&this._showProgressPromise.cancel(),this._progressBar&&this._progressBar.parentNode&&this._progressBar.parentNode.removeChild(this._progressBar),m.schedule(function(){if(i===this._loadId&&!r._disposed&&!this._visible){if(this._visible=!0,this._viewportElement.style.opacity=1,this._animateEntrance&&u.isAnimationEnabled()){var t={type:k.AnimationType.entrance};(!this._fireEntrance||this._fireEvent(k._EventName.contentAnimating,t))&&(this._viewportElement.style["-ms-overflow-style"]="none",s=l.enterContent(this._viewportElement,[{left:this._fireEntrance?"100px":"40px",top:"0px",rtlflip:!0}],{mechanism:"transition"}).then(function(){this._viewportElement.style["-ms-overflow-style"]=""}.bind(this)))}this._element===e.document.activeElement&&this._moveFocusIn(this.sectionOnScreen)}},m.Priority.high,this,"WinJS.UI.Hub.entranceAnimation"))}.bind(this)),t(y)}else this._showProgressPromise&&this._showProgressPromise.cancel(),this._progressBar&&this._progressBar.parentNode&&this._progressBar.parentNode.removeChild(this._progressBar);d.join([this.runningAnimations,s,a]).done(function(){i!==this._loadId||r._disposed||(this.runningAnimations=d.wrap(),this._setState(k.LoadingState.complete),m.schedule(this._updateSnapList.bind(this),m.Priority.idle))}.bind(this))},loadingState:{get:function(){return this._loadingState}},_setState:function(t){if(t!==this._loadingState){this._writeProfilerMark("loadingStateChanged:"+t+",info"),this._loadingState=t;var n=e.document.createEvent("CustomEvent");n.initCustomEvent(k._EventName.loadingStateChanged,!0,!1,{loadingState:t}),this._element.dispatchEvent(n)}},_parse:function(){for(var e=[],t=this.element.firstElementChild;t!==this._viewportElement;){h.processAll(t);var n=t.winControl;if(!n)throw new i("WinJS.UI.Hub.InvalidContent",P.invalidContent);e.push(n);var r=t.nextElementSibling;t=r}this.sections=new c.List(e)},_fireEvent:function(t,n){var i=e.document.createEvent("CustomEvent");return i.initCustomEvent(t,!0,!0,n),this.element.dispatchEvent(i)},_findHeaderTabStop:function(e){if(e.parentNode&&_._matchesSelector(e,".win-hub-section-header-tabstop, .win-hub-section-header-tabstop *")){for(;!_.hasClass(e,"win-hub-section-header-tabstop");)e=e.parentElement;return e}return null},_isHeaderInteractive:function(e){return e.parentNode?_._matchesSelector(e,".win-interactive, .win-interactive *"):!1},_clickHandler:function(e){var t=this._findHeaderTabStop(e.target);if(t&&!this._isHeaderInteractive(e.target)){var n=t.parentElement.parentElement.winControl;if(!n.isHeaderStatic){var i=this.sections.indexOf(n);this._fireEvent(k._EventName.headerInvoked,{index:i,section:n})}}},_resizeHandler:function(){this._measured=!1,m.schedule(this._updateSnapList.bind(this),m.Priority.idle)},_contentResizeHandler:function(){this._measured=!1,m.schedule(this._updateSnapList.bind(this),m.Priority.idle)},_scrollHandler:function(){this._measured=!1,this._pendingSections||(this._pendingScrollLocation=null,this._pendingSectionOnScreen=null,this._pendingScrollHandler||(this._pendingScrollHandler=n._requestAnimationFrame(function(){this._pendingScrollHandler=null,this._pendingSections||this.loadingState!==k.LoadingState.complete&&this._loadSections()}.bind(this))))},_measure:function(){if(!this._measured||0===this._scrollLength){this._writeProfilerMark("measure,StartTM"),this._measured=!0,this._rtl="rtl"===e.getComputedStyle(this._element,null).direction,this._names=this.orientation===v.Orientation.vertical?S:this._rtl?I:E,this._viewportSize=this._viewportElement[this._names.offsetSize],this._viewportOppositeSize=this._viewportElement[this._names.oppositeOffsetSize],this._scrollPosition=_.getScrollPosition(this._viewportElement)[this._names.scrollPos],this._scrollLength=this._viewportElement[this._names.scrollSize];var t=e.getComputedStyle(this._surfaceElement);this._startSpacer=parseFloat(t[this._names.marginStart])+parseFloat(t[this._names.borderStart])+parseFloat(t[this._names.paddingStart]),this._endSpacer=parseFloat(t[this._names.marginEnd])+parseFloat(t[this._names.borderEnd])+parseFloat(t[this._names.paddingEnd]),this._sectionSizes=[];for(var n=0;n<this.sections.length;n++){var i=this.sections.getAt(n),r=e.getComputedStyle(i.element);this._sectionSizes[n]={offset:i.element[this._names.offsetPos],size:i.element[this._names.offsetSize],marginStart:parseFloat(r[this._names.marginStart]),marginEnd:parseFloat(r[this._names.marginEnd]),borderStart:parseFloat(r[this._names.borderStart]),borderEnd:parseFloat(r[this._names.borderEnd]),paddingStart:parseFloat(r[this._names.paddingStart]),paddingEnd:parseFloat(r[this._names.paddingEnd])},this._rtl&&this.orientation===v.Orientation.horizontal&&(this._sectionSizes[n].offset=this._viewportSize-(this._sectionSizes[n].offset+this._sectionSizes[n].size))}this._writeProfilerMark("measure,StopTM")}},_updateSnapList:function(){this._writeProfilerMark("updateSnapList,StartTM"),this._measure();for(var e="snapList(",t=0;t<this._sectionSizes.length;t++){t>0&&(e+=",");var n=this._sectionSizes[t];e+=n.offset-n.marginStart-this._startSpacer+"px"}e+=")";var i="",r="";this.orientation===v.Orientation.vertical?i=e:r=e,this._lastSnapPointY!==i&&(this._lastSnapPointY=i,this._viewportElement.style["-ms-scroll-snap-points-y"]=i),this._lastSnapPointX!==r&&(this._lastSnapPointX=r,this._viewportElement.style["-ms-scroll-snap-points-x"]=r),this._writeProfilerMark("updateSnapList,StopTM")},_scrollToSection:function(e,t){this._measure();var n=this._sectionSizes[e],i=Math.min(this._scrollLength-this._viewportSize,n.offset-n.marginStart-this._startSpacer);this._scrollTo(i,t)},_ensureVisible:function(e,t){this._measure();var n=this._ensureVisibleMath(e,this._scrollPosition);this._scrollTo(n,t)},_ensureVisibleMath:function(e,t){this._measure();var n=this._sectionSizes[e],i=Math.min(this._scrollLength-this._viewportSize,n.offset-n.marginStart-this._startSpacer),r=Math.max(0,n.offset+n.size+n.marginEnd+this._endSpacer-this._viewportSize+1);return t>i?t=i:r>t&&(t=Math.min(i,r)),t},_scrollTo:function(e,t){if(this._scrollPosition=e,t)this.orientation===v.Orientation.vertical?_._zoomTo(this._viewportElement,{contentX:0,contentY:this._scrollPosition,viewportX:0,viewportY:0}):_._zoomTo(this._viewportElement,{contentX:this._scrollPosition,contentY:0,viewportX:0,viewportY:0});else{var n={};n[this._names.scrollPos]=this._scrollPosition,_.setScrollPosition(this._viewportElement,n)}},_windowKeyDownHandler:function(e){if(e.keyCode===b.tab){this._tabSeenLast=!0;var t=this;n._yieldForEvents(function(){t._tabSeenLast=!1})}},_focusin:function(e){if(this._tabSeenLast){var t=this._findHeaderTabStop(e.target);if(t&&!this._isHeaderInteractive(e.target)){var n=this.sections.indexOf(t.parentElement.parentElement.winControl);n>-1&&this._ensureVisible(n,!0)}}for(var i=e.target;i&&!_.hasClass(i,y.HubSection._ClassName.hubSection);)i=i.parentElement;if(i){var n=this.sections.indexOf(i.winControl);n>-1&&(this._currentIndexForSezo=n)}if(e.target===this.element){var r;+this._sectionToFocus===this._sectionToFocus&&this._sectionToFocus>=0&&this._sectionToFocus<this.sections.length?(r=this._sectionToFocus,this._sectionToFocus=null):r=this.sectionOnScreen,this._moveFocusIn(r)}},_moveFocusIn:function(e){if(e>=0){for(var t=e;t<this.sections.length;t++){var n=this.sections.getAt(t),i=_._trySetActive(n._headerTabStopElement,this._viewportElement);if(i)return;if(_._setActiveFirstFocusableElement(n.contentElement,this._viewportElement))return}for(var t=e-1;t>=0;t--){var n=this.sections.getAt(t);if(_._setActiveFirstFocusableElement(n.contentElement,this._viewportElement))return;var i=_._trySetActive(n._headerTabStopElement,this._viewportElement);if(i)return}}},_keyDownHandler:function(e){var t=this._rtl?b.rightArrow:b.leftArrow,n=this._rtl?b.leftArrow:b.rightArrow;if(e.keyCode===b.upArrow||e.keyCode===b.downArrow||e.keyCode===b.leftArrow||e.keyCode===b.rightArrow||e.keyCode===b.pageUp||e.keyCode===b.pageDown){var i=this._findHeaderTabStop(e.target);if(i&&!this._isHeaderInteractive(e.target)){var r,s=this.sections.indexOf(i.parentElement.parentElement.winControl),o=!1;if(e.keyCode===b.pageDown||this.orientation===v.Orientation.horizontal&&e.keyCode===n||this.orientation===v.Orientation.vertical&&e.keyCode===b.downArrow){for(var a=s+1;a<this.sections.length;a++)if(this._tryFocus(a)){r=a;break}}else if(e.keyCode===b.pageUp||this.orientation===v.Orientation.horizontal&&e.keyCode===t||this.orientation===v.Orientation.vertical&&e.keyCode===b.upArrow)for(var a=s-1;a>=0;a--)if(this._tryFocus(a)){r=a;break}(e.keyCode===b.upArrow||e.keyCode===b.downArrow||e.keyCode===b.leftArrow||e.keyCode===b.rightArrow)&&(o=!0),+r===r&&(o?this._ensureVisible(r,!0):this._scrollToSection(r,!0)),e.preventDefault()}}else if(e.keyCode===b.home||e.keyCode===b.end){this._measure();var l=Math.max(0,this._scrollLength-this._viewportSize);this._scrollTo(e.keyCode===b.home?0:l,!0),e.preventDefault()}},_tryFocus:function(t){var n=this.sections.getAt(t);return _._setActive(n._headerTabStopElement,this._viewportElement),e.document.activeElement===n._headerTabStopElement},zoomableView:{get:function(){return this._zoomableView||(this._zoomableView=new T(this)),this._zoomableView}},_getPanAxis:function(){return this.orientation===v.Orientation.horizontal?"horizontal":"vertical"},_configureForZoom:function(){},_setCurrentItem:function(e,t){var n;n=this.orientation===v.Orientation.horizontal?e:t,this._measure(),n+=this._scrollPosition,this._currentIndexForSezo=this._sectionSizes.length-1;for(var i=1;i<this._sectionSizes.length;i++){var r=this._sectionSizes[i];if(r.offset-r.marginStart>n){this._currentIndexForSezo=i-1;break}}},_getCurrentItem:function(){var e;if(this._sectionSizes.length>0){this._measure();var t=Math.max(0,Math.min(this._currentIndexForSezo,this._sectionSizes.length)),n=this._sectionSizes[t];e=this.orientation===v.Orientation.horizontal?{left:Math.max(0,n.offset-n.marginStart-this._scrollPosition),top:0,width:n.size,height:this._viewportOppositeSize}:{left:0,top:Math.max(0,n.offset-n.marginStart-this._scrollPosition),width:this._viewportOppositeSize,height:n.size};var i=this.sections.getAt(t);return d.wrap({item:{data:i,index:t,groupIndexHint:t},position:e})}},_beginZoom:function(){this._viewportElement.style["-ms-overflow-style"]="none"},_positionItem:function(e,t){if(e.index>=0&&e.index<this._sectionSizes.length){this._measure();var n,i=this._sectionSizes[e.index];n=this.orientation===v.Orientation.horizontal?t.left:t.top,this._sectionToFocus=e.index;var r=i.offset-n,r=this._ensureVisibleMath(e.index,r);this._scrollPosition=r;var s={};s[this._names.scrollPos]=this._scrollPosition,_.setScrollPosition(this._viewportElement,s)}},_endZoom:function(){this._viewportElement.style["-ms-overflow-style"]=""},_writeProfilerMark:function(e){var t="WinJS.UI.Hub:"+this._id+":"+e;a(t),s.log&&s.log(t,null,"hubprofiler")},dispose:function(){if(!this._disposed){this._disposed=!0,e.removeEventListener("keydown",this._windowKeyDownHandlerBound),_._resizeNotifier.unsubscribe(this.element,this._resizeHandlerBound),this._updateEvents(this._sections);for(var t=0;t<this.sections.length;t++)this.sections.getAt(t).dispose()}}},{AnimationType:{entrance:"entrance",contentTransition:"contentTransition",insert:"insert",remove:"remove"},LoadingState:{loading:"loading",complete:"complete"},_ClassName:{hub:"win-hub",hubSurface:"win-hub-surface",hubProgress:"win-hub-progress",hubViewport:"win-hub-viewport",hubVertical:"win-hub-vertical",hubHorizontal:"win-hub-horizontal"},_EventName:{contentAnimating:C.contentAnimating,headerInvoked:C.headerInvoked,loadingStateChanged:C.loadingStateChanged}});t.Class.mix(k,f.DOMEventMixin);var T=t.Class.define(function(e){this._hub=e},{getPanAxis:function(){return this._hub._getPanAxis()},configureForZoom:function(e,t,n,i){this._hub._configureForZoom(e,t,n,i)},setCurrentItem:function(e,t){this._hub._setCurrentItem(e,t)},getCurrentItem:function(){return this._hub._getCurrentItem()},beginZoom:function(){this._hub._beginZoom()},positionItem:function(e,t){return this._hub._positionItem(e,t)},endZoom:function(e){this._hub._endZoom(e)}}),P={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get duplicateSection(){return"Hub duplicate sections: Each HubSection must be unique"},get invalidContent(){return"Invalid content: Hub content must be made up of HubSections."},get hubViewportAriaLabel(){return o._getWinJSString("ui/hubViewportAriaLabel").value}};return k})})}),i("WinJS/Controls/AppBar/_Constants",["exports","../../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,null,{appBarClass:"win-appbar",firstDivClass:"win-firstdiv",finalDivClass:"win-finaldiv",invokeButtonClass:"win-appbar-invokebutton",ellipsisClass:"win-appbar-ellipsis",primaryCommandsClass:"win-primarygroup",secondaryCommandsClass:"win-secondarygroup",reducedClass:"win-reduced",commandLayoutClass:"win-commandlayout",topClass:"win-top",bottomClass:"win-bottom",showingClass:"win-appbar-showing",shownClass:"win-appbar-shown",hidingClass:"win-appbar-hiding",hiddenClass:"win-appbar-hidden",minimalClass:"win-appbar-minimal",appBarPlacementTop:"top",appBarPlacementBottom:"bottom",appBarLayoutCustom:"custom",appBarLayoutCommands:"commands",appBarInvokeButtonWidth:60,typeSeparator:"separator",typeContent:"content",typeButton:"button",typeToggle:"toggle",typeFlyout:"flyout",menuCommandClass:"win-command",appBarCommandClass:"win-command",appBarCommandGlobalClass:"win-global",appBarCommandSelectionClass:"win-selection",sectionSelection:"selection",sectionGlobal:"global",hideFocusClass:"win-hidefocus",overlayClass:"win-overlay",flyoutClass:"win-flyout",flyoutLightClass:"win-ui-light",menuClass:"win-menu",menuToggleClass:"win-menu-toggle",settingsFlyoutClass:"win-settingsflyout",scrollsClass:"win-scrolls",separatorWidth:60,buttonWidth:100,narrowClass:"win-narrow",wideClass:"win-wide",_clickEatingAppBarClass:"win-appbarclickeater",_clickEatingFlyoutClass:"win-flyoutmenuclickeater",_visualViewportClass:"win-visualviewport-space"})}),i("WinJS/Controls/Flyout/_Overlay",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations","../../ControlProcessor","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_ElementUtilities","../AppBar/_Constants"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{_Overlay:i.Namespace._lazy(function(){function e(e){if(!e)return[];"string"!=typeof e&&e&&e.length||(e=[e]);var n,i=[];for(n=0;n<e.length;n++)if(e[n])if("string"==typeof e[n]){var r=t.document.getElementById(e[n]);r&&i.push(r)}else i.push(e[n].element?e[n].element:e[n]);return i}function _(e,n){var i=t.document.querySelectorAll("."+f.overlayClass);if(i)for(var r=i.length,s=0;r>s;s++){var o=i[s],a=o.winControl;a._disposed||a&&a[n](e)}}function g(){S._rightMouseMightEdgy||S._hideAllFlyouts()}var v=o._createEventProperty,y="beforeshow",b="aftershow",w="beforehide",C="afterhide",x={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get mustContainCommands(){return"Invalid HTML: AppBars/Menus must contain only AppBarCommands/MenuCommands"},get closeOverlay(){return a._getWinJSString("ui/closeOverlay").value}},S=i.Class.define(function(e,t){this._baseOverlayConstructor(e,t)},{_baseOverlayConstructor:function(e,n){this._disposed=!1,e||(e=t.document.createElement("div"));var i=e.winControl;if(i)throw new s("WinJS.UI._Overlay.DuplicateConstruction",x.duplicateConstruction);this._element||(this._element=e),this._sticky=!1,this._doNext="",this._element.style.visibility="hidden",this._element.style.opacity=0,e.winControl=this,m.addClass(this._element,f.overlayClass),m.addClass(this._element,"win-disposable");var r=this._element.getAttribute("unselectable");(null===r||void 0===r)&&this._element.setAttribute("unselectable","on"),this._currentAnimateIn=this._baseAnimateIn,this._currentAnimateOut=this._baseAnimateOut,this._animationPromise=h.as(),this._queuedToShow=[],this._queuedToHide=[],this._queuedCommandAnimation=!1,n&&p.setOptions(this,n)},element:{get:function(){return this._element}},disabled:{get:function(){return!!this._element.disabled},set:function(e){e=!!e;var t=!!this._element.disabled;t!==e&&(this._element.disabled=e,!this.hidden&&this._element.disabled&&this._hideOrDismiss())}},onbeforeshow:v(y),onaftershow:v(b),onbeforehide:v(w),onafterhide:v(C),dispose:function(){this._disposed||(this._disposed=!0,this._dispose())},_dispose:function(){},show:function(){this._show()},_show:function(){this._baseShow()},hide:function(){this._hide()},_hide:function(){this._baseHide()},hidden:{get:function(){return"hidden"===this._element.style.visibility||"hiding"===this._element.winAnimating||"hide"===this._doNext}},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_baseShow:function(){if(this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard)return this._doNext="show",!1;if(this._cachedDocumentSize=this._cachedDocumentSize||S._sizeOfDocument(),"visible"!==this._element.style.visibility){this._element.winAnimating="showing",this._element.style.display="",this._element.style.visibility="hidden",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),this._sendEvent(S.beforeShow),this._findPosition();var e=this;return this._animationPromise=this._currentAnimateIn().then(function(){e._baseEndShow()},function(){e._baseEndShow()}),!0}return!1},_findPosition:function(){},_baseEndShow:function(){this._disposed||(this._element.setAttribute("aria-hidden","false"),this._element.winAnimating="",this._endShow(),"show"===this._doNext&&(this._doNext=""),this._sendEvent(S.afterShow),this._writeProfilerMark("show,StopTM"),d.schedule(this._checkDoNext,d.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_endShow:function(){},_baseHide:function(){if(this._animating||this._needToHandleShowingKeyboard)return this._doNext="hide",!1;if(this._needToHandleHidingKeyboard&&(this._element.style.visibility=""),"hidden"!==this._element.style.visibility){if(this._element.winAnimating="hiding",this._element.setAttribute("aria-hidden","true"),this._sendEvent(S.beforeHide),""===this._element.style.visibility)this._element.style.opacity=0,this._baseEndHide();else{var e=this;this._animationPromise=this._currentAnimateOut().then(function(){e._baseEndHide()},function(){e._baseEndHide()})}return!0}return!1},_baseEndHide:function(){this._disposed||(this._element.style.visibility="hidden",this._element.style.display="none",this._element.winAnimating="",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),"hide"===this._doNext&&(this._doNext=""),this._sendEvent(S.afterHide),this._writeProfilerMark("hide,StopTM"),d.schedule(this._checkDoNext,d.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_checkDoNext:function(){this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard||this._disposed||("hide"===this._doNext?(this._hide(),this._doNext=""):this._queuedCommandAnimation?this._showAndHideQueue():"show"===this._doNext&&(this._show(),this._doNext=""))},_baseAnimateIn:function(){return this._element.style.opacity=0,this._element.style.visibility="visible",t.getComputedStyle(this._element,null).opacity,u.fadeIn(this._element)},_baseAnimateOut:function(){return this._element.style.opacity=1,t.getComputedStyle(this._element,null).opacity,u.fadeOut(this._element)},_animating:{get:function(){return!!this._element.winAnimating}},_sendEvent:function(e,n){if(!this._disposed){var i=t.document.createEvent("CustomEvent");i.initEvent(e,!0,!0,n||{}),this._element.dispatchEvent(i)}},_showCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands(n.commands,[],t)},_hideCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands([],n.commands,t)},_showOnlyCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands(n.commands,n.others,t)},_showAndHideCommands:function(e,t,n){n||this.hidden&&!this._animating?(this._showAndHideFast(e,t),this._removeFromQueue(e,this._queuedToShow),this._removeFromQueue(t,this._queuedToHide)):(this._updateAnimateQueue(e,this._queuedToShow,this._queuedToHide),this._updateAnimateQueue(t,this._queuedToHide,this._queuedToShow))
},_removeFromQueue:function(e,t){var n;for(n=0;n<e.length;n++){var i;for(i=0;i<t.length;i++)if(t[i]===e[n]){t.splice(i,1);break}}},_updateAnimateQueue:function(e,t,n){if(!this._disposed){var i;for(i=0;i<e.length;i++){var r;for(r=0;r<t.length&&t[r]!==e[i];r++);for(r===t.length&&(t[r]=e[i]),r=0;r<n.length;r++)if(n[r]===e[i]){n.splice(r,1);break}}this._queuedCommandAnimation||(this._animating||d.schedule(this._checkDoNext,d.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"),this._queuedCommandAnimation=!0)}},_showAndHideFast:function(e,t){var n,i;for(n=0;n<e.length;n++)i=e[n],i&&i.style&&(i.style.visibility="",i.style.display="");for(n=0;n<t.length;n++)i=t[n],i&&i.style&&(i.style.visibility="hidden",i.style.display="none");this._commandsUpdated()},_showAndHideQueue:function(){if(this._queuedCommandAnimation=!1,this.hidden)this._showAndHideFast(this._queuedToShow,this._queuedToHide),d.schedule(this._checkDoNext,d.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext");else{var e,n=this._queuedToShow,i=this._queuedToHide,r=this._findSiblings(n.concat(i));for(e=0;e<n.length;e++)n[e]&&n[e].style&&t.document.body.contains(n[e])?"hidden"!==n[e].style.visibility&&"0"!==n[e].style.opacity&&(r.push(n[e]),n.splice(e,1),e--):(n.splice(e,1),e--);for(e=0;e<i.length;e++)i[e]&&i[e].style&&t.document.body.contains(i[e])&&"hidden"!==i[e].style.visibility&&"0"!==i[e].style.opacity||(i.splice(e,1),e--);var s=this._baseBeginAnimateCommands(n,i,r),o=this;s?s.done(function(){o._baseEndAnimateCommands(i)},function(){o._baseEndAnimateCommands(i)}):d.schedule(function(){o._baseEndAnimateCommands([])},d.Priority.normal,null,"WinJS.UI._Overlay._endAnimateCommandsWithoutAnimation")}this._queuedToShow=[],this._queuedToHide=[]},_baseBeginAnimateCommands:function(e,n,i){this._beginAnimateCommands(e,n,this._getVisibleCommands(i));var r=null,s=null;n.length>0&&(s=u.createDeleteFromListAnimation(n,0===e.length?i:void 0)),e.length>0&&(r=u.createAddToListAnimation(e,i));for(var o=0,a=n.length;a>o;o++){var l=n[o].getBoundingClientRect(),c=t.getComputedStyle(n[o]);n[o].style.top=l.top-parseFloat(c.marginTop)+"px",n[o].style.left=l.left-parseFloat(c.marginLeft)+"px",n[o].style.opacity=0,n[o].style.position="fixed"}this._element.winAnimating="rearranging";var d=null;for(s&&(d=s.execute()),o=0;o<e.length;o++)e[o].style.visibility="",e[o].style.display="",e[o].style.opacity=1;if(r){var p=r.execute();d=d?h.join([d,p]):p}return d},_beginAnimateCommands:function(){},_getVisibleCommands:function(e){var t,n=e,i=[];n||(n=this.element.querySelectorAll(".win-command"));for(var r=0,s=n.length;s>r;r++)t=n[r].winControl||n[r],t.hidden||i.push(t);return i},_baseEndAnimateCommands:function(e){if(!this._disposed){var t;for(t=0;t<e.length;t++)e[t].style.position="",e[t].getBoundingClientRect(),e[t].style.visibility="hidden",e[t].style.display="none",e[t].style.opacity=1;this._element.winAnimating="",this._endAnimateCommands(),this._checkDoNext()}},_endAnimateCommands:function(){},_resolveCommands:function(t){t=e(t);var n={};n.commands=[],n.others=[];var i,r,s=this.element.querySelectorAll(".win-command");for(i=0;i<s.length;i++){var o=!1;for(r=0;r<t.length;r++)if(t[r]===s[i]){n.commands.push(s[i]),t.splice(r,1),o=!0;break}o||n.others.push(s[i])}return n},_findSiblings:function(e){var t,n,i=[],r=this.element.querySelectorAll(".win-command");for(t=0;t<r.length;t++){var s=!1;for(n=0;n<e.length;n++)if(e[n]===r[t]){e.splice(n,1),s=!0;break}s||i.push(r[t])}return i},_baseResize:function(e){if(this._cachedDocumentSize)if(this.hidden)this._cachedDocumentSize=null;else{var t=S._sizeOfDocument();(this._cachedDocumentSize.width!==t.width||this._cachedDocumentSize.height!==t.height)&&(this._cachedDocumentSize=t,this._sticky||this._hideOrDismiss())}this._resize(e)},_hideOrDismiss:function(){var e=this._element;e&&m.hasClass(e,f.settingsFlyoutClass)?this._dismiss():this.hide()},_resize:function(){},_commandsUpdated:function(){},_checkScrollPosition:function(){},_showingKeyboard:function(){},_hidingKeyboard:function(){},_verifyCommandsOnly:function(e,t){for(var n=e.children,i=new Array(n.length),r=0;r<n.length;r++){if(!m.hasClass(n[r],"win-command")&&n[r].getAttribute("data-win-control")!==t)throw new s("WinJS.UI._Overlay.MustContainCommands",x.mustContainCommands);c.processAll(n[r]),i[r]=n[r].winControl}return i},_focusOnLastFocusableElementOrThis:function(){this._focusOnLastFocusableElement()||S._trySetActive(this._element)},_focusOnLastFocusableElement:function(){if(this._element.firstElementChild){var e=this._element.firstElementChild.tabIndex,n=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var i=m._focusLastFocusableElement(this._element);return i&&S._trySelect(t.document.activeElement),this._element.firstElementChild.tabIndex=e,this._element.lastElementChild.tabIndex=n,i}return!1},_focusOnFirstFocusableElementOrThis:function(){this._focusOnFirstFocusableElement()||S._trySetActive(this._element)},_focusOnFirstFocusableElement:function(){if(this._element.firstElementChild){var e=this._element.firstElementChild.tabIndex,n=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var i=m._focusFirstFocusableElement(this._element);return i&&S._trySelect(t.document.activeElement),this._element.firstElementChild.tabIndex=e,this._element.lastElementChild.tabIndex=n,i}return!1},_addOverlayEventHandlers:function(e){if(!S._flyoutEdgeLightDismissEvent){t.addEventListener("blur",S._checkBlur,!1);var i=this;if(n.Windows.UI.Input.EdgeGesture){var r=n.Windows.UI.Input.EdgeGesture.getForCurrentView();r.addEventListener("starting",S._hideAllFlyouts),r.addEventListener("completed",g)}if(n.Windows.UI.ViewManagement.InputPane){var s=n.Windows.UI.ViewManagement.InputPane.getForCurrentView();s.addEventListener("showing",function(e){i._writeProfilerMark("_showingKeyboard,StartTM"),_(e,"_showingKeyboard"),i._writeProfilerMark("_showingKeyboard,StopTM")}),s.addEventListener("hiding",function(e){i._writeProfilerMark("_hidingKeyboard,StartTM"),_(e,"_hidingKeyboard"),i._writeProfilerMark("_hidingKeyboard,StopTM")}),t.document.addEventListener("scroll",function(e){i._writeProfilerMark("_checkScrollPosition,StartTM"),_(e,"_checkScrollPosition"),i._writeProfilerMark("_checkScrollPosition,StopTM")})}t.addEventListener("resize",function(e){i._writeProfilerMark("_baseResize,StartTM"),_(e,"_baseResize"),i._writeProfilerMark("_baseResize,StopTM")}),S._flyoutEdgeLightDismissEvent=!0}e&&this._handleEventsForFlyoutOrSettingsFlyout()},_handleEventsForFlyoutOrSettingsFlyout:function(){var e=this;m._addEventListener(this._element,"focusout",function(t){S._hideIfLostFocus(e,t)},!1),m._addEventListener(this._element,"pointerdown",S._checkRightClickDown,!0),m._addEventListener(this._element,"pointerup",S._checkRightClickUp,!0)},_writeProfilerMark:function(e){l("WinJS.UI._Overlay:"+this._id+":"+e)}},{_clickEatingAppBarDiv:!1,_clickEatingFlyoutDiv:!1,_flyoutEdgeLightDismissEvent:!1,_hideFlyouts:function(e,t){for(var n=e.querySelectorAll("."+f.flyoutClass),i=n.length,r=0;i>r;r++){var s=n[r];if("hidden"!==s.style.visibility){var o=s.winControl;!o||t&&o._sticky||o._hideOrDismiss()}}},_hideSettingsFlyouts:function(e,t){for(var n=e.querySelectorAll("."+f.settingsFlyoutClass),i=n.length,r=0;i>r;r++){var s=n[r];if("hidden"!==s.style.visibility){var o=s.winControl;!o||t&&o._sticky||o._hideOrDismiss()}}},_hideAllFlyouts:function(){S._hideFlyouts(t.document,!0),S._hideSettingsFlyouts(t.document,!0)},_createClickEatingDivTemplate:function(e,n){var i=t.document.createElement("section");return i._winHideClickEater=n,m.addClass(i,e),m._addEventListener(i,"pointerup",function(e){S._checkSameClickEatingPointerUp(e,!0)},!0),m._addEventListener(i,"pointerdown",function(e){S._checkClickEatingPointerDown(e,!0)},!0),i.addEventListener("click",function(e){i._winHideClickEater(e)},!0),i.setAttribute("role","menuitem"),i.setAttribute("aria-label",x.closeOverlay),i.setAttribute("unselectable","on"),t.document.body.appendChild(i),i},_createClickEatingDivAppBar:function(){S._clickEatingAppBarDiv||(S._clickEatingAppBarDiv=S._createClickEatingDivTemplate(f._clickEatingAppBarClass,S._handleAppBarClickEatingClick))},_createClickEatingDivFlyout:function(){S._clickEatingFlyoutDiv||(S._clickEatingFlyoutDiv=S._createClickEatingDivTemplate(f._clickEatingFlyoutClass,S._handleFlyoutClickEatingClick))},_checkClickEatingPointerDown:function(e,t){var n=e.currentTarget;if(n)try{n._winPointerId=e.pointerId,n._winRightMouse=2===e.button}catch(i){}t&&!n._winRightMouse&&(e.stopPropagation(),e.preventDefault())},_checkSameClickEatingPointerUp:function(e,t){var n=!1,i=!1,r=e.currentTarget;try{r&&r._winPointerId===e.pointerId&&(n=!0,i=r._winRightMouse,i&&t&&(n=!1))}catch(s){}return t&&!i&&(e.stopPropagation(),e.preventDefault(),r._winHideClickEater(e)),n},_handleAppBarClickEatingClick:function(e){e.stopPropagation(),e.preventDefault(),S._hideLightDismissAppBars(null,!1),S._hideClickEatingDivAppBar(),S._hideAllFlyouts()},_handleFlyoutClickEatingClick:function(e){e.stopPropagation(),e.preventDefault(),S._hideClickEatingDivFlyout(),S._hideFlyouts(t.document,!0)},_checkRightClickDown:function(e){S._checkClickEatingPointerDown(e,!1)},_checkRightClickUp:function(e){S._checkSameClickEatingPointerUp(e,!1)&&(S._rightMouseMightEdgy=!0,r._yieldForEvents(function(){S._rightMouseMightEdgy=!1}))},_showClickEatingDivAppBar:function(){d.schedule(function(){S._clickEatingAppBarDiv&&(S._clickEatingAppBarDiv.style.display="block")},d.Priority.high,null,"WinJS.UI._Overlay._showClickEatingDivAppBar")},_hideClickEatingDivAppBar:function(){d.schedule(function(){S._clickEatingAppBarDiv&&(S._clickEatingAppBarDiv.style.display="none")},d.Priority.high,null,"WinJS.UI._Overlay._hideClickEatingDivAppBar")},_showClickEatingDivFlyout:function(){d.schedule(function(){S._clickEatingFlyoutDiv&&(S._clickEatingFlyoutDiv.style.display="block")},d.Priority.high,null,"WinJS.UI._Overlay._showClickEatingDivFlyout")},_hideClickEatingDivFlyout:function(){d.schedule(function(){S._clickEatingFlyoutDiv&&(S._clickEatingFlyoutDiv.style.display="none")},d.Priority.high,null,"WinJS.UI._Overlay._hideClickEatingDivFlyout")},_isFlyoutVisible:function(){return S._clickEatingFlyoutDiv?"block"===S._clickEatingFlyoutDiv.style.display:!1},_hideIfLostFocus:function(e){if(!e.hidden&&"showing"!==e.element.winAnimating&&!e._sticky){var n=t.document.activeElement;if(!e._element||!e._element.contains(n)){if(m.hasClass(e._element,f.settingsFlyoutClass)){var i=e,r=S._getParentControlUsingClassName(n,"win-flyout");if(r&&r._previousFocus&&i.element.contains(r._previousFocus))return void m._addEventListener(r.element,"focusout",function s(e){S._hideIfLostFocus(i,e),m._removeEventListener(r.element,"focusout",s,!1)},!1)}n&&(m.hasClass(n,f._clickEatingFlyoutClass)||m.hasClass(n,f._clickEatingAppBarClass))||e._hideOrDismiss()}}},_checkBlur:function(){if(t.document.hasFocus()){if(S._clickEatingFlyoutDiv&&"block"===S._clickEatingFlyoutDiv.style.display||S._clickEatingAppBarDiv&&"block"===S._clickEatingAppBarDiv.style.display){var e=t.document.activeElement;e&&"IFRAME"===e.tagName&&!e.msLightDismissBlur&&(e.addEventListener("blur",S._checkBlur,!1),e.msLightDismissBlur=!0)}}else S._hideAllFlyouts(),S._hideLightDismissAppBars(null,!1)},_trySetActive:function(e){return e&&t.document.body&&t.document.body.contains(e)&&m._setActive(e)?e===t.document.activeElement:!1},_trySelect:function(e){try{e&&e.select&&e.select()}catch(t){}},_addHideFocusClass:function(e){e&&(m.addClass(e,f.hideFocusClass),m._addEventListener(e,"focusout",S._removeHideFocusClass,!1))},_removeHideFocusClass:function(e){var n=e.target;n&&n!==t.document.activeElement&&(m.removeClass(n,f.hideFocusClass),m._removeEventListener(e.target,"focusout",S._removeHideFocusClass,!1))},_sizeOfDocument:function(){return{width:t.document.documentElement.offsetWidth,height:t.document.documentElement.offsetHeight}},_getParentControlUsingClassName:function(e,n){for(;e&&e!==t.document.body;){if(m.hasClass(e,n))return e.winControl;e=e.parentNode}return null},_hideIfAllAppBarsLostFocus:function(){S._isAppBarOrChild(t.document.activeElement)||(S._hideLightDismissAppBars(null,!1),S._ElementWithFocusPreviousToAppBar=null)},_hideLightDismissAppBars:function(e,n){for(var i=t.document.querySelectorAll("."+f.appBarClass),r=i.length,s=[],o=0;r>o;o++){var a=i[o].winControl;!a||a.sticky||a.hidden||s.push(a)}S._hideAllBars(s,n)},_hideAllBars:function(e,t){var n=e.map(function(e){return e._keyboardInvoked=t,e.hide(),e._animationPromise});return h.join(n)},_showAllBars:function(e,t){var n=e.map(function(e){return e._keyboardInvoked=t,e._doNotFocus=!1,e._show(),e._animationPromise});return h.join(n)},_isAppBarOrChild:function(e){if(!e)return null;if(m.hasClass(e,f._clickEatingAppBarClass)||m.hasClass(e,f._clickEatingFlyoutClass)||m.hasClass(e,f.firstDivClass)||m.hasClass(e,f.finalDivClass)||m.hasClass(e,f.invokeButtonClass))return e;for(;e&&e!==t.document;){if(m.hasClass(e,f.appBarClass))return e;if(m.hasClass(e,"win-flyout")&&e!==e.winControl._previousFocus){var n=e.winControl,i=S._isAppBarOrChild(n._previousFocus);return i&&m._addEventListener(n.element,"focusout",function r(){S._hideIfAllAppBarsLostFocus(),m._removeEventListener(n.element,"focusout",r,!1)},!1),i}e=e.parentNode}return null},_keyboardInfo:{get _visible(){try{return n.Windows.UI.ViewManagement.InputPane&&n.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height>0}catch(e){return!1}},get _extraOccluded(){var e;if(n.Windows.UI.ViewManagement.InputPane)try{e=n.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height}catch(t){}return e&&!S._keyboardInfo._isResized?e:0},get _isResized(){var e=t.document.documentElement.clientHeight/t.innerHeight,n=t.document.documentElement.clientWidth/t.innerWidth;return.99>n/e},get _visibleDocBottom(){return S._keyboardInfo._visibleDocTop+S._keyboardInfo._visibleDocHeight},get _visibleDocHeight(){return S._keyboardInfo._visualViewportHeight-S._keyboardInfo._extraOccluded},get _animationShowLength(){if(n.Windows.UI.Core.AnimationMetrics){for(var e=n.Windows.UI.Core.AnimationMetrics,t=new e.AnimationDescription(e.AnimationEffect.showPanel,e.AnimationEffectTarget.primary),i=t.animations,r=0,s=0;s<i.size;s++){var o=i[s];r=Math.max(r,o.delay+o.duration)}return r}return 0}},_ElementWithFocusPreviousToAppBar:null,_clickEatingAppBarClass:f._clickEatingAppBarClass,_clickEatingFlyoutClass:f._clickEatingFlyoutClass,_scrollTimeout:150,beforeShow:y,beforeHide:w,afterShow:b,afterHide:C,commonstrings:{get cannotChangeCommandsWhenVisible(){return"Invalid argument: You must call hide() before changing {0} commands"},get cannotChangeHiddenProperty(){return"Unable to set hidden property while parent {0} is visible."}}}),I={_visibleDocTop:function(){return 0},_visibleDocBottomOffset:function(){return S._keyboardInfo._isResized?0:S._keyboardInfo._extraOccluded},_visualViewportHeight:function(){var e=S._keyboardInfo._visualViewportSpace;return e.bottom-e.top},_visualViewportWidth:function(){var e=S._keyboardInfo._visualViewportSpace;return e.right-e.left},_visualViewportSpace:function(){var e=t.document.body.querySelector("."+f._visualViewportClass);return e||(e=t.document.createElement("DIV"),e.className=f._visualViewportClass,t.document.body.appendChild(e)),e.getBoundingClientRect()}},E={_visibleDocTop:function(){return t.window.pageYOffset-t.document.documentElement.scrollTop},_visibleDocBottomOffset:function(){return t.document.documentElement.clientHeight-S._keyboardInfo._visibleDocBottom},_visualViewportHeight:function(){return t.window.innerHeight},_visualViewportWidth:function(){return t.window.innerWidth}};i.Class.mix(S,p.DOMEventMixin);var k=t.document.createElement("DIV");k.className=f._visualViewportClass,t.document.body.appendChild(k);var T,P="-ms-device-fixed"===t.getComputedStyle(k).position;!P&&n.Windows.UI.ViewManagement.InputPane?(T=E,t.document.body.removeChild(k)):T=I;for(var A in T)Object.defineProperty(S._keyboardInfo,A,{get:T[A]});return S})})}),i("WinJS/Controls/Flyout",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","./AppBar/_Constants","./Flyout/_Overlay","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{Flyout:n.Namespace._lazy(function(){function e(e,n){return parseFloat(e,t.getComputedStyle(e,null)[n])}var c=u.Key,p={get ariaLabel(){return s._getWinJSString("ui/flyoutAriaLabel").value},get noAnchor(){return"Invalid argument: Showing flyout requires a DOM element as its parameter."},get badPlacement(){return"Invalid argument: Flyout placement should be 'top' (default), 'bottom', 'left', 'right', or 'auto'."},get badAlignment(){return"Invalid argument: Flyout alignment should be 'center' (default), 'left', or 'right'."}},m=n.Class.derive(d._Overlay,function(e,n){n=n||{},this._element=e||t.document.createElement("div"),this._id=this._element.id||u._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),this._baseFlyoutConstructor(this._element,n);var i=this._element.getElementsByTagName("*"),r=this._addFirstDiv();r.tabIndex=u._getLowestTabIndexInList(i);var s=this._addFinalDiv();return s.tabIndex=u._getHighestTabIndexInList(i),this._element.addEventListener("keydown",this._handleKeyDown,!0),this._writeProfilerMark("constructor,StopTM"),this},{_lastMaxHeight:null,_baseFlyoutConstructor:function(e,t){this._placement="auto",this._alignment="center",this._baseOverlayConstructor(e,t),d._Overlay._createClickEatingDivFlyout(),this._element.style.visibilty="hidden",this._element.style.display="none",u.addClass(this._element,h.flyoutClass),u.addClass(this._element,h.flyoutLightClass);var n=this._element.getAttribute("role");(null===n||""===n||void 0===n)&&(u.hasClass(this._element,h.menuClass)?this._element.setAttribute("role","menu"):this._element.setAttribute("role","dialog"));var i=this._element.getAttribute("aria-label");(null===i||""===i||void 0===i)&&this._element.setAttribute("aria-label",p.ariaLabel),this._currentAnimateIn=this._flyoutAnimateIn,this._currentAnimateOut=this._flyoutAnimateOut,this._addOverlayEventHandlers(!0)},anchor:{get:function(){return this._anchor},set:function(e){this._anchor=e}},placement:{get:function(){return this._placement},set:function(e){if("top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e&&"auto"!==e)throw new r("WinJS.UI.Flyout.BadPlacement",p.badPlacement);this._placement=e}},alignment:{get:function(){return this._alignment},set:function(e){if("right"!==e&&"left"!==e&&"center"!==e)throw new r("WinJS.UI.Flyout.BadAlignment",p.badAlignment);this._alignment=e}},_dispose:function(){l.disposeSubTree(this.element),this._hide(),this.anchor=null},show:function(e,t,n){this._writeProfilerMark("show,StartTM"),this._show(e,t,n)},_show:function(e,t,n){this._baseFlyoutShow(e,t,n)},hide:function(){this._writeProfilerMark("hide,StartTM"),this._keyboardInvoked=!1,this._hide()},_hide:function(){if(this._baseHide()){var e=t.document.activeElement;if(this._previousFocus&&e&&(this._element.contains(e)||u.hasClass(e,d._Overlay._clickEatingFlyoutClass))&&void 0!==this._previousFocus.focus){var n=d._Overlay._isAppBarOrChild(this._previousFocus);if(!n||n.winControl&&!n.winControl.hidden&&!n.winAnimating){var r=this._previousFocus.getAttribute("role"),s=d._Overlay._keyboardInfo._visible&&!this._keyboardWasUp;if(s&&this._previousFocus.setAttribute("role",""),this._keyboardInvoked?this._previousFocus.focus():d._Overlay._trySetActive(this._previousFocus),e=t.document.activeElement,s){var o=this._previousFocus;o&&i._yieldForDomModification(function(){o.setAttribute("role",r)})}}!this._keyboardInvoked&&this._previousFocus===e&&n&&e&&d._Overlay._addHideFocusClass(e)}this._previousFocus=null,this._isThereVisibleFlyout()||d._Overlay._hideClickEatingDivFlyout()}},_baseFlyoutShow:function(e,n,i){if(!this.disabled){if(e||(e=this._anchor),n||(n=this._placement),i||(i=this._alignment),"string"==typeof e?e=t.document.getElementById(e):e&&e.element&&(e=e.element),e)this._currentAnchor=e,this._currentPlacement=n,this._currentAlignment=i;else{if(!this._retryLast)throw new r("WinJS.UI.Flyout.NoAnchor",p.noAnchor);this._retryLast=null}if(this._sticky||d._Overlay._showClickEatingDivFlyout(),this._element.winAnimating)return this._doNext="show",void(this._retryLast=!0);if(this._baseShow()){if(!u.hasClass(this.element,"win-menu")){var s=this._element.getElementsByTagName("*"),o=this.element.querySelectorAll(".win-first");this.element.children.length&&!u.hasClass(this.element.children[0],h.firstDivClass)&&(o&&o.length>0&&o.item(0).parentNode.removeChild(o.item(0)),o=this._addFirstDiv()),o.tabIndex=u._getLowestTabIndexInList(s);var a=this.element.querySelectorAll(".win-final");u.hasClass(this.element.children[this.element.children.length-1],h.finalDivClass)||(a&&a.length>0&&a.item(0).parentNode.removeChild(a.item(0)),a=this._addFinalDiv()),a.tabIndex=u._getHighestTabIndexInList(s)}this._hideAllOtherFlyouts(this),this._previousFocus=t.document.activeElement}}},_endShow:function(){this._keyboardWasUp=d._Overlay._keyboardInfo._visible,u.hasClass(this.element,h.menuClass)?d._Overlay._trySetActive(this._element):(this._focusOnFirstFocusableElementOrThis(),d._Overlay._addHideFocusClass(t.document.activeElement))},_findPosition:function(){this._nextHeight=null,this._keyboardMovedUs=!1,this._hasScrolls=!1,this._keyboardSquishedUs=0,this._checkToggle&&this._checkToggle(),this._updateAdjustments(this._currentAlignment),this._getTopLeft(),this._scrollTop=this._nextTop-d._Overlay._keyboardInfo._visibleDocTop,this._nextTop<0?(this._element.style.bottom="0px",this._element.style.top="auto"):(this._element.style.top=this._nextTop+"px",this._element.style.bottom="auto"),this._nextLeft<0?(this._element.style.right="0px",this._element.style.left="auto"):(this._element.style.left=this._nextLeft+"px",this._element.style.right="auto"),null!==this._nextHeight&&(u.addClass(this._element,h.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight,this._element.style.maxHeight=this._nextHeight+"px",this._nextBottom=this._nextTop+this._nextHeight,this._hasScrolls=!0),d._Overlay._keyboardInfo._visible&&(this._checkKeyboardFit(),this._keyboardMovedUs&&this._adjustForKeyboard())},_getTopLeft:function(){var t=this._currentAnchor.getBoundingClientRect(),n={},i={};switch(i.top=t.top,i.bottom=t.bottom,i.left=t.left,i.right=t.right,i.height=i.bottom-i.top,i.width=i.right-i.left,n.marginTop=e(this._element,"marginTop"),n.marginBottom=e(this._element,"marginBottom"),n.marginLeft=e(this._element,"marginLeft"),n.marginRight=e(this._element,"marginRight"),n.width=u.getTotalWidth(this._element),n.height=u.getTotalHeight(this._element),n.innerWidth=u.getContentWidth(this._element),n.innerHeight=u.getContentHeight(this._element),this._nextMarginPadding=n.height-n.innerHeight,this._currentPlacement){case"top":this._fitTop(i,n)||(this._nextTop=d._Overlay._keyboardInfo._visibleDocTop,this._nextHeight=i.top-d._Overlay._keyboardInfo._visibleDocTop-this._nextMarginPadding),this._centerHorizontally(i,n,this._currentAlignment);break;case"bottom":this._fitBottom(i,n)||(this._nextTop=-1,this._nextHeight=d._Overlay._keyboardInfo._visibleDocHeight-(i.bottom-d._Overlay._keyboardInfo._visibleDocTop)-this._nextMarginPadding),this._centerHorizontally(i,n,this._currentAlignment);break;case"left":this._fitLeft(i,n)||(this._nextLeft=0),this._centerVertically(i,n);break;case"right":this._fitRight(i,n)||(this._nextLeft=-1),this._centerVertically(i,n);break;case"auto":this._sometimesFitsAbove(i,n)?(this._fitTop(i,n)||this._fitBottom(i,n),this._centerHorizontally(i,n,this._currentAlignment)):this._fitLeft(i,n)||this._fitRight(i,n)?this._centerVertically(i,n):(this._topHasMoreRoom(i)?(this._nextTop=d._Overlay._keyboardInfo._visibleDocTop,this._nextHeight=i.top-d._Overlay._keyboardInfo._visibleDocTop-this._nextMarginPadding):(this._nextTop=-1,this._nextHeight=d._Overlay._keyboardInfo._visibleDocHeight-(i.bottom-d._Overlay._keyboardInfo._visibleDocTop)-this._nextMarginPadding),this._centerHorizontally(i,n,this._currentAlignment));break;default:throw new r("WinJS.UI.Flyout.BadPlacement",p.badPlacement)}this._nextBottom=this._nextTop+n.height},_sometimesFitsAbove:function(e,t){return(d._Overlay._keyboardInfo._visibleDocHeight-e.height)/2>=t.height},_topHasMoreRoom:function(e){return e.top>d._Overlay._keyboardInfo._visibleDocHeight-e.bottom},_fitTop:function(e,t){return this._nextTop=e.top-t.height,this._nextAnimOffset={top:"50px",left:"0px",keyframe:"WinJS-showFlyoutTop"},this._nextTop>=d._Overlay._keyboardInfo._visibleDocTop&&this._nextTop+t.height<=d._Overlay._keyboardInfo._visibleDocBottom},_fitBottom:function(e,t){return this._nextTop=e.bottom,this._nextAnimOffset={top:"-50px",left:"0px",keyframe:"WinJS-showFlyoutBottom"},this._nextTop>=d._Overlay._keyboardInfo._visibleDocTop&&this._nextTop+t.height<=d._Overlay._keyboardInfo._visibleDocBottom},_fitLeft:function(e,t){return this._nextLeft=e.left-t.width,this._nextAnimOffset={top:"0px",left:"50px",keyframe:"WinJS-showFlyoutLeft"},this._nextLeft>=0&&this._nextLeft+t.width<=d._Overlay._keyboardInfo._visualViewportWidth},_fitRight:function(e,t){return this._nextLeft=e.right,this._nextAnimOffset={top:"0px",left:"-50px",keyframe:"WinJS-showFlyoutRight"},this._nextLeft>=0&&this._nextLeft+t.width<=d._Overlay._keyboardInfo._visualViewportWidth},_centerVertically:function(e,t){this._nextTop=e.top+e.height/2-t.height/2,this._nextTop<d._Overlay._keyboardInfo._visibleDocTop?this._nextTop=d._Overlay._keyboardInfo._visibleDocTop:this._nextTop+t.height>=d._Overlay._keyboardInfo._visibleDocBottom&&(this._nextTop=-1)},_centerHorizontally:function(e,n,i){if("center"===i)this._nextLeft=e.left+e.width/2-n.width/2;else if("left"===i)this._nextLeft=e.left;else{if("right"!==i)throw new r("WinJS.UI.Flyout.BadAlignment",p.badAlignment);this._nextLeft=e.right-n.width}this._nextLeft<0?this._nextLeft=0:this._nextLeft+n.width>=t.document.documentElement.clientWidth&&(this._nextLeft=-1)},_updateAdjustments:function(e){this._element.style.top="0px",this._element.style.bottom="auto",this._element.style.left="0px",this._element.style.right="auto",u.removeClass(this._element,h.scrollsClass),null!==this._lastMaxHeight&&(this._element.style.maxHeight=this._lastMaxHeight,this._lastMaxHeight=null),"center"===e?(u.removeClass(this._element,"win-leftalign"),u.removeClass(this._element,"win-rightalign")):"left"===e?(u.addClass(this._element,"win-leftalign"),u.removeClass(this._element,"win-rightalign")):"right"===e&&(u.addClass(this._element,"win-rightalign"),u.removeClass(this._element,"win-leftalign"))},_showingKeyboard:function(e){if(!this.hidden&&(e.ensuredFocusedElementInView=!0,this._checkKeyboardFit(),this._keyboardMovedUs)){this._element.style.opacity=0;var n=this;t.setTimeout(function(){n._adjustForKeyboard(),n._baseAnimateIn()},d._Overlay._keyboardInfo._animationShowLength)}},_resize:function(){if((!this.hidden||this._animating)&&this._needToHandleHidingKeyboard){var e=this;i._setImmediate(function(){e._findPosition()}),this._needToHandleHidingKeyboard=!1}},_checkKeyboardFit:function(){var e=u.getTotalHeight(this._element),t=d._Overlay._keyboardInfo._visibleDocHeight-this._nextMarginPadding;e>t?(this._keyboardMovedUs=!0,this._scrollTop=0,this._keyboardSquishedUs=t):-1===this._nextTop?this._keyboardMovedUs=!0:this._nextTop<d._Overlay._keyboardInfo._visibleDocTop?(this._scrollTop=0,this._keyboardMovedUs=!0):this._nextBottom>d._Overlay._keyboardInfo._visibleDocBottom&&(this._scrollTop=-1,this._keyboardMovedUs=!0)},_adjustForKeyboard:function(){this._keyboardSquishedUs&&(this._hasScrolls||(u.addClass(this._element,h.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight),this._element.style.maxHeight=this._keyboardSquishedUs+"px"),this._checkScrollPosition(!0)},_hidingKeyboard:function(){if(!this.hidden||this._animating)if(d._Overlay._keyboardInfo._isResized)this._needToHandleHidingKeyboard=!0;else{var e=this;i._setImmediate(function(){e._findPosition()})}},_checkScrollPosition:function(e){(!this.hidden||e)&&(this._scrollTop<0?(this._element.style.bottom=d._Overlay._keyboardInfo._visibleDocBottomOffset+"px",this._element.style.top="auto"):(this._element.style.top=d._Overlay._keyboardInfo._visibleDocTop+"px",this._element.style.bottom="auto"))},_flyoutAnimateIn:function(){return this._keyboardMovedUs?this._baseAnimateIn():(this._element.style.opacity=1,this._element.style.visibility="visible",a.showPopup(this._element,this._nextAnimOffset))},_flyoutAnimateOut:function(){return this._keyboardMovedUs?this._baseAnimateOut():(this._element.style.opacity=0,a.hidePopup(this._element,this._nextAnimOffset))},_hideAllOtherFlyouts:function(e){for(var n=t.document.querySelectorAll("."+h.flyoutClass),i=0;i<n.length;i++){var r=n[i].winControl;r&&!r.hidden&&r!==e&&r.hide()}},_isThereVisibleFlyout:function(){for(var e=t.document.querySelectorAll("."+h.flyoutClass),n=0;n<e.length;n++){var i=e[n].winControl;if(i&&!i.hidden)return!0}return!1},_handleKeyDown:function(e){e.keyCode===c.escape&&e.keyCode!==c.IME?(e.preventDefault(),e.stopPropagation(),this.winControl._keyboardInvoked=!0,this.winControl._hide()):e.keyCode!==c.space&&e.keyCode!==c.enter||this!==t.document.activeElement?!e.shiftKey||e.keyCode!==c.tab||this!==t.document.activeElement||e.altKey||e.ctrlKey||e.metaKey||(e.preventDefault(),e.stopPropagation(),this.winControl._focusOnLastFocusableElementOrThis()):(e.preventDefault(),e.stopPropagation(),this.winControl.hide())},_addFirstDiv:function(){var e=t.document.createElement("div");e.className=h.firstDivClass,e.style.display="inline",e.setAttribute("role","menuitem"),e.setAttribute("aria-hidden","true"),this._element.children[0]?this._element.insertBefore(e,this._element.children[0]):this._element.appendChild(e);var n=this;return u._addEventListener(e,"focusin",function(){n._focusOnLastFocusableElementOrThis()},!1),e},_addFinalDiv:function(){var e=t.document.createElement("div");e.className=h.finalDivClass,e.style.display="inline",e.setAttribute("role","menuitem"),e.setAttribute("aria-hidden","true"),this._element.appendChild(e);var n=this;return u._addEventListener(e,"focusin",function(){n._focusOnFirstFocusableElementOrThis()},!1),e},_writeProfilerMark:function(e){o("WinJS.UI.Flyout:"+this._id+":"+e)}});return m})})}),i("WinJS/Controls/AppBar/_Icon",["exports","../../Core/_Base","../../Core/_Resources"],function(e,t,n){"use strict";var i=["previous","next","play","pause","edit","save","clear","delete","remove","add","cancel","accept","more","redo","undo","home","up","forward","right","back","left","favorite","camera","settings","video","sync","download","mail","find","help","upload","emoji","twopage","leavechat","mailforward","clock","send","crop","rotatecamera","people","closepane","openpane","world","flag","previewlink","globe","trim","attachcamera","zoomin","bookmarks","document","protecteddocument","page","bullets","comment","mail2","contactinfo","hangup","viewall","mappin","phone","videochat","switch","contact","rename","pin","musicinfo","go","keyboard","dockleft","dockright","dockbottom","remote","refresh","rotate","shuffle","list","shop","selectall","orientation","import","importall","browsephotos","webcam","pictures","savelocal","caption","stop","showresults","volume","repair","message","page2","calendarday","calendarweek","calendar","characters","mailreplyall","read","link","accounts","showbcc","hidebcc","cut","attach","paste","filter","copy","emoji2","important","mailreply","slideshow","sort","manage","allapps","disconnectdrive","mapdrive","newwindow","openwith","contactpresence","priority","uploadskydrive","gototoday","font","fontcolor","contact2","folder","audio","placeholder","view","setlockscreen","settile","cc","stopslideshow","permissions","highlight","disableupdates","unfavorite","unpin","openlocal","mute","italic","underline","bold","movetofolder","likedislike","dislike","like","alignright","aligncenter","alignleft","zoom","zoomout","openfile","otheruser","admin","street","map","clearselection","fontdecrease","fontincrease","fontsize","cellphone","reshare","tag","repeatone","repeatall","outlinestar","solidstar","calculator","directions","target","library","phonebook","memo","microphone","postupdate","backtowindow","fullscreen","newfolder","calendarreply","unsyncfolder","reporthacked","syncfolder","blockcontact","switchapps","addfriend","touchpointer","gotostart","zerobars","onebar","twobars","threebars","fourbars","scan","preview"],r=i.reduce(function(e,t){return e[t]={get:function(){return n._getWinJSString("ui/appBarIcons/"+t).value
}},e},{});t.Namespace._moduleDefine(e,"WinJS.UI.AppBarIcon",r)}),i("WinJS/Controls/AppBar/_Command",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../Flyout/_Overlay","../Tooltip","./_Constants","./_Icon"],function(e,t,n,i,r,s,o,a,l,u,c,h,d){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{AppBarCommand:i.Namespace._lazy(function(){function e(e){var n=this.winControl;if(n){if(n._type===h.typeToggle)n.selected=!n.selected;else if(n._type===h.typeFlyout&&n._flyout){var i=u._Overlay._getParentControlUsingClassName(this,h.appBarClass),r="top";i&&"top"===i.placement&&(r="bottom");var s=n._flyout;"string"==typeof s&&(s=t.document.getElementById(s)),s.show||(s=s.winControl),s&&s.show&&s.show(this,r)}n.onclick&&n.onclick(e)}}var p={get ariaLabel(){return s._getWinJSString("ui/appBarCommandAriaLabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badClick(){return"Invalid argument: The onclick property for an {0} must be a function"},get badDivElement(){return"Invalid argument: For a content command, the element must be null or a div element"},get badHrElement(){return"Invalid argument: For a separator, the element must be null or an hr element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"}};return i.Class.define(function(t,n){if(t&&t.winControl)throw new r("WinJS.UI.AppBarCommand.DuplicateConstruction",p.duplicateConstruction);if(this._disposed=!1,n||(n={}),n.type||(this._type=h.typeButton),n.section=n.section||h.sectionGlobal,this._element=t,n.type===h.typeContent?this._createContent():n.type===h.typeSeparator?this._createSeparator():this._createButton(),l.addClass(this._element,"win-disposable"),this._element.winControl=this,l.addClass(this._element,h.appBarCommandClass),n.onclick&&(this.onclick=n.onclick),n.onclick=e,o.setOptions(this,n),this._type!==h.typeToggle||n.selected||(this.selected=!1),this._type!==h.typeSeparator){var i=this;l._addEventListener(this._element,"pointerdown",function(){u._Overlay._addHideFocusClass(i._element)},!1);var s=this._element.getAttribute("role");(null===s||""===s||void 0===s)&&(s=this._type===h.typeToggle?"menuitemcheckbox":this._type===h.typeContent?"group":"menuitem",this._element.setAttribute("role",s),this._type===h.typeFlyout&&this._element.setAttribute("aria-haspopup",!0));var a=this._element.getAttribute("aria-label");(null===a||""===a||void 0===a)&&this._element.setAttribute("aria-label",p.ariaLabel)}},{id:{get:function(){return this._element.id},set:function(e){e&&!this._element.id&&(this._element.id=e)}},type:{get:function(){return this._type},set:function(e){this._type||(this._type=e!==h.typeContent&&e!==h.typeFlyout&&e!==h.typeToggle&&e!==h.typeSeparator?h.typeButton:e)}},label:{get:function(){return this._label},set:function(e){this._label=e,this._labelSpan&&(this._labelSpan.textContent=this.label),!this.tooltip&&this._tooltipControl&&(this._tooltip=this.label,this._tooltipControl.innerHTML=this.label),this._element.setAttribute("aria-label",this.label),this._testIdenticalTooltip()}},icon:{get:function(){return this._icon},set:function(e){this._icon=d[e]||e,this._imageSpan&&(this._icon&&1===this._icon.length?(this._imageSpan.textContent=this._icon,this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust=""):(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage=this._icon,this._imageSpan.style.msHighContrastAdjust="none"))}},onclick:{get:function(){return this._onclick},set:function(e){if(e&&"function"!=typeof e)throw new r("WinJS.UI.AppBarCommand.BadClick",s._formatString(p.badClick,"AppBarCommand"));this._onclick=e}},flyout:{get:function(){var e=this._flyout;return"string"==typeof e&&(e=t.document.getElementById(e)),e&&!e.element&&(e=e.winControl),e},set:function(e){var t=e;t&&"string"!=typeof t&&(t.element&&(t=t.element),t&&(t.id?t=t.id:(t.id=l._uniqueID(t),t=t.id))),"string"==typeof t&&this._element.setAttribute("aria-owns",t),this._flyout=e}},section:{get:function(){return this._section},set:function(e){(!this._section||n.Windows.ApplicationModel.DesignMode.designModeEnabled)&&this._setSection(e)}},tooltip:{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this._tooltipControl&&(this._tooltipControl.innerHTML=this._tooltip),this._testIdenticalTooltip()}},selected:{get:function(){return"true"===this._element.getAttribute("aria-checked")},set:function(e){this._element.setAttribute("aria-checked",e)}},element:{get:function(){return this._element}},disabled:{get:function(){return!!this._element.disabled},set:function(e){this._element.disabled=e}},hidden:{get:function(){return"hidden"===this._element.style.visibility},set:function(e){var t=u._Overlay._getParentControlUsingClassName(this._element,h.appBarClass);if(t&&!t.hidden)throw new r("WinJS.UI.AppBarCommand.CannotChangeHiddenProperty",s._formatString(u._Overlay.commonstrings.cannotChangeHiddenProperty,"AppBar"));if(e!==this.hidden){var n=this._element.style;e?(n.visibility="hidden",n.display="none"):(n.visibility="",n.display="inline-block"),t&&t._commandsUpdated()}}},firstElementFocus:{get:function(){return this._firstElementFocus||this._lastElementFocus||this._element},set:function(e){this._firstElementFocus=e===this.element?null:e,this._updateTabStop()}},lastElementFocus:{get:function(){return this._lastElementFocus||this._firstElementFocus||this._element},set:function(e){this._lastElementFocus=e===this.element?null:e,this._updateTabStop()}},dispose:function(){this._disposed||(this._disposed=!0,this._tooltipControl&&this._tooltipControl.dispose(),this._type===h.typeContent&&a.disposeSubTree(this.element))},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass&&l.removeClass(this._element,this._extraClass),this._extraClass=e,l.addClass(this._element,this._extraClass)}},_testIdenticalTooltip:function(){this._hideIfFullSize=this._label===this._tooltip},_createContent:function(){if(this._element){if("DIV"!==this._element.tagName)throw new r("WinJS.UI.AppBarCommand.BadDivElement",p.badDivElement)}else this._element=t.document.createElement("div");parseInt(this._element.getAttribute("tabIndex"),10)!==this._element.tabIndex&&(this._element.tabIndex=0)},_createSeparator:function(){if(this._element){if("HR"!==this._element.tagName)throw new r("WinJS.UI.AppBarCommand.BadHrElement",p.badHrElement)}else this._element=t.document.createElement("hr")},_createButton:function(){if(this._element){if("BUTTON"!==this._element.tagName)throw new r("WinJS.UI.AppBarCommand.BadButtonElement",p.badButtonElement);var e=this._element.getAttribute("type");(null===e||""===e||void 0===e)&&this._element.setAttribute("type","button"),this._element.innerHTML=""}else this._element=t.document.createElement("button");this._element.type="button",this._iconSpan=t.document.createElement("span"),this._iconSpan.setAttribute("aria-hidden","true"),this._iconSpan.className="win-commandicon win-commandring",this._iconSpan.tabIndex=-1,this._element.appendChild(this._iconSpan),this._imageSpan=t.document.createElement("span"),this._imageSpan.setAttribute("aria-hidden","true"),this._imageSpan.className="win-commandimage",this._imageSpan.tabIndex=-1,this._iconSpan.appendChild(this._imageSpan),this._labelSpan=t.document.createElement("span"),this._labelSpan.setAttribute("aria-hidden","true"),this._labelSpan.className="win-label",this._labelSpan.tabIndex=-1,this._element.appendChild(this._labelSpan),this._tooltipControl=new c.Tooltip(this._element);var n=this;this._tooltipControl.addEventListener("beforeopen",function(){n._hideIfFullSize&&!u._Overlay._getParentControlUsingClassName(n._element.parentElement,h.reducedClass)&&n._tooltipControl.close()},!1)},_setSection:function(e){e||(e=h.sectionGlobal),this._section&&(this._section===h.sectionGlobal?l.removeClass(this._element,h.appBarCommandGlobalClass):this.section===h.sectionSelection&&l.removeClass(this._element,h.appBarCommandSelectionClass)),this._section=e,e===h.sectionGlobal?l.addClass(this._element,h.appBarCommandGlobalClass):e===h.sectionSelection&&l.addClass(this._element,h.appBarCommandSelectionClass)},_updateTabStop:function(){this.element.tabIndex=this._firstElementFocus||this._lastElementFocus?-1:0},_isFocusable:function(){return!this.hidden&&this._type!==h.typeSeparator&&!this.element.disabled&&(this.firstElementFocus.tabIndex>=0||this.lastElementFocus.tabIndex>=0)}})})})}),i("WinJS/Controls/AppBar/_Layouts",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../Scheduler","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","./_Command","./_Constants"],function(e,t,n,i,r,s,o,a,l,u,c){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_AppBarBaseLayout:n.Namespace._lazy(function(){var e=c.appBarLayoutCustom,t={get nullCommand(){return"Invalid argument: command must not be null"}},r=n.Class.define(function(e,t){this._disposed=!1,t=t||{},o.setOptions(this,t),e&&this.connect(e)},{className:{get:function(){return this._className}},type:{get:function(){return this._type||e}},commandsInOrder:{get:function(){var e=this.appBarEl.querySelectorAll("."+c.appBarCommandClass);return Array.prototype.slice.call(e)}},connect:function(e){this.className&&l.addClass(e,this.className),this.appBarEl=e},disconnect:function(){this.className&&l.removeClass(this.appBarEl,this.className),this.appBarEl=null,this.dispose()},layout:function(e){for(var t=e.length,n=0;t>n;n++){var i=this.sanitizeCommand(e[n]);this.appBarEl.appendChild(i._element)}},sanitizeCommand:function(e){if(!e)throw new i("WinJS.UI.AppBar.NullCommand",t.nullCommand);return e=e.winControl||e,e._element||(e=new u.AppBarCommand(null,e)),e._element.parentElement&&e._element.parentElement.removeChild(e._element),e},dispose:function(){this._disposed=!0},disposeChildren:function(){var e=this.appBarEl.querySelectorAll("."+c.firstDivClass);e=e.length>=1?e[0]:null;var t=this.appBarEl.querySelectorAll("."+c.finalDivClass);t=t.length>=1?t[0]:null;for(var n=this.appBarEl.children,i=n.length,r=0;i>r;r++){var s=n[r];s!==e&&s!==t&&a.disposeSubTree(s)}},handleKeyDown:function(){},commandsUpdated:function(){},beginAnimateCommands:function(){},endAnimateCommands:function(){},scale:function(){},resize:function(){}});return r})}),n.Namespace._moduleDefine(e,"WinJS.UI",{_AppBarCommandsLayout:n.Namespace._lazy(function(){var i=c.commandLayoutClass,r=c.appBarLayoutCommands,s=n.Class.derive(e._AppBarBaseLayout,function(t){e._AppBarBaseLayout.call(this,t,{_className:i,_type:r}),this._commandLayoutsInit(t)},{_getWidthOfFullSizeCommands:function(e){this._needToMeasureNewCommands&&this._measureContentCommands();var t=0,n=0,i=0;if(!e)return this._fullSizeWidthOfLastKnownVisibleCommands;for(var r,s=0,o=e.length;o>s;s++)r=e[s].winControl||e[s],r._type===c.typeSeparator?n++:r._type!==c.typeContent?i++:t+=r._fullSizeWidth;return t+=n*c.separatorWidth+i*c.buttonWidth},_getFocusableCommandsInLogicalOrder:function(){var e=this._secondaryCommands.children,n=this._primaryCommands.children,i=-1,r=function(e){for(var n=[],r=0,s=e.length;s>r;r++){var o=e[r];if(l.hasClass(o,c.appBarCommandClass)&&o.winControl){var a=o.contains(t.document.activeElement);(o.winControl._isFocusable()||a)&&(n.push(o),a&&(i=n.length-1))}}return n},s=Array.prototype.slice.call(e).concat(Array.prototype.slice.call(n)),o=r(s);return o.focusedIndex=i,o}});return n.Class.mix(s,h),s})});var h={layout:function(e){l.empty(this._primaryCommands),l.empty(this._secondaryCommands),this._commandsInOriginalOrder=[];for(var t=0,n=e.length;n>t;t++){var i=this.sanitizeCommand(e[t]);this._commandsInOriginalOrder.push(i.element),"global"===i.section?this._primaryCommands.appendChild(i._element):this._secondaryCommands.appendChild(i._element)}this.appBarEl.appendChild(this._secondaryCommands),this.appBarEl.appendChild(this._primaryCommands),this._needToMeasureNewCommands=!0,s.schedule(function(){this._needToMeasureNewCommands&&!this._disposed&&this.scale()}.bind(this),s.Priority.idle,this,"WinJS._commandLayoutsMixin._scaleNewCommands")},commandsInOrder:{get:function(){return this._commandsInOriginalOrder.filter(function(e){return this.appBarEl.contains(e)},this)}},disposeChildren:function(){a.disposeSubTree(this._primaryCommands),a.disposeSubTree(this._secondaryCommands)},handleKeyDown:function(e){var n=l.Key;if(!l._matchesSelector(e.target,".win-interactive, .win-interactive *")){var i="rtl"===t.getComputedStyle(this.appBarEl).direction,r=i?n.rightArrow:n.leftArrow,s=i?n.leftArrow:n.rightArrow;if(e.keyCode===r||e.keyCode===s||e.keyCode===n.home||e.keyCode===n.end){var o,a=this._primaryCommands.contains(t.document.activeElement),u=this._getFocusableCommandsInLogicalOrder(a);if(u.length)switch(e.keyCode){case r:var c=Math.max(-1,u.focusedIndex-1)+u.length;o=u[c%u.length].winControl.lastElementFocus;break;case s:var c=u.focusedIndex+1+u.length;o=u[c%u.length].winControl.firstElementFocus;break;case n.home:var c=0;o=u[c].winControl.firstElementFocus;break;case n.end:var c=u.length-1;o=u[c].winControl.lastElementFocus}o&&(o.focus(),e.preventDefault())}}},commandsUpdated:function(e){var t=e?e:this.commandsInOrder.filter(function(e){return!e.winControl.hidden});this._fullSizeWidthOfLastKnownVisibleCommands=this._getWidthOfFullSizeCommands(t)},beginAnimateCommands:function(e,t,n){this._scaleAfterAnimations=!1;var i=this._getWidthOfFullSizeCommands(e)-this._getWidthOfFullSizeCommands(t);if(i>0){var r=n.concat(e);this.commandsUpdated(r),this.scale()}else 0>i&&(this._scaleAfterAnimations=!0)},endAnimateCommands:function(){this._scaleAfterAnimations&&(this.commandsUpdated(),this.scale())},scale:function(){var e=this._getWidthOfFullSizeCommands();this._appBarTotalKnownWidth!==+this._appBarTotalKnownWidth&&(this._appBarTotalKnownWidth=this._scaleHelper()),e<=this._appBarTotalKnownWidth?l.removeClass(this.appBarEl,c.reducedClass):l.addClass(this.appBarEl,c.reducedClass)},resize:function(){this._disposed||(this._appBarTotalKnownWidth=null,this.appBarEl.winControl.hidden||this.scale())},disconnect:function(){l.removeClass(this.appBarEl,c.reducedClass),e._AppBarBaseLayout.prototype.disconnect.call(this)},_commandLayoutsInit:function(){this._primaryCommands=t.document.createElement("DIV"),this._secondaryCommands=t.document.createElement("DIV"),l.addClass(this._primaryCommands,c.primaryCommandsClass),l.addClass(this._secondaryCommands,c.secondaryCommandsClass)},_scaleHelper:function(){var e="minimal"===this.appBarEl.winControl.closedDisplayMode?c.appBarInvokeButtonWidth:0;return t.document.documentElement.clientWidth-e},_measureContentCommands:function(){if(t.document.body.contains(this.appBarEl)){this._needToMeasureNewCommands=!1;var e=l.hasClass(this.appBarEl,c.reducedClass);l.removeClass(this.appBarEl,c.reducedClass);var n=l.hasClass(this.appBarEl,c.hiddenClass);l.removeClass(this.appBarEl,c.hiddenClass);var i=this.appBarEl.style.display;this.appBarEl.style.display="";for(var r,s,o=this.appBarEl.querySelectorAll("div."+c.appBarCommandClass),a=0,u=o.length;u>a;a++)s=o[a],s.winControl&&s.winControl._type===c.typeContent&&(r=s.style.display,s.style.display="",s.winControl._fullSizeWidth=l.getTotalWidth(s)||0,s.style.display=r);this.appBarEl.style.display=i,e&&l.addClass(this.appBarEl,c.reducedClass),n&&l.addClass(this.appBarEl,c.hiddenClass),this.commandsUpdated()}}}}),i("WinJS/Controls/AppBar",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","./AppBar/_Constants","./AppBar/_Layouts","./AppBar/_Command","./AppBar/_Icon","./Flyout/_Overlay","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{AppBar:i.Namespace._lazy(function(){function e(e){if(!b._Overlay._rightMouseMightEdgy||e.kind!==n.Windows.UI.Input.EdgeGestureKind.mouse)if(F)F=null;else{var t=e.kind===n.Windows.UI.Input.EdgeGestureKind.keyboard;H._toggleAllAppBarsState(t)}}function m(){F||(F=H._toggleAllAppBarsState(!1))}function v(){var e=w();"showing"===F?b._Overlay._hideAllBars(e,!1):"hiding"===F&&b._Overlay._showAllBars(e,!1),F=null}function y(e){var n=t.document.querySelectorAll("."+_.appBarClass);if(n)for(var i=n.length,r=0;i>r;r++){var s=n[r],o=s.winControl;o&&!s.disabled&&o._manipulationChanged(e)}}function w(){var e=t.document.querySelectorAll("."+_.appBarClass),n=e.length,i=[];i._shown=!1,i._hidden=!1;for(var r=0;n>r;r++){var s=e[r];if(!s.disabled){var o=s.winControl;o&&(i.push(o),p.hasClass(o._element,_.hiddenClass)||p.hasClass(o._element,_.hidingClass)?i._hidden=!0:i._shown=!0)}}return i}function C(e,t,n){for(var i,r=e;r>=0;r--)if(i=n[r].winControl,i&&i.placement===t&&!i.hidden&&i._focusOnLastFocusableElement&&i._focusOnLastFocusableElement())return!0;return!1}function x(){var e=t.document.querySelectorAll("."+_.appBarClass);if(e.length){for(var n=0,i=0;i<e.length;i++)if(e[i]===this.parentElement){n=i;break}var r=this.parentElement.winControl;if(r.placement===_.appBarPlacementBottom){if(n&&C(n-1,_.appBarPlacementBottom,e))return;if(C(e.length-1,_.appBarPlacementTop,e))return;if(C(e.length-1,_.appBarPlacementBottom,e))return}else if(r.placement===_.appBarPlacementTop){if(n&&C(n-1,_.appBarPlacementTop,e))return;if(C(e.length-1,_.appBarPlacementBottom,e))return;if(C(e.length-1,_.appBarPlacementTop,e))return}}}function S(e,t,n){for(var i,r=e;r<n.length;r++)if(i=n[r].winControl,i&&i.placement===t&&!i.hidden&&i._focusOnFirstFocusableElement&&i._focusOnFirstFocusableElement())return!0;return!1}function I(){for(var e=t.document.querySelectorAll("."+_.appBarClass),n=0,i=0;i<e.length;i++)if(e[i]===this.parentElement){n=i;break}if(this.parentElement.winControl.placement===_.appBarPlacementBottom){if(S(n+1,_.appBarPlacementBottom,e))return;if(S(0,_.appBarPlacementTop,e))return;if(S(0,_.appBarPlacementBottom,e))return}else if(this.parentElement.winControl.placement===_.appBarPlacementTop){if(S(n+1,_.appBarPlacementTop,e))return;if(S(0,_.appBarPlacementBottom,e))return;if(S(0,_.appBarPlacementTop,e))return}}function E(){for(var e,n=t.document.querySelectorAll("."+_.appBarClass),i=0;i<n.length;i++)e=n[i].winControl,e&&!e.hidden&&e._updateFirstAndFinalDiv&&e._updateFirstAndFinalDiv()}function k(){for(var e=t.document.querySelectorAll("."+_.appBarClass),n=0;n<e.length;n++){var i=e[n].winControl;if(i&&!i.sticky&&(!i.hidden||i._element.winAnimating===D.shown))return!0}return!1}function T(e){e.relatedTarget&&e.relatedTarget.focus&&!b._Overlay._isAppBarOrChild(e.relatedTarget)&&P(e.relatedTarget)}function P(e){e&&(b._Overlay._ElementWithFocusPreviousToAppBar=e)}function A(){b._Overlay._trySetActive(b._Overlay._ElementWithFocusPreviousToAppBar)}var M=p.Key,O={disabled:0,none:0,hidden:0,minimal:25},D={disabled:"hidden",none:"hidden",hidden:"hidden",minimal:"minimal",shown:"shown"},L={none:"none",minimal:"minimal"},R="shown",B="hidden",N=!1,F=null,z={get ariaLabel(){return o._getWinJSString("ui/appBarAriaLabel").value},get requiresCommands(){return"Invalid argument: commands must not be empty"},get cannotChangePlacementWhenVisible(){return"Invalid argument: The placement property cannot be set when the AppBar is visible, call hide() first"},get badLayout(){return"Invalid argument: The layout property must be 'custom' or 'commands'"},get cannotChangeLayoutWhenVisible(){return"Invalid argument: The layout property cannot be set when the AppBar is visible, call hide() first"}},H=i.Class.derive(b._Overlay,function(i,s){this._initializing=!0,s=s||{},this._element=i||t.document.createElement("div"),this._id=this._element.id||p._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),this._element.hasAttribute("tabIndex")||(this._element.tabIndex=-1),p.addClass(this._element,_.appBarClass);var o=this._element.getAttribute("role");o||this._element.setAttribute("role","menubar");var a=this._element.getAttribute("aria-label");a||this._element.setAttribute("aria-label",z.ariaLabel),this._baseOverlayConstructor(this._element),this._lastPositionVisited=D.none,p.addClass(this._element,_.hiddenClass),s.layout!==_.appBarLayoutCustom&&!s.commands&&this._element&&(s=r._shallowCopy(s),s.commands=this._verifyCommandsOnly(this._element,"WinJS.UI.AppBarCommand")),this._invokeButton=t.document.createElement("button"),this._invokeButton.tabIndex=0,this._invokeButton.innerHTML="<span class='"+_.ellipsisClass+"'></span>",p.addClass(this._invokeButton,_.invokeButtonClass),this._element.appendChild(this._invokeButton);var l=this;if(p._addEventListener(this._invokeButton,"pointerdown",function(){b._Overlay._addHideFocusClass(l._invokeButton)},!1),this._invokeButton.addEventListener("click",function(){H._toggleAllAppBarsState(f._keyboardSeenLast,l)},!1),this.layout=s.layout||_.appBarLayoutCommands,delete s.layout,this.placement=s.placement||_.appBarPlacementBottom,this.closedDisplayMode=s.closedDisplayMode||L.minimal,h.setOptions(this,s),this._initializing=!1,b._Overlay._createClickEatingDivAppBar(),this._element.addEventListener("keydown",this._handleKeyDown.bind(this),!1),!N){if(n.Windows.UI.Input.EdgeGesture){var u=n.Windows.UI.Input.EdgeGesture.getForCurrentView();u.addEventListener("starting",m),u.addEventListener("completed",e),u.addEventListener("canceled",v)}t.document.addEventListener("MSManipulationStateChanged",y,!1),N=!0}return this._addOverlayEventHandlers(!1),p._addEventListener(this._element,"focusin",function(e){T(e)},!1),p._addEventListener(this._element,"focusout",function(){b._Overlay._hideIfAllAppBarsLostFocus()},!1),this.closedDisplayMode===L.none&&this.layout===_.appBarLayoutCommands&&(this._element.style.display="none"),this._writeProfilerMark("constructor,StopTM"),this},{placement:{get:function(){return this._placement},set:function(e){var t=!1;if(n.Windows.ApplicationModel.DesignMode.designModeEnabled&&(this._hide(),t=!0),!this.hidden)throw new s("WinJS.UI.AppBar.CannotChangePlacementWhenVisible",z.cannotChangePlacementWhenVisible);this._placement=e===_.appBarPlacementTop?_.appBarPlacementTop:_.appBarPlacementBottom,this._placement===_.appBarPlacementTop?(p.addClass(this._element,_.topClass),p.removeClass(this._element,_.bottomClass)):this._placement===_.appBarPlacementBottom&&(p.removeClass(this._element,_.topClass),p.addClass(this._element,_.bottomClass)),t&&this._show()}},layout:{get:function(){return this._layout.type},set:function(e){if(e!==_.appBarLayoutCommands&&e!==_.appBarLayoutCustom)throw new s("WinJS.UI.AppBar.BadLayout",z.badLayout);var t=!1;if(n.Windows.ApplicationModel.DesignMode.designModeEnabled&&(this._hide(),t=!0),!this.hidden)throw new s("WinJS.UI.AppBar.CannotChangeLayoutWhenVisible",z.cannotChangeLayoutWhenVisible);var i;this._initializing||(i=this._layout.commandsInOrder,this._layout.disconnect()),this._layout=e===_.appBarLayoutCommands?new g._AppBarCommandsLayout:new g._AppBarBaseLayout,this._layout.connect(this._element),i&&i.length&&this._layoutCommands(i),this._layout.connect(this._element),i&&i.length&&this._layoutCommands(i),t&&this._show()},configurable:!0},sticky:{get:function(){return this._sticky},set:function(e){this._sticky!==!!e&&(this._sticky=!!e,this.hidden||"visible"!==this._element.style.visibility||(E(),this._sticky?k()||b._Overlay._hideClickEatingDivAppBar():(b._Overlay._showClickEatingDivAppBar(),this._shouldStealFocus()&&(P(t.document.activeElement),this._setFocusToAppBar()))))}},commands:{set:function(e){if(!this.hidden)throw new s("WinJS.UI.AppBar.CannotChangeCommandsWhenVisible",o._formatString(b._Overlay.commonstrings.cannotChangeCommandsWhenVisible,"AppBar"));this._initializing||this._disposeChildren(),this._layoutCommands(e)}},_layoutCommands:function(e){p.empty(this._element),this._element.appendChild(this._invokeButton),Array.isArray(e)||(e=[e]),this._layout.layout(e)},closedDisplayMode:{get:function(){return this._closedDisplayMode},set:function(e){var t=this._closedDisplayMode;t!==e&&(e===L.none?(this._closedDisplayMode=L.none,p.removeClass(this._element,_.minimalClass)):(this._closedDisplayMode=L.minimal,p.addClass(this._element,_.minimalClass)),this._layout.resize(),(p.hasClass(this._element,_.hiddenClass)||p.hasClass(this._element,_.hidingClass))&&this._changeVisiblePosition(D[this._closedDisplayMode]))}},disabled:{get:function(){return!!this._element.disabled},set:function(e){var e=!!e;if(this.disabled!==e){this._element.disabled=e;var t;t=e?D.disabled:D[this.closedDisplayMode],this._hide(t)}}},hidden:{get:function(){return p.hasClass(this._element,_.hiddenClass)||p.hasClass(this._element,_.hidingClass)||this._doNext===D.minimal||this._doNext===D.none}},getCommandById:function(e){for(var t=this.element.querySelectorAll("#"+e),n=[],i=0,r=t.length;r>i;i++)t[i].winControl&&n.push(t[i].winControl);return 1===n.length?n[0]:0===n.length?null:n},showCommands:function(e){if(!e)throw new s("WinJS.UI.AppBar.RequiresCommands",z.requiresCommands);this._showCommands(e)},hideCommands:function(e){if(!e)throw new s("WinJS.UI.AppBar.RequiresCommands",z.requiresCommands);this._hideCommands(e)},showOnlyCommands:function(e){if(!e)throw new s("WinJS.UI.AppBar.RequiresCommands",z.requiresCommands);this._showOnlyCommands(e)},show:function(){this._writeProfilerMark("show,StartTM"),this._keyboardInvoked=!1,this._doNotFocus=!!this.sticky,this._show()},_show:function(){var e=D.shown,n=null;this.disabled||!p.hasClass(this._element,_.hiddenClass)&&!p.hasClass(this._element,_.hidingClass)||(n=R),this._changeVisiblePosition(e,n),n&&(this.sticky||b._Overlay._showClickEatingDivAppBar(),!this.sticky&&k()?E():this._updateFirstAndFinalDiv(),!this._doNotFocus&&this._shouldStealFocus()&&(b._Overlay._ElementWithFocusPreviousToAppBar||P(t.document.activeElement),this._setFocusToAppBar()))},hide:function(){this._writeProfilerMark("hide,StartTM"),this._hide()},_hide:function(e){var e=e||D[this.closedDisplayMode],n=null;if(p.hasClass(this._element,_.hiddenClass)||p.hasClass(this._element,_.hidingClass)||(n=B),this._changeVisiblePosition(e,n),n){var i,r=t.document.querySelectorAll("."+_.appBarClass),s=!1,o=!1;for(i=0;i<r.length;i++){var a=r[i].winControl;if(a&&!a.hidden&&a!==this&&(s=!0,!a.sticky)){o=!0;break}}var l=t.document.querySelectorAll("."+_.settingsFlyoutClass),u=!1;for(i=0;i<l.length;i++){var c=l[i].winControl;if(c&&!c.hidden){u=!0;break}}o||u||b._Overlay._hideClickEatingDivAppBar();var h=this;if(s){if(H._isWithinAppBarOrChild(t.document.activeElement,h.element)){var d=!1;for(i=0;i<=r.length;i++){i===r.length&&(i=0);var m=r[i];if(m===this.element)d=!0;else if(d&&!m.winControl.hidden){m.winControl._keyboardInvoked=!!this._keyboardInvoked,m.winControl._setFocusToAppBar();break}}}}else!b._Overlay._ElementWithFocusPreviousToAppBar||t.document.activeElement&&!b._Overlay._isAppBarOrChild(t.document.activeElement)||A(),b._Overlay._ElementWithFocusPreviousToAppBar=null;this.sticky||k()||E(),this._keyboardInvoked=!1,this._doNotFocus=!1}},_dispose:function(){d.disposeSubTree(this.element),this._layout.dispose(),this.disabled=!0},_disposeChildren:function(){this._layout.disposeChildren()},_handleKeyDown:function(e){e.keyCode===M.escape&&e.keyCode!==M.IME&&(e.preventDefault(),e.stopPropagation(),b._Overlay._hideAllFlyouts(),b._Overlay._hideLightDismissAppBars(null,!0)),this._invokeButton.contains(t.document.activeElement)||this._layout.handleKeyDown(e)},_visiblePixels:{get:function(){return{hidden:O.hidden,minimal:O.minimal,shown:this._element.offsetHeight}}},_visiblePosition:{get:function(){return this._animating&&D[this._element.winAnimating]?this._element.winAnimating:this._lastPositionVisited}},_visible:{get:function(){return this._visiblePosition!==D.none}},_changeVisiblePosition:function(e,t){if(this._visiblePosition===e&&!this._keyboardObscured||this.disabled&&e!==D.disabled)this._afterPositionChange(null);else if(this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard)this._doNext=e,this._afterPositionChange(null);else{this._element.winAnimating=e;var n=this._initializing?!1:!0,i=this._lastPositionVisited;this._element.style.display="";var r=e===D.hidden;this._keyboardObscured&&(r?n=!1:i=D.hidden,this._keyboardObscured=!1),t===R?this._beforeShow():t===B&&this._beforeHide(),this._ensurePosition(),this._element.style.opacity=1,this._element.style.visibility="visible",this._animationPromise=n?this._animatePositionChange(i,e):u.wrap(),this._animationPromise.then(function(){this._afterPositionChange(e,t)}.bind(this),function(){this._afterPositionChange(e,t)}.bind(this))}},_afterPositionChange:function(e,t){if(!this._disposed){if(e){this._element.winAnimating="",this._lastPositionVisited=e,this._doNext===this._lastPositionVisited&&(this._doNext=""),e===D.hidden&&(this._element.style.visibility="hidden",this._element.style.display="none");var n=r._browserStyleEquivalents.transform.scriptName;this._element.style[n]="",t===R?this._afterShow():t===B&&this._afterHide(),c.schedule(this._checkDoNext,c.Priority.normal,this,"WinJS.UI.AppBar._checkDoNext")}this._afterPositionChangeCallBack()}},_afterPositionChangeCallBack:function(){},_beforeShow:function(){this._cachedDocumentSize=this._cachedDocumentSize||b._Overlay._sizeOfDocument(),this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),this._layout.scale(),p.removeClass(this._element,_.hiddenClass),p.addClass(this._element,_.showingClass),this._sendEvent(b._Overlay.beforeShow)},_afterShow:function(){p.removeClass(this._element,_.showingClass),p.addClass(this._element,_.shownClass),this._sendEvent(b._Overlay.afterShow),this._writeProfilerMark("show,StopTM")},_beforeHide:function(){p.removeClass(this._element,_.shownClass),p.addClass(this._element,_.hidingClass),this._sendEvent(b._Overlay.beforeHide)},_afterHide:function(){this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),p.removeClass(this._element,_.hidingClass),p.addClass(this._element,_.hiddenClass),this._sendEvent(b._Overlay.afterHide),this._writeProfilerMark("hide,StopTM")},_animatePositionChange:function(e,t){var n=this._visiblePixels[e],i=this._visiblePixels[t],r=Math.abs(i-n),s=this._placement===_.appBarPlacementTop?-r:r;if(i>n){var o={top:s+"px",left:"0px"};return l.showEdgeUI(this._element,o,{mechanism:"transition"})}var a={top:s+"px",left:"0px"};return l.hideEdgeUI(this._element,a,{mechanism:"transition"})},_checkDoNext:function(){this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard||this._disposed||(this._doNext===D.disabled||this._doNext===D.hidden||this._doNext===D.minimal?(this._hide(this._doNext),this._doNext=""):this._queuedCommandAnimation?this._showAndHideQueue():this._doNext===D.shown&&(this._show(),this._doNext=""))},_isABottomAppBarInTheProcessOfShowing:function(){for(var e=t.document.querySelectorAll("."+_.appBarClass+"."+_.bottomClass),n=0;n<e.length;n++)if(e[n].winAnimating===D.shown)return!0;return!1},_shouldStealFocus:function(){var e=b._Overlay._isAppBarOrChild(t.document.activeElement);if(this._element===e)return!1;if(this._placement===_.appBarPlacementBottom)return!0;var n=this._isABottomAppBarInTheProcessOfShowing();return e?e.winControl&&(e.winControl._placement===_.appBarPlacementBottom||e.winControl._placement===_.appBarPlacementTop||n)?!1:!0:!n
},_setFocusToAppBar:function(){this._focusOnFirstFocusableElement()?this._keyboardInvoked||b._Overlay._addHideFocusClass(t.document.activeElement):b._Overlay._trySetActive(this._element)},_commandsUpdated:function(){this._initializing||(this._layout.commandsUpdated(),this._layout.scale())},_beginAnimateCommands:function(e,t,n){this._layout.beginAnimateCommands(e,t,n)},_endAnimateCommands:function(){this._layout.endAnimateCommands(),this._endAnimateCommandsCallBack()},_endAnimateCommandsCallBack:function(){},_getTopOfVisualViewport:function(){return b._Overlay._keyboardInfo._visibleDocTop},_getAdjustedBottom:function(){return b._Overlay._keyboardInfo._visibleDocBottomOffset},_showingKeyboard:function(e){if(this._keyboardObscured=!1,this._needToHandleHidingKeyboard=!1,!b._Overlay._keyboardInfo._visible||!this._alreadyInPlace()){this._needToHandleShowingKeyboard=!0,!this.hidden&&this._element.contains(t.document.activeElement)&&(e.ensuredFocusedElementInView=!0),this._visible&&this._placement!==_.appBarPlacementTop&&b._Overlay._isFlyoutVisible()?this._keyboardObscured=!0:this._scrollHappened=!1;var n=this;t.setTimeout(function(e){n._checkKeyboardTimer(e)},b._Overlay._keyboardInfo._animationShowLength+b._Overlay._scrollTimeout)}},_hidingKeyboard:function(){this._keyboardObscured=!1,this._needToHandleShowingKeyboard=!1,this._needToHandleHidingKeyboard=!0,b._Overlay._keyboardInfo._isResized||((this._visible||this._animating)&&(this._checkScrollPosition(),this._element.style.display=""),this._needToHandleHidingKeyboard=!1)},_resize:function(e){this._needToHandleShowingKeyboard?this._visible&&(this._placement===_.appBarPlacementTop||this._keyboardObscured||(this._element.style.display="none")):this._needToHandleHidingKeyboard&&(this._needToHandleHidingKeyboard=!1,(this._visible||this._animating)&&(this._checkScrollPosition(),this._element.style.display="")),this._initializing||this._layout.resize(e)},_checkKeyboardTimer:function(){this._scrollHappened||this._mayEdgeBackIn()},_manipulationChanged:function(e){0===e.currentState&&this._scrollHappened&&this._mayEdgeBackIn()},_mayEdgeBackIn:function(){if(this._needToHandleShowingKeyboard)if(this._needToHandleShowingKeyboard=!1,this._keyboardObscured||this._placement===_.appBarPlacementTop&&0===b._Overlay._keyboardInfo._visibleDocTop)this._checkDoNext();else{var e=this._visiblePosition;this._lastPositionVisited=D.hidden,this._changeVisiblePosition(e,!1)}this._scrollHappened=!1},_ensurePosition:function(){var e=this._computePositionOffset();this._element.style.bottom=e.bottom,this._element.style.top=e.top},_computePositionOffset:function(){var e={};return this._placement===_.appBarPlacementBottom?(e.bottom=this._getAdjustedBottom()+"px",e.top=""):this._placement===_.appBarPlacementTop&&(e.bottom="",e.top=this._getTopOfVisualViewport()+"px"),e},_checkScrollPosition:function(){return this._needToHandleShowingKeyboard?void(this._scrollHappened=!0):void((this._visible||this._animating)&&(this._ensurePosition(),this._checkDoNext()))},_alreadyInPlace:function(){var e=this._computePositionOffset();return e.top===this._element.style.top&&e.bottom===this._element.style.bottom},_updateFirstAndFinalDiv:function(){var e=this._element.querySelectorAll("."+_.firstDivClass);e=e.length>=1?e[0]:null;var n=this._element.querySelectorAll("."+_.finalDivClass);n=n.length>=1?n[0]:null,e&&this._element.children[0]!==e&&(e.parentNode.removeChild(e),e=null),n&&this._element.children[this._element.children.length-1]!==n&&(n.parentNode.removeChild(n),n=null),e||(e=t.document.createElement("div"),e.style.display="inline",e.className=_.firstDivClass,e.tabIndex=-1,e.setAttribute("aria-hidden","true"),p._addEventListener(e,"focusin",x,!1),this._element.children[0]?this._element.insertBefore(e,this._element.children[0]):this._element.appendChild(e)),n||(n=t.document.createElement("div"),n.style.display="inline",n.className=_.finalDivClass,n.tabIndex=-1,n.setAttribute("aria-hidden","true"),p._addEventListener(n,"focusin",I,!1),this._element.appendChild(n)),this._element.children[this._element.children.length-2]!==this._invokeButton&&this._element.insertBefore(this._invokeButton,n);var i=this._element.getElementsByTagName("*"),r=p._getHighestTabIndexInList(i);this._invokeButton.tabIndex=r,k()?(e&&(e.tabIndex=p._getLowestTabIndexInList(i)),n&&(n.tabIndex=r)):(e&&(e.tabIndex=-1),n&&(n.tabIndex=-1))},_writeProfilerMark:function(e){a("WinJS.UI.AppBar:"+this._id+":"+e)}},{_appBarsSynchronizationPromise:u.as(),_isWithinAppBarOrChild:function(e,t){if(!e||!t)return!1;if(t.contains(e))return!0;var n=b._Overlay._getParentControlUsingClassName(e,_.flyoutClass);return n&&t.contains(n._previousFocus)},_toggleAllAppBarsState:function(e,t){var n,i=w();return n=t?p.hasClass(t._element,_.showingClass)||p.hasClass(t._element,_.shownClass):i._shown&&!i._hidden,n?(H._appBarsSynchronizationPromise=H._appBarsSynchronizationPromise.then(function(){return b._Overlay._hideAllBars(i,e)}),"hiding"):(H._appBarsSynchronizationPromise=H._appBarsSynchronizationPromise.then(function(){return b._Overlay._showAllBars(i,e)}),"showing")}});return H})})}),i("WinJS/Controls/Menu/_Command",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../Utilities/_Control","../../Utilities/_ElementUtilities","../AppBar/_Constants","../Flyout/_Overlay"],function(e,t,n,i,r,s,o,a,l){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{MenuCommand:n.Namespace._lazy(function(){function e(e){var n=this.winControl;if(n){var i=!0;if(n._type===a.typeToggle)n.selected=!n.selected;else if(n._type===a.typeFlyout&&n._flyout){var r=n._flyout;"string"==typeof r&&(r=t.document.getElementById(r)),r.show||(r=r.winControl),r&&r.show&&(n._parentFlyout?(i=!1,r.show(n._parentFlyout._currentAnchor,n._parentFlyout._currentPlacement,n._parentFlyout._currentAlignment)):r.show(this))}n.onclick&&n.onclick(e),i&&n._parentFlyout&&n._parentFlyout.hide()}}function u(){this&&this.focus&&(this.focus(),this.addEventListener("mousemove",c,!1))}function c(){this&&this.focus&&this!==t.document.activeElement&&this.focus()}function h(){var e=this,n=d(e);n&&this===t.document.activeElement&&o.hasClass(n,a.menuClass)&&n.focus?n.focus():n&&this===t.document.activeElement&&n.children&&n.children.length>0&&n.children[0]&&o.hasClass(n.children[0],a.firstDivClass)&&n.children[0].focus&&n.children[0].focus(),this.removeEventListener("mousemove",c,!1)}function d(e){for(;e&&!o.hasClass(e,a.flyoutClass);)e=e.parentElement;return e}var p={get ariaLabel(){return r._getWinJSString("ui/menuCommandAriaLabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badClick(){return"Invalid argument: The onclick property for an {0} must be a function"},get badHrElement(){return"Invalid argument: For a separator, the element must be null or an hr element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"}};return n.Class.define(function(t,n){if(t&&t.winControl)throw new i("WinJS.UI.MenuCommand.DuplicateConstruction",p.duplicateConstruction);if(this._disposed=!1,n||(n={}),n.type||(this._type=a.typeButton),this._element=t,n.type===a.typeSeparator?this._createSeparator():this._createButton(),o.addClass(this._element,"win-disposable"),this._element.winControl=this,o.addClass(this._element,a.menuCommandClass),n.selected||n.type!==a.typeToggle||(this.selected=!1),n.onclick&&(this.onclick=n.onclick),n.onclick=e,s.setOptions(this,n),this._type!==a.typeSeparator){var r=this._element.getAttribute("role");(null===r||""===r||void 0===r)&&(r="menuitem",this._type===a.typeToggle&&(r="menuitemcheckbox"),this._element.setAttribute("role",r),this._type===a.typeFlyout&&this._element.setAttribute("aria-haspopup",!0));var l=this._element.getAttribute("aria-label");(null===l||""===l||void 0===l)&&this._element.setAttribute("aria-label",p.ariaLabel)}this._element.addEventListener("mouseover",u,!1),this._element.addEventListener("mouseout",h,!1)},{id:{get:function(){return this._element.id},set:function(e){this._element.id||(this._element.id=e)}},type:{get:function(){return this._type},set:function(e){this._type||(this._type=e!==a.typeButton&&e!==a.typeFlyout&&e!==a.typeToggle&&e!==a.typeSeparator?a.typeButton:e)}},label:{get:function(){return this._label},set:function(e){this._label=e,this._element.textContent=this.label,this._element.setAttribute("aria-label",this.label)}},onclick:{get:function(){return this._onclick},set:function(e){if(e&&"function"!=typeof e)throw new i("WinJS.UI.MenuCommand.BadClick",r._formatString(p.badClick,"MenuCommand"));this._onclick=e}},flyout:{get:function(){var e=this._flyout;return"string"==typeof e&&(e=t.document.getElementById(e)),e&&!e.element&&(e=e.winControl),e},set:function(e){var t=e;t&&"string"!=typeof t&&(t.element&&(t=t.element),t&&(t.id?t=t.id:(t.id=o._uniqueID(t),t=t.id))),"string"==typeof t&&this._element.setAttribute("aria-owns",t),this._flyout=e}},selected:{get:function(){return"true"===this._element.getAttribute("aria-checked")},set:function(e){this._element.setAttribute("aria-checked",!!e)}},element:{get:function(){return this._element}},disabled:{get:function(){return!!this._element.disabled},set:function(e){this._element.disabled=!!e}},hidden:{get:function(){return"hidden"===this._element.style.visibility},set:function(e){var t=l._Overlay._getParentControlUsingClassName(this._element,a.menuClass);if(t&&!t.hidden)throw new i("WinJS.UI.MenuCommand.CannotChangeHiddenProperty",r._formatString(l._Overlay.commonstrings.cannotChangeHiddenProperty,"Menu"));var n=this._element.style;e?(n.visibility="hidden",n.display="none"):(n.visibility="",n.display="block")}},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass&&o.removeClass(this._element,this._extraClass),this._extraClass=e,o.addClass(this._element,this._extraClass)}},dispose:function(){this._disposed||(this._disposed=!0,this._flyout&&this._flyout.dispose())},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_createSeparator:function(){if(this._element){if("HR"!==this._element.tagName)throw new i("WinJS.UI.MenuCommand.BadHrElement",p.badHrElement)}else this._element=t.document.createElement("hr")},_createButton:function(){if(this._element){if("BUTTON"!==this._element.tagName)throw new i("WinJS.UI.MenuCommand.BadButtonElement",p.badButtonElement);this._element.innerHTML=""}else this._element=t.document.createElement("button");this._element.type="button"}})})})}),i("WinJS/Controls/Menu",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Utilities/_ElementUtilities","../Utilities/_Hoverable","./AppBar/_Constants","./Flyout","./Flyout/_Overlay","./Menu/_Command","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h){"use strict";t.Namespace.define("WinJS.UI",{Menu:t.Namespace._lazy(function(){var a=o.Key,d={get ariaLabel(){return r._getWinJSString("ui/menuAriaLabel").value},get requiresCommands(){return"Invalid argument: commands must not be empty"},get nullCommand(){return"Invalid argument: command must not be null"}},p=t.Class.derive(u.Flyout,function(t,i){i=i||{},this._element=t||e.document.createElement("div"),this._id=this._element.id||o._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),!i.commands&&this._element&&(i=n._shallowCopy(i),i.commands=this._verifyCommandsOnly(this._element,"WinJS.UI.MenuCommand"));var r=this._element?this._element.getAttribute("role"):null,s=this._element?this._element.getAttribute("aria-label"):null;this._baseFlyoutConstructor(this._element,i),(null===r||""===r||void 0===r)&&this._element.setAttribute("role","menu"),(null===s||""===s||void 0===s)&&this._element.setAttribute("aria-label",d.ariaLabel),this._element.addEventListener("keydown",this._handleKeyDown,!0),o.addClass(this._element,l.menuClass),this.hide(),this._writeProfilerMark("constructor,StopTM")},{commands:{set:function(e){if(!this.hidden)throw new i("WinJS.UI.Menu.CannotChangeCommandsWhenVisible",r._formatString(c._Overlay.commonstrings.cannotChangeCommandsWhenVisible,"Menu"));o.empty(this._element),Array.isArray(e)||(e=[e]);for(var t=e.length,n=0;t>n;n++)this._addCommand(e[n])}},getCommandById:function(e){for(var t=this.element.querySelectorAll("#"+e),n=[],i=0,r=t.length;r>i;i++)t[i].winControl&&n.push(t[i].winControl);return 1===n.length?n[0]:0===n.length?null:n},showCommands:function(e){if(!e)throw new i("WinJS.UI.Menu.RequiresCommands",d.requiresCommands);this._showCommands(e,!0)},hideCommands:function(e){if(!e)throw new i("WinJS.UI.Menu.RequiresCommands",d.requiresCommands);this._hideCommands(e,!0)},showOnlyCommands:function(e){if(!e)throw new i("WinJS.UI.Menu.RequiresCommands",d.requiresCommands);this._showOnlyCommands(e,!0)},show:function(e,t,n){this._writeProfilerMark("show,StartTM"),this._show(e,t,n)},_show:function(e,t,n){this._checkForFlyoutCommands(),this._baseFlyoutShow(e,t,n)},_addCommand:function(e){if(!e)throw new i("WinJS.UI.Menu.NullCommand",d.nullCommand);e._element||(e=new h.MenuCommand(null,e)),e._element.parentElement&&e._element.parentElement.removeChild(e._element),this._element.appendChild(e._element)},_checkToggle:function(){var e=this._element.querySelectorAll(".win-command[aria-checked]"),t=!1;if(e)for(var n=0;n<e.length;n++)if(e[n]&&e[n].winControl&&!e[n].winControl.hidden){t=!0;break}t?o.addClass(this._element,l.menuToggleClass):o.removeClass(this._element,l.menuToggleClass)},_checkForFlyoutCommands:function(){for(var e=this._element.querySelectorAll(".win-command"),t=0;t<e.length;t++)e[t].winControl&&(e[t].winControl._parentFlyout=this)},_handleKeyDown:function(t){var n=this;t.keyCode===a.escape?(this.winControl._keyboardInvoked=!0,this.winControl._hide()):t.keyCode!==a.space&&t.keyCode!==a.enter||this!==e.document.activeElement?t.keyCode===a.upArrow?(p._focusOnPreviousElement(n),t.preventDefault()):t.keyCode===a.downArrow?(p._focusOnNextElement(n),t.preventDefault()):t.keyCode===a.tab&&t.preventDefault():(t.preventDefault(),this.winControl.hide())},_writeProfilerMark:function(e){s("WinJS.UI.Menu:"+this._id+":"+e)}});return p._focusOnNextElement=function(t){var n=e.document.activeElement;do n=n===t?n.firstElementChild:n.nextElementSibling,n?n.focus():n=t;while(n!==e.document.activeElement)},p._focusOnPreviousElement=function(t){var n=e.document.activeElement;do n=n===t?n.lastElementChild:n.previousElementSibling,n?n.focus():n=t;while(n!==e.document.activeElement)},p})})}),i("WinJS/Controls/SearchBox/_SearchSuggestionManagerShim",["exports","../../_Signal","../../Core/_Base","../../Core/_BaseUtils","../../Core/_Events","../../BindingList"],function(e,t,n,i,r){"use strict";var s={reset:0,itemInserted:1,itemRemoved:2,itemChanged:3},o={Query:0,Result:1,Separator:2},a=n.Class.derive(Array,function(){},{reset:function(){this.length=0,this.dispatchEvent("vectorchanged",{collectionChange:s.reset,index:0})},insert:function(e,t){this.splice(e,0,t),this.dispatchEvent("vectorchanged",{collectionChange:s.itemInserted,index:e})},remove:function(e){this.splice(e,1),this.dispatchEvent("vectorchanged",{collectionChange:s.itemRemoved,index:e})}});n.Class.mix(a,r.eventMixin);var l=n.Class.define(function(){this._data=[]},{size:{get:function(){return this._data.length}},appendQuerySuggestion:function(e){this._data.push({kind:o.Query,text:e})},appendQuerySuggestions:function(e){e.forEach(this.appendQuerySuggestion.bind(this))},appendResultSuggestion:function(e,t,n,i,r){this._data.push({kind:o.Result,text:e,detailText:t,tag:n,imageUrl:i,imageAlternateText:r,image:null})},appendSearchSeparator:function(e){this._data.push({kind:o.Separator,text:e})}}),u=n.Class.define(function(e,t,n){this._queryText=e,this._language=t,this._linguisticDetails=n,this._searchSuggestionCollection=new l},{language:{get:function(){return this._language}},linguisticDetails:{get:function(){return this._linguisticDetails}},queryText:{get:function(){return this._queryText}},searchSuggestionCollection:{get:function(){return this._searchSuggestionCollection}},getDeferral:function(){return this._deferralSignal||(this._deferralSignal=new t)},_deferralSignal:null}),c=n.Class.define(function(){this._updateVector=this._updateVector.bind(this),this._suggestionVector=new a,this._query="",this._history={"":[]},this._dataSource=[],this.searchHistoryContext="",this.searchHistoryEnabled=!0},{addToHistory:function(e){if(e&&e.trim()){for(var t=this._history[this.searchHistoryContext],n=-1,i=0,r=t.length;r>i;i++){var s=t[i];if(s.text.toLowerCase()===e.toLowerCase()){n=i;break}}n>=0&&t.splice(n,1),t.splice(0,0,{text:e,kind:o.Query}),this._updateVector()}},clearHistory:function(){this._history[this.searchHistoryContext]=[],this._updateVector()},setLocalContentSuggestionSettings:function(){},setQuery:function(e){function t(e){n._dataSource=e,n._updateVector()}var n=this;this._query=e;var i=new u(e);this.dispatchEvent("suggestionsrequested",{request:i}),i._deferralSignal?i._deferralSignal.promise.then(t.bind(this,i.searchSuggestionCollection._data)):t(i.searchSuggestionCollection._data)},searchHistoryContext:{get:function(){return""+this._searchHistoryContext},set:function(e){e=""+e,this._history[e]||(this._history[e]=[]),this._searchHistoryContext=e}},searchHistoryEnabled:{get:function(){return this._searchHistoryEnabled},set:function(e){this._searchHistoryEnabled=e}},suggestions:{get:function(){return this._suggestionVector}},_updateVector:function(){for(this.suggestions.insert(this.suggestions.length,{text:"",kind:o.Query});this.suggestions.length>1;)this.suggestions.remove(0);var e=0,t={};if(this.searchHistoryEnabled){var n=this._query.toLowerCase();this._history[this.searchHistoryContext].forEach(function(i){var r=i.text.toLowerCase();0===r.indexOf(n)&&(this.suggestions.insert(e,i),t[r]=!0,e++)},this)}this._dataSource.forEach(function(n){n.kind===o.Query?t[n.text.toLowerCase()]||(this.suggestions.insert(e,n),e++):(this.suggestions.insert(e,n),e++)},this),this.suggestions.remove(this.suggestions.length-1)}});n.Class.mix(c,r.eventMixin),n.Namespace._moduleDefine(e,null,{_CollectionChange:s,_SearchSuggestionKind:o,_SearchSuggestionManagerShim:c})}),i("WinJS/Controls/SearchBox",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Animations","../BindingList","../Controls/Repeater","../Utilities/_Control","../Utilities/_ElementListUtilities","../Utilities/_ElementUtilities","../Utilities/_Hoverable","./SearchBox/_SearchSuggestionManagerShim","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p){"use strict";n.Namespace.define("WinJS.UI",{SearchBox:n.Namespace._lazy(function(){var d=r._createEventProperty,m=h.Key,f={searchBox:"win-searchbox",searchBoxInput:"win-searchbox-input",searchBoxButton:"win-searchbox-button",searchBoxFlyout:"win-searchbox-flyout",searchBoxSuggestionResult:"win-searchbox-suggestion-result",searchBoxSuggestionQuery:"win-searchbox-suggestion-query",searchBoxSuggestionSeparator:"win-searchbox-suggestion-separator",searchBoxSuggestionSelected:"win-searchbox-suggestion-selected",searchBoxFlyoutHighlightText:"win-searchbox-flyout-highlighttext",searchBoxButtonInputFocus:"win-searchbox-button-input-focus",searchBoxInputFocus:"win-searchbox-input-focus",searchBoxSuggestionResultText:"win-searchbox-suggestion-result-text",searchBoxSuggestionResultDetailedText:"win-searchbox-suggestion-result-detailed-text",searchboxDisabled:"win-searchbox-disabled",searchboxHitHighlightSpan:"win-searchbox-hithighlight-span"},_={querychanged:"querychanged",querysubmitted:"querysubmitted",resultsuggestionchosen:"resultsuggestionchosen",suggestionsrequested:"suggestionsrequested",receivingfocusonkeyboardinput:"receivingfocusonkeyboardinput"},g={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get invalidSearchBoxSuggestionKind(){return"Error: Invalid search suggestion kind."},get ariaLabel(){return s._getWinJSString("ui/searchBoxAriaLabel").value},get ariaLabelInputNoPlaceHolder(){return s._getWinJSString("ui/searchBoxAriaLabelInputNoPlaceHolder").value},get ariaLabelInputPlaceHolder(){return s._getWinJSString("ui/searchBoxAriaLabelInputPlaceHolder").value},get ariaLabelButton(){return s._getWinJSString("ui/searchBoxAriaLabelButton").value},get ariaLabelQuery(){return s._getWinJSString("ui/searchBoxAriaLabelQuery").value},get ariaLabelSeparator(){return s._getWinJSString("ui/searchBoxAriaLabelSeparator").value},get ariaLabelResult(){return s._getWinJSString("ui/searchBoxAriaLabelResult").value}},v=n.Class.define(function(n,r){if(n=n||e.document.createElement("div"),n.winControl)throw new i("WinJS.UI.SearchBox.DuplicateConstruction",g.duplicateConstruction);n.winControl=this,this._domElement=null,this._inputElement=null,this._buttonElement=null,this._flyout=null,this._flyoutDivElement=null,this._repeaterDivElement=null,this._repeater=null,this._disposed=!1,this._focusOnKeyboardInput=!1,this._chooseSuggestionOnEnter=!1,this._lastKeyPressLanguage="",this._prevQueryText="",this._prevLinguisticDetails=this._createSearchQueryLinguisticDetails([],0,0,"",""),this._prevCompositionStart=0,this._prevCompositionLength=0,this._isProcessingDownKey=!1,this._isProcessingUpKey=!1,this._isProcessingTabKey=!1,this._isProcessingEnterKey=!1,this._isFlyoutPointerDown=!1,this._reflowImeOnPointerRelease=!1,this._currentFocusedIndex=-1,this._currentSelectedIndex=-1,this._suggestionRendererBind=this._suggestionRenderer.bind(this),this._requestingFocusOnKeyboardInputHandlerBind=this._requestingFocusOnKeyboardInputHandler.bind(this),this._suggestionsRequestedHandlerBind=this._suggestionsRequestedHandler.bind(this),this._suggestionsChangedHandlerBind=this._suggestionsChangedHandler.bind(this),this._keydownCaptureHandlerBind=this._keydownCaptureHandler.bind(this),this._frameLoadCaptureHandlerBind=this._frameLoadCaptureHandler.bind(this),this._searchSuggestionManager=null,this._searchSuggestions=null,this._searchSuggestionManager=t.Windows.ApplicationModel.Search.Core.SearchSuggestionManager?new t.Windows.ApplicationModel.Search.Core.SearchSuggestionManager:new p._SearchSuggestionManagerShim,this._searchSuggestions=this._searchSuggestionManager.suggestions,this._hitFinder=null,this._setElement(n),u.setOptions(this,r),this._setAccessibilityProperties(),h.addClass(n,"win-disposable")},{element:{get:function(){return this._domElement}},placeholderText:{get:function(){return this._inputElement.placeholder},set:function(e){this._inputElement.placeholder=e,this._updateInputElementAriaLabel()}},queryText:{get:function(){return this._inputElement.value},set:function(e){this._inputElement.value=e}},searchHistoryDisabled:{get:function(){return this._searchSuggestionManager?!this._searchSuggestionManager.searchHistoryEnabled:!0},set:function(e){this._searchSuggestionManager&&(this._searchSuggestionManager.searchHistoryEnabled=!e)}},searchHistoryContext:{get:function(){return this._searchSuggestionManager?this._searchSuggestionManager.searchHistoryContext:""},set:function(e){this._searchSuggestionManager&&(this._searchSuggestionManager.searchHistoryContext=e)}},focusOnKeyboardInput:{get:function(){return this._focusOnKeyboardInput},set:function(t){this._focusOnKeyboardInput&&!t?this._searchSuggestionManager instanceof p._SearchSuggestionManagerShim?this._updateKeydownCaptureListeners(e.top,!1):this._searchSuggestionManager.removeEventListener("requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind):!this._focusOnKeyboardInput&&t&&(this._searchSuggestionManager instanceof p._SearchSuggestionManagerShim?this._updateKeydownCaptureListeners(e.top,!0):this._searchSuggestionManager.addEventListener("requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind)),this._focusOnKeyboardInput=!!t}},chooseSuggestionOnEnter:{get:function(){return this._chooseSuggestionOnEnter},set:function(e){this._chooseSuggestionOnEnter=!!e,this._updateSearchButtonClass()}},disabled:{get:function(){return this._inputElement.disabled},set:function(t){this._inputElement.disabled!==!!t&&(t?(this._isFlyoutShown&&this._hideFlyout(),h.addClass(this.element,f.searchboxDisabled),this._inputElement.disabled=!0,this._buttonElement.disabled=!0,this._domElement.disabled=!0):(this._inputElement.disabled=!1,this._buttonElement.disabled=!1,this._domElement.disabled=!1,h.removeClass(this.element,f.searchboxDisabled),e.document.activeElement===this.element&&h._setActive(this._inputElement)))}},setLocalContentSuggestionSettings:function(e){this._searchSuggestionManager&&this._searchSuggestionManager.setLocalContentSuggestionSettings(e)},dispose:function(){this._disposed||(this._flyoutOpenPromise&&this._flyoutOpenPromise.cancel(),this._focusOnKeyboardInput&&(this._searchSuggestionManager instanceof p._SearchSuggestionManagerShim?this._updateKeydownCaptureListeners(e.top,!1):this._searchSuggestionManager.removeEventListener("requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind)),this._searchSuggestions.removeEventListener("vectorchanged",this._suggestionsChangedHandlerBind),this._searchSuggestionManager.removeEventListener("suggestionsrequested",this._suggestionsRequestedHandlerBind),this._searchSuggestionManager=null,this._searchSuggestions=null,this._hitFinder=null,this._disposed=!0)},onquerychanged:d(_.querychanged),onquerysubmitted:d(_.querysubmitted),onresultsuggestionchosen:d(_.resultsuggestionchosen),onsuggestionsrequested:d(_.suggestionsrequested),_isFlyoutShown:function(){return"none"!==this._flyoutDivElement.style.display},_isFlyoutBelow:function(){return this._flyoutDivElement.getBoundingClientRect().top>this._inputElement.getBoundingClientRect().top?!0:!1},_getFlyoutTop:function(){if(this._isFlyoutBelow())return this._inputElement.getBoundingClientRect().bottom;var e=this._flyoutDivElement.getBoundingClientRect().bottom-this._flyoutDivElement.getBoundingClientRect().top;return this._inputElement.getBoundingClientRect().top-e},_getFlyoutBottom:function(){if(this._isFlyoutBelow()){var e=this._flyoutDivElement.getBoundingClientRect().bottom-this._flyoutDivElement.getBoundingClientRect().top;return this._inputElement.getBoundingClientRect().bottom+e}return this._inputElement.getBoundingClientRect().top},_updateFlyoutTopAndTouchAction:function(){var e=this._flyoutDivElement.getBoundingClientRect().bottom-this._flyoutDivElement.getBoundingClientRect().top;this._isFlyoutBelow()||(this._flyoutDivElement.style.top="-"+e+"px"),this._flyoutDivElement.style.touchAction=this._flyoutDivElement.scrollHeight>e?"pan-y":"none"},_showFlyout:function(){if(!this._isFlyoutShown()&&0!==this._suggestionsData.length){this._flyoutDivElement.style.display="block";var t=this._flyoutDivElement.clientHeight;t<v._Constants.MIN_POPUP_HEIGHT&&(t=v._Constants.MIN_POPUP_HEIGHT);var n=this._flyoutDivElement.getBoundingClientRect(),i=this.element.getBoundingClientRect(),r=n.bottom-n.top,s=n.right-n.left,a=i.right-i.left,l=e.document.documentElement.clientHeight,u=e.document.documentElement.clientWidth,c=this.element.clientHeight,h=this.element.clientLeft,d=!0;i.bottom+t<=l?this._flyoutDivElement.style.top=c+"px":i.top-t>=0?(this._flyoutDivElement.style.top="-"+r+"px",d=!1):this._flyoutDivElement.style.top=c+"px";var p;p="rtl"===e.getComputedStyle(this._flyoutDivElement).direction?i.right-s>=0||i.left+s>u:i.left+s>u&&i.right-s>=0,this._flyoutDivElement.style.left=p?a-s-h+"px":"-"+h+"px",this._flyoutDivElement.style.touchAction=this._flyoutDivElement.scrollHeight>r?"pan-y":"none",this._addFlyoutIMEPaddingIfRequired(),this._flyoutOpenPromise&&(this._flyoutOpenPromise.cancel(),this._flyoutOpenPromise=null);var m=d?"WinJS-flyoutBelowSearchBox-showPopup":"WinJS-flyoutAboveSearchBox-showPopup";this._flyoutOpenPromise=o.showPopup(this._flyoutDivElement,{top:"0px",left:"0px",keyframe:m})}},_hideFlyout:function(){this._isFlyoutShown()&&(this._flyoutDivElement.style.display="none",this._updateSearchButtonClass())},_addNewSpan:function(t,n,i){var r=e.document.createElement("span");return r.textContent=n,r.setAttribute("aria-hidden","true"),h.addClass(r,f.searchboxHitHighlightSpan),t.insertBefore(r,i),r},_addHitHighlightedText:function(e,t,n){if(n){c.query("."+f.searchboxHitHighlightSpan,e).forEach(function(e){e.parentNode.removeChild(e)});var i=e.firstChild,r=t.hits;r||null===this._hitFinder||t.kind===p._SearchSuggestionKind.Separator||(r=this._hitFinder.find(n));for(var s=v._sortAndMergeHits(r),o=0,a=0;a<s.length;a++){var l=s[a];this._addNewSpan(e,n.substring(o,l.startPosition),i),o=l.startPosition+l.length;var u=this._addNewSpan(e,n.substring(l.startPosition,o),i);h.addClass(u,f.searchBoxFlyoutHighlightText)}o<n.length&&this._addNewSpan(e,n.substring(o),i)}},_findSuggestionElementIndex:function(e){if(e)for(var t=0;t<this._suggestionsData.length;t++)if(this._repeater.elementFromIndex(t)===e)return t;return-1},_isSuggestionSelectable:function(e){return e.kind===p._SearchSuggestionKind.Query||e.kind===p._SearchSuggestionKind.Result},_findNextSuggestionElementIndex:function(e){var t=e+1;0>t&&(t=0);for(var n=t;n<this._suggestionsData.length;n++)if(this._repeater.elementFromIndex(n)&&this._isSuggestionSelectable(this._suggestionsData.getAt(n)))return n;return-1},_findPreviousSuggestionElementIndex:function(e){var t=e-1;t>=this._suggestionsData.length&&(t=this._suggestionsData.length-1);for(var n=t;n>=0;n--)if(this._repeater.elementFromIndex(n)&&this._isSuggestionSelectable(this._suggestionsData.getAt(n)))return n;return-1},_trySetFocusOnSuggestionIndex:function(e){try{this._repeater.elementFromIndex(e).focus()}catch(t){}},_updateFakeFocus:function(){var e;e=this._isFlyoutShown()&&this._chooseSuggestionOnEnter?this._findNextSuggestionElementIndex(-1):-1,this._selectSuggestionAtIndex(e)},_updateSearchButtonClass:function(){-1!==this._currentSelectedIndex||e.document.activeElement!==this._inputElement?h.removeClass(this._buttonElement,f.searchBoxButtonInputFocus):e.document.activeElement===this._inputElement&&h.addClass(this._buttonElement,f.searchBoxButtonInputFocus)},_selectSuggestionAtIndex:function(e){for(var t=null,n=0;n<this._suggestionsData.length;n++)t=this._repeater.elementFromIndex(n),n!==e?(h.removeClass(t,f.searchBoxSuggestionSelected),t.setAttribute("aria-selected","false")):(h.addClass(t,f.searchBoxSuggestionSelected),this._scrollToView(t),t.setAttribute("aria-selected","true"));this._updateSearchButtonClass(),this._currentSelectedIndex=e,t?this._inputElement.setAttribute("aria-activedescendant",this._repeaterDivElement.id+e):this._inputElement.hasAttribute("aria-activedescendant")&&this._inputElement.removeAttribute("aria-activedescendant")},_scrollToView:function(e){var t=this._flyoutDivElement.getBoundingClientRect().bottom-this._flyoutDivElement.getBoundingClientRect().top;if(e.offsetTop+e.offsetHeight>this._flyoutDivElement.scrollTop+t){var n=e.offsetTop+e.offsetHeight-(this._flyoutDivElement.scrollTop+t);h._zoomTo(this._flyoutDivElement,{contentX:0,contentY:this._flyoutDivElement.scrollTop+n,viewportX:0,viewportY:0})}else e.offsetTop<this._flyoutDivElement.scrollTop&&h._zoomTo(this._flyoutDivElement,{contentX:0,contentY:e.offsetTop,viewportX:0,viewportY:0})},_querySuggestionRenderer:function(t){var n=e.document.createElement("div");this._addHitHighlightedText(n,t,t.text),n.title=t.text,h.addClass(n,f.searchBoxSuggestionQuery);var i=this;h._addEventListener(n,"pointerup",function(e){i._inputElement.focus(),i._processSuggestionChosen(t,e)}),n.setAttribute("role","option");var r=s._formatString(g.ariaLabelQuery,t.text);return n.setAttribute("aria-label",r),n},_separatorSuggestionRenderer:function(t){var n=e.document.createElement("div");
if(t.text.length>0){var i=e.document.createElement("div");i.textContent=t.text,i.title=t.text,i.setAttribute("aria-hidden","true"),n.appendChild(i)}n.insertAdjacentHTML("beforeend","<hr/>"),h.addClass(n,f.searchBoxSuggestionSeparator),n.setAttribute("role","separator");var r=s._formatString(g.ariaLabelSeparator,t.text);return n.setAttribute("aria-label",r),n},_resultSuggestionRenderer:function(t){var n=e.document.createElement("div"),i=new e.Image;i.style.opacity=0;var r=function(e){function t(){i.removeEventListener("load",t,!1),o.fadeIn(i)}i.addEventListener("load",t,!1),i.src=e};null!==t.image?t.image.openReadAsync().then(function(t){null!==t&&r(e.URL.createObjectURL(t,{oneTimeOnly:!0}))}):null!==t.imageUrl&&r(t.imageUrl),i.setAttribute("aria-hidden","true"),n.appendChild(i);var a=e.document.createElement("div");h.addClass(a,f.searchBoxSuggestionResultText),this._addHitHighlightedText(a,t,t.text),a.title=t.text,a.setAttribute("aria-hidden","true"),n.appendChild(a);var l=e.document.createElement("br");a.appendChild(l);var u=e.document.createElement("span");h.addClass(u,f.searchBoxSuggestionResultDetailedText),this._addHitHighlightedText(u,t,t.detailText),u.title=t.detailText,u.setAttribute("aria-hidden","true"),a.appendChild(u),h.addClass(n,f.searchBoxSuggestionResult);var c=this;h._addEventListener(n,"pointerup",function(e){c._inputElement.focus(),c._processSuggestionChosen(t,e)}),n.setAttribute("role","option");var d=s._formatString(g.ariaLabelResult,t.text,t.detailText);return n.setAttribute("aria-label",d),n},_suggestionRenderer:function(e){var t=null;if(!e)return t;if(e.kind===p._SearchSuggestionKind.Query)t=this._querySuggestionRenderer(e);else if(e.kind===p._SearchSuggestionKind.Separator)t=this._separatorSuggestionRenderer(e);else{if(e.kind!==p._SearchSuggestionKind.Result)throw new i("WinJS.UI.SearchBox.invalidSearchBoxSuggestionKind",g.invalidSearchBoxSuggestionKind);t=this._resultSuggestionRenderer(e)}return t},_setElement:function(t){this._domElement=t,h.addClass(this._domElement,f.searchBox),this._inputElement=e.document.createElement("input"),this._inputElement.type="search",h.addClass(this._inputElement,f.searchBoxInput),this._buttonElement=e.document.createElement("div"),this._buttonElement.tabIndex=-1,h.addClass(this._buttonElement,f.searchBoxButton),this._flyoutDivElement=e.document.createElement("div"),h.addClass(this._flyoutDivElement,f.searchBoxFlyout),this._repeaterDivElement=e.document.createElement("div"),this._suggestionsData=new a.List,this._repeater=new l.Repeater(this._repeaterDivElement,{data:this._suggestionsData,template:this._suggestionRendererBind}),this._domElement.appendChild(this._inputElement),this._domElement.appendChild(this._buttonElement),this._domElement.appendChild(this._flyoutDivElement),this._flyoutDivElement.appendChild(this._repeaterDivElement),this._hideFlyout(),this._wireupUserEvents(),this._wireupWinRTEvents(),this._wireupRepeaterEvents()},_setAccessibilityProperties:function(){var e=this._domElement.getAttribute("aria-label");e||this._domElement.setAttribute("aria-label",g.ariaLabel),this._domElement.setAttribute("role","group"),this._updateInputElementAriaLabel(),this._inputElement.setAttribute("role","textbox"),this._buttonElement.setAttribute("role","button"),this._buttonElement.setAttribute("aria-label",g.ariaLabelButton),this._repeaterDivElement.setAttribute("role","listbox"),h._ensureId(this._repeaterDivElement),this._inputElement.setAttribute("aria-controls",this._repeaterDivElement.id),this._repeaterDivElement.setAttribute("aria-live","polite")},_updateInputElementAriaLabel:function(){var e=g.ariaLabelInputNoPlaceHolder;this._inputElement.placeholder&&this._inputElement.placeholder&&(e=s._formatString(g.ariaLabelInputPlaceHolder,this._inputElement.placeholder)),this._inputElement.setAttribute("aria-label",e)},_submitQuery:function(e,n,i){this._disposed||(t.Windows.Globalization.Language&&(this._lastKeyPressLanguage=t.Windows.Globalization.Language.currentInputMethodLanguageTag),this._fireEvent(v._EventName.querysubmitted,{language:this._lastKeyPressLanguage,linguisticDetails:this._getLinguisticDetails(!0,n),queryText:e,keyModifiers:v._getKeyModifiers(i)}),this._searchSuggestionManager&&this._searchSuggestionManager.addToHistory(this._inputElement.value,this._lastKeyPressLanguage))},_processSuggestionChosen:function(e,t){this.queryText=e.text,e.kind===p._SearchSuggestionKind.Query?this._submitQuery(e.text,!1,t):e.kind===p._SearchSuggestionKind.Result&&this._fireEvent(v._EventName.resultsuggestionchosen,{tag:e.tag,keyModifiers:v._getKeyModifiers(t),storageFile:null}),this._hideFlyout()},_buttonClickHandler:function(e){this._inputElement.focus(),this._submitQuery(this._inputElement.value,!0,e),this._hideFlyout()},_inputOrImeChangeHandler:function(){var e=h._matchesSelector(this._buttonElement,":active");if(!this._isProcessingImeFocusLossKey()&&!e&&!this._isFlyoutPointerDown){var n=this._getLinguisticDetails(!1,!0),i=this._hasLinguisticDetailsChanged(n);if((this._inputElement.value!==this._prevQueryText||0===this._prevCompositionLength||n.queryTextCompositionLength>0)&&(this._prevCompositionStart=n.queryTextCompositionStart,this._prevCompositionLength=n.queryTextCompositionLength),this._prevQueryText===this._inputElement.value&&!i)return;this._prevQueryText=this._inputElement.value,t.Windows.Globalization.Language&&(this._lastKeyPressLanguage=t.Windows.Globalization.Language.currentInputMethodLanguageTag),t.Windows.Data.Text.SemanticTextQuery&&(this._hitFinder=""!==this._inputElement.value?new t.Windows.Data.Text.SemanticTextQuery(this._inputElement.value,this._lastKeyPressLanguage):null),this._fireEvent(v._EventName.querychanged,{language:this._lastKeyPressLanguage,queryText:this._inputElement.value,linguisticDetails:n}),this._searchSuggestionManager&&this._searchSuggestionManager.setQuery(this._inputElement.value,this._lastKeyPressLanguage,n)}},_createSearchQueryLinguisticDetails:function(e,n,i,r,s){for(var o=null,a=[],l=0;l<e.length;l++)a[l]=r+e[l]+s;return o=t.Windows.ApplicationModel.Search.SearchQueryLinguisticDetails?new t.Windows.ApplicationModel.Search.SearchQueryLinguisticDetails(a,n,i):{queryTextAlternatives:a,queryTextCompositionStart:n,queryTextCompositionLength:i}},_getLinguisticDetails:function(e,t){var n=null;if(this._inputElement.value===this._prevQueryText&&e&&this._prevLinguisticDetails&&t)n=this._prevLinguisticDetails;else{var i=[],r=0,s=0,o="",a="";if(t&&this._inputElement.msGetInputContext&&this._inputElement.msGetInputContext().getCompositionAlternatives){var l=this._inputElement.msGetInputContext();i=l.getCompositionAlternatives(),r=l.compositionStartOffset,s=l.compositionEndOffset-l.compositionStartOffset,this._inputElement.value!==this._prevQueryText||0===this._prevCompositionLength||s>0?(o=this._inputElement.value.substring(0,r),a=this._inputElement.value.substring(r+s)):(o=this._inputElement.value.substring(0,this._prevCompositionStart),a=this._inputElement.value.substring(this._prevCompositionStart+this._prevCompositionLength))}n=this._createSearchQueryLinguisticDetails(i,r,s,o,a)}return n},_handleTabKeyDown:function(e){var t=!0;e.shiftKey?-1!==this._currentFocusedIndex&&(this._currentFocusedIndex=-1,this._selectSuggestionAtIndex(this._currentFocusedIndex),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation(),t=!1):-1===this._currentFocusedIndex&&(this._currentFocusedIndex=this._isFlyoutBelow()?this._findNextSuggestionElementIndex(this._currentFocusedIndex):this._findPreviousSuggestionElementIndex(this._suggestionsData.length),-1!==this._currentFocusedIndex&&(this._selectSuggestionAtIndex(this._currentFocusedIndex),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation(),t=!1)),t&&this._hideFlyout()},_keyDownHandler:function(e){if(this._lastKeyPressLanguage=e.locale,e.keyCode===m.tab?this._isProcessingTabKey=!0:e.keyCode===m.upArrow?this._isProcessingUpKey=!0:e.keyCode===m.downArrow?this._isProcessingDownKey=!0:e.keyCode===m.enter&&"ko"===e.locale&&(this._isProcessingEnterKey=!0),e.keyCode!==m.IME)if(e.keyCode===m.tab)this._handleTabKeyDown(e);else if(e.keyCode===m.escape)-1!==this._currentFocusedIndex?(this.queryText=this._prevQueryText,this._currentFocusedIndex=-1,this._selectSuggestionAtIndex(this._currentFocusedIndex),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation()):""!==this.queryText&&(this.queryText="",this._inputOrImeChangeHandler(null),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation());else if(e.keyCode===m.upArrow){var t;-1!==this._currentSelectedIndex?(t=this._findPreviousSuggestionElementIndex(this._currentSelectedIndex),-1===t&&(this.queryText=this._prevQueryText)):t=this._findPreviousSuggestionElementIndex(this._suggestionsData.length),this._currentFocusedIndex=t,this._selectSuggestionAtIndex(t),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation()}else if(e.keyCode===m.downArrow){var n=this._findNextSuggestionElementIndex(this._currentSelectedIndex);-1!==this._currentSelectedIndex&&-1===n&&(this.queryText=this._prevQueryText),this._currentFocusedIndex=n,this._selectSuggestionAtIndex(n),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex),this._updateSearchButtonClass(),e.preventDefault(),e.stopPropagation()}else e.keyCode===m.enter?(-1===this._currentSelectedIndex?this._submitQuery(this._inputElement.value,!0,e):this._processSuggestionChosen(this._suggestionsData.getAt(this._currentSelectedIndex),e),this._hideFlyout()):v._isTypeToSearchKey(e)&&-1!==this._currentFocusedIndex&&(this._currentFocusedIndex=-1,this._selectSuggestionAtIndex(-1),this._updateFakeFocus())},_keyPressHandler:function(e){this._lastKeyPressLanguage=e.locale},_keyUpHandler:function(e){e.keyCode===m.tab?this._isProcessingTabKey=!1:e.keyCode===m.upArrow?this._isProcessingUpKey=!1:e.keyCode===m.downArrow?this._isProcessingDownKey=!1:e.keyCode===m.enter&&(this._isProcessingEnterKey=!1)},_inputFocusHandler:function(e){this._inputElement.value!==this._prevQueryText&&t.Windows.Data.Text.SemanticTextQuery&&(this._hitFinder=""!==this._inputElement.value?new t.Windows.Data.Text.SemanticTextQuery(this._inputElement.value,this._inputElement.lang):null),e.target!==this._inputElement||this._internalFocusMove||(this._showFlyout(),-1!==this._currentFocusedIndex?this._selectSuggestionAtIndex(this._currentFocusedIndex):this._updateFakeFocus(),this._searchSuggestionManager&&this._searchSuggestionManager.setQuery(this._inputElement.value,this._lastKeyPressLanguage,this._getLinguisticDetails(!0,!0))),this._internalFocusMove=!1,h.addClass(this.element,f.searchBoxInputFocus),this._updateSearchButtonClass()},_flyoutBlurHandler:function(){this._isElementInSearchControl(e.document.activeElement)?this._internalFocusMove=!0:(this._hideFlyout(),h.removeClass(this.element,f.searchBoxInputFocus))},_inputBlurHandler:function(){this._isElementInSearchControl(e.document.activeElement)||(this._hideFlyout(),h.removeClass(this.element,f.searchBoxInputFocus)),this._updateSearchButtonClass(),this._isProcessingDownKey=!1,this._isProcessingUpKey=!1,this._isProcessingTabKey=!1,this._isProcessingEnterKey=!1},_isIMEOccludingFlyout:function(e){var t=this._getFlyoutTop(),n=this._getFlyoutBottom();return e.top>=t&&e.top<=n||e.bottom>=t&&e.bottom<=n?!0:!1},_addFlyoutIMEPaddingIfRequired:function(){if(this._isFlyoutShown()&&this._isFlyoutBelow()&&this._inputElement.msGetInputContext&&this._inputElement.msGetInputContext()){var e=this._inputElement.msGetInputContext(),t=e.getCandidateWindowClientRect();if(this._isIMEOccludingFlyout(t)){var n=o.createRepositionAnimation(this._flyoutDivElement.children);this._flyoutDivElement.style.paddingTop=t.bottom-t.top+"px",n.execute()}}},_msCandidateWindowShowHandler:function(){this._addFlyoutIMEPaddingIfRequired(),this._reflowImeOnPointerRelease=!1},_msCandidateWindowHideHandler:function(){if(this._isFlyoutPointerDown)this._reflowImeOnPointerRelease=!0;else{var e=o.createRepositionAnimation(this._flyoutDivElement.children);this._flyoutDivElement.style.paddingTop="",e.execute()}},_wireupUserEvents:function(){var e=this._inputOrImeChangeHandler.bind(this);if(this._buttonElement.addEventListener("click",this._buttonClickHandler.bind(this)),this._inputElement.addEventListener("input",e),this._inputElement.addEventListener("keydown",this._keyDownHandler.bind(this)),this._inputElement.addEventListener("keypress",this._keyPressHandler.bind(this)),this._inputElement.addEventListener("keyup",this._keyUpHandler.bind(this)),this._inputElement.addEventListener("focus",this._inputFocusHandler.bind(this)),this._inputElement.addEventListener("blur",this._inputBlurHandler.bind(this)),h._addEventListener(this._inputElement,"pointerdown",this._inputPointerDownHandler.bind(this)),this._flyoutDivElement.addEventListener("blur",this._flyoutBlurHandler.bind(this)),h._addEventListener(this._flyoutDivElement,"pointerdown",this._flyoutPointerDownHandler.bind(this)),h._addEventListener(this._flyoutDivElement,"pointerup",this._flyoutPointerReleasedHandler.bind(this)),h._addEventListener(this._flyoutDivElement,"pointercancel",this._flyoutPointerReleasedHandler.bind(this)),h._addEventListener(this._flyoutDivElement,"pointerout",this._flyoutPointerReleasedHandler.bind(this)),this._inputElement.addEventListener("compositionstart",e),this._inputElement.addEventListener("compositionupdate",e),this._inputElement.addEventListener("compositionend",e),this._inputElement.msGetInputContext&&this._inputElement.msGetInputContext()){var t=this._inputElement.msGetInputContext();t.addEventListener("MSCandidateWindowShow",this._msCandidateWindowShowHandler.bind(this)),t.addEventListener("MSCandidateWindowHide",this._msCandidateWindowHideHandler.bind(this))}},_repeaterChangedHandler:function(){this._updateFlyoutTopAndTouchAction(),this._isFlyoutShown()&&(this._repeaterDivElement.style.display="none",this._repeaterDivElement.style.display="block")},_wireupRepeaterEvents:function(){var e=this._repeaterChangedHandler.bind(this);this._repeater.addEventListener("itemchanged",e),this._repeater.addEventListener("iteminserted",e),this._repeater.addEventListener("itemremoved",e),this._repeater.addEventListener("itemsreloaded",e)},_inputPointerDownHandler:function(){e.document.activeElement===this._inputElement&&-1!==this._currentSelectedIndex&&(this._currentFocusedIndex=-1,this._selectSuggestionAtIndex(this._currentFocusedIndex))},_flyoutPointerDownHandler:function(e){this._isFlyoutPointerDown=!0;for(var t=e.target;t&&t.parentNode!==this._repeaterDivElement;)t=t.parentNode;var n=this._findSuggestionElementIndex(t);n>=0&&n<this._suggestionsData.length&&this._currentFocusedIndex!==n&&this._isSuggestionSelectable(this._suggestionsData.getAt(n))&&(this._currentFocusedIndex=n,this._selectSuggestionAtIndex(n),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex)),e.preventDefault()},_flyoutPointerReleasedHandler:function(){if(this._isFlyoutPointerDown=!1,this._reflowImeOnPointerRelease){this._reflowImeOnPointerRelease=!1;var e=o.createRepositionAnimation(this._flyoutDivElement.children);this._flyoutDivElement.style.paddingTop="",e.execute()}},_isElementInSearchControl:function(e){return this.element.contains(e)||this.element===e},_hideFlyoutIfLeavingSearchControl:function(e){this._isFlyoutShown()&&(this._isElementInSearchControl(e)||this._hideFlyout())},_wireupWinRTEvents:function(){this._searchSuggestions.addEventListener("vectorchanged",this._suggestionsChangedHandlerBind),this._searchSuggestionManager.addEventListener("suggestionsrequested",this._suggestionsRequestedHandlerBind)},_suggestionsChangedHandler:function(t){var n=t.collectionChange||t.detail.collectionChange,i=+t.index===t.index?t.index:t.detail.index,r=p._CollectionChange;if(n===r.reset)this._isFlyoutShown()&&this._hideFlyout(),this._suggestionsData.splice(0,this._suggestionsData.length);else if(n===r.itemInserted){var s=this._searchSuggestions[i];this._suggestionsData.splice(i,0,s),this._showFlyout()}else if(n===r.itemRemoved)1===this._suggestionsData.length&&(h._setActive(this._inputElement),this._hideFlyout()),this._suggestionsData.splice(i,1);else if(n===r.itemChanged){var s=this._searchSuggestions[i];if(s!==this._suggestionsData.getAt(i))this._suggestionsData.setAt(i,s);else{var o=this._repeater.elementFromIndex(i);if(h.hasClass(o,f.searchBoxSuggestionQuery))this._addHitHighlightedText(o,s,s.text);else{var a=o.querySelector("."+f.searchBoxSuggestionResultText);if(a){this._addHitHighlightedText(a,s,s.text);var l=o.querySelector("."+f.searchBoxSuggestionResultDetailedText);l&&this._addHitHighlightedText(l,s,s.detailText)}}}}e.document.activeElement===this._inputElement&&this._updateFakeFocus()},_suggestionsRequestedHandler:function(e){t.Windows.Globalization.Language&&(this._lastKeyPressLanguage=t.Windows.Globalization.Language.currentInputMethodLanguageTag);var n,i=e.request||e.detail.request;this._fireEvent(v._EventName.suggestionsrequested,{setPromise:function(e){n=i.getDeferral(),e.then(function(){n.complete()})},searchSuggestionCollection:i.searchSuggestionCollection,language:this._lastKeyPressLanguage,linguisticDetails:this._getLinguisticDetails(!0,!0),queryText:this._inputElement.value})},_fireEvent:function(t,n){var i=e.document.createEvent("CustomEvent");return i.initCustomEvent(t,!0,!0,n),this.element.dispatchEvent(i)},_requestingFocusOnKeyboardInputHandler:function(){if(this._fireEvent(v._EventName.receivingfocusonkeyboardinput,null),e.document.activeElement!==this._inputElement)try{this._inputElement.focus()}catch(t){}},_keydownCaptureHandler:function(e){this._focusOnKeyboardInput&&this._shouldKeyTriggerTypeToSearch(e)&&this._requestingFocusOnKeyboardInputHandler(e)},_frameLoadCaptureHandler:function(e){this._focusOnKeyboardInput&&this._updateKeydownCaptureListeners(e.target.contentWindow,!0)},_updateKeydownCaptureListeners:function(e,t){try{t?e.document.addEventListener("keydown",this._keydownCaptureHandlerBind,!0):e.document.removeEventListener("keydown",this._keydownCaptureHandlerBind,!0)}catch(n){}if(e.frames)for(var i=0,r=e.frames.length;r>i;i++){var s=e.frames[i];this._updateKeydownCaptureListeners(s,t);try{t?s.frameElement&&s.frameElement.addEventListener("load",this._frameLoadCaptureHandlerBind,!0):s.frameElement&&s.frameElement.removeEventListener("load",this._frameLoadCaptureHandlerBind,!0)}catch(n){}}},_shouldKeyTriggerTypeToSearch:function(e){var t=!1;if(!e.metaKey&&(!e.ctrlKey&&!e.altKey||e.getModifierState&&e.getModifierState("AltGraph")))switch(e.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 219:case 220:case 221:case 222:case 223:case 226:case 229:case 231:t=!0}return t},_hasLinguisticDetailsChanged:function(e){var t=!1;return(this._prevLinguisticDetails.queryTextCompositionStart!==e.queryTextCompositionStart||this._prevLinguisticDetails.queryTextCompositionLength!==e.queryTextCompositionLength||this._prevLinguisticDetails.queryTextAlternatives.length!==e.queryTextAlternatives.length)&&(t=!0),this._prevLinguisticDetails=e,t},_isProcessingImeFocusLossKey:function(){return this._isProcessingDownKey||this._isProcessingUpKey||this._isProcessingTabKey||this._isProcessingEnterKey},_updateQueryTextWithSuggestionText:function(e){e>=0&&e<this._suggestionsData.length&&(this.queryText=this._suggestionsData.getAt(e).text)}},{_EventName:{querychanged:_.querychanged,querysubmitted:_.querysubmitted,resultsuggestionchosen:_.resultsuggestionchosen,suggestionsrequested:_.suggestionsrequested,receivingfocusonkeyboardinput:_.receivingfocusonkeyboardinput},_Constants:{MIN_POPUP_HEIGHT:152},createResultSuggestionImage:function(e){return t.Windows.Foundation.Uri&&t.Windows.Storage.Streams.RandomAccessStreamReference?t.Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(new t.Windows.Foundation.Uri(e)):e},_getKeyModifiers:function(e){var t={ctrlKey:1,altKey:2,shiftKey:4},n=0;return e.ctrlKey&&(n|=t.ctrlKey),e.altKey&&(n|=t.altKey),e.shiftKey&&(n|=t.shiftKey),n},_sortAndMergeHits:function(e){var t=[];if(e){for(var n=new Array(e.length),i=0;i<e.length;i++)n.push({startPosition:e[i].startPosition,length:e[i].length});n.sort(v._hitStartPositionAscendingSorter),n.reduce(v._hitIntersectionReducer,t)}return t},_hitStartPositionAscendingSorter:function(e,t){var n=0;return e.startPosition<t.startPosition?n=-1:e.startPosition>t.startPosition&&(n=1),n},_hitIntersectionReducer:function(e,t,n){if(0===n)e.push(t);else{var i=e[e.length-1],r=i.startPosition+i.length;if(t.startPosition<=r){var s=t.startPosition+t.length;s>r&&(i.length=s-i.startPosition)}else e.push(t)}return e},_isTypeToSearchKey:function(e){return e.shiftKey||e.ctrlKey||e.altKey?!1:!0}});return n.Class.mix(v,u.DOMEventMixin),v})})}),i("WinJS/Controls/SettingsFlyout",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Pages","../Promise","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","./AppBar/_Constants","./Flyout/_Overlay","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f){"use strict";n.Namespace.define("WinJS.UI",{SettingsFlyout:n.Namespace._lazy(function(){function i(){if(t.Windows.UI.ApplicationSettings.SettingsEdgeLocation){var e=t.Windows.UI.ApplicationSettings;return e.SettingsPane.edge===e.SettingsEdgeLocation.left}return!1}function p(e,t){for(var n,i,r=e.querySelectorAll("."+m.settingsFlyoutClass),s=0;s<r.length;s++)if(i=r[s].winControl){if(i.settingsCommandId===t){n=i;break}r[s].id===t&&(n=n||i)}return n}var _,g=h.Key,v="narrow",y="wide",b=n.Class.derive(f._Overlay,function(t,n){this._element=t||e.document.createElement("div"),this._id=this._element.id||h._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),this._baseOverlayConstructor(this._element,n),this._addFirstDiv(),this._addFinalDiv(),this._element.addEventListener("keydown",this._handleKeyDown,!0),f._Overlay._createClickEatingDivAppBar(),this._element.style.visibilty="hidden",this._element.style.display="none",h.addClass(this._element,m.settingsFlyoutClass),d.query("div.win-content",this._element).forEach(function(e){h._matchesSelector(e,".win-ui-dark, .win-ui-dark *")||h.addClass(e,m.flyoutLightClass)});var i=this._element.getAttribute("role");(null===i||""===i||void 0===i)&&this._element.setAttribute("role","dialog");var r=this._element.getAttribute("aria-label");(null===r||""===r||void 0===r)&&this._element.setAttribute("aria-label",C.ariaLabel),this._addOverlayEventHandlers(!0),this._currentAnimateIn=this._animateSlideIn,this._currentAnimateOut=this._animateSlideOut,this._writeProfilerMark("constructor,StopTM")},{width:{get:function(){return this._width},set:function(e){h._deprecated(C.widthDeprecationMessage),e!==this._width&&(this._width===v?h.removeClass(this._element,m.narrowClass):this._width===y&&h.removeClass(this._element,m.wideClass),this._width=e,this._width===v?h.addClass(this._element,m.narrowClass):this._width===y&&h.addClass(this._element,m.wideClass))}},settingsCommandId:{get:function(){return this._settingsCommandId},set:function(e){this._settingsCommandId=e}},show:function(){this.disabled||(this._writeProfilerMark("show,StartTM"),this._show())},_dispose:function(){c.disposeSubTree(this.element),this._dismiss()},_show:function(){this._baseShow(),f._Overlay._showClickEatingDivAppBar()},_endShow:function(){this._initAfterAnimation()},_initAfterAnimation:function(){if(_=0,!h.hasClass(this.element.children[0],m.firstDivClass)){var e=this.element.querySelectorAll(".win-first");e&&e.length>0&&e.item(0).parentNode.removeChild(e.item(0)),this._addFirstDiv()}if(this.element.children[0]&&(h._addEventListener(this.element.children[0],"focusout",function(){_=1},!1),this.element.children[0].focus()),!h.hasClass(this.element.children[this.element.children.length-1],m.finalDivClass)){var t=this.element.querySelectorAll(".win-final");t&&t.length>0&&t.item(0).parentNode.removeChild(t.item(0)),this._addFinalDiv()}this._setBackButtonsAriaLabel()},_setBackButtonsAriaLabel:function(){for(var e,t=this.element.querySelectorAll(".win-backbutton"),n=0;n<t.length;n++)e=t[n].getAttribute("aria-label"),(null===e||""===e||void 0===e)&&t[n].setAttribute("aria-label",C.backbuttonAriaLabel)},hide:function(){this._writeProfilerMark("hide,StartTM"),this._hide()},_hide:function(){this._baseHide()&&f._Overlay._hideClickEatingDivAppBar()},_animateSlideIn:function(){var e=i(),t=e?"-100px":"100px";d.query("div.win-content",this._element).forEach(function(e){a.enterPage(e,{left:t})});var n,r=this._element.offsetWidth;return e?(n={top:"0px",left:"-"+r+"px"},this._element.style.right="auto",this._element.style.left="0px"):(n={top:"0px",left:r+"px"},this._element.style.right="0px",this._element.style.left="auto"),this._element.style.opacity=1,this._element.style.visibility="visible",a.showPanel(this._element,n)},_animateSlideOut:function(){var e,t=this._element.offsetWidth;return i()?(e={top:"0px",left:t+"px"},this._element.style.right="auto",this._element.style.left="-"+t+"px"):(e={top:"0px",left:"-"+t+"px"},this._element.style.right="-"+t+"px",this._element.style.left="auto"),a.showPanel(this._element,e)},_fragmentDiv:{get:function(){return this._fragDiv},set:function(e){this._fragDiv=e}},_unloadPage:function(t){var n=t.currentTarget.winControl;n.removeEventListener(f._Overlay.afterHide,this._unloadPage,!1),u.as().then(function(){n._fragmentDiv&&(e.document.body.removeChild(n._fragmentDiv),n._fragmentDiv=null)})},_dismiss:function(){this.addEventListener(f._Overlay.afterHide,this._unloadPage,!1),this._hide()},_handleKeyDown:function(t){if(t.keyCode===g.escape)t.preventDefault(),t.stopPropagation(),this.winControl._dismiss();else if(t.keyCode!==g.space&&t.keyCode!==g.enter||this.children[0]!==e.document.activeElement){if(t.shiftKey&&t.keyCode===g.tab&&this.children[0]===e.document.activeElement){t.preventDefault(),t.stopPropagation();for(var n=this.getElementsByTagName("*"),i=n.length-2;i>=0&&(n[i].focus(),n[i]!==e.document.activeElement);i--);}}else t.preventDefault(),t.stopPropagation(),this.winControl._dismiss()},_focusOnLastFocusableElementFromParent:function(){var t=e.document.activeElement;if(_&&t&&h.hasClass(t,m.firstDivClass)){var n=this.parentElement.getElementsByTagName("*");if(!(n.length<=2)){var i,r=n[n.length-1].tabIndex;if(r){for(i=n.length-2;i>0;i--)if(n[i].tabIndex===r){n[i].focus();break}}else for(i=n.length-2;i>0&&("DIV"===n[i].tagName&&null===n[i].getAttribute("tabIndex")||(n[i].focus(),n[i]!==e.document.activeElement));i--);}}},_focusOnFirstFocusableElementFromParent:function(){var t=e.document.activeElement;if(t&&h.hasClass(t,m.finalDivClass)){var n=this.parentElement.getElementsByTagName("*");if(!(n.length<=2)){var i,r=n[0].tabIndex;if(r){for(i=1;i<n.length-1;i++)if(n[i].tabIndex===r){n[i].focus();break}}else for(i=1;i<n.length-1&&("DIV"===n[i].tagName&&null===n[i].getAttribute("tabIndex")||(n[i].focus(),n[i]!==e.document.activeElement));i++);}}},_addFirstDiv:function(){for(var t=this._element.getElementsByTagName("*"),n=0,i=0;i<t.length;i++)0<t[i].tabIndex&&(0===n||t[i].tabIndex<n)&&(n=t[i].tabIndex);var r=e.document.createElement("div");r.className=m.firstDivClass,r.style.display="inline",r.setAttribute("role","menuitem"),r.setAttribute("aria-hidden","true"),r.tabIndex=n,h._addEventListener(r,"focusin",this._focusOnLastFocusableElementFromParent,!1),this._element.children[0]?this._element.insertBefore(r,this._element.children[0]):this._element.appendChild(r)},_addFinalDiv:function(){for(var t=this._element.getElementsByTagName("*"),n=0,i=0;i<t.length;i++)t[i].tabIndex>n&&(n=t[i].tabIndex);var r=e.document.createElement("div");r.className=m.finalDivClass,r.style.display="inline",r.setAttribute("role","menuitem"),r.setAttribute("aria-hidden","true"),r.tabIndex=n,h._addEventListener(r,"focusin",this._focusOnFirstFocusableElementFromParent,!1),this._element.appendChild(r)},_writeProfilerMark:function(e){o("WinJS.UI.SettingsFlyout:"+this._id+":"+e)}});b.show=function(){t.Windows.UI.ApplicationSettings.SettingsPane&&t.Windows.UI.ApplicationSettings.SettingsPane.show();for(var n=e.document.querySelectorAll('div[data-win-control="WinJS.UI.SettingsFlyout"]'),i=n.length,r=0;i>r;r++){var s=n[r].winControl;s&&s._dismiss()}};var w={event:void 0};b.populateSettings=function(e){if(w.event=e.detail,w.event.applicationcommands){var n=t.Windows.UI.ApplicationSettings;Object.keys(w.event.applicationcommands).forEach(function(e){var t=w.event.applicationcommands[e];t.title||(t.title=e);var i=new n.SettingsCommand(e,t.title,b._onSettingsCommand);w.event.e.request.applicationCommands.append(i)})}},b._onSettingsCommand=function(e){var t=e.id;w.event.applicationcommands&&w.event.applicationcommands[t]&&b.showSettings(t,w.event.applicationcommands[t].href)},b.showSettings=function(t,n){var i=p(e.document,t);if(i)i.show();else{if(!n)throw new r("WinJS.UI.SettingsFlyout.BadReference",C.badReference);var s=e.document.createElement("div");s=e.document.body.appendChild(s),l.render(n,s).then(function(){i=p(s,t),i?(i._fragmentDiv=s,i.show()):e.document.body.removeChild(s)})}};var C={get ariaLabel(){return s._getWinJSString("ui/settingsFlyoutAriaLabel").value},get badReference(){return"Invalid argument: Invalid href to settings flyout fragment"},get backbuttonAriaLabel(){return s._getWinJSString("ui/backbuttonarialabel").value},get widthDeprecationMessage(){return"SettingsFlyout.width may be altered or unavailable in future versions. Instead, style the CSS width property on elements with the .win-settingsflyout class."}};return b})})}),i("WinJS/Controls/NavBar/_Command",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../ControlProcessor","../../Navigation","../../Utilities/_Control","../../Utilities/_ElementUtilities","../AppBar/_Icon"],function(e,t,n,i,r,s,o,a,l,u){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_WinPressed:n.Namespace._lazy(function(){var e=n.Class.define(function(e){this._element=e,l._addEventListener(this._element,"pointerdown",this._MSPointerDownButtonHandler.bind(this))},{_MSPointerDownButtonHandler:function(n){this._pointerUpBound||(this._pointerUpBound=this._MSPointerUpHandler.bind(this),this._pointerCancelBound=this._MSPointerCancelHandler.bind(this),this._pointerOverBound=this._MSPointerOverHandler.bind(this),this._pointerOutBound=this._MSPointerOutHandler.bind(this)),n.isPrimary&&(this._pointerId&&this._resetPointer(),l._matchesSelector(n.target,".win-interactive, .win-interactive *")||(this._pointerId=n.pointerId,l._addEventListener(t,"pointerup",this._pointerUpBound,!0),l._addEventListener(t,"pointercancel",this._pointerCancelBound),l._addEventListener(this._element,"pointerover",this._pointerOverBound,!0),l._addEventListener(this._element,"pointerout",this._pointerOutBound,!0),l.addClass(this._element,e.winPressed)))},_MSPointerOverHandler:function(t){this._pointerId===t.pointerId&&l.addClass(this._element,e.winPressed)},_MSPointerOutHandler:function(t){this._pointerId===t.pointerId&&l.removeClass(this._element,e.winPressed)},_MSPointerCancelHandler:function(e){this._pointerId===e.pointerId&&this._resetPointer()},_MSPointerUpHandler:function(e){this._pointerId===e.pointerId&&this._resetPointer()},_resetPointer:function(){this._pointerId=null,l._removeEventListener(t,"pointerup",this._pointerUpBound,!0),l._removeEventListener(t,"pointercancel",this._pointerCancelBound,!0),l._removeEventListener(this._element,"pointerover",this._pointerOverBound,!0),l._removeEventListener(this._element,"pointerout",this._pointerOutBound,!0),l.removeClass(this._element,e.winPressed)
},dispose:function(){this._disposed||(this._disposed=!0,this._resetPointer())}},{winPressed:"win-pressed"});return e}),NavBarCommand:n.Namespace._lazy(function(){var r=l.Key,c={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},h=n.Class.define(function(e,n){if(e=e||t.document.createElement("DIV"),n=n||{},e.winControl)throw new i("WinJS.UI.NavBarCommand.DuplicateConstruction",c.duplicateConstruction);e.winControl=this,this._element=e,l.addClass(this.element,h._ClassName.navbarcommand),l.addClass(this.element,"win-disposable"),this._tooltip=null,this._splitOpened=!1,this._buildDom(),e.addEventListener("keydown",this._keydownHandler.bind(this)),a.setOptions(this,n)},{element:{get:function(){return this._element}},label:{get:function(){return this._label},set:function(e){this._label=e,this._labelEl.textContent=e}},tooltip:{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this._tooltip||""===this._tooltip?this._element.setAttribute("title",this._tooltip):this._element.removeAttribute("title")}},icon:{get:function(){return this._icon},set:function(e){this._icon=u[e]||e,this._icon&&1===this._icon.length?(this._imageSpan.textContent=this._icon,this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust="",this._imageSpan.style.display=""):this._icon&&this._icon.length>1?(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage=this._icon,this._imageSpan.style.msHighContrastAdjust="none",this._imageSpan.style.display=""):(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust="",this._imageSpan.style.display="none")}},location:{get:function(){return this._location},set:function(e){this._location=e}},state:{get:function(){return this._state},set:function(e){this._state=e}},splitButton:{get:function(){return this._split},set:function(e){this._split=e,this._splitButtonEl.style.display=this._split?"":"none"}},splitOpened:{get:function(){return this._splitOpened},set:function(e){this._splitOpened!==!!e&&this._toggleSplit()}},_toggleSplit:function(){this._splitOpened=!this._splitOpened,this._splitOpened?(l.addClass(this._splitButtonEl,h._ClassName.navbarcommandsplitbuttonopened),this._splitButtonEl.setAttribute("aria-expanded","true")):(l.removeClass(this._splitButtonEl,h._ClassName.navbarcommandsplitbuttonopened),this._splitButtonEl.setAttribute("aria-expanded","false")),this._fireEvent(h._EventName._splitToggle)},_rtl:{get:function(){return"rtl"===t.getComputedStyle(this.element).direction}},_keydownHandler:function(e){if(!l._matchesSelector(e.target,".win-interactive, .win-interactive *")){var t=this._rtl?r.rightArrow:r.leftArrow,n=this._rtl?r.leftArrow:r.rightArrow;e.altKey||e.keyCode!==t&&e.keyCode!==r.home&&e.keyCode!==r.end||e.target!==this._splitButtonEl?e.altKey||e.keyCode!==n||!this.splitButton||e.target!==this._buttonEl&&!this._buttonEl.contains(e.target)?e.keyCode!==r.space&&e.keyCode!==r.enter||e.target!==this._buttonEl&&!this._buttonEl.contains(e.target)?e.keyCode!==r.space&&e.keyCode!==r.enter||e.target!==this._splitButtonEl||this._toggleSplit():(this.location&&o.navigate(this.location,this.state),this._fireEvent(h._EventName._invoked)):(l._setActive(this._splitButtonEl),e.keyCode===n&&e.stopPropagation(),e.preventDefault()):(l._setActive(this._buttonEl),e.keyCode===t&&e.stopPropagation(),e.preventDefault())}},_getFocusInto:function(e){var t=this._rtl?r.rightArrow:r.leftArrow;return e===t&&this.splitButton?this._splitButtonEl:this._buttonEl},_buildDom:function(){var t='<div tabindex="0" role="button" class="'+h._ClassName.navbarcommandbutton+'"><div class="'+h._ClassName.navbarcommandbuttoncontent+'"><div class="'+h._ClassName.navbarcommandicon+'"></div><div class="'+h._ClassName.navbarcommandlabel+'"></div></div></div><div tabindex="-1" aria-expanded="false" class="'+h._ClassName.navbarcommandsplitbutton+'"></div>';this.element.insertAdjacentHTML("afterBegin",t),this._buttonEl=this.element.firstElementChild,this._buttonPressedBehavior=new e._WinPressed(this._buttonEl),this._contentEl=this._buttonEl.firstElementChild,this._imageSpan=this._contentEl.firstElementChild,this._imageSpan.style.display="none",this._labelEl=this._imageSpan.nextElementSibling,this._splitButtonEl=this._buttonEl.nextElementSibling,this._splitButtonPressedBehavior=new e._WinPressed(this._splitButtonEl),this._splitButtonEl.style.display="none",l._ensureId(this._buttonEl),this._splitButtonEl.setAttribute("aria-labelledby",this._buttonEl.id),this._buttonEl.addEventListener("click",this._handleButtonClick.bind(this));var n=new l._MutationObserver(this._splitButtonAriaExpandedPropertyChangeHandler.bind(this));n.observe(this._splitButtonEl,{attributes:!0,attributeFilter:["aria-expanded"]}),this._splitButtonEl.addEventListener("click",this._handleSplitButtonClick.bind(this));for(var i=this._splitButtonEl.nextSibling;i;)this._buttonEl.insertBefore(i,this._contentEl),"#text"!==i.nodeName&&s.processAll(i),i=this._splitButtonEl.nextSibling},_handleButtonClick:function(e){var t=e.target;l._matchesSelector(t,".win-interactive, .win-interactive *")||(this.location&&o.navigate(this.location,this.state),this._fireEvent(h._EventName._invoked))},_splitButtonAriaExpandedPropertyChangeHandler:function(){"true"===this._splitButtonEl.getAttribute("aria-expanded")!==this._splitOpened&&this._toggleSplit()},_handleSplitButtonClick:function(){this._toggleSplit()},_fireEvent:function(e,n){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!1,n),this.element.dispatchEvent(i)},dispose:function(){this._disposed||(this._disposed=!0,this._buttonPressedBehavior.dispose(),this._splitButtonPressedBehavior.dispose())}},{_ClassName:{navbarcommand:"win-navbarcommand",navbarcommandbutton:"win-navbarcommand-button",navbarcommandbuttoncontent:"win-navbarcommand-button-content",navbarcommandsplitbutton:"win-navbarcommand-splitbutton",navbarcommandsplitbuttonopened:"win-navbarcommand-splitbutton-opened",navbarcommandicon:"win-navbarcommand-icon",navbarcommandlabel:"win-navbarcommand-label"},_EventName:{_invoked:"_invoked",_splitToggle:"_splittoggle"}});return n.Class.mix(h,a.DOMEventMixin),h})})}),i("WinJS/Controls/NavBar/_Container",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Log","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations","../../Animations/_TransitionAnimation","../../BindingList","../../ControlProcessor","../../Navigation","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardBehavior","../../Utilities/_UI","../AppBar/_Constants","../Repeater","./_Command"],function(e,t,n,i,r,s,o,a,l,u,c,h,d,p,m,f,_,g,v,y,b,w,C){"use strict";function x(){return null===t.document.activeElement||t.document.activeElement===t.document.body}n.Namespace._moduleDefine(e,"WinJS.UI",{NavBarContainer:n.Namespace._lazy(function(){var e=g.Key,S=3e3,I=g._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",E=0,k=s._createEventProperty,T={invoked:"invoked",splittoggle:"splittoggle"},P={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get navBarContainerViewportAriaLabel(){return a._getWinJSString("ui/navBarContainerViewportAriaLabel").value}},A=n.Class.define(function(e,n){if(e=e||t.document.createElement("DIV"),this._id=e.id||g._uniqueID(e),this._writeProfilerMark("constructor,StartTM"),n=n||{},e.winControl)throw new r("WinJS.UI.NavBarContainer.DuplicateConstruction",P.duplicateConstruction);e.winControl=this,this._element=e,g.addClass(this.element,A._ClassName.navbarcontainer),g.addClass(this.element,"win-disposable"),e.getAttribute("tabIndex")||(e.tabIndex=-1),this._focusCurrentItemPassivelyBound=this._focusCurrentItemPassively.bind(this),this._closeSplitAndResetBound=this._closeSplitAndReset.bind(this),this._currentManipulationState=E,this._panningDisabled=!g._supportsSnapPoints,this._fixedSize=!1,this._maxRows=1,this._sizes={},this._setupTree(),this._duringConstructor=!0,this._dataChangingBound=this._dataChanging.bind(this),this._dataChangedBound=this._dataChanged.bind(this),p.addEventListener("navigated",this._closeSplitAndResetBound),this.layout=n.layout||y.Orientation.horizontal,n.maxRows&&(this.maxRows=n.maxRows),n.template&&(this.template=n.template),n.data&&(this.data=n.data),n.fixedSize&&(this.fixedSize=n.fixedSize),_._setOptions(this,n,!0),this._duringConstructor=!1,n.currentIndex&&(this.currentIndex=n.currentIndex),this._updatePageUI(),f.schedule(function(){this._updateAppBarReference()},f.Priority.normal,this,"WinJS.UI.NavBarContainer_async_initialize"),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},template:{get:function(){return this._template},set:function(e){if(this._template=e,this._repeater){var n=this.element.contains(t.document.activeElement);this._duringConstructor||this._closeSplitIfOpen(),this._repeater.template=this._repeater.template,this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._reset(),n&&this._keyboardBehavior._focus(0))}}},_render:function(e){var n=t.document.createElement("div"),i=this._template;i&&(i.render?i.render(e,n):i.winControl&&i.winControl.render?i.winControl.render(e,n):n.appendChild(i(e)));var r=new C.NavBarCommand(n,e);return r._element},data:{get:function(){return this._repeater&&this._repeater.data},set:function(e){e||(e=new h.List),this._duringConstructor||this._closeSplitIfOpen(),this._removeDataChangingEvents(),this._removeDataChangedEvents();var n=this.element.contains(t.document.activeElement);this._repeater||(this._surfaceEl.innerHTML="",this._repeater=new w.Repeater(this._surfaceEl,{template:this._render.bind(this)})),this._addDataChangingEvents(e),this._repeater.data=e,this._addDataChangedEvents(e),this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._reset(),n&&this._keyboardBehavior._focus(0))}},maxRows:{get:function(){return this._maxRows},set:function(e){e=+e===e?e:1,this._maxRows=Math.max(1,e),this._duringConstructor||(this._closeSplitIfOpen(),this._measured=!1,this._reset())}},layout:{get:function(){return this._layout},set:function(e){e===y.Orientation.vertical?(this._layout=y.Orientation.vertical,g.removeClass(this.element,A._ClassName.horizontal),g.addClass(this.element,A._ClassName.vertical)):(this._layout=y.Orientation.horizontal,g.removeClass(this.element,A._ClassName.vertical),g.addClass(this.element,A._ClassName.horizontal)),this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI(),this._closeSplitIfOpen())}},currentIndex:{get:function(){return this._keyboardBehavior.currentIndex},set:function(e){if(e===+e){var n=this.element.contains(t.document.activeElement);this._keyboardBehavior.currentIndex=e,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),n&&this._keyboardBehavior._focus()}}},fixedSize:{get:function(){return this._fixedSize},set:function(e){this._fixedSize=!!e,this._duringConstructor||(this._closeSplitIfOpen(),this._measured?this._surfaceEl.children.length>0&&this._updateGridStyles():this._measure())}},oninvoked:k(T.invoked),onsplittoggle:k(T.splittoggle),forceLayout:function(){this._resizeHandler(),this._measured&&(this._scrollPosition=g.getScrollPosition(this._viewportEl)[this.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"]),this._duringForceLayout=!0,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI(),this._duringForceLayout=!1},_updateAppBarReference:function(){if(!this._appBarEl||!this._appBarEl.contains(this.element)){this._appBarEl&&(this._appBarEl.removeEventListener("beforeshow",this._closeSplitAndResetBound),this._appBarEl.removeEventListener("beforeshow",this._resizeImplBound),this._appBarEl.removeEventListener("aftershow",this._focusCurrentItemPassivelyBound));for(var e=this.element.parentNode;e&&!g.hasClass(e,b.appBarClass);)e=e.parentNode;this._appBarEl=e,this._appBarEl&&(this._appBarEl.addEventListener("beforeshow",this._closeSplitAndResetBound),this._appBarEl.addEventListener("aftershow",this._focusCurrentItemPassivelyBound))}},_closeSplitAndReset:function(){this._closeSplitIfOpen(),this._reset()},_dataChanging:function(e){this._elementHadFocus=t.document.activeElement,this._currentSplitNavItem&&this._currentSplitNavItem.splitOpened&&("itemremoved"===e.type?this._surfaceEl.children[e.detail.index].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"itemchanged"===e.type?this._surfaceEl.children[e.detail.index].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"itemmoved"===e.type?this._surfaceEl.children[e.detail.oldIndex].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"reload"===e.type&&this._closeSplitIfOpen())},_dataChanged:function(e){this._measured=!1,"itemremoved"===e.type?e.detail.index<this._keyboardBehavior.currentIndex?this._keyboardBehavior.currentIndex--:e.detail.index===this._keyboardBehavior.currentIndex&&(this._keyboardBehavior.currentIndex=this._keyboardBehavior.currentIndex,x()&&this._elementHadFocus&&this._keyboardBehavior._focus()):"itemchanged"===e.type?e.detail.index===this._keyboardBehavior.currentIndex&&x()&&this._elementHadFocus&&this._keyboardBehavior._focus():"iteminserted"===e.type?e.detail.index<=this._keyboardBehavior.currentIndex&&this._keyboardBehavior.currentIndex++:"itemmoved"===e.type?e.detail.oldIndex===this._keyboardBehavior.currentIndex&&(this._keyboardBehavior.currentIndex=e.detail.newIndex,x()&&this._elementHadFocus&&this._keyboardBehavior._focus()):"reload"===e.type&&(this._keyboardBehavior.currentIndex=0,x()&&this._elementHadFocus&&this._keyboardBehavior._focus()),this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI()},_focusCurrentItemPassively:function(){this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus()},_reset:function(){this._keyboardBehavior.currentIndex=0,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(0),this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._ensureVisible(0,!0),this._updatePageUI()},_removeDataChangedEvents:function(){this._repeater&&(this._repeater.data.removeEventListener("itemchanged",this._dataChangedBound),this._repeater.data.removeEventListener("iteminserted",this._dataChangedBound),this._repeater.data.removeEventListener("itemmoved",this._dataChangedBound),this._repeater.data.removeEventListener("itemremoved",this._dataChangedBound),this._repeater.data.removeEventListener("reload",this._dataChangedBound))},_addDataChangedEvents:function(){this._repeater&&(this._repeater.data.addEventListener("itemchanged",this._dataChangedBound),this._repeater.data.addEventListener("iteminserted",this._dataChangedBound),this._repeater.data.addEventListener("itemmoved",this._dataChangedBound),this._repeater.data.addEventListener("itemremoved",this._dataChangedBound),this._repeater.data.addEventListener("reload",this._dataChangedBound))},_removeDataChangingEvents:function(){this._repeater&&(this._repeater.data.removeEventListener("itemchanged",this._dataChangingBound),this._repeater.data.removeEventListener("iteminserted",this._dataChangingBound),this._repeater.data.removeEventListener("itemmoved",this._dataChangingBound),this._repeater.data.removeEventListener("itemremoved",this._dataChangingBound),this._repeater.data.removeEventListener("reload",this._dataChangingBound))},_addDataChangingEvents:function(e){e.addEventListener("itemchanged",this._dataChangingBound),e.addEventListener("iteminserted",this._dataChangingBound),e.addEventListener("itemmoved",this._dataChangingBound),e.addEventListener("itemremoved",this._dataChangingBound),e.addEventListener("reload",this._dataChangingBound)},_mouseleave:function(){this._mouseInViewport&&(this._mouseInViewport=!1,this._updateArrows())},_MSPointerDown:function(e){e.pointerType===I&&this._mouseInViewport&&(this._mouseInViewport=!1,this._updateArrows())},_MSPointerMove:function(e){e.pointerType!==I&&(this._mouseInViewport||(this._mouseInViewport=!0,this._updateArrows()))},_setupTree:function(){this._animateNextPreviousButtons=m.wrap(),this._element.addEventListener("mouseleave",this._mouseleave.bind(this)),g._addEventListener(this._element,"pointerdown",this._MSPointerDown.bind(this)),g._addEventListener(this._element,"pointermove",this._MSPointerMove.bind(this)),g._addEventListener(this._element,"focusin",this._focusHandler.bind(this),!1),this._pageindicatorsEl=t.document.createElement("div"),g.addClass(this._pageindicatorsEl,A._ClassName.pageindicators),this._element.appendChild(this._pageindicatorsEl),this._ariaStartMarker=t.document.createElement("div"),this._element.appendChild(this._ariaStartMarker),this._viewportEl=t.document.createElement("div"),g.addClass(this._viewportEl,A._ClassName.viewport),this._element.appendChild(this._viewportEl),this._viewportEl.setAttribute("role","group"),this._viewportEl.setAttribute("aria-label",P.navBarContainerViewportAriaLabel),this._boundResizeHandler=this._resizeHandler.bind(this),g._resizeNotifier.subscribe(this._element,this._boundResizeHandler),this._viewportEl.addEventListener("mselementresize",this._resizeHandler.bind(this)),this._viewportEl.addEventListener("scroll",this._scrollHandler.bind(this)),this._viewportEl.addEventListener("MSManipulationStateChanged",this._MSManipulationStateChangedHandler.bind(this)),this._ariaEndMarker=t.document.createElement("div"),this._element.appendChild(this._ariaEndMarker),this._surfaceEl=t.document.createElement("div"),g.addClass(this._surfaceEl,A._ClassName.surface),this._viewportEl.appendChild(this._surfaceEl),this._surfaceEl.addEventListener("_invoked",this._navbarCommandInvokedHandler.bind(this)),this._surfaceEl.addEventListener("_splittoggle",this._navbarCommandSplitToggleHandler.bind(this)),g._addEventListener(this._surfaceEl,"focusin",this._itemsFocusHandler.bind(this),!1),this._surfaceEl.addEventListener("keydown",this._keyDownHandler.bind(this));for(var e=this.element.firstElementChild;e!==this._pageindicatorsEl;)this._surfaceEl.appendChild(e),d.process(e),e=this.element.firstElementChild;this._leftArrowEl=t.document.createElement("div"),g.addClass(this._leftArrowEl,A._ClassName.navleftarrow),g.addClass(this._leftArrowEl,A._ClassName.navarrow),this._element.appendChild(this._leftArrowEl),this._leftArrowEl.addEventListener("click",this._goLeft.bind(this)),this._leftArrowEl.style.opacity=0,this._leftArrowEl.style.visibility="hidden",this._leftArrowFadeOut=m.wrap(),this._rightArrowEl=t.document.createElement("div"),g.addClass(this._rightArrowEl,A._ClassName.navrightarrow),g.addClass(this._rightArrowEl,A._ClassName.navarrow),this._element.appendChild(this._rightArrowEl),this._rightArrowEl.addEventListener("click",this._goRight.bind(this)),this._rightArrowEl.style.opacity=0,this._rightArrowEl.style.visibility="hidden",this._rightArrowFadeOut=m.wrap(),this._keyboardBehavior=new v._KeyboardBehavior(this._surfaceEl,{scroller:this._viewportEl}),this._winKeyboard=new v._WinKeyboard(this._surfaceEl)},_goRight:function(){this._sizes.rtl?this._goPrev():this._goNext()},_goLeft:function(){this._sizes.rtl?this._goNext():this._goPrev()},_goNext:function(){this._measure();var e=this._sizes.rowsPerPage*this._sizes.columnsPerPage,t=Math.min(Math.floor(this._keyboardBehavior.currentIndex/e)+1,this._sizes.pages-1);this._keyboardBehavior.currentIndex=Math.min(e*t,this._surfaceEl.children.length),this._keyboardBehavior._focus()},_goPrev:function(){this._measure();var e=this._sizes.rowsPerPage*this._sizes.columnsPerPage,t=Math.max(0,Math.floor(this._keyboardBehavior.currentIndex/e)-1);this._keyboardBehavior.currentIndex=Math.max(e*t,0),this._keyboardBehavior._focus()},_currentPage:{get:function(){return this.layout===y.Orientation.horizontal&&(this._measure(),this._sizes.viewportOffsetWidth>0)?Math.min(this._sizes.pages-1,Math.round(this._scrollPosition/this._sizes.viewportOffsetWidth)):0}},_resizeHandler:function(){if(!this._disposed&&this._measured){var e=this.layout===y.Orientation.horizontal?this._sizes.viewportOffsetWidth!==parseFloat(t.getComputedStyle(this._viewportEl).width):this._sizes.viewportOffsetHeight!==parseFloat(t.getComputedStyle(this._viewportEl).height);e&&(this._measured=!1,this._pendingResize||(this._pendingResize=!0,this._resizeImplBound=this._resizeImplBound||this._resizeImpl.bind(this),this._updateAppBarReference(),this._appBarEl&&this._appBarEl.winControl&&this._appBarEl.winControl.hidden?(f.schedule(this._resizeImplBound,f.Priority.idle,null,"WinJS.UI.NavBarContainer._resizeImpl"),this._appBarEl.addEventListener("beforeshow",this._resizeImplBound)):this._resizeImpl()))}},_resizeImpl:function(){!this._disposed&&this._pendingResize&&(this._pendingResize=!1,this._appBarEl&&this._appBarEl.removeEventListener("beforeshow",this._resizeImplBound),this._keyboardBehavior.currentIndex=0,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex),this._closeSplitIfOpen(),this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI())},_keyDownHandler:function(n){var i=n.keyCode;if(!n.altKey&&(i===e.pageUp||i===e.pageDown)){var r=n.target;if(g._matchesSelector(r,".win-interactive, .win-interactive *"))return;var s=this._keyboardBehavior.currentIndex;this._measure();var o=this._sizes,a=Math.floor(s/(o.columnsPerPage*o.rowsPerPage)),l=null;if(i===e.pageUp){if(this.layout===y.Orientation.horizontal){var u=a*o.columnsPerPage*o.rowsPerPage;s===u&&this._surfaceEl.children[s].winControl._buttonEl===t.document.activeElement?s-=o.columnsPerPage*o.rowsPerPage:s=u}else{var c=this._surfaceEl.children[s],h=c.offsetTop,d=h+c.offsetHeight,p=this._zooming?this._zoomPosition:this._scrollPosition;if(h>=p&&d<p+o.viewportOffsetHeight)for(;s>0&&this._surfaceEl.children[s-1].offsetTop>p;)s--;if(this._keyboardBehavior.currentIndex===s){var m=d-o.viewportOffsetHeight;for(s=Math.max(0,s-1);s>0&&this._surfaceEl.children[s-1].offsetTop>m;)s--;l=s>0?this._surfaceEl.children[s].offsetTop-this._sizes.itemMarginTop:0}}s=Math.max(s,0),this._keyboardBehavior.currentIndex=s;var f=this._surfaceEl.children[s].winControl._buttonEl;null!==l&&this._scrollTo(l),g._setActive(f,this._viewportEl)}else{if(this.layout===y.Orientation.horizontal){var _=(a+1)*o.columnsPerPage*o.rowsPerPage-1;s===_?s+=o.columnsPerPage*o.rowsPerPage:s=_}else{var c=this._surfaceEl.children[this._keyboardBehavior.currentIndex],h=c.offsetTop,d=h+c.offsetHeight,p=this._zooming?this._zoomPosition:this._scrollPosition;if(h>=p&&d<p+o.viewportOffsetHeight)for(;s<this._surfaceEl.children.length-1&&this._surfaceEl.children[s+1].offsetTop+this._surfaceEl.children[s+1].offsetHeight<p+o.viewportOffsetHeight;)s++;if(s===this._keyboardBehavior.currentIndex){var v=h+o.viewportOffsetHeight;for(s=Math.min(this._surfaceEl.children.length-1,s+1);s<this._surfaceEl.children.length-1&&this._surfaceEl.children[s+1].offsetTop+this._surfaceEl.children[s+1].offsetHeight<v;)s++;l=s<this._surfaceEl.children.length-1?this._surfaceEl.children[s+1].offsetTop-this._sizes.viewportOffsetHeight:this._scrollLength-this._sizes.viewportOffsetHeight}}s=Math.min(s,this._surfaceEl.children.length-1),this._keyboardBehavior.currentIndex=s;var f=this._surfaceEl.children[s].winControl._buttonEl;null!==l&&this._scrollTo(l);try{g._setActive(f,this._viewportEl)}catch(b){}}}},_focusHandler:function(e){var t=e.target;this._surfaceEl.contains(t)||(this._skipEnsureVisible=!0,this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex))},_itemsFocusHandler:function(e){var t=e.target;if(t!==this._surfaceEl){for(;t.parentNode!==this._surfaceEl;)t=t.parentNode;for(var n=-1;t;)n++,t=t.previousSibling;this._skipEnsureVisible?this._skipEnsureVisible=!1:this._ensureVisible(n)}},_ensureVisible:function(e,t){if(this._measure(),this.layout===y.Orientation.horizontal){var n=Math.floor(e/(this._sizes.rowsPerPage*this._sizes.columnsPerPage));this._scrollTo(n*this._sizes.viewportOffsetWidth,t)}else{var i,r=this._surfaceEl.children[e];i=e>0?r.offsetTop-this._sizes.itemMarginTop:0;var s;s=e<this._surfaceEl.children.length-1?this._surfaceEl.children[e+1].offsetTop-this._sizes.viewportOffsetHeight:this._scrollLength-this._sizes.viewportOffsetHeight;var o=this._zooming?this._zoomPosition:this._scrollPosition;o=Math.max(o,s),o=Math.min(o,i),this._scrollTo(o,t)}},_scrollTo:function(e,t){if(this._measure(),e=this.layout===y.Orientation.horizontal?Math.max(0,Math.min(this._scrollLength-this._sizes.viewportOffsetWidth,e)):Math.max(0,Math.min(this._scrollLength-this._sizes.viewportOffsetHeight,e)),t){if(Math.abs(this._scrollPosition-e)>1){this._zooming=!1,this._scrollPosition=e,this._updatePageUI(),this._duringForceLayout||this._closeSplitIfOpen();var n={};n[this.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"]=e,g.setScrollPosition(this._viewportEl,n)}}else(!this._zooming&&Math.abs(this._scrollPosition-e)>1||this._zooming&&Math.abs(this._zoomPosition-e)>1)&&(this._zoomPosition=e,this._zooming=!0,this.layout===y.Orientation.horizontal?(this._viewportEl.style.msScrollSnapType="none",g._zoomTo(this._viewportEl,{contentX:e,contentY:0,viewportX:0,viewportY:0})):g._zoomTo(this._viewportEl,{contentX:0,contentY:e,viewportX:0,viewportY:0}),this._closeSplitIfOpen())},_MSManipulationStateChangedHandler:function(e){this._currentManipulationState=e.currentState,e.currentState===e.MS_MANIPULATION_STATE_ACTIVE&&(this._viewportEl.style.msScrollSnapType="",this._zooming=!1),t.clearTimeout(this._manipulationStateTimeoutId),e.currentState===e.MS_MANIPULATION_STATE_STOPPED&&(this._manipulationStateTimeoutId=t.setTimeout(function(){this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._updateCurrentIndexIfPageChanged()}.bind(this),100))},_scrollHandler:function(){if(!this._disposed&&(this._measured=!1,!this._checkingScroll)){var e=this;this._checkingScroll=i._requestAnimationFrame(function(){if(!e._disposed){e._checkingScroll=null;var t=g.getScrollPosition(e._viewportEl)[e.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"];t!==e._scrollPosition&&(e._scrollPosition=t,e._closeSplitIfOpen()),e._updatePageUI(),e._zooming||e._currentManipulationState!==E||e._updateCurrentIndexIfPageChanged()}})}},_updateCurrentIndexIfPageChanged:function(){if(this.layout===y.Orientation.horizontal){this._measure();var e=this._currentPage,n=e*this._sizes.rowsPerPage*this._sizes.columnsPerPage,i=(e+1)*this._sizes.rowsPerPage*this._sizes.columnsPerPage-1;(this._keyboardBehavior.currentIndex<n||this._keyboardBehavior.currentIndex>i)&&(this._keyboardBehavior.currentIndex=n,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex))}},_measure:function(){if(!this._measured){this._resizeImpl(),this._writeProfilerMark("measure,StartTM");var e=this._sizes;e.rtl="rtl"===t.getComputedStyle(this._element).direction;var n=this._surfaceEl.children.length;if(n>0){if(!this._sizes.itemMeasured){this._writeProfilerMark("measureItem,StartTM");var i=this._surfaceEl.firstElementChild;i.style.margin="",i.style.width="";var r=t.getComputedStyle(i);e.itemOffsetWidth=parseFloat(t.getComputedStyle(i).width),0===i.offsetWidth&&(e.itemOffsetWidth=0),e.itemMarginLeft=parseFloat(r.marginLeft),e.itemMarginRight=parseFloat(r.marginRight),e.itemWidth=e.itemOffsetWidth+e.itemMarginLeft+e.itemMarginRight,e.itemOffsetHeight=parseFloat(t.getComputedStyle(i).height),0===i.offsetHeight&&(e.itemOffsetHeight=0),e.itemMarginTop=parseFloat(r.marginTop),e.itemMarginBottom=parseFloat(r.marginBottom),e.itemHeight=e.itemOffsetHeight+e.itemMarginTop+e.itemMarginBottom,e.itemOffsetWidth>0&&e.itemOffsetHeight>0&&(e.itemMeasured=!0),this._writeProfilerMark("measureItem,StopTM")}if(e.viewportOffsetWidth=parseFloat(t.getComputedStyle(this._viewportEl).width),0===this._viewportEl.offsetWidth&&(e.viewportOffsetWidth=0),e.viewportOffsetHeight=parseFloat(t.getComputedStyle(this._viewportEl).height),0===this._viewportEl.offsetHeight&&(e.viewportOffsetHeight=0),this._measured=0===e.viewportOffsetWidth||0===e.itemOffsetHeight?!1:!0,this.layout===y.Orientation.horizontal){this._scrollPosition=g.getScrollPosition(this._viewportEl).scrollLeft,e.leadingEdge=this._leftArrowEl.offsetWidth+parseInt(t.getComputedStyle(this._leftArrowEl).marginLeft)+parseInt(t.getComputedStyle(this._leftArrowEl).marginRight);var s=e.viewportOffsetWidth-2*e.leadingEdge;e.maxColumns=e.itemWidth?Math.max(1,Math.floor(s/e.itemWidth)):1,e.rowsPerPage=Math.min(this.maxRows,Math.ceil(n/e.maxColumns)),e.columnsPerPage=Math.min(e.maxColumns,n),e.pages=Math.ceil(n/(e.columnsPerPage*e.rowsPerPage)),e.trailingEdge=e.leadingEdge,e.extraSpace=s-e.columnsPerPage*e.itemWidth,this._scrollLength=e.viewportOffsetWidth*e.pages,this._keyboardBehavior.fixedSize=e.rowsPerPage,this._keyboardBehavior.fixedDirection=v._KeyboardBehavior.FixedDirection.height,this._surfaceEl.style.height=e.itemHeight*e.rowsPerPage+"px",this._surfaceEl.style.width=this._scrollLength+"px"}else this._scrollPosition=this._viewportEl.scrollTop,e.leadingEdge=0,e.rowsPerPage=n,e.columnsPerPage=1,e.pages=1,e.trailingEdge=0,this._scrollLength=this._viewportEl.scrollHeight,this._keyboardBehavior.fixedSize=e.columnsPerPage,this._keyboardBehavior.fixedDirection=v._KeyboardBehavior.FixedDirection.width,this._surfaceEl.style.height="",this._surfaceEl.style.width="";this._updateGridStyles()}else e.pages=1,this._hasPreviousContent=!1,this._hasNextContent=!1,this._surfaceEl.style.height="",this._surfaceEl.style.width="";this._writeProfilerMark("measure,StopTM")}},_updateGridStyles:function(){for(var e=this._sizes,t=this._surfaceEl.children.length,n=0;t>n;n++){var i,r,s=this._surfaceEl.children[n],o="";if(this.layout===y.Orientation.horizontal){var a=Math.floor(n/e.rowsPerPage),l=a%e.columnsPerPage===0,u=a%e.columnsPerPage===e.columnsPerPage-1,c=e.trailingEdge;if(this.fixedSize)c+=e.extraSpace;else{var h=e.extraSpace-(e.maxColumns-e.columnsPerPage)*e.itemWidth;o=e.itemOffsetWidth+h/e.maxColumns+"px"}var d,p;e.rtl?(d=l?e.leadingEdge:0,p=u?c:0):(d=u?c:0,p=l?e.leadingEdge:0),i=d+e.itemMarginRight+"px",r=p+e.itemMarginLeft+"px"}else i="",r="";s.style.marginRight!==i&&(s.style.marginRight=i),s.style.marginLeft!==r&&(s.style.marginLeft=r),s.style.width!==o&&(s.style.width=o)}},_updatePageUI:function(){this._measure();var e=this._currentPage;this._hasPreviousContent=0!==e,this._hasNextContent=e<this._sizes.pages-1,this._updateArrows(),this._indicatorCount!==this._sizes.pages&&(this._indicatorCount=this._sizes.pages,this._pageindicatorsEl.innerHTML=new Array(this._sizes.pages+1).join('<span class="'+A._ClassName.indicator+'"></span>'));for(var t=0;t<this._pageindicatorsEl.children.length;t++)t===e?g.addClass(this._pageindicatorsEl.children[t],A._ClassName.currentindicator):g.removeClass(this._pageindicatorsEl.children[t],A._ClassName.currentindicator);if(this._sizes.pages>1?(this._viewportEl.style.overflowX=this._panningDisabled?"hidden":"",this._pageindicatorsEl.style.visibility=""):(this._viewportEl.style.overflowX="hidden",this._pageindicatorsEl.style.visibility="hidden"),this._sizes.pages<=1||this._layout!==y.Orientation.horizontal)this._ariaStartMarker.removeAttribute("aria-flowto"),this._ariaEndMarker.removeAttribute("x-ms-aria-flowfrom");else{var n=e*this._sizes.rowsPerPage*this._sizes.columnsPerPage,i=this._surfaceEl.children[n].winControl._buttonEl;g._ensureId(i),this._ariaStartMarker.setAttribute("aria-flowto",i.id);var r=Math.min(this._surfaceEl.children.length-1,(e+1)*this._sizes.rowsPerPage*this._sizes.columnsPerPage-1),s=this._surfaceEl.children[r].winControl._buttonEl;g._ensureId(s),this._ariaEndMarker.setAttribute("x-ms-aria-flowfrom",s.id)}},_closeSplitIfOpen:function(){this._currentSplitNavItem&&(this._currentSplitNavItem.splitOpened&&this._currentSplitNavItem._toggleSplit(),this._currentSplitNavItem=null)
},_updateArrows:function(){var e=this._sizes.rtl?this._hasNextContent:this._hasPreviousContent,t=this._sizes.rtl?this._hasPreviousContent:this._hasNextContent,n=this;(this._mouseInViewport||this._panningDisabled)&&e?(this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowWaitingToFadeOut=null,this._leftArrowFadeOut&&this._leftArrowFadeOut.cancel(),this._leftArrowFadeOut=null,this._leftArrowEl.style.visibility="",this._leftArrowFadeIn=this._leftArrowFadeIn||u.fadeIn(this._leftArrowEl)):(e?this._leftArrowWaitingToFadeOut=this._leftArrowWaitingToFadeOut||m.timeout(c._animationTimeAdjustment(S)):(this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowWaitingToFadeOut=m.wrap()),this._leftArrowWaitingToFadeOut.then(function(){this._leftArrowFadeIn&&this._leftArrowFadeIn.cancel(),this._leftArrowFadeIn=null,this._leftArrowFadeOut=this._leftArrowFadeOut||u.fadeOut(this._leftArrowEl).then(function(){n._leftArrowEl.style.visibility="hidden"})}.bind(this))),(this._mouseInViewport||this._panningDisabled)&&t?(this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowWaitingToFadeOut=null,this._rightArrowFadeOut&&this._rightArrowFadeOut.cancel(),this._rightArrowFadeOut=null,this._rightArrowEl.style.visibility="",this._rightArrowFadeIn=this._rightArrowFadeIn||u.fadeIn(this._rightArrowEl)):(t?this._rightArrowWaitingToFadeOut=this._rightArrowWaitingToFadeOut||m.timeout(c._animationTimeAdjustment(S)):(this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowWaitingToFadeOut=m.wrap()),this._rightArrowWaitingToFadeOut.then(function(){this._rightArrowFadeIn&&this._rightArrowFadeIn.cancel(),this._rightArrowFadeIn=null,this._rightArrowFadeOut=this._rightArrowFadeOut||u.fadeOut(this._rightArrowEl).then(function(){n._rightArrowEl.style.visibility="hidden"})}.bind(this)))},_navbarCommandInvokedHandler:function(e){for(var t=e.target,n=-1;t;)n++,t=t.previousSibling;this._fireEvent(A._EventName.invoked,{index:n,navbarCommand:e.target.winControl,data:this._repeater?this._repeater.data.getAt(n):null})},_navbarCommandSplitToggleHandler:function(e){for(var t=e.target,n=-1;t;)n++,t=t.previousSibling;var i=e.target.winControl;this._closeSplitIfOpen(),i.splitOpened&&(this._currentSplitNavItem=i),this._fireEvent(A._EventName.splitToggle,{opened:i.splitOpened,index:n,navbarCommand:i,data:this._repeater?this._repeater.data.getAt(n):null})},_fireEvent:function(e,n){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!1,n),this.element.dispatchEvent(i)},_writeProfilerMark:function(e){var t="WinJS.UI.NavBarContainer:"+this._id+":"+e;l(t),o.log&&o.log(t,null,"navbarcontainerprofiler")},dispose:function(){this._disposed||(this._disposed=!0,this._appBarEl&&(this._appBarEl.removeEventListener("beforeshow",this._closeSplitAndResetBound),this._appBarEl.removeEventListener("beforeshow",this._resizeImplBound)),p.removeEventListener("navigated",this._closeSplitAndResetBound),this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowFadeOut&&this._leftArrowFadeOut.cancel(),this._leftArrowFadeIn&&this._leftArrowFadeIn.cancel(),this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowFadeOut&&this._rightArrowFadeOut.cancel(),this._rightArrowFadeIn&&this._rightArrowFadeIn.cancel(),g._resizeNotifier.unsubscribe(this._element,this._boundResizeHandler),this._removeDataChangingEvents(),this._removeDataChangedEvents())}},{_ClassName:{navbarcontainer:"win-navbarcontainer",pageindicators:"win-navbarcontainer-pageindicator-box",indicator:"win-navbarcontainer-pageindicator",currentindicator:"win-navbarcontainer-pageindicator-current",vertical:"win-navbarcontainer-vertical",horizontal:"win-navbarcontainer-horizontal",viewport:"win-navbarcontainer-viewport",surface:"win-navbarcontainer-surface",navarrow:"win-navbarcontainer-navarrow",navleftarrow:"win-navbarcontainer-navleft",navrightarrow:"win-navbarcontainer-navright"},_EventName:{invoked:T.invoked,splitToggle:T.splittoggle}});return n.Class.mix(A,_.DOMEventMixin),A})})}),i("WinJS/Controls/NavBar",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_WriteProfilerMark","../Promise","../Scheduler","../Utilities/_ElementUtilities","../Utilities/_Hoverable","./AppBar","./NavBar/_Command","./NavBar/_Container","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l,u,c){"use strict";var h="custom";n.Namespace.define("WinJS.UI",{NavBar:n.Namespace._lazy(function(){var u="childrenprocessed",d=r._createEventProperty,p=n.Class.derive(c.AppBar,function(e,n){n=n||{},n=i._shallowCopy(n),n.placement=n.placement||"top",n.layout=h,c.AppBar.call(this,e,n),this._element.addEventListener("beforeshow",this._handleBeforeShow.bind(this)),l.addClass(this.element,p._ClassName.navbar),t.Windows.ApplicationModel.DesignMode.designModeEnabled?this._processChildren():a.schedule(this._processChildren.bind(this),a.Priority.idle,null,"WinJS.UI.NavBar.processChildren")},{layout:{get:function(){return h},set:function(){Object.getOwnPropertyDescriptor(c.AppBar.prototype,"layout").set.call(this,h)}},onchildrenprocessed:d(u),_processChildren:function(){if(!this._processed){this._processed=!0,this._writeProfilerMark("processChildren,StartTM");var e=this,t=o.as();return this._processors&&this._processors.forEach(function(n){for(var i=0,r=e.element.children.length;r>i;i++)!function(e){t=t.then(function(){n(e)})}(e.element.children[i])}),t.then(function(){e._writeProfilerMark("processChildren,StopTM"),e._fireEvent(p._EventName.childrenProcessed)},function(){e._writeProfilerMark("processChildren,StopTM"),e._fireEvent(p._EventName.childrenProcessed)})}return o.wrap()},_show:function(){if(!this.disabled){var e=this;this._processChildren().then(function(){c.AppBar.prototype._show.call(e)})}},_handleBeforeShow:function(){if(!this._disposed)for(var e=this.element.querySelectorAll(".win-navbarcontainer"),t=0;t<e.length;t++)e[t].winControl.forceLayout()},_fireEvent:function(t,n){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!1,n||{}),this.element.dispatchEvent(i)},_writeProfilerMark:function(e){s("WinJS.UI.NavBar:"+this._id+":"+e)}},{_ClassName:{navbar:"win-navbar"},_EventName:{childrenProcessed:u},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){if(e._processed)for(var n=0,i=e.element.children.length;i>n;n++)t(e.element.children[n]);else e._processors=e._processors||[],e._processors.push(t)})});return p})})}),i("WinJS/Controls/ViewBox",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/desktop/controls","require-style!less/phone/controls"],function(e,t,n,i,r,s,o,a,l){"use strict";t.Namespace.define("WinJS.UI",{ViewBox:t.Namespace._lazy(function(){function r(e){if(e&&!e._resizing){e._resizing=e._resizing||0,e._resizing++;try{e._updateLayout()}finally{e._resizing--}}}function u(e){e.target&&r(e.target.winControl)}function c(e){e.target&&r(e.target.parentElement.winControl)}var h={get invalidViewBoxChildren(){return"ViewBox expects to only have one child element"}},d=t.Class.define(function(t){this._disposed=!1,this._element=t||e.document.createElement("div");var n=this.element;n.winControl=this,l.addClass(n,"win-disposable"),l.addClass(n,"win-viewbox"),this.forceLayout()},{_sizer:null,_element:null,element:{get:function(){return this._element}},_rtl:{get:function(){return"rtl"===e.getComputedStyle(this.element).direction}},_initialize:function(){var e=this.element;if(e.firstElementChild!==this._sizer){if(n.validation&&1!==e.childElementCount)throw new i("WinJS.UI.ViewBox.InvalidChildren",h.invalidViewBoxChildren);this._sizer&&(this._sizer.onresize=null);var t=e.firstElementChild;if(this._sizer=t,t&&(l._resizeNotifier.subscribe(e,u),e.addEventListener("mselementresize",u),l._resizeNotifier.subscribe(t,c),t.addEventListener("mselementresize",c)),0===e.clientWidth&&0===e.clientHeight){var r=this;s.schedule(function(){r._updateLayout()},s.Priority.normal,null,"WinJS.UI.ViewBox._updateLayout")}}},_updateLayout:function(){var e=this._sizer;if(e){var t=this.element,i=e.clientWidth,r=e.clientHeight,s=t.clientWidth,o=t.clientHeight,a=s/i,l=o/r,u=Math.min(a,l),c=Math.abs(s-i*u)/2,h=Math.abs(o-r*u)/2,d=this._rtl;this._sizer.style[n._browserStyleEquivalents.transform.scriptName]="translate("+(d?"-":"")+c+"px,"+h+"px) scale("+u+")",this._sizer.style[n._browserStyleEquivalents["transform-origin"].scriptName]=d?"top right":"top left"}},dispose:function(){this._disposed||(this.element&&l._resizeNotifier.unsubscribe(this.element,u),this._sizer&&l._resizeNotifier.unsubscribe(this._sizer,c),this._disposed=!0,a.disposeSubTree(this._element))},forceLayout:function(){this._initialize(),this._updateLayout()}});return t.Class.mix(d,o.DOMEventMixin),d})})}),i("ui",["WinJS/Core/_WinJS","WinJS/VirtualizedDataSource","WinJS/Controls/IntrinsicControls","WinJS/Controls/ListView","WinJS/Controls/FlipView","WinJS/Controls/ItemContainer","WinJS/Controls/Repeater","WinJS/Controls/DatePicker","WinJS/Controls/TimePicker","WinJS/Controls/BackButton","WinJS/Controls/Rating","WinJS/Controls/ToggleSwitch","WinJS/Controls/SemanticZoom","WinJS/Controls/Pivot","WinJS/Controls/Hub","WinJS/Controls/Flyout","WinJS/Controls/AppBar","WinJS/Controls/Menu","WinJS/Controls/SearchBox","WinJS/Controls/SettingsFlyout","WinJS/Controls/NavBar","WinJS/Controls/Tooltip","WinJS/Controls/ViewBox"],function(e){"use strict";return e}),n(["WinJS/Core/_WinJS","ui"],function(t){return e.WinJS=t,t})})}(this);